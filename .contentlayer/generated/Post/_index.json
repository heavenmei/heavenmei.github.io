[
  {
    "title": "【踩坑】sticky & overflow 吸顶",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2022-09-07T00:00:00.000Z",
    "body": {
      "raw": "## 需求及问题\n\n需求：表头吸顶，且保持表格固定列滚动\n\n![](assets/202-09-07-sticky-overflow-top-20250119015551.png)\n\n  \n\n### 【问题1】sticky吸顶不生效\n\n**解决1**由于祖先元素中有overflow：auto/hidden等设置导致无法吸顶，删除祖先元素的overflow或设为visible。\n\n![](assets/202-09-07-sticky-overflow-top-20250119015613.png)\n\n### 【问题2】吸顶生效后，滚动固定列失效\n\n\n当去掉overflow后吸顶可生效，但固定列失效。表格无法滚动。\n\n**解决2**由于overflow：visible导致容器内容平铺，因此需要给大容器设置一个width。由于内部元素设置了min-width，同时由于overflow：visible，因此可以达到效果。\n\n![](assets/202-09-07-sticky-overflow-top-20250119015642.png)\n\n  \n\n## 探究原理\n### sticky定位机制\n\n一般来说，由于 position: sticky 的作用，随着页面的滚动，sticky 会吸附到页面顶部的固定位置。但是在某种情况下，它失效了。我反复调试，发现当 sticky 元素（祖先）容器使用了 overflow: hidden/auto 时，sticky 就失效了。它在容器滚动时不再吸附到容器顶部显示，而是像作为 normal flow 的内容一样随着滚动条的滚动而消失……\n\n查阅了资料，在现行标准 CSS 定位标准 [CSS Positioned Layout Module Level 3,W3C Working Draft, 16 December 2021](https://www.w3.org/TR/css-position-3/#sticky-position) 中有如下解释：\n\n> **sticky**\n> \n> Identical to [relative](https://www.w3.org/TR/css-position-3/#valdef-position-relative), except that its offsets are automatically adjusted in reference to the nearest ancestor [scroll container’s](https://www.w3.org/TR/css-overflow-3/#scroll-container) [scrollport](https://www.w3.org/TR/css-overflow-3/#scrollport) (as modified by the [inset properties](https://www.w3.org/TR/css-position-3/#inset-properties)) in whichever axes the inset properties are not both [auto](https://www.w3.org/TR/css-position-3/#valdef-top-auto), to try to keep the box in view within its [containing block](https://www.w3.org/TR/css-display-3/#containing-block) as the user scrolls. This [positioning scheme](https://www.w3.org/TR/css-position-3/#positioning-scheme) is called **sticky positioning**.\n> \n> 与relative相同，除了它的偏移量会根据最近的祖先滚动容器的滚动端口（由inset 属性修改）在任何轴上自动调整inset 属性不是都是auto，以尝试将框保持在其包含的视图中用户滚动时阻塞。这种定位方案称为**粘性定位**。\n\n它明确了 sticky 元素，**类似相对定位relative**，会相对它最近的 **scrolling container** 去做定位。而且**任何轴**上的inset属性（即top、bottom、right、left等属性）不能是auto，（这也就是之前曾尝试过overflow-x：auto，overflow-y：visible也无法解决问题2的原因）\n\n### sticky元素始终在父元素中\n\nsticky元素虽然以 scrolling container 进行定位，但是其滚动边界不超过父元素，即当父元素滚动出可视区时sticky也会随之滚动消失。\n\n使用Tips\n\n1. 注意sticky元素的祖先元素中overflow属性，是否产生 scrolling container。\n2. 注意sticky元素父元素大小是否足以使其显示。\n3. ### overflow产生scroll Container\n\n\n那么为何说overflow：hidden的时候就不行了呢？考虑它涉及滚动行为，且问题的出现和 overflow 相关，所以应当去查阅 Overflow Module 标准，现行标准是 [CSS Overflow Module Level 3, W3C Working Draft, 23 December 2021](https://link.zhihu.com/?target=https%3A//www.w3.org/TR/css-overflow-3/)。\n\n\n\n根据标准的规定，overflow: hidden 的元素不会出现滚动条，不会响应用户的滚动操作，但是它会被程序滚动，它也会创建 scroll container ！同样的scroll和auto也是一个 scroll container，而visible和clip不是。\n\n\n![](assets/202-09-07-sticky-overflow-top-20250119015805.gif)\n\n\n\n可以看到一个有趣的现象，当点击table排序时会触发spin添加新的class，而该class中带有overflow：hidden，因此我们原先的sticky会根据新的scroll container进行定位，从而出现了偏移。\n \n\n  \n\n  \n\n拓展阅读：[Sticky Positioning 粘性定位完全解读](https://bytedance.feishu.cn/docx/doxcnAzDVfjP9ovSolaNQ27r6if)",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),m=(n,e)=>{for(var o in e)s(n,o,{get:e[o],enumerable:!0})},l=(n,e,o,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of p(e))!g.call(n,t)&&t!==o&&s(n,t,{get:()=>e[t],enumerable:!(r=d(e,t))||r.enumerable});return n};var k=(n,e,o)=>(o=n!=null?h(w(n)):{},l(e||!n||!n.__esModule?s(o,\"default\",{value:n,enumerable:!0}):o,n)),v=n=>l(s({},\"__esModule\",{value:!0}),n);var A=f((R,c)=>{c.exports=_jsx_runtime});var C={};m(C,{default:()=>E,frontmatter:()=>y});var i=k(A()),y={title:\"\\u3010\\u8E29\\u5751\\u3011sticky & overflow \\u5438\\u9876\",subtitle:null,layout:\"post\",date:new Date(16625088e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function a(n){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",img:\"img\",h3:\"h3\",strong:\"strong\",blockquote:\"blockquote\",ol:\"ol\",li:\"li\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h2,{id:\"\\u9700\\u6C42\\u53CA\\u95EE\\u9898\",children:[(0,i.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u9700\\u6C42\\u53CA\\u95EE\\u9898\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u9700\\u6C42\\u53CA\\u95EE\\u9898\"]}),`\n`,(0,i.jsx)(e.p,{children:\"\\u9700\\u6C42\\uFF1A\\u8868\\u5934\\u5438\\u9876\\uFF0C\\u4E14\\u4FDD\\u6301\\u8868\\u683C\\u56FA\\u5B9A\\u5217\\u6EDA\\u52A8\"}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:\"/post/assets/202-09-07-sticky-overflow-top-20250119015551.png\",alt:\"\",width:\"1280\",height:\"605\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAElBMVEX6+v339/nw6+347/Dy8v3l5OQMs7+0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIUlEQVR4nC3IsQEAMAzCMBvo/y93iUaRpm2CPoChERy7+QRbADioRJvBAAAAAElFTkSuQmCC\"})}),`\n`,(0,i.jsxs)(e.h3,{id:\"\\u95EE\\u98981sticky\\u5438\\u9876\\u4E0D\\u751F\\u6548\",children:[(0,i.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u95EE\\u98981sticky\\u5438\\u9876\\u4E0D\\u751F\\u6548\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u3010\\u95EE\\u98981\\u3011sticky\\u5438\\u9876\\u4E0D\\u751F\\u6548\"]}),`\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:\"\\u89E3\\u51B31\"}),\"\\u7531\\u4E8E\\u7956\\u5148\\u5143\\u7D20\\u4E2D\\u6709overflow\\uFF1Aauto/hidden\\u7B49\\u8BBE\\u7F6E\\u5BFC\\u81F4\\u65E0\\u6CD5\\u5438\\u9876\\uFF0C\\u5220\\u9664\\u7956\\u5148\\u5143\\u7D20\\u7684overflow\\u6216\\u8BBE\\u4E3Avisible\\u3002\"]}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:\"/post/assets/202-09-07-sticky-overflow-top-20250119015613.png\",alt:\"\",width:\"1280\",height:\"92\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAABlBMVEX/+/b+/fx3CUUpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEUlEQVR4nGNgZGRgYGBgZAAAABoABLD2IY4AAAAASUVORK5CYII=\"})}),`\n`,(0,i.jsxs)(e.h3,{id:\"\\u95EE\\u98982\\u5438\\u9876\\u751F\\u6548\\u540E\\u6EDA\\u52A8\\u56FA\\u5B9A\\u5217\\u5931\\u6548\",children:[(0,i.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u95EE\\u98982\\u5438\\u9876\\u751F\\u6548\\u540E\\u6EDA\\u52A8\\u56FA\\u5B9A\\u5217\\u5931\\u6548\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u3010\\u95EE\\u98982\\u3011\\u5438\\u9876\\u751F\\u6548\\u540E\\uFF0C\\u6EDA\\u52A8\\u56FA\\u5B9A\\u5217\\u5931\\u6548\"]}),`\n`,(0,i.jsx)(e.p,{children:\"\\u5F53\\u53BB\\u6389overflow\\u540E\\u5438\\u9876\\u53EF\\u751F\\u6548\\uFF0C\\u4F46\\u56FA\\u5B9A\\u5217\\u5931\\u6548\\u3002\\u8868\\u683C\\u65E0\\u6CD5\\u6EDA\\u52A8\\u3002\"}),`\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:\"\\u89E3\\u51B32\"}),\"\\u7531\\u4E8Eoverflow\\uFF1Avisible\\u5BFC\\u81F4\\u5BB9\\u5668\\u5185\\u5BB9\\u5E73\\u94FA\\uFF0C\\u56E0\\u6B64\\u9700\\u8981\\u7ED9\\u5927\\u5BB9\\u5668\\u8BBE\\u7F6E\\u4E00\\u4E2Awidth\\u3002\\u7531\\u4E8E\\u5185\\u90E8\\u5143\\u7D20\\u8BBE\\u7F6E\\u4E86min-width\\uFF0C\\u540C\\u65F6\\u7531\\u4E8Eoverflow\\uFF1Avisible\\uFF0C\\u56E0\\u6B64\\u53EF\\u4EE5\\u8FBE\\u5230\\u6548\\u679C\\u3002\"]}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:\"/post/assets/202-09-07-sticky-overflow-top-20250119015642.png\",alt:\"\",width:\"1280\",height:\"475\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAACVBMVEX49/r+/Pzy8PIETkmfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAG0lEQVR4nGNgYmBiYGAEEUxMjIwMYMDEAGIBAAEmABJ9FMtbAAAAAElFTkSuQmCC\"})}),`\n`,(0,i.jsxs)(e.h2,{id:\"\\u63A2\\u7A76\\u539F\\u7406\",children:[(0,i.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u63A2\\u7A76\\u539F\\u7406\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u63A2\\u7A76\\u539F\\u7406\"]}),`\n`,(0,i.jsxs)(e.h3,{id:\"sticky\\u5B9A\\u4F4D\\u673A\\u5236\",children:[(0,i.jsx)(e.a,{className:\"header-anchor\",href:\"#sticky\\u5B9A\\u4F4D\\u673A\\u5236\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"sticky\\u5B9A\\u4F4D\\u673A\\u5236\"]}),`\n`,(0,i.jsx)(e.p,{children:\"\\u4E00\\u822C\\u6765\\u8BF4\\uFF0C\\u7531\\u4E8E position: sticky \\u7684\\u4F5C\\u7528\\uFF0C\\u968F\\u7740\\u9875\\u9762\\u7684\\u6EDA\\u52A8\\uFF0Csticky \\u4F1A\\u5438\\u9644\\u5230\\u9875\\u9762\\u9876\\u90E8\\u7684\\u56FA\\u5B9A\\u4F4D\\u7F6E\\u3002\\u4F46\\u662F\\u5728\\u67D0\\u79CD\\u60C5\\u51B5\\u4E0B\\uFF0C\\u5B83\\u5931\\u6548\\u4E86\\u3002\\u6211\\u53CD\\u590D\\u8C03\\u8BD5\\uFF0C\\u53D1\\u73B0\\u5F53 sticky \\u5143\\u7D20\\uFF08\\u7956\\u5148\\uFF09\\u5BB9\\u5668\\u4F7F\\u7528\\u4E86 overflow: hidden/auto \\u65F6\\uFF0Csticky \\u5C31\\u5931\\u6548\\u4E86\\u3002\\u5B83\\u5728\\u5BB9\\u5668\\u6EDA\\u52A8\\u65F6\\u4E0D\\u518D\\u5438\\u9644\\u5230\\u5BB9\\u5668\\u9876\\u90E8\\u663E\\u793A\\uFF0C\\u800C\\u662F\\u50CF\\u4F5C\\u4E3A normal flow \\u7684\\u5185\\u5BB9\\u4E00\\u6837\\u968F\\u7740\\u6EDA\\u52A8\\u6761\\u7684\\u6EDA\\u52A8\\u800C\\u6D88\\u5931\\u2026\\u2026\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"\\u67E5\\u9605\\u4E86\\u8D44\\u6599\\uFF0C\\u5728\\u73B0\\u884C\\u6807\\u51C6 CSS \\u5B9A\\u4F4D\\u6807\\u51C6 \",(0,i.jsx)(e.a,{href:\"https://www.w3.org/TR/css-position-3/#sticky-position\",children:\"CSS Positioned Layout Module Level 3,W3C Working Draft, 16 December 2021\"}),\" \\u4E2D\\u6709\\u5982\\u4E0B\\u89E3\\u91CA\\uFF1A\"]}),`\n`,(0,i.jsxs)(e.blockquote,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\"sticky\"})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Identical to \",(0,i.jsx)(e.a,{href:\"https://www.w3.org/TR/css-position-3/#valdef-position-relative\",children:\"relative\"}),\", except that its offsets are automatically adjusted in reference to the nearest ancestor \",(0,i.jsx)(e.a,{href:\"https://www.w3.org/TR/css-overflow-3/#scroll-container\",children:\"scroll container\\u2019s\"}),\" \",(0,i.jsx)(e.a,{href:\"https://www.w3.org/TR/css-overflow-3/#scrollport\",children:\"scrollport\"}),\" (as modified by the \",(0,i.jsx)(e.a,{href:\"https://www.w3.org/TR/css-position-3/#inset-properties\",children:\"inset properties\"}),\") in whichever axes the inset properties are not both \",(0,i.jsx)(e.a,{href:\"https://www.w3.org/TR/css-position-3/#valdef-top-auto\",children:\"auto\"}),\", to try to keep the box in view within its \",(0,i.jsx)(e.a,{href:\"https://www.w3.org/TR/css-display-3/#containing-block\",children:\"containing block\"}),\" as the user scrolls. This \",(0,i.jsx)(e.a,{href:\"https://www.w3.org/TR/css-position-3/#positioning-scheme\",children:\"positioning scheme\"}),\" is called \",(0,i.jsx)(e.strong,{children:\"sticky positioning\"}),\".\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"\\u4E0Erelative\\u76F8\\u540C\\uFF0C\\u9664\\u4E86\\u5B83\\u7684\\u504F\\u79FB\\u91CF\\u4F1A\\u6839\\u636E\\u6700\\u8FD1\\u7684\\u7956\\u5148\\u6EDA\\u52A8\\u5BB9\\u5668\\u7684\\u6EDA\\u52A8\\u7AEF\\u53E3\\uFF08\\u7531inset \\u5C5E\\u6027\\u4FEE\\u6539\\uFF09\\u5728\\u4EFB\\u4F55\\u8F74\\u4E0A\\u81EA\\u52A8\\u8C03\\u6574inset \\u5C5E\\u6027\\u4E0D\\u662F\\u90FD\\u662Fauto\\uFF0C\\u4EE5\\u5C1D\\u8BD5\\u5C06\\u6846\\u4FDD\\u6301\\u5728\\u5176\\u5305\\u542B\\u7684\\u89C6\\u56FE\\u4E2D\\u7528\\u6237\\u6EDA\\u52A8\\u65F6\\u963B\\u585E\\u3002\\u8FD9\\u79CD\\u5B9A\\u4F4D\\u65B9\\u6848\\u79F0\\u4E3A\",(0,i.jsx)(e.strong,{children:\"\\u7C98\\u6027\\u5B9A\\u4F4D\"}),\"\\u3002\"]}),`\n`]}),`\n`,(0,i.jsxs)(e.p,{children:[\"\\u5B83\\u660E\\u786E\\u4E86 sticky \\u5143\\u7D20\\uFF0C\",(0,i.jsx)(e.strong,{children:\"\\u7C7B\\u4F3C\\u76F8\\u5BF9\\u5B9A\\u4F4Drelative\"}),\"\\uFF0C\\u4F1A\\u76F8\\u5BF9\\u5B83\\u6700\\u8FD1\\u7684 \",(0,i.jsx)(e.strong,{children:\"scrolling container\"}),\" \\u53BB\\u505A\\u5B9A\\u4F4D\\u3002\\u800C\\u4E14\",(0,i.jsx)(e.strong,{children:\"\\u4EFB\\u4F55\\u8F74\"}),\"\\u4E0A\\u7684inset\\u5C5E\\u6027\\uFF08\\u5373top\\u3001bottom\\u3001right\\u3001left\\u7B49\\u5C5E\\u6027\\uFF09\\u4E0D\\u80FD\\u662Fauto\\uFF0C\\uFF08\\u8FD9\\u4E5F\\u5C31\\u662F\\u4E4B\\u524D\\u66FE\\u5C1D\\u8BD5\\u8FC7overflow-x\\uFF1Aauto\\uFF0Coverflow-y\\uFF1Avisible\\u4E5F\\u65E0\\u6CD5\\u89E3\\u51B3\\u95EE\\u98982\\u7684\\u539F\\u56E0\\uFF09\"]}),`\n`,(0,i.jsxs)(e.h3,{id:\"sticky\\u5143\\u7D20\\u59CB\\u7EC8\\u5728\\u7236\\u5143\\u7D20\\u4E2D\",children:[(0,i.jsx)(e.a,{className:\"header-anchor\",href:\"#sticky\\u5143\\u7D20\\u59CB\\u7EC8\\u5728\\u7236\\u5143\\u7D20\\u4E2D\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"sticky\\u5143\\u7D20\\u59CB\\u7EC8\\u5728\\u7236\\u5143\\u7D20\\u4E2D\"]}),`\n`,(0,i.jsx)(e.p,{children:\"sticky\\u5143\\u7D20\\u867D\\u7136\\u4EE5 scrolling container \\u8FDB\\u884C\\u5B9A\\u4F4D\\uFF0C\\u4F46\\u662F\\u5176\\u6EDA\\u52A8\\u8FB9\\u754C\\u4E0D\\u8D85\\u8FC7\\u7236\\u5143\\u7D20\\uFF0C\\u5373\\u5F53\\u7236\\u5143\\u7D20\\u6EDA\\u52A8\\u51FA\\u53EF\\u89C6\\u533A\\u65F6sticky\\u4E5F\\u4F1A\\u968F\\u4E4B\\u6EDA\\u52A8\\u6D88\\u5931\\u3002\"}),`\n`,(0,i.jsx)(e.p,{children:\"\\u4F7F\\u7528Tips\"}),`\n`,(0,i.jsxs)(e.ol,{children:[`\n`,(0,i.jsx)(e.li,{children:\"\\u6CE8\\u610Fsticky\\u5143\\u7D20\\u7684\\u7956\\u5148\\u5143\\u7D20\\u4E2Doverflow\\u5C5E\\u6027\\uFF0C\\u662F\\u5426\\u4EA7\\u751F scrolling container\\u3002\"}),`\n`,(0,i.jsx)(e.li,{children:\"\\u6CE8\\u610Fsticky\\u5143\\u7D20\\u7236\\u5143\\u7D20\\u5927\\u5C0F\\u662F\\u5426\\u8DB3\\u4EE5\\u4F7F\\u5176\\u663E\\u793A\\u3002\"}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsxs)(e.h3,{id:\"overflow\\u4EA7\\u751Fscroll-container\",children:[(0,i.jsx)(e.a,{className:\"header-anchor\",href:\"#overflow\\u4EA7\\u751Fscroll-container\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"overflow\\u4EA7\\u751Fscroll Container\"]}),`\n`]}),`\n`]}),`\n`,(0,i.jsxs)(e.p,{children:[\"\\u90A3\\u4E48\\u4E3A\\u4F55\\u8BF4overflow\\uFF1Ahidden\\u7684\\u65F6\\u5019\\u5C31\\u4E0D\\u884C\\u4E86\\u5462\\uFF1F\\u8003\\u8651\\u5B83\\u6D89\\u53CA\\u6EDA\\u52A8\\u884C\\u4E3A\\uFF0C\\u4E14\\u95EE\\u9898\\u7684\\u51FA\\u73B0\\u548C overflow \\u76F8\\u5173\\uFF0C\\u6240\\u4EE5\\u5E94\\u5F53\\u53BB\\u67E5\\u9605 Overflow Module \\u6807\\u51C6\\uFF0C\\u73B0\\u884C\\u6807\\u51C6\\u662F \",(0,i.jsx)(e.a,{href:\"https://link.zhihu.com/?target=https%3A//www.w3.org/TR/css-overflow-3/\",children:\"CSS Overflow Module Level 3, W3C Working Draft, 23 December 2021\"}),\"\\u3002\"]}),`\n`,(0,i.jsx)(e.p,{children:\"\\u6839\\u636E\\u6807\\u51C6\\u7684\\u89C4\\u5B9A\\uFF0Coverflow: hidden \\u7684\\u5143\\u7D20\\u4E0D\\u4F1A\\u51FA\\u73B0\\u6EDA\\u52A8\\u6761\\uFF0C\\u4E0D\\u4F1A\\u54CD\\u5E94\\u7528\\u6237\\u7684\\u6EDA\\u52A8\\u64CD\\u4F5C\\uFF0C\\u4F46\\u662F\\u5B83\\u4F1A\\u88AB\\u7A0B\\u5E8F\\u6EDA\\u52A8\\uFF0C\\u5B83\\u4E5F\\u4F1A\\u521B\\u5EFA scroll container \\uFF01\\u540C\\u6837\\u7684scroll\\u548Cauto\\u4E5F\\u662F\\u4E00\\u4E2A scroll container\\uFF0C\\u800Cvisible\\u548Cclip\\u4E0D\\u662F\\u3002\"}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:\"/post/assets/202-09-07-sticky-overflow-top-20250119015805.gif\",alt:\"\",width:\"1777\",height:\"956\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAD1BMVEX+/f7s6fHy8PL5+fr19fkOHC4/AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAH0lEQVR4nC3GsQEAAAjCsEL5/2YXM4WqpkWA5rPPlhwD6wAzsJxGhwAAAABJRU5ErkJggg==\"})}),`\n`,(0,i.jsx)(e.p,{children:\"\\u53EF\\u4EE5\\u770B\\u5230\\u4E00\\u4E2A\\u6709\\u8DA3\\u7684\\u73B0\\u8C61\\uFF0C\\u5F53\\u70B9\\u51FBtable\\u6392\\u5E8F\\u65F6\\u4F1A\\u89E6\\u53D1spin\\u6DFB\\u52A0\\u65B0\\u7684class\\uFF0C\\u800C\\u8BE5class\\u4E2D\\u5E26\\u6709overflow\\uFF1Ahidden\\uFF0C\\u56E0\\u6B64\\u6211\\u4EEC\\u539F\\u5148\\u7684sticky\\u4F1A\\u6839\\u636E\\u65B0\\u7684scroll container\\u8FDB\\u884C\\u5B9A\\u4F4D\\uFF0C\\u4ECE\\u800C\\u51FA\\u73B0\\u4E86\\u504F\\u79FB\\u3002\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"\\u62D3\\u5C55\\u9605\\u8BFB\\uFF1A\",(0,i.jsx)(e.a,{href:\"https://bytedance.feishu.cn/docx/doxcnAzDVfjP9ovSolaNQ27r6if\",children:\"Sticky Positioning \\u7C98\\u6027\\u5B9A\\u4F4D\\u5B8C\\u5168\\u89E3\\u8BFB\"})]})]})}function u(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(a,n)})):a(n)}var E=u;return v(C);})();\n;return Component;"
    },
    "_id": "post/2022-09-07-sticky-overflow-top.md",
    "_raw": {
      "sourceFilePath": "post/2022-09-07-sticky-overflow-top.md",
      "sourceFileName": "2022-09-07-sticky-overflow-top.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2022-09-07-sticky-overflow-top"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2022-09-07-sticky-overflow-top",
    "slugAsParams": "2022-09-07-sticky-overflow-top"
  },
  {
    "title": "CDN原理",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2022-09-08T00:00:00.000Z",
    "body": {
      "raw": "[CDN 原理与前端页面部署](https://tech.bytedance.net/articles/13501)\n\n## 概念\n\n### CDN\n\nCDN 即内容分发网络（Content Delivery Network）的简称，是建立在承载网基础上的虚拟分布式网络，能够将源站内容（包括各类动静态资源）智能缓存到全球各节点服务器上。这样不仅方便了用户就近获取内容，提高了资源的访问速度，也分担了源站压力。\n\n### 加速域名\n\n加速域名指需要使用 CDN 加速的域名。加速域名也是一个域名。加速域名一般配置`CNAME` 记录，指向 CDN 网络节点。普通域名一般配置 A 记录，指向提供服务的业务服务器。\n\n### CNAME 记录、 A 记录和 NS 记录\n\nDNS ( Domain Name System，域名系统)提供了将域名转换为 IP 地址的服务。为了完成这个转化工作，DNS 的数据库中需要维护相关的数据，这些数据被叫做 [RR](https://en.wikipedia.org/wiki/List_of_DNS_record_types)（Resource Record，资源记录）。资源记录有很多种类型，比如 A、NS、SOA、CNAME 和 PTR 记录。\n\n- A 记录是一条从域名到 IP 地址的映射记录\n    \n- CNAME（Canonical Name）记录是一条从域名到域名的映射记录。\n    \n- NS （Name Server）记录是和 DNS 服务器相关的一条记录，它指定该域名应该由哪一台 DNS 服务器进行解析。一般把通过 NS 记录指定的 DNS 服务器叫做该域名的权威 DNS 服务器。\n    \n\nCNAME在 CDN 技术中有举足轻重的作用，很好地实现了业务域名与 CDN 系统域名的解耦。简单理解，如果一个域名配置了 A 记录，DNS 就会把它解析成 A 记录指定的 IP 地址；如果一个域名配置了 CNAME 记录，DNS 就会把它解析成 CNAME 记录指定的另外一个域名；A 记录和 CNAME 记录是互斥的，不能同时存在。CDN 解析其实是一个非常复杂的过程，更详细的信息推荐查看这篇文章：[DNS 原理及其解析过程](https://www.zhihu.com/question/23042131/answer/66571369)。\n\n### 源站\n\n提供原始资源（使用 CDN 加速的资源）的业务服务器，可以指定为域名或 IP 地址。\n\n### 回源\n\nCDN 节点未缓存请求资源或缓存资源已到期时，回到源站获取资源，返回给客户端。\n\n  \n\n## 工作原理\n\n假设我建立了一个网站，域名为“www.tt.com”，用户访问的主页链接为“www.tt.com/idx.html”。为了缓解服务端压力和加快访问速度，决定使用阿里云 CDN 服务。\n\n为了更好地理解工作原理，先了解一下 CDN 的接入流程。\n\n### 接入流程\n\n主要接入步骤如下：\n\n1. 到某域名供应商处申请一个加速域名：“js.tt.com”。\n    \n2. 到阿里云 CDN 平台添加加速域名“js.tt.com”，同时设置其源站域名为“www.tt.com”。\n    \n3. 阿里云 CDN 平台自动分配一个 CNAME 域名：“js.tt.com.ali.com”。\n    \n4. 到域名供应商处给加速域名“js.tt.com”添加 CNAME 记录，其值为上一步得到的 CNAME 域名：“js.tt.com.ali.com”。\n    \n\n对以上步骤做进一步说明：\n\n- 为了使用 CDN，必须另外再申请一个加速域名，作为使用 CDN 的入口。\n    \n- 加速域名配置的是 CNAME 记录，值为 CDN 平台提供的 CNAME 域名，该 CNAME 域名指向 CDN 系统节点。\n    \n- 添加加速域名时需要配置源站域名，据此，CDN 平台保存了加速域名与源站域名的映射关系。\n    \n- CNAME 域名的格式一般是：`<加速域名> + <供应商主域名>`。\n    \n\n### CDN 系统架构\n\n从功能上看，典型的 CDN 系统由分发服务系统、负载均衡系统和运营管理系统组成。分发服务系统主要负责资源的响应、缓存和同步。负载均衡系统主要负责对用户请求进行调度。运营管理系统则负责运营需求管理和网络系统管理。\n\n从节点分布上看，CDN 系统主要分为边缘层和中心层。边缘层分布在 CDN 网络的边缘位置，给用户提供就近访问服务。中心层则负责完成资源同步和运营管理等功能。中心层保存了加速域名的相关配置信息，比如源站域名，也缓存了加速域名下的各种资源。\n\n1. 在边缘层节点未命中缓存时，需要向中心层节点发起请求；\n    \n2. 而中心层节点未能命中缓存时，需要查找对应的源站域名，并向该源站域名发起请求。\n    \n3. 然后再逐层返回并缓存用户请求的资源。\n    \n\n### 访问流程\n\n**用户 A 的第一次**访问流程如图 1 所示：\n\n![](assets/2022-09-07-CDN-base-20250119023653.png)\n\n需要进一步说明的是：\n\n- 第 1 步访问的是加速域名，而不是源站域名。\n    \n- 第 3 步返回 CNAME 域名。\n    \n- 第 5 步返回 CNAME 域名对应的 IP 地址，指向 CDN 边缘层节点。\n    \n- 第 6 步请求的 URL （或者说 Referer ）仍为‘js.tt.com/idx.html’。\n    \n- 第 7 步请求中心层节点时，会带上第 6 步的 URL 作为参数。\n    \n- 第 8 步通过查询配置数据得到源站域名，进而向源站发起请求。这里的业务服务器即为 CDN 的源站。简单起见，省略了从 DNS 服务器查询 A 记录的过程。\n    \n- 在整个过程中，URL 的域名会变化，但是 URL 的路径不会变化。\n    \n\n  \n\n**用户 A 第二次**访问流程如图 2 所示：\n\n![|500](assets/2022-09-07-CDN-base-20250119023706.png)\n\n需要进一步说明的是：\n\n- 由于本地 DNS 客户端拥有了加速域名的解析缓存，就不需要再查询 DNS 服务器了。\n    \n- 由于 CDN 边缘层节点有了对应资源的缓存，就不需要再向上请求资源了。\n    \n\n  \n\n**用户 B 第一次**访问流程如图 3 所示：\n\n![|500](assets/2022-09-07-CDN-base-20250119023718.png)\n\n需要进一步说明的是：\n\n- 由于用户 A 和用户 B 地域相差比较远，使用不同的边缘层节点，所以边缘层节点没有对应资源的缓存，需要向中心层节点请求资源。\n    \n- 中心层节点拥有该资源的缓存，所以就不需要回源了。\n    \n\n  \n\n### 就近访问原理\n\nCDN 系统是如何实现就近访问的呢？\n\nCNAME 域名是 CDN 供应商提供的，CDN 供应商拥有对 CNAME 域名的配置权。CDN 供应商会把 CNAME 域名的 NS 记录设置为自己搭建的 DNS 服务器。这样一来，解析 CNAME 域名的时候就会请求 CDN 供应商搭建的 DNS 服务器。而 CDN 供应商在 DNS 服务器中实现了负载均衡，会返回离用户较近的边缘层节点的 IP 地址。如此便实现了就近访问。\n\n在图 1 中，第 4 步是向阿里云 DNS 服务器查询的，该 DNS 服务器会根据地理位置和健康状态等信息返回多个较近的可用的 CDN 边缘节点的 IP 地址。DNS 客户端会选择其中一个 IP 地址作为解析结果，一般是第一个。",
      "code": "var Component=(()=>{var t=Object.create;var r=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var o=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var C=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports),D=(i,n)=>{for(var c in n)r(i,c,{get:n[c],enumerable:!0})},A=(i,n,c,h)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of o(n))!p.call(i,l)&&l!==c&&r(i,l,{get:()=>n[l],enumerable:!(h=N(n,l))||h.enumerable});return i};var m=(i,n,c)=>(c=i!=null?t(E(i)):{},A(n||!i||!i.__esModule?r(c,\"default\",{value:i,enumerable:!0}):c,i)),B=i=>A(r({},\"__esModule\",{value:!0}),i);var a=C((u,d)=>{d.exports=_jsx_runtime});var S={};D(S,{default:()=>M,frontmatter:()=>g});var e=m(a()),g={title:\"CDN\\u539F\\u7406\",subtitle:null,layout:\"post\",date:new Date(16625952e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function s(i){let n=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",h3:\"h3\",code:\"code\",ul:\"ul\",li:\"li\",ol:\"ol\",strong:\"strong\",img:\"img\"},i.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://tech.bytedance.net/articles/13501\",children:\"CDN \\u539F\\u7406\\u4E0E\\u524D\\u7AEF\\u9875\\u9762\\u90E8\\u7F72\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u6982\\u5FF5\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u6982\\u5FF5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6982\\u5FF5\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"cdn\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#cdn\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"CDN\"]}),`\n`,(0,e.jsx)(n.p,{children:\"CDN \\u5373\\u5185\\u5BB9\\u5206\\u53D1\\u7F51\\u7EDC\\uFF08Content Delivery Network\\uFF09\\u7684\\u7B80\\u79F0\\uFF0C\\u662F\\u5EFA\\u7ACB\\u5728\\u627F\\u8F7D\\u7F51\\u57FA\\u7840\\u4E0A\\u7684\\u865A\\u62DF\\u5206\\u5E03\\u5F0F\\u7F51\\u7EDC\\uFF0C\\u80FD\\u591F\\u5C06\\u6E90\\u7AD9\\u5185\\u5BB9\\uFF08\\u5305\\u62EC\\u5404\\u7C7B\\u52A8\\u9759\\u6001\\u8D44\\u6E90\\uFF09\\u667A\\u80FD\\u7F13\\u5B58\\u5230\\u5168\\u7403\\u5404\\u8282\\u70B9\\u670D\\u52A1\\u5668\\u4E0A\\u3002\\u8FD9\\u6837\\u4E0D\\u4EC5\\u65B9\\u4FBF\\u4E86\\u7528\\u6237\\u5C31\\u8FD1\\u83B7\\u53D6\\u5185\\u5BB9\\uFF0C\\u63D0\\u9AD8\\u4E86\\u8D44\\u6E90\\u7684\\u8BBF\\u95EE\\u901F\\u5EA6\\uFF0C\\u4E5F\\u5206\\u62C5\\u4E86\\u6E90\\u7AD9\\u538B\\u529B\\u3002\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u52A0\\u901F\\u57DF\\u540D\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u52A0\\u901F\\u57DF\\u540D\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u52A0\\u901F\\u57DF\\u540D\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u52A0\\u901F\\u57DF\\u540D\\u6307\\u9700\\u8981\\u4F7F\\u7528 CDN \\u52A0\\u901F\\u7684\\u57DF\\u540D\\u3002\\u52A0\\u901F\\u57DF\\u540D\\u4E5F\\u662F\\u4E00\\u4E2A\\u57DF\\u540D\\u3002\\u52A0\\u901F\\u57DF\\u540D\\u4E00\\u822C\\u914D\\u7F6E\",(0,e.jsx)(n.code,{children:\"CNAME\"}),\" \\u8BB0\\u5F55\\uFF0C\\u6307\\u5411 CDN \\u7F51\\u7EDC\\u8282\\u70B9\\u3002\\u666E\\u901A\\u57DF\\u540D\\u4E00\\u822C\\u914D\\u7F6E A \\u8BB0\\u5F55\\uFF0C\\u6307\\u5411\\u63D0\\u4F9B\\u670D\\u52A1\\u7684\\u4E1A\\u52A1\\u670D\\u52A1\\u5668\\u3002\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"cname-\\u8BB0\\u5F55-a-\\u8BB0\\u5F55\\u548C-ns-\\u8BB0\\u5F55\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#cname-\\u8BB0\\u5F55-a-\\u8BB0\\u5F55\\u548C-ns-\\u8BB0\\u5F55\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"CNAME \\u8BB0\\u5F55\\u3001 A \\u8BB0\\u5F55\\u548C NS \\u8BB0\\u5F55\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"DNS ( Domain Name System\\uFF0C\\u57DF\\u540D\\u7CFB\\u7EDF)\\u63D0\\u4F9B\\u4E86\\u5C06\\u57DF\\u540D\\u8F6C\\u6362\\u4E3A IP \\u5730\\u5740\\u7684\\u670D\\u52A1\\u3002\\u4E3A\\u4E86\\u5B8C\\u6210\\u8FD9\\u4E2A\\u8F6C\\u5316\\u5DE5\\u4F5C\\uFF0CDNS \\u7684\\u6570\\u636E\\u5E93\\u4E2D\\u9700\\u8981\\u7EF4\\u62A4\\u76F8\\u5173\\u7684\\u6570\\u636E\\uFF0C\\u8FD9\\u4E9B\\u6570\\u636E\\u88AB\\u53EB\\u505A \",(0,e.jsx)(n.a,{href:\"https://en.wikipedia.org/wiki/List_of_DNS_record_types\",children:\"RR\"}),\"\\uFF08Resource Record\\uFF0C\\u8D44\\u6E90\\u8BB0\\u5F55\\uFF09\\u3002\\u8D44\\u6E90\\u8BB0\\u5F55\\u6709\\u5F88\\u591A\\u79CD\\u7C7B\\u578B\\uFF0C\\u6BD4\\u5982 A\\u3001NS\\u3001SOA\\u3001CNAME \\u548C PTR \\u8BB0\\u5F55\\u3002\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"A \\u8BB0\\u5F55\\u662F\\u4E00\\u6761\\u4ECE\\u57DF\\u540D\\u5230 IP \\u5730\\u5740\\u7684\\u6620\\u5C04\\u8BB0\\u5F55\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"CNAME\\uFF08Canonical Name\\uFF09\\u8BB0\\u5F55\\u662F\\u4E00\\u6761\\u4ECE\\u57DF\\u540D\\u5230\\u57DF\\u540D\\u7684\\u6620\\u5C04\\u8BB0\\u5F55\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"NS \\uFF08Name Server\\uFF09\\u8BB0\\u5F55\\u662F\\u548C DNS \\u670D\\u52A1\\u5668\\u76F8\\u5173\\u7684\\u4E00\\u6761\\u8BB0\\u5F55\\uFF0C\\u5B83\\u6307\\u5B9A\\u8BE5\\u57DF\\u540D\\u5E94\\u8BE5\\u7531\\u54EA\\u4E00\\u53F0 DNS \\u670D\\u52A1\\u5668\\u8FDB\\u884C\\u89E3\\u6790\\u3002\\u4E00\\u822C\\u628A\\u901A\\u8FC7 NS \\u8BB0\\u5F55\\u6307\\u5B9A\\u7684 DNS \\u670D\\u52A1\\u5668\\u53EB\\u505A\\u8BE5\\u57DF\\u540D\\u7684\\u6743\\u5A01 DNS \\u670D\\u52A1\\u5668\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"CNAME\\u5728 CDN \\u6280\\u672F\\u4E2D\\u6709\\u4E3E\\u8DB3\\u8F7B\\u91CD\\u7684\\u4F5C\\u7528\\uFF0C\\u5F88\\u597D\\u5730\\u5B9E\\u73B0\\u4E86\\u4E1A\\u52A1\\u57DF\\u540D\\u4E0E CDN \\u7CFB\\u7EDF\\u57DF\\u540D\\u7684\\u89E3\\u8026\\u3002\\u7B80\\u5355\\u7406\\u89E3\\uFF0C\\u5982\\u679C\\u4E00\\u4E2A\\u57DF\\u540D\\u914D\\u7F6E\\u4E86 A \\u8BB0\\u5F55\\uFF0CDNS \\u5C31\\u4F1A\\u628A\\u5B83\\u89E3\\u6790\\u6210 A \\u8BB0\\u5F55\\u6307\\u5B9A\\u7684 IP \\u5730\\u5740\\uFF1B\\u5982\\u679C\\u4E00\\u4E2A\\u57DF\\u540D\\u914D\\u7F6E\\u4E86 CNAME \\u8BB0\\u5F55\\uFF0CDNS \\u5C31\\u4F1A\\u628A\\u5B83\\u89E3\\u6790\\u6210 CNAME \\u8BB0\\u5F55\\u6307\\u5B9A\\u7684\\u53E6\\u5916\\u4E00\\u4E2A\\u57DF\\u540D\\uFF1BA \\u8BB0\\u5F55\\u548C CNAME \\u8BB0\\u5F55\\u662F\\u4E92\\u65A5\\u7684\\uFF0C\\u4E0D\\u80FD\\u540C\\u65F6\\u5B58\\u5728\\u3002CDN \\u89E3\\u6790\\u5176\\u5B9E\\u662F\\u4E00\\u4E2A\\u975E\\u5E38\\u590D\\u6742\\u7684\\u8FC7\\u7A0B\\uFF0C\\u66F4\\u8BE6\\u7EC6\\u7684\\u4FE1\\u606F\\u63A8\\u8350\\u67E5\\u770B\\u8FD9\\u7BC7\\u6587\\u7AE0\\uFF1A\",(0,e.jsx)(n.a,{href:\"https://www.zhihu.com/question/23042131/answer/66571369\",children:\"DNS \\u539F\\u7406\\u53CA\\u5176\\u89E3\\u6790\\u8FC7\\u7A0B\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6E90\\u7AD9\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u6E90\\u7AD9\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6E90\\u7AD9\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u63D0\\u4F9B\\u539F\\u59CB\\u8D44\\u6E90\\uFF08\\u4F7F\\u7528 CDN \\u52A0\\u901F\\u7684\\u8D44\\u6E90\\uFF09\\u7684\\u4E1A\\u52A1\\u670D\\u52A1\\u5668\\uFF0C\\u53EF\\u4EE5\\u6307\\u5B9A\\u4E3A\\u57DF\\u540D\\u6216 IP \\u5730\\u5740\\u3002\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u56DE\\u6E90\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u56DE\\u6E90\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u56DE\\u6E90\"]}),`\n`,(0,e.jsx)(n.p,{children:\"CDN \\u8282\\u70B9\\u672A\\u7F13\\u5B58\\u8BF7\\u6C42\\u8D44\\u6E90\\u6216\\u7F13\\u5B58\\u8D44\\u6E90\\u5DF2\\u5230\\u671F\\u65F6\\uFF0C\\u56DE\\u5230\\u6E90\\u7AD9\\u83B7\\u53D6\\u8D44\\u6E90\\uFF0C\\u8FD4\\u56DE\\u7ED9\\u5BA2\\u6237\\u7AEF\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5DE5\\u4F5C\\u539F\\u7406\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5DE5\\u4F5C\\u539F\\u7406\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5DE5\\u4F5C\\u539F\\u7406\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5047\\u8BBE\\u6211\\u5EFA\\u7ACB\\u4E86\\u4E00\\u4E2A\\u7F51\\u7AD9\\uFF0C\\u57DF\\u540D\\u4E3A\\u201C\",(0,e.jsx)(n.a,{href:\"http://www.tt.com%E2%80%9D%EF%BC%8C%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E7%9A%84%E4%B8%BB%E9%A1%B5%E9%93%BE%E6%8E%A5%E4%B8%BA%E2%80%9Cwww.tt.com/idx.html%E2%80%9D%E3%80%82%E4%B8%BA%E4%BA%86%E7%BC%93%E8%A7%A3%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8E%8B%E5%8A%9B%E5%92%8C%E5%8A%A0%E5%BF%AB%E8%AE%BF%E9%97%AE%E9%80%9F%E5%BA%A6%EF%BC%8C%E5%86%B3%E5%AE%9A%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91\",children:\"www.tt.com\\u201D\\uFF0C\\u7528\\u6237\\u8BBF\\u95EE\\u7684\\u4E3B\\u9875\\u94FE\\u63A5\\u4E3A\\u201Cwww.tt.com/idx.html\\u201D\\u3002\\u4E3A\\u4E86\\u7F13\\u89E3\\u670D\\u52A1\\u7AEF\\u538B\\u529B\\u548C\\u52A0\\u5FEB\\u8BBF\\u95EE\\u901F\\u5EA6\\uFF0C\\u51B3\\u5B9A\\u4F7F\\u7528\\u963F\\u91CC\\u4E91\"}),\" CDN \\u670D\\u52A1\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3A\\u4E86\\u66F4\\u597D\\u5730\\u7406\\u89E3\\u5DE5\\u4F5C\\u539F\\u7406\\uFF0C\\u5148\\u4E86\\u89E3\\u4E00\\u4E0B CDN \\u7684\\u63A5\\u5165\\u6D41\\u7A0B\\u3002\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u63A5\\u5165\\u6D41\\u7A0B\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u63A5\\u5165\\u6D41\\u7A0B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u63A5\\u5165\\u6D41\\u7A0B\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3B\\u8981\\u63A5\\u5165\\u6B65\\u9AA4\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5230\\u67D0\\u57DF\\u540D\\u4F9B\\u5E94\\u5546\\u5904\\u7533\\u8BF7\\u4E00\\u4E2A\\u52A0\\u901F\\u57DF\\u540D\\uFF1A\\u201Cjs.tt.com\\u201D\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5230\\u963F\\u91CC\\u4E91 CDN \\u5E73\\u53F0\\u6DFB\\u52A0\\u52A0\\u901F\\u57DF\\u540D\\u201Cjs.tt.com\\u201D\\uFF0C\\u540C\\u65F6\\u8BBE\\u7F6E\\u5176\\u6E90\\u7AD9\\u57DF\\u540D\\u4E3A\\u201C\",(0,e.jsx)(n.a,{href:\"http://www.tt.com%E2%80%9D%E3%80%82\",children:\"www.tt.com\\u201D\\u3002\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u963F\\u91CC\\u4E91 CDN \\u5E73\\u53F0\\u81EA\\u52A8\\u5206\\u914D\\u4E00\\u4E2A CNAME \\u57DF\\u540D\\uFF1A\\u201Cjs.tt.com.ali.com\\u201D\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5230\\u57DF\\u540D\\u4F9B\\u5E94\\u5546\\u5904\\u7ED9\\u52A0\\u901F\\u57DF\\u540D\\u201Cjs.tt.com\\u201D\\u6DFB\\u52A0 CNAME \\u8BB0\\u5F55\\uFF0C\\u5176\\u503C\\u4E3A\\u4E0A\\u4E00\\u6B65\\u5F97\\u5230\\u7684 CNAME \\u57DF\\u540D\\uFF1A\\u201Cjs.tt.com.ali.com\\u201D\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9\\u4EE5\\u4E0A\\u6B65\\u9AA4\\u505A\\u8FDB\\u4E00\\u6B65\\u8BF4\\u660E\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3A\\u4E86\\u4F7F\\u7528 CDN\\uFF0C\\u5FC5\\u987B\\u53E6\\u5916\\u518D\\u7533\\u8BF7\\u4E00\\u4E2A\\u52A0\\u901F\\u57DF\\u540D\\uFF0C\\u4F5C\\u4E3A\\u4F7F\\u7528 CDN \\u7684\\u5165\\u53E3\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u52A0\\u901F\\u57DF\\u540D\\u914D\\u7F6E\\u7684\\u662F CNAME \\u8BB0\\u5F55\\uFF0C\\u503C\\u4E3A CDN \\u5E73\\u53F0\\u63D0\\u4F9B\\u7684 CNAME \\u57DF\\u540D\\uFF0C\\u8BE5 CNAME \\u57DF\\u540D\\u6307\\u5411 CDN \\u7CFB\\u7EDF\\u8282\\u70B9\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6DFB\\u52A0\\u52A0\\u901F\\u57DF\\u540D\\u65F6\\u9700\\u8981\\u914D\\u7F6E\\u6E90\\u7AD9\\u57DF\\u540D\\uFF0C\\u636E\\u6B64\\uFF0CCDN \\u5E73\\u53F0\\u4FDD\\u5B58\\u4E86\\u52A0\\u901F\\u57DF\\u540D\\u4E0E\\u6E90\\u7AD9\\u57DF\\u540D\\u7684\\u6620\\u5C04\\u5173\\u7CFB\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"CNAME \\u57DF\\u540D\\u7684\\u683C\\u5F0F\\u4E00\\u822C\\u662F\\uFF1A\",(0,e.jsx)(n.code,{children:\"<\\u52A0\\u901F\\u57DF\\u540D> + <\\u4F9B\\u5E94\\u5546\\u4E3B\\u57DF\\u540D>\"}),\"\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"cdn-\\u7CFB\\u7EDF\\u67B6\\u6784\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#cdn-\\u7CFB\\u7EDF\\u67B6\\u6784\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"CDN \\u7CFB\\u7EDF\\u67B6\\u6784\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u529F\\u80FD\\u4E0A\\u770B\\uFF0C\\u5178\\u578B\\u7684 CDN \\u7CFB\\u7EDF\\u7531\\u5206\\u53D1\\u670D\\u52A1\\u7CFB\\u7EDF\\u3001\\u8D1F\\u8F7D\\u5747\\u8861\\u7CFB\\u7EDF\\u548C\\u8FD0\\u8425\\u7BA1\\u7406\\u7CFB\\u7EDF\\u7EC4\\u6210\\u3002\\u5206\\u53D1\\u670D\\u52A1\\u7CFB\\u7EDF\\u4E3B\\u8981\\u8D1F\\u8D23\\u8D44\\u6E90\\u7684\\u54CD\\u5E94\\u3001\\u7F13\\u5B58\\u548C\\u540C\\u6B65\\u3002\\u8D1F\\u8F7D\\u5747\\u8861\\u7CFB\\u7EDF\\u4E3B\\u8981\\u8D1F\\u8D23\\u5BF9\\u7528\\u6237\\u8BF7\\u6C42\\u8FDB\\u884C\\u8C03\\u5EA6\\u3002\\u8FD0\\u8425\\u7BA1\\u7406\\u7CFB\\u7EDF\\u5219\\u8D1F\\u8D23\\u8FD0\\u8425\\u9700\\u6C42\\u7BA1\\u7406\\u548C\\u7F51\\u7EDC\\u7CFB\\u7EDF\\u7BA1\\u7406\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u8282\\u70B9\\u5206\\u5E03\\u4E0A\\u770B\\uFF0CCDN \\u7CFB\\u7EDF\\u4E3B\\u8981\\u5206\\u4E3A\\u8FB9\\u7F18\\u5C42\\u548C\\u4E2D\\u5FC3\\u5C42\\u3002\\u8FB9\\u7F18\\u5C42\\u5206\\u5E03\\u5728 CDN \\u7F51\\u7EDC\\u7684\\u8FB9\\u7F18\\u4F4D\\u7F6E\\uFF0C\\u7ED9\\u7528\\u6237\\u63D0\\u4F9B\\u5C31\\u8FD1\\u8BBF\\u95EE\\u670D\\u52A1\\u3002\\u4E2D\\u5FC3\\u5C42\\u5219\\u8D1F\\u8D23\\u5B8C\\u6210\\u8D44\\u6E90\\u540C\\u6B65\\u548C\\u8FD0\\u8425\\u7BA1\\u7406\\u7B49\\u529F\\u80FD\\u3002\\u4E2D\\u5FC3\\u5C42\\u4FDD\\u5B58\\u4E86\\u52A0\\u901F\\u57DF\\u540D\\u7684\\u76F8\\u5173\\u914D\\u7F6E\\u4FE1\\u606F\\uFF0C\\u6BD4\\u5982\\u6E90\\u7AD9\\u57DF\\u540D\\uFF0C\\u4E5F\\u7F13\\u5B58\\u4E86\\u52A0\\u901F\\u57DF\\u540D\\u4E0B\\u7684\\u5404\\u79CD\\u8D44\\u6E90\\u3002\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u8FB9\\u7F18\\u5C42\\u8282\\u70B9\\u672A\\u547D\\u4E2D\\u7F13\\u5B58\\u65F6\\uFF0C\\u9700\\u8981\\u5411\\u4E2D\\u5FC3\\u5C42\\u8282\\u70B9\\u53D1\\u8D77\\u8BF7\\u6C42\\uFF1B\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u800C\\u4E2D\\u5FC3\\u5C42\\u8282\\u70B9\\u672A\\u80FD\\u547D\\u4E2D\\u7F13\\u5B58\\u65F6\\uFF0C\\u9700\\u8981\\u67E5\\u627E\\u5BF9\\u5E94\\u7684\\u6E90\\u7AD9\\u57DF\\u540D\\uFF0C\\u5E76\\u5411\\u8BE5\\u6E90\\u7AD9\\u57DF\\u540D\\u53D1\\u8D77\\u8BF7\\u6C42\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7136\\u540E\\u518D\\u9010\\u5C42\\u8FD4\\u56DE\\u5E76\\u7F13\\u5B58\\u7528\\u6237\\u8BF7\\u6C42\\u7684\\u8D44\\u6E90\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u8BBF\\u95EE\\u6D41\\u7A0B\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u8BBF\\u95EE\\u6D41\\u7A0B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u8BBF\\u95EE\\u6D41\\u7A0B\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u7528\\u6237 A \\u7684\\u7B2C\\u4E00\\u6B21\"}),\"\\u8BBF\\u95EE\\u6D41\\u7A0B\\u5982\\u56FE 1 \\u6240\\u793A\\uFF1A\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-07-CDN-base-20250119023653.png\",alt:\"\",width:\"777\",height:\"350\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAACVBMVEX5+Pv////y9Ph2km5FAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHklEQVR4nB3JsQkAAACDMPX/owsFp0gKKmkVvAt8DQKKACBADjfYAAAAAElFTkSuQmCC\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u9700\\u8981\\u8FDB\\u4E00\\u6B65\\u8BF4\\u660E\\u7684\\u662F\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7B2C 1 \\u6B65\\u8BBF\\u95EE\\u7684\\u662F\\u52A0\\u901F\\u57DF\\u540D\\uFF0C\\u800C\\u4E0D\\u662F\\u6E90\\u7AD9\\u57DF\\u540D\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7B2C 3 \\u6B65\\u8FD4\\u56DE CNAME \\u57DF\\u540D\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7B2C 5 \\u6B65\\u8FD4\\u56DE CNAME \\u57DF\\u540D\\u5BF9\\u5E94\\u7684 IP \\u5730\\u5740\\uFF0C\\u6307\\u5411 CDN \\u8FB9\\u7F18\\u5C42\\u8282\\u70B9\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7B2C 6 \\u6B65\\u8BF7\\u6C42\\u7684 URL \\uFF08\\u6216\\u8005\\u8BF4 Referer \\uFF09\\u4ECD\\u4E3A\\u2018js.tt.com/idx.html\\u2019\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7B2C 7 \\u6B65\\u8BF7\\u6C42\\u4E2D\\u5FC3\\u5C42\\u8282\\u70B9\\u65F6\\uFF0C\\u4F1A\\u5E26\\u4E0A\\u7B2C 6 \\u6B65\\u7684 URL \\u4F5C\\u4E3A\\u53C2\\u6570\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7B2C 8 \\u6B65\\u901A\\u8FC7\\u67E5\\u8BE2\\u914D\\u7F6E\\u6570\\u636E\\u5F97\\u5230\\u6E90\\u7AD9\\u57DF\\u540D\\uFF0C\\u8FDB\\u800C\\u5411\\u6E90\\u7AD9\\u53D1\\u8D77\\u8BF7\\u6C42\\u3002\\u8FD9\\u91CC\\u7684\\u4E1A\\u52A1\\u670D\\u52A1\\u5668\\u5373\\u4E3A CDN \\u7684\\u6E90\\u7AD9\\u3002\\u7B80\\u5355\\u8D77\\u89C1\\uFF0C\\u7701\\u7565\\u4E86\\u4ECE DNS \\u670D\\u52A1\\u5668\\u67E5\\u8BE2 A \\u8BB0\\u5F55\\u7684\\u8FC7\\u7A0B\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u6574\\u4E2A\\u8FC7\\u7A0B\\u4E2D\\uFF0CURL \\u7684\\u57DF\\u540D\\u4F1A\\u53D8\\u5316\\uFF0C\\u4F46\\u662F URL \\u7684\\u8DEF\\u5F84\\u4E0D\\u4F1A\\u53D8\\u5316\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u7528\\u6237 A \\u7B2C\\u4E8C\\u6B21\"}),\"\\u8BBF\\u95EE\\u6D41\\u7A0B\\u5982\\u56FE 2 \\u6240\\u793A\\uFF1A\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-07-CDN-base-20250119023706.png\",alt:\"|500\",width:\"500\",height:\"194\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAADFBMVEX9/f75+fv09/ft7PnnJxZZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHUlEQVR4nCXHsQEAMAzDIOT8/3OHsgFLdG279OsBAVIAGOLowX8AAAAASUVORK5CYII=\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u9700\\u8981\\u8FDB\\u4E00\\u6B65\\u8BF4\\u660E\\u7684\\u662F\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7531\\u4E8E\\u672C\\u5730 DNS \\u5BA2\\u6237\\u7AEF\\u62E5\\u6709\\u4E86\\u52A0\\u901F\\u57DF\\u540D\\u7684\\u89E3\\u6790\\u7F13\\u5B58\\uFF0C\\u5C31\\u4E0D\\u9700\\u8981\\u518D\\u67E5\\u8BE2 DNS \\u670D\\u52A1\\u5668\\u4E86\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7531\\u4E8E CDN \\u8FB9\\u7F18\\u5C42\\u8282\\u70B9\\u6709\\u4E86\\u5BF9\\u5E94\\u8D44\\u6E90\\u7684\\u7F13\\u5B58\\uFF0C\\u5C31\\u4E0D\\u9700\\u8981\\u518D\\u5411\\u4E0A\\u8BF7\\u6C42\\u8D44\\u6E90\\u4E86\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u7528\\u6237 B \\u7B2C\\u4E00\\u6B21\"}),\"\\u8BBF\\u95EE\\u6D41\\u7A0B\\u5982\\u56FE 3 \\u6240\\u793A\\uFF1A\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-07-CDN-base-20250119023718.png\",alt:\"|500\",width:\"511\",height:\"350\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAD1BMVEX7+v34+frr7vb19fj///8nqWG9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVR4nC3GsQ0AAAjDsLTh/5uREJ4MzQyCl37SQKMWEIMsBusASe6Ae2sAAAAASUVORK5CYII=\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u9700\\u8981\\u8FDB\\u4E00\\u6B65\\u8BF4\\u660E\\u7684\\u662F\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7531\\u4E8E\\u7528\\u6237 A \\u548C\\u7528\\u6237 B \\u5730\\u57DF\\u76F8\\u5DEE\\u6BD4\\u8F83\\u8FDC\\uFF0C\\u4F7F\\u7528\\u4E0D\\u540C\\u7684\\u8FB9\\u7F18\\u5C42\\u8282\\u70B9\\uFF0C\\u6240\\u4EE5\\u8FB9\\u7F18\\u5C42\\u8282\\u70B9\\u6CA1\\u6709\\u5BF9\\u5E94\\u8D44\\u6E90\\u7684\\u7F13\\u5B58\\uFF0C\\u9700\\u8981\\u5411\\u4E2D\\u5FC3\\u5C42\\u8282\\u70B9\\u8BF7\\u6C42\\u8D44\\u6E90\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u4E2D\\u5FC3\\u5C42\\u8282\\u70B9\\u62E5\\u6709\\u8BE5\\u8D44\\u6E90\\u7684\\u7F13\\u5B58\\uFF0C\\u6240\\u4EE5\\u5C31\\u4E0D\\u9700\\u8981\\u56DE\\u6E90\\u4E86\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u5C31\\u8FD1\\u8BBF\\u95EE\\u539F\\u7406\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5C31\\u8FD1\\u8BBF\\u95EE\\u539F\\u7406\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5C31\\u8FD1\\u8BBF\\u95EE\\u539F\\u7406\"]}),`\n`,(0,e.jsx)(n.p,{children:\"CDN \\u7CFB\\u7EDF\\u662F\\u5982\\u4F55\\u5B9E\\u73B0\\u5C31\\u8FD1\\u8BBF\\u95EE\\u7684\\u5462\\uFF1F\"}),`\n`,(0,e.jsx)(n.p,{children:\"CNAME \\u57DF\\u540D\\u662F CDN \\u4F9B\\u5E94\\u5546\\u63D0\\u4F9B\\u7684\\uFF0CCDN \\u4F9B\\u5E94\\u5546\\u62E5\\u6709\\u5BF9 CNAME \\u57DF\\u540D\\u7684\\u914D\\u7F6E\\u6743\\u3002CDN \\u4F9B\\u5E94\\u5546\\u4F1A\\u628A CNAME \\u57DF\\u540D\\u7684 NS \\u8BB0\\u5F55\\u8BBE\\u7F6E\\u4E3A\\u81EA\\u5DF1\\u642D\\u5EFA\\u7684 DNS \\u670D\\u52A1\\u5668\\u3002\\u8FD9\\u6837\\u4E00\\u6765\\uFF0C\\u89E3\\u6790 CNAME \\u57DF\\u540D\\u7684\\u65F6\\u5019\\u5C31\\u4F1A\\u8BF7\\u6C42 CDN \\u4F9B\\u5E94\\u5546\\u642D\\u5EFA\\u7684 DNS \\u670D\\u52A1\\u5668\\u3002\\u800C CDN \\u4F9B\\u5E94\\u5546\\u5728 DNS \\u670D\\u52A1\\u5668\\u4E2D\\u5B9E\\u73B0\\u4E86\\u8D1F\\u8F7D\\u5747\\u8861\\uFF0C\\u4F1A\\u8FD4\\u56DE\\u79BB\\u7528\\u6237\\u8F83\\u8FD1\\u7684\\u8FB9\\u7F18\\u5C42\\u8282\\u70B9\\u7684 IP \\u5730\\u5740\\u3002\\u5982\\u6B64\\u4FBF\\u5B9E\\u73B0\\u4E86\\u5C31\\u8FD1\\u8BBF\\u95EE\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u56FE 1 \\u4E2D\\uFF0C\\u7B2C 4 \\u6B65\\u662F\\u5411\\u963F\\u91CC\\u4E91 DNS \\u670D\\u52A1\\u5668\\u67E5\\u8BE2\\u7684\\uFF0C\\u8BE5 DNS \\u670D\\u52A1\\u5668\\u4F1A\\u6839\\u636E\\u5730\\u7406\\u4F4D\\u7F6E\\u548C\\u5065\\u5EB7\\u72B6\\u6001\\u7B49\\u4FE1\\u606F\\u8FD4\\u56DE\\u591A\\u4E2A\\u8F83\\u8FD1\\u7684\\u53EF\\u7528\\u7684 CDN \\u8FB9\\u7F18\\u8282\\u70B9\\u7684 IP \\u5730\\u5740\\u3002DNS \\u5BA2\\u6237\\u7AEF\\u4F1A\\u9009\\u62E9\\u5176\\u4E2D\\u4E00\\u4E2A IP \\u5730\\u5740\\u4F5C\\u4E3A\\u89E3\\u6790\\u7ED3\\u679C\\uFF0C\\u4E00\\u822C\\u662F\\u7B2C\\u4E00\\u4E2A\\u3002\"})]})}function w(i={}){let{wrapper:n}=i.components||{};return n?(0,e.jsx)(n,Object.assign({},i,{children:(0,e.jsx)(s,i)})):s(i)}var M=w;return B(S);})();\n;return Component;"
    },
    "_id": "post/2022-09-08-CDN-base.md",
    "_raw": {
      "sourceFilePath": "post/2022-09-08-CDN-base.md",
      "sourceFileName": "2022-09-08-CDN-base.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2022-09-08-CDN-base"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2022-09-08-CDN-base",
    "slugAsParams": "2022-09-08-CDN-base"
  },
  {
    "title": "React Hooks 优化代码",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2022-09-09T00:00:00.000Z",
    "body": {
      "raw": "## 为什么需要Hooks\n\n[React函数组件和类组件的差异](https://zhuanlan.zhihu.com/p/62767474)\n\n## Hook 统一认识\n\n1. 每一次渲染都有它自己的 Props && state\n    \n2. 每一次渲染都有它自己的事件处理函数\n    \n3. 每一次渲染都有它自己的 Effects\n    \n4. 每一次渲染都由它自己的...所有\n    \n5. 同步，而非生命周期\n    \n\n  \n\n## 常用的Hooks\n\n### useState:\n\nset函数是异步执行的，无法在下一行立马拿到设置了新值的state。\n\nset操作会引起组件re-render，因此必须在某个回调中调用，不应该出现在 Component 函数步调用栈中执行。\n\n1. useState 要遵循 immutable\n    \n2. useState 适合存储基本变量或者强相关的简单对象数据，多状态独立更新数据更适合useReducer\n    \n3. 初始化时给的默认值只有组件第一次挂载的时候有效，之后会被hooks链缓存下相应值\n    \n\n使用规范\n\n1. 将完全不相关的 state 拆分为多组 state。比如 `size` 和 `position`\n    \n2. 某些 state 是相互关联的，或者需要一起发生改变，就可以把它们合并为一组 state\n    \n\n  \n\n### useReducer\n\n```JavaScript\nconst initialState = { name: '张三', age: 20 };\nfunction reducer(state, action) {\n    switch(action.type) {\n        case 'addAge':\n            return { ...state, age: state.age + 1 };\n        case 'setAge':\n            return { ...state, age: action.value };\n        case 'resetAge': {\n            return initialState;\n        }\n        default:\n            return state;\n    }\n}\n\nfunction App() {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    // 惰性初始化\n    // const [state, dispatch] = useReducer(reducer, initialState, (init) => init);\n    \n    return (\n        <div>\n            <p>{state.name}今年{state.age}</p>\n            <button onClick={() => dispath({ type: 'addAge' })}>年龄加一</button>\n            <button onClick={() => dispath({ type: 'setAge', value: 25 })}>设置年龄</button>\n            <button onClick={() => dispath({ type: 'resetAge' })}>重置年龄</button>\n        </div>\n    );\n}\n```\n\n> 1. 初始化时给的默认值只有组件第一次挂载的时候有效，之后会被hooks链缓存下相应值\n>     \n> 2. useReducer 相比useState更适合存储多状态更改的数据\n>     \n> 3. useReducer 也要遵循 immutable\n>     \n\n  \n\n### useEffect\n\n#### **❌错误使用--无限循环**\n\n组件会更新，因此useEffect会再次执行，因此出现了无限循环的情况。我们只想在组件mount时请求数据。我们可以传递一个空数组作为useEffect的第二个参数，这样就能避免在组件更新执行useEffect，只会在组件mount时执行。\n\n```TypeScript\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nfunction App() {\n    const [data, setData] = useState({ hits: [] });\n    \n    useEffect(async () => {\n        const result = await axios('http://localhost/api/v1/search?query=redux',);\n        setData(result.data);\n    }, []);\n    \n    return (\n        <ul>{data.hits.map(item => (\n            <li key={item.objectID}>\n                <a href={item.url}>{item.title}</a>\n            </li>\n            ))}\n        </ul>\n    );\n}\n\nexport default App;\n```\n\n#### **❌错误使用--异步函数**\n\n每个async函数都会默认返回一个隐式的promise。但是，useEffect不应该返回任何内容。\n\n```TypeScript\n useEffect(async () => {\n     const result = await axios(\n         'http://localhost/api/v1/search?query=redux',\n     );\n     setData(result.data);\n }, []);\n```\n\n控制台会报Warning\n\n> Warning: useEffect function must return a cleanup function or nothing. Promises and useEffect(async () => …) are not supported, but you can call an async function inside an effect\n\n✅正确使用\n\n```TypeScript\nuseEffect(() => {\n   const fetchData = async () => {\n       const result = await axios(\n           'http://localhost/api/v1/search?query=redux',\n       );\n       setData(result.data);\n   };\n   fetchData();\n}, []);\n```\n\n### ~~useContext~~\n\n可用其他状态管理替换\n\n  \n\n### useRef\n\n当需要存放一个数据，需要无论在哪里都取到最新状态时，需要使用 useRef。\n\n```JavaScript\n// 存储常量\nconst countRef = useRef(0);\n\n// 引用元素\nconst domRef = useRef(null);\n<div ref={domRef}></div>\n```\n\n1. useRef 的返回值可以被useEffect等依赖忽略掉，current上值的更改也不会通知组件render\n    \n2. useRef 的值存在于整个组件存在周期\n    \n3. useRef 的值存储于 ref.current 上\n    \n\n  \n\n  \n\n### useCallback & useMemo\n\n> 前情提要\n\nreact中的性能优化。在hooks诞生之前，如果组件包含内部state，我们都是基于class的形式来创建组件。当时我们也知道，react中，性能的优化点在于：\n\n1. 调用`setState`，就会触发组件的重新渲染，无论前后的state是否不同\n    \n2. 父组件更新，子组件也会自动的更新\n    \n\n基于上面的两点，我们通常的解决方案是：\n\n1. 使用`immutable`进行比较，在不相等的时候调用setState；\n    \n2. 在`shouldComponentUpdate`中判断前后的props和state，如果没有变化，则返回false来阻止更新。\n    \n\n在hooks出来之后，我们能够使用function的形式来创建包含内部state的组件。但是，使用function的形式，失去了上面的shouldComponentUpdate，我们无法通过判断前后状态来决定是否更新。而且，在函数组件中，react不再区分mount和update两个状态，这意味着函数组件的每一次调用都会执行其内部的所有逻辑，那么会带来较大的性能损耗。因此useMemo 和useCallback就是解决性能问题的杀手锏。\n\n  \n\n#### 💡使用规范\n\nuseCallback和useMemo的参数跟useEffect一致，他们之间最大的区别有是useEffect会用于处理副作用，而前两个hooks不能。\n\n**useMemo和useCallback都会在组件第一次渲染的时候执行，之后会在其依赖的变量发生改变时再次执行；并且这两个hooks都返回缓存的值，useMemo返回缓存的变量，useCallback返回缓存的函数**。\n\n**在 useCallback 内部使用了 setState ，可以考虑使用 setState callback 减少依赖**\n\n`usecallback(()=>{},[])`\n\n  \n\n1. 在 useCallback 内部使用了 setState ，可以考虑使用 setState callback 减少依赖\n    \n\n```JavaScript\nconst useValues = () => {\n  const [values, setValues] = useState({\n    data: {},\n    count: 0\n  });\n\n  const updateData = useCallback((nextData) => {\n        setValues({\n          data: nextData,\n          count: values.count + 1 \n       }); // 因为 callback 内部依赖了外部的 values 变量，所以必须在依赖数组中指定它\n      },\n      [values], \n  );\n\n  return [values, updateData];\n};\n```\n\n```JavaScript\nconst useValues = () => {\n  const [values, setValues] = useState({});\n\n  const updateData = useCallback((nextData) => {\n    setValues((prevValues) => ({\n      data: nextData,\n      count: prevValues.count + 1,    \n     })); // 通过 setState 回调函数获取最新的 values 状态，这时 callback 不再依赖于外部的 values 变量了，因此依赖数组中不需要指定任何值\n  }, []); // 这个 callback 永远不会重新创建\n\n  return [values, updateData];\n};\n```\n\n2. 使用 ref 来保存可变变量\n    \n\n```JavaScript\nconst useValues = () => {\n  const [values, setValues] = useState({});\n  const latestValues = useRef(values);\n\n  useEffect(() => {\n    latestValues.current = values;\n  });\n\n  const [updateData] = useCallback((nextData) => {\n    setValues({\n      data: nextData,\n      count: latestValues.current.count + 1,\n    });\n  }, []);\n\n  return [values, updateData];\n};\n```\n\n3. 考虑用参数传入的方式减少依赖？\n    \n\n```JavaScript\nfunction Child(props) {\n    const { id } = props;\n    \n    const fetchData = useCallback(() => {\n        axios.get(`xxx.xxx.com/api/data?id=${id}`).then(res => {\n            ...\n        });\n    }, [id]);\n\n}\n\nfunction Child(props) {\n    const { id } = props;\n    \n    const fetchData = useCallback(id => {\n        axios.get(`xxx.xxx.com/api/data?id=${id}`).then(res => {\n            ...\n        });\n    }, []);\n   \n}\n\nfunction Parent() {\n    const [id, setId] = useState(1);\n    return <Child id={id} />\n}\n```\n\n  \n\n## Reference\n\n[React Hooks 深度解析](https://bytedance.feishu.cn/wiki/wikcnrtf0N4HuGnCEiD8u2b0dAb?from=from_copylink)\n\n[useMemo与useCallback使用指南](https://blog.csdn.net/sinat_17775997/article/details/94453167?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165243632416782388061527%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=165243632416782388061527&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-94453167-null-null.142^v9^pc_search_result_control_group,157^v4^control&utm_term=usecallback&spm=1018.2226.3001.4187)\n\n[React Hooks实践](https://bytedance.feishu.cn/docs/doccnEy1GaIGSllbRa6HKIie3kh#RTUyv7)",
      "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var g=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),k=(a,n)=>{for(var t in n)i(a,t,{get:n[t],enumerable:!0})},c=(a,n,t,d)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of u(n))!m.call(a,l)&&l!==t&&i(a,l,{get:()=>n[l],enumerable:!(d=o(n,l))||d.enumerable});return a};var b=(a,n,t)=>(t=a!=null?p(f(a)):{},c(n||!a||!a.__esModule?i(t,\"default\",{value:a,enumerable:!0}):t,a)),y=a=>c(i({},\"__esModule\",{value:!0}),a);var s=g((N,r)=>{r.exports=_jsx_runtime});var C={};k(C,{default:()=>S,frontmatter:()=>x});var e=b(s()),x={title:\"React Hooks \\u4F18\\u5316\\u4EE3\\u7801\",subtitle:null,layout:\"post\",date:new Date(16626816e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function h(a){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ol:\"ol\",li:\"li\",h3:\"h3\",code:\"code\",div:\"div\",figure:\"figure\",pre:\"pre\",blockquote:\"blockquote\",h4:\"h4\",strong:\"strong\",del:\"del\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981hooks\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981hooks\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981Hooks\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://zhuanlan.zhihu.com/p/62767474\",children:\"React\\u51FD\\u6570\\u7EC4\\u4EF6\\u548C\\u7C7B\\u7EC4\\u4EF6\\u7684\\u5DEE\\u5F02\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"hook-\\u7EDF\\u4E00\\u8BA4\\u8BC6\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#hook-\\u7EDF\\u4E00\\u8BA4\\u8BC6\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Hook \\u7EDF\\u4E00\\u8BA4\\u8BC6\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6BCF\\u4E00\\u6B21\\u6E32\\u67D3\\u90FD\\u6709\\u5B83\\u81EA\\u5DF1\\u7684 Props && state\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6BCF\\u4E00\\u6B21\\u6E32\\u67D3\\u90FD\\u6709\\u5B83\\u81EA\\u5DF1\\u7684\\u4E8B\\u4EF6\\u5904\\u7406\\u51FD\\u6570\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6BCF\\u4E00\\u6B21\\u6E32\\u67D3\\u90FD\\u6709\\u5B83\\u81EA\\u5DF1\\u7684 Effects\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6BCF\\u4E00\\u6B21\\u6E32\\u67D3\\u90FD\\u7531\\u5B83\\u81EA\\u5DF1\\u7684...\\u6240\\u6709\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u540C\\u6B65\\uFF0C\\u800C\\u975E\\u751F\\u547D\\u5468\\u671F\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5E38\\u7528\\u7684hooks\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5E38\\u7528\\u7684hooks\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5E38\\u7528\\u7684Hooks\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"usestate\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#usestate\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"useState:\"]}),`\n`,(0,e.jsx)(n.p,{children:\"set\\u51FD\\u6570\\u662F\\u5F02\\u6B65\\u6267\\u884C\\u7684\\uFF0C\\u65E0\\u6CD5\\u5728\\u4E0B\\u4E00\\u884C\\u7ACB\\u9A6C\\u62FF\\u5230\\u8BBE\\u7F6E\\u4E86\\u65B0\\u503C\\u7684state\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"set\\u64CD\\u4F5C\\u4F1A\\u5F15\\u8D77\\u7EC4\\u4EF6re-render\\uFF0C\\u56E0\\u6B64\\u5FC5\\u987B\\u5728\\u67D0\\u4E2A\\u56DE\\u8C03\\u4E2D\\u8C03\\u7528\\uFF0C\\u4E0D\\u5E94\\u8BE5\\u51FA\\u73B0\\u5728 Component \\u51FD\\u6570\\u6B65\\u8C03\\u7528\\u6808\\u4E2D\\u6267\\u884C\\u3002\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"useState \\u8981\\u9075\\u5FAA immutable\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"useState \\u9002\\u5408\\u5B58\\u50A8\\u57FA\\u672C\\u53D8\\u91CF\\u6216\\u8005\\u5F3A\\u76F8\\u5173\\u7684\\u7B80\\u5355\\u5BF9\\u8C61\\u6570\\u636E\\uFF0C\\u591A\\u72B6\\u6001\\u72EC\\u7ACB\\u66F4\\u65B0\\u6570\\u636E\\u66F4\\u9002\\u5408useReducer\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u521D\\u59CB\\u5316\\u65F6\\u7ED9\\u7684\\u9ED8\\u8BA4\\u503C\\u53EA\\u6709\\u7EC4\\u4EF6\\u7B2C\\u4E00\\u6B21\\u6302\\u8F7D\\u7684\\u65F6\\u5019\\u6709\\u6548\\uFF0C\\u4E4B\\u540E\\u4F1A\\u88ABhooks\\u94FE\\u7F13\\u5B58\\u4E0B\\u76F8\\u5E94\\u503C\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528\\u89C4\\u8303\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5C06\\u5B8C\\u5168\\u4E0D\\u76F8\\u5173\\u7684 state \\u62C6\\u5206\\u4E3A\\u591A\\u7EC4 state\\u3002\\u6BD4\\u5982 \",(0,e.jsx)(n.code,{children:\"size\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"position\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u67D0\\u4E9B state \\u662F\\u76F8\\u4E92\\u5173\\u8054\\u7684\\uFF0C\\u6216\\u8005\\u9700\\u8981\\u4E00\\u8D77\\u53D1\\u751F\\u6539\\u53D8\\uFF0C\\u5C31\\u53EF\\u4EE5\\u628A\\u5B83\\u4EEC\\u5408\\u5E76\\u4E3A\\u4E00\\u7EC4 state\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"usereducer\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#usereducer\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"useReducer\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`const initialState = { name: '\\u5F20\\u4E09', age: 20 };\nfunction reducer(state, action) {\n    switch(action.type) {\n        case 'addAge':\n            return { ...state, age: state.age + 1 };\n        case 'setAge':\n            return { ...state, age: action.value };\n        case 'resetAge': {\n            return initialState;\n        }\n        default:\n            return state;\n    }\n}\n\nfunction App() {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    // \\u60F0\\u6027\\u521D\\u59CB\\u5316\n    // const [state, dispatch] = useReducer(reducer, initialState, (init) => init);\n    \n    return (\n        <div>\n            <p>{state.name}\\u4ECA\\u5E74{state.age}</p>\n            <button onClick={() => dispath({ type: 'addAge' })}>\\u5E74\\u9F84\\u52A0\\u4E00</button>\n            <button onClick={() => dispath({ type: 'setAge', value: 25 })}>\\u8BBE\\u7F6E\\u5E74\\u9F84</button>\n            <button onClick={() => dispath({ type: 'resetAge' })}>\\u91CD\\u7F6E\\u5E74\\u9F84</button>\n        </div>\n    );\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const initialState = { name: '\\u5F20\\u4E09', age: 20 };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"function reducer(state, action) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    switch(action.type) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        case 'addAge':\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            return { ...state, age: state.age + 1 };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        case 'setAge':\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            return { ...state, age: action.value };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        case 'resetAge': {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            return initialState;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        default:\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            return state;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"function App() {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    const [state, dispatch] = useReducer(reducer, initialState);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    // \\u60F0\\u6027\\u521D\\u59CB\\u5316\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    // const [state, dispatch] = useReducer(reducer, initialState, (init) => init);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    return (\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        <div>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            <p>{state.name}\\u4ECA\\u5E74{state.age}</p>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            <button onClick={() => dispath({ type: 'addAge' })}>\\u5E74\\u9F84\\u52A0\\u4E00</button>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            <button onClick={() => dispath({ type: 'setAge', value: 25 })}>\\u8BBE\\u7F6E\\u5E74\\u9F84</button>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            <button onClick={() => dispath({ type: 'resetAge' })}>\\u91CD\\u7F6E\\u5E74\\u9F84</button>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        </div>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    );\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u521D\\u59CB\\u5316\\u65F6\\u7ED9\\u7684\\u9ED8\\u8BA4\\u503C\\u53EA\\u6709\\u7EC4\\u4EF6\\u7B2C\\u4E00\\u6B21\\u6302\\u8F7D\\u7684\\u65F6\\u5019\\u6709\\u6548\\uFF0C\\u4E4B\\u540E\\u4F1A\\u88ABhooks\\u94FE\\u7F13\\u5B58\\u4E0B\\u76F8\\u5E94\\u503C\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"useReducer \\u76F8\\u6BD4useState\\u66F4\\u9002\\u5408\\u5B58\\u50A8\\u591A\\u72B6\\u6001\\u66F4\\u6539\\u7684\\u6570\\u636E\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"useReducer \\u4E5F\\u8981\\u9075\\u5FAA immutable\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"useeffect\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#useeffect\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"useEffect\"]}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\u9519\\u8BEF\\u4F7F\\u7528--\\u65E0\\u9650\\u5FAA\\u73AF\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u9519\\u8BEF\\u4F7F\\u7528--\\u65E0\\u9650\\u5FAA\\u73AF\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),(0,e.jsx)(n.strong,{children:\"\\u274C\\u9519\\u8BEF\\u4F7F\\u7528--\\u65E0\\u9650\\u5FAA\\u73AF\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7EC4\\u4EF6\\u4F1A\\u66F4\\u65B0\\uFF0C\\u56E0\\u6B64useEffect\\u4F1A\\u518D\\u6B21\\u6267\\u884C\\uFF0C\\u56E0\\u6B64\\u51FA\\u73B0\\u4E86\\u65E0\\u9650\\u5FAA\\u73AF\\u7684\\u60C5\\u51B5\\u3002\\u6211\\u4EEC\\u53EA\\u60F3\\u5728\\u7EC4\\u4EF6mount\\u65F6\\u8BF7\\u6C42\\u6570\\u636E\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F20\\u9012\\u4E00\\u4E2A\\u7A7A\\u6570\\u7EC4\\u4F5C\\u4E3AuseEffect\\u7684\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\uFF0C\\u8FD9\\u6837\\u5C31\\u80FD\\u907F\\u514D\\u5728\\u7EC4\\u4EF6\\u66F4\\u65B0\\u6267\\u884CuseEffect\\uFF0C\\u53EA\\u4F1A\\u5728\\u7EC4\\u4EF6mount\\u65F6\\u6267\\u884C\\u3002\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"TypeScript\",\"data-theme\":\"github-dark\",raw:`import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nfunction App() {\n    const [data, setData] = useState({ hits: [] });\n    \n    useEffect(async () => {\n        const result = await axios('http://localhost/api/v1/search?query=redux',);\n        setData(result.data);\n    }, []);\n    \n    return (\n        <ul>{data.hits.map(item => (\n            <li key={item.objectID}>\n                <a href={item.url}>{item.title}</a>\n            </li>\n            ))}\n        </ul>\n    );\n}\n\nexport default App;\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"TypeScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"import React, { useState, useEffect } from 'react';\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"import axios from 'axios';\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"function App() {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    const [data, setData] = useState({ hits: [] });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    useEffect(async () => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        const result = await axios('http://localhost/api/v1/search?query=redux',);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        setData(result.data);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    }, []);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    return (\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        <ul>{data.hits.map(item => (\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            <li key={item.objectID}>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                <a href={item.url}>{item.title}</a>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            </li>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            ))}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        </ul>\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    );\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"export default App;\"})})]})})})}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\u9519\\u8BEF\\u4F7F\\u7528--\\u5F02\\u6B65\\u51FD\\u6570\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u9519\\u8BEF\\u4F7F\\u7528--\\u5F02\\u6B65\\u51FD\\u6570\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),(0,e.jsx)(n.strong,{children:\"\\u274C\\u9519\\u8BEF\\u4F7F\\u7528--\\u5F02\\u6B65\\u51FD\\u6570\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6BCF\\u4E2Aasync\\u51FD\\u6570\\u90FD\\u4F1A\\u9ED8\\u8BA4\\u8FD4\\u56DE\\u4E00\\u4E2A\\u9690\\u5F0F\\u7684promise\\u3002\\u4F46\\u662F\\uFF0CuseEffect\\u4E0D\\u5E94\\u8BE5\\u8FD4\\u56DE\\u4EFB\\u4F55\\u5185\\u5BB9\\u3002\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"TypeScript\",\"data-theme\":\"github-dark\",raw:` useEffect(async () => {\n     const result = await axios(\n         'http://localhost/api/v1/search?query=redux',\n     );\n     setData(result.data);\n }, []);\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"TypeScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\" useEffect(async () => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     const result = await axios(\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"         'http://localhost/api/v1/search?query=redux',\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     );\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     setData(result.data);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\" }, []);\"})})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u63A7\\u5236\\u53F0\\u4F1A\\u62A5Warning\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Warning: useEffect function must return a cleanup function or nothing. Promises and useEffect(async () => \\u2026) are not supported, but you can call an async function inside an effect\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u2705\\u6B63\\u786E\\u4F7F\\u7528\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"TypeScript\",\"data-theme\":\"github-dark\",raw:`useEffect(() => {\n   const fetchData = async () => {\n       const result = await axios(\n           'http://localhost/api/v1/search?query=redux',\n       );\n       setData(result.data);\n   };\n   fetchData();\n}, []);\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"TypeScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"useEffect(() => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"   const fetchData = async () => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"       const result = await axios(\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"           'http://localhost/api/v1/search?query=redux',\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"       );\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"       setData(result.data);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"   };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"   fetchData();\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}, []);\"})})]})})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"usecontext\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#usecontext\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),(0,e.jsx)(n.del,{children:\"useContext\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u53EF\\u7528\\u5176\\u4ED6\\u72B6\\u6001\\u7BA1\\u7406\\u66FF\\u6362\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"useref\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#useref\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"useRef\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5F53\\u9700\\u8981\\u5B58\\u653E\\u4E00\\u4E2A\\u6570\\u636E\\uFF0C\\u9700\\u8981\\u65E0\\u8BBA\\u5728\\u54EA\\u91CC\\u90FD\\u53D6\\u5230\\u6700\\u65B0\\u72B6\\u6001\\u65F6\\uFF0C\\u9700\\u8981\\u4F7F\\u7528 useRef\\u3002\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`// \\u5B58\\u50A8\\u5E38\\u91CF\nconst countRef = useRef(0);\n\n// \\u5F15\\u7528\\u5143\\u7D20\nconst domRef = useRef(null);\n<div ref={domRef}></div>\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"// \\u5B58\\u50A8\\u5E38\\u91CF\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const countRef = useRef(0);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"// \\u5F15\\u7528\\u5143\\u7D20\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const domRef = useRef(null);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"<div ref={domRef}></div>\"})})]})})})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"useRef \\u7684\\u8FD4\\u56DE\\u503C\\u53EF\\u4EE5\\u88ABuseEffect\\u7B49\\u4F9D\\u8D56\\u5FFD\\u7565\\u6389\\uFF0Ccurrent\\u4E0A\\u503C\\u7684\\u66F4\\u6539\\u4E5F\\u4E0D\\u4F1A\\u901A\\u77E5\\u7EC4\\u4EF6render\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"useRef \\u7684\\u503C\\u5B58\\u5728\\u4E8E\\u6574\\u4E2A\\u7EC4\\u4EF6\\u5B58\\u5728\\u5468\\u671F\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"useRef \\u7684\\u503C\\u5B58\\u50A8\\u4E8E ref.current \\u4E0A\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"usecallback--usememo\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#usecallback--usememo\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"useCallback & useMemo\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u524D\\u60C5\\u63D0\\u8981\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"react\\u4E2D\\u7684\\u6027\\u80FD\\u4F18\\u5316\\u3002\\u5728hooks\\u8BDE\\u751F\\u4E4B\\u524D\\uFF0C\\u5982\\u679C\\u7EC4\\u4EF6\\u5305\\u542B\\u5185\\u90E8state\\uFF0C\\u6211\\u4EEC\\u90FD\\u662F\\u57FA\\u4E8Eclass\\u7684\\u5F62\\u5F0F\\u6765\\u521B\\u5EFA\\u7EC4\\u4EF6\\u3002\\u5F53\\u65F6\\u6211\\u4EEC\\u4E5F\\u77E5\\u9053\\uFF0Creact\\u4E2D\\uFF0C\\u6027\\u80FD\\u7684\\u4F18\\u5316\\u70B9\\u5728\\u4E8E\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u8C03\\u7528\",(0,e.jsx)(n.code,{children:\"setState\"}),\"\\uFF0C\\u5C31\\u4F1A\\u89E6\\u53D1\\u7EC4\\u4EF6\\u7684\\u91CD\\u65B0\\u6E32\\u67D3\\uFF0C\\u65E0\\u8BBA\\u524D\\u540E\\u7684state\\u662F\\u5426\\u4E0D\\u540C\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7236\\u7EC4\\u4EF6\\u66F4\\u65B0\\uFF0C\\u5B50\\u7EC4\\u4EF6\\u4E5F\\u4F1A\\u81EA\\u52A8\\u7684\\u66F4\\u65B0\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u57FA\\u4E8E\\u4E0A\\u9762\\u7684\\u4E24\\u70B9\\uFF0C\\u6211\\u4EEC\\u901A\\u5E38\\u7684\\u89E3\\u51B3\\u65B9\\u6848\\u662F\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4F7F\\u7528\",(0,e.jsx)(n.code,{children:\"immutable\"}),\"\\u8FDB\\u884C\\u6BD4\\u8F83\\uFF0C\\u5728\\u4E0D\\u76F8\\u7B49\\u7684\\u65F6\\u5019\\u8C03\\u7528setState\\uFF1B\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\",(0,e.jsx)(n.code,{children:\"shouldComponentUpdate\"}),\"\\u4E2D\\u5224\\u65AD\\u524D\\u540E\\u7684props\\u548Cstate\\uFF0C\\u5982\\u679C\\u6CA1\\u6709\\u53D8\\u5316\\uFF0C\\u5219\\u8FD4\\u56DEfalse\\u6765\\u963B\\u6B62\\u66F4\\u65B0\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728hooks\\u51FA\\u6765\\u4E4B\\u540E\\uFF0C\\u6211\\u4EEC\\u80FD\\u591F\\u4F7F\\u7528function\\u7684\\u5F62\\u5F0F\\u6765\\u521B\\u5EFA\\u5305\\u542B\\u5185\\u90E8state\\u7684\\u7EC4\\u4EF6\\u3002\\u4F46\\u662F\\uFF0C\\u4F7F\\u7528function\\u7684\\u5F62\\u5F0F\\uFF0C\\u5931\\u53BB\\u4E86\\u4E0A\\u9762\\u7684shouldComponentUpdate\\uFF0C\\u6211\\u4EEC\\u65E0\\u6CD5\\u901A\\u8FC7\\u5224\\u65AD\\u524D\\u540E\\u72B6\\u6001\\u6765\\u51B3\\u5B9A\\u662F\\u5426\\u66F4\\u65B0\\u3002\\u800C\\u4E14\\uFF0C\\u5728\\u51FD\\u6570\\u7EC4\\u4EF6\\u4E2D\\uFF0Creact\\u4E0D\\u518D\\u533A\\u5206mount\\u548Cupdate\\u4E24\\u4E2A\\u72B6\\u6001\\uFF0C\\u8FD9\\u610F\\u5473\\u7740\\u51FD\\u6570\\u7EC4\\u4EF6\\u7684\\u6BCF\\u4E00\\u6B21\\u8C03\\u7528\\u90FD\\u4F1A\\u6267\\u884C\\u5176\\u5185\\u90E8\\u7684\\u6240\\u6709\\u903B\\u8F91\\uFF0C\\u90A3\\u4E48\\u4F1A\\u5E26\\u6765\\u8F83\\u5927\\u7684\\u6027\\u80FD\\u635F\\u8017\\u3002\\u56E0\\u6B64useMemo \\u548CuseCallback\\u5C31\\u662F\\u89E3\\u51B3\\u6027\\u80FD\\u95EE\\u9898\\u7684\\u6740\\u624B\\u950F\\u3002\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\u4F7F\\u7528\\u89C4\\u8303\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u4F7F\\u7528\\u89C4\\u8303\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u{1F4A1}\\u4F7F\\u7528\\u89C4\\u8303\"]}),`\n`,(0,e.jsx)(n.p,{children:\"useCallback\\u548CuseMemo\\u7684\\u53C2\\u6570\\u8DDFuseEffect\\u4E00\\u81F4\\uFF0C\\u4ED6\\u4EEC\\u4E4B\\u95F4\\u6700\\u5927\\u7684\\u533A\\u522B\\u6709\\u662FuseEffect\\u4F1A\\u7528\\u4E8E\\u5904\\u7406\\u526F\\u4F5C\\u7528\\uFF0C\\u800C\\u524D\\u4E24\\u4E2Ahooks\\u4E0D\\u80FD\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"useMemo\\u548CuseCallback\\u90FD\\u4F1A\\u5728\\u7EC4\\u4EF6\\u7B2C\\u4E00\\u6B21\\u6E32\\u67D3\\u7684\\u65F6\\u5019\\u6267\\u884C\\uFF0C\\u4E4B\\u540E\\u4F1A\\u5728\\u5176\\u4F9D\\u8D56\\u7684\\u53D8\\u91CF\\u53D1\\u751F\\u6539\\u53D8\\u65F6\\u518D\\u6B21\\u6267\\u884C\\uFF1B\\u5E76\\u4E14\\u8FD9\\u4E24\\u4E2Ahooks\\u90FD\\u8FD4\\u56DE\\u7F13\\u5B58\\u7684\\u503C\\uFF0CuseMemo\\u8FD4\\u56DE\\u7F13\\u5B58\\u7684\\u53D8\\u91CF\\uFF0CuseCallback\\u8FD4\\u56DE\\u7F13\\u5B58\\u7684\\u51FD\\u6570\"}),\"\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u5728 useCallback \\u5185\\u90E8\\u4F7F\\u7528\\u4E86 setState \\uFF0C\\u53EF\\u4EE5\\u8003\\u8651\\u4F7F\\u7528 setState callback \\u51CF\\u5C11\\u4F9D\\u8D56\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"usecallback(()=>{},[])\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5728 useCallback \\u5185\\u90E8\\u4F7F\\u7528\\u4E86 setState \\uFF0C\\u53EF\\u4EE5\\u8003\\u8651\\u4F7F\\u7528 setState callback \\u51CF\\u5C11\\u4F9D\\u8D56\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`const useValues = () => {\n  const [values, setValues] = useState({\n    data: {},\n    count: 0\n  });\n\n  const updateData = useCallback((nextData) => {\n        setValues({\n          data: nextData,\n          count: values.count + 1 \n       }); // \\u56E0\\u4E3A callback \\u5185\\u90E8\\u4F9D\\u8D56\\u4E86\\u5916\\u90E8\\u7684 values \\u53D8\\u91CF\\uFF0C\\u6240\\u4EE5\\u5FC5\\u987B\\u5728\\u4F9D\\u8D56\\u6570\\u7EC4\\u4E2D\\u6307\\u5B9A\\u5B83\n      },\n      [values], \n  );\n\n  return [values, updateData];\n};\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const useValues = () => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  const [values, setValues] = useState({\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    data: {},\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    count: 0\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  const updateData = useCallback((nextData) => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        setValues({\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"          data: nextData,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"          count: values.count + 1 \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"       }); // \\u56E0\\u4E3A callback \\u5185\\u90E8\\u4F9D\\u8D56\\u4E86\\u5916\\u90E8\\u7684 values \\u53D8\\u91CF\\uFF0C\\u6240\\u4EE5\\u5FC5\\u987B\\u5728\\u4F9D\\u8D56\\u6570\\u7EC4\\u4E2D\\u6307\\u5B9A\\u5B83\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"      },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"      [values], \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  );\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  return [values, updateData];\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"};\"})})]})})})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`const useValues = () => {\n  const [values, setValues] = useState({});\n\n  const updateData = useCallback((nextData) => {\n    setValues((prevValues) => ({\n      data: nextData,\n      count: prevValues.count + 1,    \n     })); // \\u901A\\u8FC7 setState \\u56DE\\u8C03\\u51FD\\u6570\\u83B7\\u53D6\\u6700\\u65B0\\u7684 values \\u72B6\\u6001\\uFF0C\\u8FD9\\u65F6 callback \\u4E0D\\u518D\\u4F9D\\u8D56\\u4E8E\\u5916\\u90E8\\u7684 values \\u53D8\\u91CF\\u4E86\\uFF0C\\u56E0\\u6B64\\u4F9D\\u8D56\\u6570\\u7EC4\\u4E2D\\u4E0D\\u9700\\u8981\\u6307\\u5B9A\\u4EFB\\u4F55\\u503C\n  }, []); // \\u8FD9\\u4E2A callback \\u6C38\\u8FDC\\u4E0D\\u4F1A\\u91CD\\u65B0\\u521B\\u5EFA\n\n  return [values, updateData];\n};\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const useValues = () => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  const [values, setValues] = useState({});\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  const updateData = useCallback((nextData) => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    setValues((prevValues) => ({\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"      data: nextData,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"      count: prevValues.count + 1,    \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     })); // \\u901A\\u8FC7 setState \\u56DE\\u8C03\\u51FD\\u6570\\u83B7\\u53D6\\u6700\\u65B0\\u7684 values \\u72B6\\u6001\\uFF0C\\u8FD9\\u65F6 callback \\u4E0D\\u518D\\u4F9D\\u8D56\\u4E8E\\u5916\\u90E8\\u7684 values \\u53D8\\u91CF\\u4E86\\uFF0C\\u56E0\\u6B64\\u4F9D\\u8D56\\u6570\\u7EC4\\u4E2D\\u4E0D\\u9700\\u8981\\u6307\\u5B9A\\u4EFB\\u4F55\\u503C\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  }, []); // \\u8FD9\\u4E2A callback \\u6C38\\u8FDC\\u4E0D\\u4F1A\\u91CD\\u65B0\\u521B\\u5EFA\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  return [values, updateData];\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"};\"})})]})})})}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528 ref \\u6765\\u4FDD\\u5B58\\u53EF\\u53D8\\u53D8\\u91CF\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`const useValues = () => {\n  const [values, setValues] = useState({});\n  const latestValues = useRef(values);\n\n  useEffect(() => {\n    latestValues.current = values;\n  });\n\n  const [updateData] = useCallback((nextData) => {\n    setValues({\n      data: nextData,\n      count: latestValues.current.count + 1,\n    });\n  }, []);\n\n  return [values, updateData];\n};\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const useValues = () => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  const [values, setValues] = useState({});\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  const latestValues = useRef(values);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  useEffect(() => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    latestValues.current = values;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  const [updateData] = useCallback((nextData) => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    setValues({\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"      data: nextData,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"      count: latestValues.current.count + 1,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  }, []);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  return [values, updateData];\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"};\"})})]})})})}),`\n`,(0,e.jsxs)(n.ol,{start:\"3\",children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u8003\\u8651\\u7528\\u53C2\\u6570\\u4F20\\u5165\\u7684\\u65B9\\u5F0F\\u51CF\\u5C11\\u4F9D\\u8D56\\uFF1F\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`function Child(props) {\n    const { id } = props;\n    \n    const fetchData = useCallback(() => {\n        axios.get(\\`xxx.xxx.com/api/data?id=\\${id}\\`).then(res => {\n            ...\n        });\n    }, [id]);\n\n}\n\nfunction Child(props) {\n    const { id } = props;\n    \n    const fetchData = useCallback(id => {\n        axios.get(\\`xxx.xxx.com/api/data?id=\\${id}\\`).then(res => {\n            ...\n        });\n    }, []);\n   \n}\n\nfunction Parent() {\n    const [id, setId] = useState(1);\n    return <Child id={id} />\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"function Child(props) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    const { id } = props;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    const fetchData = useCallback(() => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        axios.get(`xxx.xxx.com/api/data?id=${id}`).then(res => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            ...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    }, [id]);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"function Child(props) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    const { id } = props;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    const fetchData = useCallback(id => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        axios.get(`xxx.xxx.com/api/data?id=${id}`).then(res => {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            ...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    }, []);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"   \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"function Parent() {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    const [id, setId] = useState(1);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    return <Child id={id} />\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"reference\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#reference\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://bytedance.feishu.cn/wiki/wikcnrtf0N4HuGnCEiD8u2b0dAb?from=from_copylink\",children:\"React Hooks \\u6DF1\\u5EA6\\u89E3\\u6790\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://blog.csdn.net/sinat_17775997/article/details/94453167?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165243632416782388061527%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=165243632416782388061527&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-94453167-null-null.142%5Ev9%5Epc_search_result_control_group,157%5Ev4%5Econtrol&utm_term=usecallback&spm=1018.2226.3001.4187\",children:\"useMemo\\u4E0EuseCallback\\u4F7F\\u7528\\u6307\\u5357\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://bytedance.feishu.cn/docs/doccnEy1GaIGSllbRa6HKIie3kh#RTUyv7\",children:\"React Hooks\\u5B9E\\u8DF5\"})})]})}function v(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(h,a)})):h(a)}var S=v;return y(C);})();\n;return Component;"
    },
    "_id": "post/2022-09-09-react-hooks-optm.md",
    "_raw": {
      "sourceFilePath": "post/2022-09-09-react-hooks-optm.md",
      "sourceFileName": "2022-09-09-react-hooks-optm.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2022-09-09-react-hooks-optm"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2022-09-09-react-hooks-optm",
    "slugAsParams": "2022-09-09-react-hooks-optm"
  },
  {
    "title": "SSR",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2022-09-10T00:00:00.000Z",
    "body": {
      "raw": "## SSR是什么？\n\n  \n\n**CSR**：Client-Side Render 客户端渲染\n\n- 页面初始加载的 HTML 页面中无网页展示内容，需要加载执行JavaScript 文件中的 React 代码，通过 JavaScript 渲染生成页面，同时，JavaScript 代码会完成页面交互事件的绑定，详细流程可参考下图\n    \n- 流程：用户请求--->服务器返回一个Dummy页面--->Dummy页面引导浏览器取回Js--->浏览器执行Js --->页面渲染(内容可见)\n    \n ![](assets/2022-09-10-SSR-base-20250119024006.png)\n    \n\n  \n\n**SSR**：Server-Side Render 服务端渲染\n\n- 服务端渲染的模式下，当用户第一次请求页面时，由服务器把需要的组件或页面渲染成 HTML 字符串，然后把它返回给客户端。客户端拿到手的，是可以直接渲染然后呈现给用户的 HTML 内容，客户端只负责解析 HTML ，不需要为了生成 DOM 内容自己再去跑一遍 JS 代码。使用服务端渲染的网站，可以说是“所见即所得”，页面上呈现的内容，在 html 源文件里也能找到。\n    \n- 流程：用户请求--->服务器返回一个渲染后的页面(内容可见)--->加载JS--->执行Js对页面进行Hydrate（作用是加载并执行 JS 文件内容，并将事件回调绑定到真实的 DOM 上。）\n    \n![](assets/2022-09-10-SSR-base-20250119024014.png)\n    \n\n![](assets/2022-09-10-SSR-base-20250119024021.png)\n\n  \n\n## 为什么要用SSR？\n\n**CSR缺点：**\n\n- 对SEO非常不友好\n    \n      为了节约成本，爬虫通常不会跟踪执行页面中的 Javascript 脚本。导致CSR站点的信息无法被搜索引擎正常收录。\n    \n      爬虫可以直接抓取渲染之后的页面，CSR 首次返回的 HTML 文档中，是空节点（root），不包含内容，爬虫就无法分析你的网站有什么内容，所以就无法给你好的排名。而 SSR 返回渲染之后的 HTML 片段，内容完整，所以能更好地被爬虫分析与索引。\n    \n- 首屏响应速度差\n    \n    - 当打包输出的Bundle尺寸较大时，网络不佳的情况下，下载Js代码的时间会较长。下载Bundle的过程中，浏览器中无法不显示任何信息。\n        \n- 兼容性问题\n    \n    - 不是所有的浏览器都支持/完整的支持Javascript；部分浏览器会刻意的关闭Js。在这些情况下，CSR应用程序可能会完全失效。\n        \n\n  \n\n**SSR优点：**\n\n- 更快的内容到达时间 (time-to-content)，用户将会更快速地看到完整渲染的页面\n    \n- 更好的 SEO，搜索引擎爬虫抓取工具可以直接查看完全渲染的页面\n    \n\n**SSR缺点：**\n\n- 对服务器性能消耗较高\n    \n- 项目复杂度变高，出问题需要在前端、node、后端三者之间找\n    \n- 需要考虑 SSR 机器的运维、申请、扩容，增加了运维成本（可以通过 Serverless 解决）\n    \n\n  \n\n**SSR + SPA 体验升级**\n\n第一次访问页面是服务端渲染，基于第一次访问后续的交互就是 `SPA` 的效果和体验，还不影响`SEO` 效果，这就有点完美了。\n\n我们把页面的展示内容和交互写在一起，**让代码执行两次。在服务器端执行一次，用于实现服务器端渲染，在客户端再执行一次，用于接管页面交互。**\n\n服务端只负责首次“渲染”（真正意义上，只有浏览器才能渲染页面，服务端其实是生成 HTML 内容），然后返回给客户端，客户端**接管**页面交互（事件绑定等逻辑），之后客户端路由切换时，直接通过 JS 代码来显示对应的内容，不再需要服务端渲染（只有页面刷新时会需要）\n\n但是要实现两种技术的结合，同时可以最大限度的重用代码（同构），减少开发维护成本，那就需要采用 `react` 或者 `vue` 等前端框架相结合 `node (ssr)` 来实现。\n\n  \n\n  \n\n## SSR原理\n\n### SSR流程\n\n整体来说 `react` 服务端渲染原理不复杂，其中最核心的内容就是同构。\n\n1. Node服务器接收客户端请求，得到当前的`req url path`,然后在已有的路由表内查找到对应的组件，获取组件所需数据，\n    \n2. 然后基于 `react` 内置的服务端渲染api `renderToString() or renderToNodeStream()` 把组件渲染为 `html字符串`或者 `stream 流`,（至此SSR完成）\n    \n3. 在把最终的html进行输出前需要将数据注入到浏览器端(注水Hydrate)，server 输出(response)后浏览器端可以得到数据(脱水)，\n    \n4. 浏览器开始进行渲染和节点对比，然后执行组件的`componentDidMount` 完成组件内事件绑定和一些交互，浏览器重用了服务端输出的 `html 节点`，整个流程结束。\n    \n\n![](assets/2022-09-10-SSR-base-20250119024033.png)\n\n**对比CSR**\n\n![](assets/2022-09-10-SSR-base-20250119024041.png)\n\n  \n\n### 虚拟DOM\n\nSSR 之所以能够实现，本质上是因为虚拟 DOM 的存在。\n\nReact 在做页面操作时，实际上不是直接操作 DOM，而是操作虚拟 DOM。这使得无法操作真实 DOM 的 node 服务器可以使用虚拟 DOM 转换成为字符串来完成对页面的构建。在 react 中，操作虚拟 DOM 转换成为字符串的方法是 [renderToString](https://reactjs.org/docs/react-dom-server.html#rendertostring) 。\n\n- 在服务器，我可以操作 JavaScript 对象，判断环境是服务器环境，我们把虚拟 DOM 映射成字符串输出；\n    \n- 在客户端，我也可以操作 JavaScript 对象，判断环境是客户端环境，我就直接将虚拟 DOM 映射成真实 DOM，完成页面挂载\n    \n\n  \n\n### 路由同构\n\n> 一套代码既可以在服务端运行又可以在客户端运行，这就是同构应用。\n> \n> 接下来的内容重点关注为什么需要同构，至于如何实现同构，后续再进行完善。。。\n\n  \n\nSSR 架构，我们需要让相同的 React 代码在客户端和服务器端各执行一次。React组件代码可以公用，但是router路由是不行的。这是由于在**服务器端需要通过请求路径**，找到路由组件，而在客户端需通过**浏览器中的网址（HashRouter、BrowserRouter）**，找到路由组件，是完全不同的两套机制，所以这部分代码是肯定无法公用。\n\n  \n\n  \n\n### 数据同构\n\n根据SSR的架构图可知，页面需要经过两次渲染，第一次渲染是服务端返回的 HTML 基本页面信息，第二次渲染则是客户端渲染。这两次渲染分别需要请求两次数据，我们需要保证，两次数据获取信息是相同的。\n\n保证数据同构的方法非常的简单，就是在服务端请求数据并渲染页面以后，将数据以全局变量的形式写入页面。客户端直接获取页面数据，完成渲染。\n\n  \n\n  \n\n## 适用场景\n\n1、比如企业级网站，   主要功能是展示而没有复杂的交互，并且需要良好的SEO，则这时我们就需要使用服务器端渲染；\n\n2、类似后台管理页面，   交互性比较强，不需要seo的考虑，那么就可以使用客户端渲染。\n\n  \n\n  \n\n## Reference\n\n[【长文慎入】一文吃透 React SSR 服务端渲染和同构原理](https://juejin.cn/post/6844903943902855176#heading-6)\n\n[React 中同构（SSR）原理脉络梳理](https://juejin.cn/post/6844903694870265870#heading-1)\n\n[SSR 基本原理与项目工程化](https://tech.bytedance.net/articles/11184#heading7)",
      "code": "var Component=(()=>{var t=Object.create;var l=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var m=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),R=(r,n)=>{for(var i in n)l(r,i,{get:n[i],enumerable:!0})},h=(r,n,i,A)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of p(n))!g.call(r,c)&&c!==i&&l(r,c,{get:()=>n[c],enumerable:!(A=o(n,c))||A.enumerable});return r};var M=(r,n,i)=>(i=r!=null?t(S(r)):{},h(n||!r||!r.__esModule?l(i,\"default\",{value:r,enumerable:!0}):i,r)),u=r=>h(l({},\"__esModule\",{value:!0}),r);var a=m((L,d)=>{d.exports=_jsx_runtime});var J={};R(J,{default:()=>O,frontmatter:()=>E});var e=M(a()),E={title:\"SSR\",subtitle:null,layout:\"post\",date:new Date(1662768e6),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function s(r){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",ul:\"ul\",li:\"li\",img:\"img\",code:\"code\",h3:\"h3\",ol:\"ol\",blockquote:\"blockquote\"},r.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"ssr\\u662F\\u4EC0\\u4E48\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ssr\\u662F\\u4EC0\\u4E48\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"SSR\\u662F\\u4EC0\\u4E48\\uFF1F\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"CSR\"}),\"\\uFF1AClient-Side Render \\u5BA2\\u6237\\u7AEF\\u6E32\\u67D3\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u9875\\u9762\\u521D\\u59CB\\u52A0\\u8F7D\\u7684 HTML \\u9875\\u9762\\u4E2D\\u65E0\\u7F51\\u9875\\u5C55\\u793A\\u5185\\u5BB9\\uFF0C\\u9700\\u8981\\u52A0\\u8F7D\\u6267\\u884CJavaScript \\u6587\\u4EF6\\u4E2D\\u7684 React \\u4EE3\\u7801\\uFF0C\\u901A\\u8FC7 JavaScript \\u6E32\\u67D3\\u751F\\u6210\\u9875\\u9762\\uFF0C\\u540C\\u65F6\\uFF0CJavaScript \\u4EE3\\u7801\\u4F1A\\u5B8C\\u6210\\u9875\\u9762\\u4EA4\\u4E92\\u4E8B\\u4EF6\\u7684\\u7ED1\\u5B9A\\uFF0C\\u8BE6\\u7EC6\\u6D41\\u7A0B\\u53EF\\u53C2\\u8003\\u4E0B\\u56FE\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6D41\\u7A0B\\uFF1A\\u7528\\u6237\\u8BF7\\u6C42--->\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u4E00\\u4E2ADummy\\u9875\\u9762--->Dummy\\u9875\\u9762\\u5F15\\u5BFC\\u6D4F\\u89C8\\u5668\\u53D6\\u56DEJs--->\\u6D4F\\u89C8\\u5668\\u6267\\u884CJs --->\\u9875\\u9762\\u6E32\\u67D3(\\u5185\\u5BB9\\u53EF\\u89C1)\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-10-SSR-base-20250119024006.png\",alt:\"\",width:\"1304\",height:\"957\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAJ1BMVEX0+fzu9vrL4/Lc7Pb///+EvOC/2emOwuTL3+pztN/08eq309/l3s4aWtJMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAL0lEQVR4nC3JWQoAMAjFwKjP2u3+5y1C8zUQJHlIwgyLGML4yMzKWoF38wA999UDEIMAqZDpcbwAAAAASUVORK5CYII=\"})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"SSR\"}),\"\\uFF1AServer-Side Render \\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u7684\\u6A21\\u5F0F\\u4E0B\\uFF0C\\u5F53\\u7528\\u6237\\u7B2C\\u4E00\\u6B21\\u8BF7\\u6C42\\u9875\\u9762\\u65F6\\uFF0C\\u7531\\u670D\\u52A1\\u5668\\u628A\\u9700\\u8981\\u7684\\u7EC4\\u4EF6\\u6216\\u9875\\u9762\\u6E32\\u67D3\\u6210 HTML \\u5B57\\u7B26\\u4E32\\uFF0C\\u7136\\u540E\\u628A\\u5B83\\u8FD4\\u56DE\\u7ED9\\u5BA2\\u6237\\u7AEF\\u3002\\u5BA2\\u6237\\u7AEF\\u62FF\\u5230\\u624B\\u7684\\uFF0C\\u662F\\u53EF\\u4EE5\\u76F4\\u63A5\\u6E32\\u67D3\\u7136\\u540E\\u5448\\u73B0\\u7ED9\\u7528\\u6237\\u7684 HTML \\u5185\\u5BB9\\uFF0C\\u5BA2\\u6237\\u7AEF\\u53EA\\u8D1F\\u8D23\\u89E3\\u6790 HTML \\uFF0C\\u4E0D\\u9700\\u8981\\u4E3A\\u4E86\\u751F\\u6210 DOM \\u5185\\u5BB9\\u81EA\\u5DF1\\u518D\\u53BB\\u8DD1\\u4E00\\u904D JS \\u4EE3\\u7801\\u3002\\u4F7F\\u7528\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u7684\\u7F51\\u7AD9\\uFF0C\\u53EF\\u4EE5\\u8BF4\\u662F\\u201C\\u6240\\u89C1\\u5373\\u6240\\u5F97\\u201D\\uFF0C\\u9875\\u9762\\u4E0A\\u5448\\u73B0\\u7684\\u5185\\u5BB9\\uFF0C\\u5728 html \\u6E90\\u6587\\u4EF6\\u91CC\\u4E5F\\u80FD\\u627E\\u5230\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6D41\\u7A0B\\uFF1A\\u7528\\u6237\\u8BF7\\u6C42--->\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u4E00\\u4E2A\\u6E32\\u67D3\\u540E\\u7684\\u9875\\u9762(\\u5185\\u5BB9\\u53EF\\u89C1)--->\\u52A0\\u8F7DJS--->\\u6267\\u884CJs\\u5BF9\\u9875\\u9762\\u8FDB\\u884CHydrate\\uFF08\\u4F5C\\u7528\\u662F\\u52A0\\u8F7D\\u5E76\\u6267\\u884C JS \\u6587\\u4EF6\\u5185\\u5BB9\\uFF0C\\u5E76\\u5C06\\u4E8B\\u4EF6\\u56DE\\u8C03\\u7ED1\\u5B9A\\u5230\\u771F\\u5B9E\\u7684 DOM \\u4E0A\\u3002\\uFF09\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-10-SSR-base-20250119024014.png\",alt:\"\",width:\"1200\",height:\"201\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAACVBMVEXx8fHl5eXh4eGMcsLgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEUlEQVR4nGNgYGBgYmRgYAIAABkABn+fqzsAAAAASUVORK5CYII=\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-10-SSR-base-20250119024021.png\",alt:\"\",width:\"1304\",height:\"921\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAJ1BMVEXy+Pvd7ff////o8/n09PCEveKQxebL2tvt6uL7/f7X5Oe62OnL3+0nW05OAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nBXGSRKAMBADsbZnTeD/76XQSdhW2AaOFC9/CD1BVVd3CenOnUk4ubmbHxEmAMkHupH5AAAAAElFTkSuQmCC\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u8981\\u7528ssr\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u4E3A\\u4EC0\\u4E48\\u8981\\u7528ssr\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u8981\\u7528SSR\\uFF1F\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"CSR\\u7F3A\\u70B9\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9SEO\\u975E\\u5E38\\u4E0D\\u53CB\\u597D\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\xA0\\xA0\\u4E3A\\u4E86\\u8282\\u7EA6\\u6210\\u672C\\uFF0C\\u722C\\u866B\\u901A\\u5E38\\u4E0D\\u4F1A\\u8DDF\\u8E2A\\u6267\\u884C\\u9875\\u9762\\u4E2D\\u7684 Javascript \\u811A\\u672C\\u3002\\u5BFC\\u81F4CSR\\u7AD9\\u70B9\\u7684\\u4FE1\\u606F\\u65E0\\u6CD5\\u88AB\\u641C\\u7D22\\u5F15\\u64CE\\u6B63\\u5E38\\u6536\\u5F55\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\xA0\\xA0\\u722C\\u866B\\u53EF\\u4EE5\\u76F4\\u63A5\\u6293\\u53D6\\u6E32\\u67D3\\u4E4B\\u540E\\u7684\\u9875\\u9762\\uFF0CCSR \\u9996\\u6B21\\u8FD4\\u56DE\\u7684 HTML \\u6587\\u6863\\u4E2D\\uFF0C\\u662F\\u7A7A\\u8282\\u70B9\\uFF08root\\uFF09\\uFF0C\\u4E0D\\u5305\\u542B\\u5185\\u5BB9\\uFF0C\\u722C\\u866B\\u5C31\\u65E0\\u6CD5\\u5206\\u6790\\u4F60\\u7684\\u7F51\\u7AD9\\u6709\\u4EC0\\u4E48\\u5185\\u5BB9\\uFF0C\\u6240\\u4EE5\\u5C31\\u65E0\\u6CD5\\u7ED9\\u4F60\\u597D\\u7684\\u6392\\u540D\\u3002\\u800C SSR \\u8FD4\\u56DE\\u6E32\\u67D3\\u4E4B\\u540E\\u7684 HTML \\u7247\\u6BB5\\uFF0C\\u5185\\u5BB9\\u5B8C\\u6574\\uFF0C\\u6240\\u4EE5\\u80FD\\u66F4\\u597D\\u5730\\u88AB\\u722C\\u866B\\u5206\\u6790\\u4E0E\\u7D22\\u5F15\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u9996\\u5C4F\\u54CD\\u5E94\\u901F\\u5EA6\\u5DEE\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5F53\\u6253\\u5305\\u8F93\\u51FA\\u7684Bundle\\u5C3A\\u5BF8\\u8F83\\u5927\\u65F6\\uFF0C\\u7F51\\u7EDC\\u4E0D\\u4F73\\u7684\\u60C5\\u51B5\\u4E0B\\uFF0C\\u4E0B\\u8F7DJs\\u4EE3\\u7801\\u7684\\u65F6\\u95F4\\u4F1A\\u8F83\\u957F\\u3002\\u4E0B\\u8F7DBundle\\u7684\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u6D4F\\u89C8\\u5668\\u4E2D\\u65E0\\u6CD5\\u4E0D\\u663E\\u793A\\u4EFB\\u4F55\\u4FE1\\u606F\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u517C\\u5BB9\\u6027\\u95EE\\u9898\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u4E0D\\u662F\\u6240\\u6709\\u7684\\u6D4F\\u89C8\\u5668\\u90FD\\u652F\\u6301/\\u5B8C\\u6574\\u7684\\u652F\\u6301Javascript\\uFF1B\\u90E8\\u5206\\u6D4F\\u89C8\\u5668\\u4F1A\\u523B\\u610F\\u7684\\u5173\\u95EDJs\\u3002\\u5728\\u8FD9\\u4E9B\\u60C5\\u51B5\\u4E0B\\uFF0CCSR\\u5E94\\u7528\\u7A0B\\u5E8F\\u53EF\\u80FD\\u4F1A\\u5B8C\\u5168\\u5931\\u6548\\u3002\"}),`\n`]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"SSR\\u4F18\\u70B9\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u66F4\\u5FEB\\u7684\\u5185\\u5BB9\\u5230\\u8FBE\\u65F6\\u95F4 (time-to-content)\\uFF0C\\u7528\\u6237\\u5C06\\u4F1A\\u66F4\\u5FEB\\u901F\\u5730\\u770B\\u5230\\u5B8C\\u6574\\u6E32\\u67D3\\u7684\\u9875\\u9762\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u66F4\\u597D\\u7684 SEO\\uFF0C\\u641C\\u7D22\\u5F15\\u64CE\\u722C\\u866B\\u6293\\u53D6\\u5DE5\\u5177\\u53EF\\u4EE5\\u76F4\\u63A5\\u67E5\\u770B\\u5B8C\\u5168\\u6E32\\u67D3\\u7684\\u9875\\u9762\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"SSR\\u7F3A\\u70B9\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9\\u670D\\u52A1\\u5668\\u6027\\u80FD\\u6D88\\u8017\\u8F83\\u9AD8\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u9879\\u76EE\\u590D\\u6742\\u5EA6\\u53D8\\u9AD8\\uFF0C\\u51FA\\u95EE\\u9898\\u9700\\u8981\\u5728\\u524D\\u7AEF\\u3001node\\u3001\\u540E\\u7AEF\\u4E09\\u8005\\u4E4B\\u95F4\\u627E\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u9700\\u8981\\u8003\\u8651 SSR \\u673A\\u5668\\u7684\\u8FD0\\u7EF4\\u3001\\u7533\\u8BF7\\u3001\\u6269\\u5BB9\\uFF0C\\u589E\\u52A0\\u4E86\\u8FD0\\u7EF4\\u6210\\u672C\\uFF08\\u53EF\\u4EE5\\u901A\\u8FC7 Serverless \\u89E3\\u51B3\\uFF09\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"SSR + SPA \\u4F53\\u9A8C\\u5347\\u7EA7\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7B2C\\u4E00\\u6B21\\u8BBF\\u95EE\\u9875\\u9762\\u662F\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\uFF0C\\u57FA\\u4E8E\\u7B2C\\u4E00\\u6B21\\u8BBF\\u95EE\\u540E\\u7EED\\u7684\\u4EA4\\u4E92\\u5C31\\u662F \",(0,e.jsx)(n.code,{children:\"SPA\"}),\" \\u7684\\u6548\\u679C\\u548C\\u4F53\\u9A8C\\uFF0C\\u8FD8\\u4E0D\\u5F71\\u54CD\",(0,e.jsx)(n.code,{children:\"SEO\"}),\" \\u6548\\u679C\\uFF0C\\u8FD9\\u5C31\\u6709\\u70B9\\u5B8C\\u7F8E\\u4E86\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6211\\u4EEC\\u628A\\u9875\\u9762\\u7684\\u5C55\\u793A\\u5185\\u5BB9\\u548C\\u4EA4\\u4E92\\u5199\\u5728\\u4E00\\u8D77\\uFF0C\",(0,e.jsx)(n.strong,{children:\"\\u8BA9\\u4EE3\\u7801\\u6267\\u884C\\u4E24\\u6B21\\u3002\\u5728\\u670D\\u52A1\\u5668\\u7AEF\\u6267\\u884C\\u4E00\\u6B21\\uFF0C\\u7528\\u4E8E\\u5B9E\\u73B0\\u670D\\u52A1\\u5668\\u7AEF\\u6E32\\u67D3\\uFF0C\\u5728\\u5BA2\\u6237\\u7AEF\\u518D\\u6267\\u884C\\u4E00\\u6B21\\uFF0C\\u7528\\u4E8E\\u63A5\\u7BA1\\u9875\\u9762\\u4EA4\\u4E92\\u3002\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u670D\\u52A1\\u7AEF\\u53EA\\u8D1F\\u8D23\\u9996\\u6B21\\u201C\\u6E32\\u67D3\\u201D\\uFF08\\u771F\\u6B63\\u610F\\u4E49\\u4E0A\\uFF0C\\u53EA\\u6709\\u6D4F\\u89C8\\u5668\\u624D\\u80FD\\u6E32\\u67D3\\u9875\\u9762\\uFF0C\\u670D\\u52A1\\u7AEF\\u5176\\u5B9E\\u662F\\u751F\\u6210 HTML \\u5185\\u5BB9\\uFF09\\uFF0C\\u7136\\u540E\\u8FD4\\u56DE\\u7ED9\\u5BA2\\u6237\\u7AEF\\uFF0C\\u5BA2\\u6237\\u7AEF\",(0,e.jsx)(n.strong,{children:\"\\u63A5\\u7BA1\"}),\"\\u9875\\u9762\\u4EA4\\u4E92\\uFF08\\u4E8B\\u4EF6\\u7ED1\\u5B9A\\u7B49\\u903B\\u8F91\\uFF09\\uFF0C\\u4E4B\\u540E\\u5BA2\\u6237\\u7AEF\\u8DEF\\u7531\\u5207\\u6362\\u65F6\\uFF0C\\u76F4\\u63A5\\u901A\\u8FC7 JS \\u4EE3\\u7801\\u6765\\u663E\\u793A\\u5BF9\\u5E94\\u7684\\u5185\\u5BB9\\uFF0C\\u4E0D\\u518D\\u9700\\u8981\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\uFF08\\u53EA\\u6709\\u9875\\u9762\\u5237\\u65B0\\u65F6\\u4F1A\\u9700\\u8981\\uFF09\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4F46\\u662F\\u8981\\u5B9E\\u73B0\\u4E24\\u79CD\\u6280\\u672F\\u7684\\u7ED3\\u5408\\uFF0C\\u540C\\u65F6\\u53EF\\u4EE5\\u6700\\u5927\\u9650\\u5EA6\\u7684\\u91CD\\u7528\\u4EE3\\u7801\\uFF08\\u540C\\u6784\\uFF09\\uFF0C\\u51CF\\u5C11\\u5F00\\u53D1\\u7EF4\\u62A4\\u6210\\u672C\\uFF0C\\u90A3\\u5C31\\u9700\\u8981\\u91C7\\u7528 \",(0,e.jsx)(n.code,{children:\"react\"}),\" \\u6216\\u8005 \",(0,e.jsx)(n.code,{children:\"vue\"}),\" \\u7B49\\u524D\\u7AEF\\u6846\\u67B6\\u76F8\\u7ED3\\u5408 \",(0,e.jsx)(n.code,{children:\"node (ssr)\"}),\" \\u6765\\u5B9E\\u73B0\\u3002\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"ssr\\u539F\\u7406\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ssr\\u539F\\u7406\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"SSR\\u539F\\u7406\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"ssr\\u6D41\\u7A0B\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ssr\\u6D41\\u7A0B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"SSR\\u6D41\\u7A0B\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6574\\u4F53\\u6765\\u8BF4 \",(0,e.jsx)(n.code,{children:\"react\"}),\" \\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u539F\\u7406\\u4E0D\\u590D\\u6742\\uFF0C\\u5176\\u4E2D\\u6700\\u6838\\u5FC3\\u7684\\u5185\\u5BB9\\u5C31\\u662F\\u540C\\u6784\\u3002\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"Node\\u670D\\u52A1\\u5668\\u63A5\\u6536\\u5BA2\\u6237\\u7AEF\\u8BF7\\u6C42\\uFF0C\\u5F97\\u5230\\u5F53\\u524D\\u7684\",(0,e.jsx)(n.code,{children:\"req url path\"}),\",\\u7136\\u540E\\u5728\\u5DF2\\u6709\\u7684\\u8DEF\\u7531\\u8868\\u5185\\u67E5\\u627E\\u5230\\u5BF9\\u5E94\\u7684\\u7EC4\\u4EF6\\uFF0C\\u83B7\\u53D6\\u7EC4\\u4EF6\\u6240\\u9700\\u6570\\u636E\\uFF0C\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7136\\u540E\\u57FA\\u4E8E \",(0,e.jsx)(n.code,{children:\"react\"}),\" \\u5185\\u7F6E\\u7684\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3api \",(0,e.jsx)(n.code,{children:\"renderToString() or renderToNodeStream()\"}),\" \\u628A\\u7EC4\\u4EF6\\u6E32\\u67D3\\u4E3A \",(0,e.jsx)(n.code,{children:\"html\\u5B57\\u7B26\\u4E32\"}),\"\\u6216\\u8005 \",(0,e.jsx)(n.code,{children:\"stream \\u6D41\"}),\",\\uFF08\\u81F3\\u6B64SSR\\u5B8C\\u6210\\uFF09\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u628A\\u6700\\u7EC8\\u7684html\\u8FDB\\u884C\\u8F93\\u51FA\\u524D\\u9700\\u8981\\u5C06\\u6570\\u636E\\u6CE8\\u5165\\u5230\\u6D4F\\u89C8\\u5668\\u7AEF(\\u6CE8\\u6C34Hydrate)\\uFF0Cserver \\u8F93\\u51FA(response)\\u540E\\u6D4F\\u89C8\\u5668\\u7AEF\\u53EF\\u4EE5\\u5F97\\u5230\\u6570\\u636E(\\u8131\\u6C34)\\uFF0C\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6D4F\\u89C8\\u5668\\u5F00\\u59CB\\u8FDB\\u884C\\u6E32\\u67D3\\u548C\\u8282\\u70B9\\u5BF9\\u6BD4\\uFF0C\\u7136\\u540E\\u6267\\u884C\\u7EC4\\u4EF6\\u7684\",(0,e.jsx)(n.code,{children:\"componentDidMount\"}),\" \\u5B8C\\u6210\\u7EC4\\u4EF6\\u5185\\u4E8B\\u4EF6\\u7ED1\\u5B9A\\u548C\\u4E00\\u4E9B\\u4EA4\\u4E92\\uFF0C\\u6D4F\\u89C8\\u5668\\u91CD\\u7528\\u4E86\\u670D\\u52A1\\u7AEF\\u8F93\\u51FA\\u7684 \",(0,e.jsx)(n.code,{children:\"html \\u8282\\u70B9\"}),\"\\uFF0C\\u6574\\u4E2A\\u6D41\\u7A0B\\u7ED3\\u675F\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-10-SSR-base-20250119024033.png\",alt:\"\",width:\"1304\",height:\"939\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAIVBMVEX9/v/v8fva3vHo7PrT2/S5xO3FzvD19vnK0/KptuuerejcigIpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAALElEQVR4nAXBhwHAQBDCMAPXPvsPHAlsmwWW6URgVcthv54TkHdTeyJdNSr9D7EAqifGXjoAAAAASUVORK5CYII=\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u5BF9\\u6BD4CSR\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-10-SSR-base-20250119024041.png\",alt:\"\",width:\"794\",height:\"893\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAJCAMAAAA4jZ0cAAAAUVBMVEVMaXHLIiXKJSWxN0POOTrMKCjTIx9mTl7MLi7XGhrQNjfOLC7POz4Pn//XJyLNP0HOKysMpf9/W4pqZaHPKyvOSErQGxsYlP83g+E7fdXmHhIlwNl0AAAAG3RSTlMAIikgjVpkBUYJwnytNJ9sLxRcupJ/Nx94SXxcotBEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQ0lEQVR4nBXJRxKAIAAEwSEuQQRz+P9DLfvasDRxNWDdHM8tiPNJfC3ZT0HdD3I/EnUeaC8Bib8SsRrkS8LYDCk4hD5rmAJOmid6UAAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u865A\\u62DFdom\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u865A\\u62DFdom\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u865A\\u62DFDOM\"]}),`\n`,(0,e.jsx)(n.p,{children:\"SSR \\u4E4B\\u6240\\u4EE5\\u80FD\\u591F\\u5B9E\\u73B0\\uFF0C\\u672C\\u8D28\\u4E0A\\u662F\\u56E0\\u4E3A\\u865A\\u62DF DOM \\u7684\\u5B58\\u5728\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"React \\u5728\\u505A\\u9875\\u9762\\u64CD\\u4F5C\\u65F6\\uFF0C\\u5B9E\\u9645\\u4E0A\\u4E0D\\u662F\\u76F4\\u63A5\\u64CD\\u4F5C DOM\\uFF0C\\u800C\\u662F\\u64CD\\u4F5C\\u865A\\u62DF DOM\\u3002\\u8FD9\\u4F7F\\u5F97\\u65E0\\u6CD5\\u64CD\\u4F5C\\u771F\\u5B9E DOM \\u7684 node \\u670D\\u52A1\\u5668\\u53EF\\u4EE5\\u4F7F\\u7528\\u865A\\u62DF DOM \\u8F6C\\u6362\\u6210\\u4E3A\\u5B57\\u7B26\\u4E32\\u6765\\u5B8C\\u6210\\u5BF9\\u9875\\u9762\\u7684\\u6784\\u5EFA\\u3002\\u5728 react \\u4E2D\\uFF0C\\u64CD\\u4F5C\\u865A\\u62DF DOM \\u8F6C\\u6362\\u6210\\u4E3A\\u5B57\\u7B26\\u4E32\\u7684\\u65B9\\u6CD5\\u662F \",(0,e.jsx)(n.a,{href:\"https://reactjs.org/docs/react-dom-server.html#rendertostring\",children:\"renderToString\"}),\" \\u3002\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u670D\\u52A1\\u5668\\uFF0C\\u6211\\u53EF\\u4EE5\\u64CD\\u4F5C JavaScript \\u5BF9\\u8C61\\uFF0C\\u5224\\u65AD\\u73AF\\u5883\\u662F\\u670D\\u52A1\\u5668\\u73AF\\u5883\\uFF0C\\u6211\\u4EEC\\u628A\\u865A\\u62DF DOM \\u6620\\u5C04\\u6210\\u5B57\\u7B26\\u4E32\\u8F93\\u51FA\\uFF1B\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u5BA2\\u6237\\u7AEF\\uFF0C\\u6211\\u4E5F\\u53EF\\u4EE5\\u64CD\\u4F5C JavaScript \\u5BF9\\u8C61\\uFF0C\\u5224\\u65AD\\u73AF\\u5883\\u662F\\u5BA2\\u6237\\u7AEF\\u73AF\\u5883\\uFF0C\\u6211\\u5C31\\u76F4\\u63A5\\u5C06\\u865A\\u62DF DOM \\u6620\\u5C04\\u6210\\u771F\\u5B9E DOM\\uFF0C\\u5B8C\\u6210\\u9875\\u9762\\u6302\\u8F7D\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u8DEF\\u7531\\u540C\\u6784\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u8DEF\\u7531\\u540C\\u6784\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u8DEF\\u7531\\u540C\\u6784\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u4E00\\u5957\\u4EE3\\u7801\\u65E2\\u53EF\\u4EE5\\u5728\\u670D\\u52A1\\u7AEF\\u8FD0\\u884C\\u53C8\\u53EF\\u4EE5\\u5728\\u5BA2\\u6237\\u7AEF\\u8FD0\\u884C\\uFF0C\\u8FD9\\u5C31\\u662F\\u540C\\u6784\\u5E94\\u7528\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u63A5\\u4E0B\\u6765\\u7684\\u5185\\u5BB9\\u91CD\\u70B9\\u5173\\u6CE8\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u540C\\u6784\\uFF0C\\u81F3\\u4E8E\\u5982\\u4F55\\u5B9E\\u73B0\\u540C\\u6784\\uFF0C\\u540E\\u7EED\\u518D\\u8FDB\\u884C\\u5B8C\\u5584\\u3002\\u3002\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"SSR \\u67B6\\u6784\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u8BA9\\u76F8\\u540C\\u7684 React \\u4EE3\\u7801\\u5728\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u7AEF\\u5404\\u6267\\u884C\\u4E00\\u6B21\\u3002React\\u7EC4\\u4EF6\\u4EE3\\u7801\\u53EF\\u4EE5\\u516C\\u7528\\uFF0C\\u4F46\\u662Frouter\\u8DEF\\u7531\\u662F\\u4E0D\\u884C\\u7684\\u3002\\u8FD9\\u662F\\u7531\\u4E8E\\u5728\",(0,e.jsx)(n.strong,{children:\"\\u670D\\u52A1\\u5668\\u7AEF\\u9700\\u8981\\u901A\\u8FC7\\u8BF7\\u6C42\\u8DEF\\u5F84\"}),\"\\uFF0C\\u627E\\u5230\\u8DEF\\u7531\\u7EC4\\u4EF6\\uFF0C\\u800C\\u5728\\u5BA2\\u6237\\u7AEF\\u9700\\u901A\\u8FC7\",(0,e.jsx)(n.strong,{children:\"\\u6D4F\\u89C8\\u5668\\u4E2D\\u7684\\u7F51\\u5740\\uFF08HashRouter\\u3001BrowserRouter\\uFF09\"}),\"\\uFF0C\\u627E\\u5230\\u8DEF\\u7531\\u7EC4\\u4EF6\\uFF0C\\u662F\\u5B8C\\u5168\\u4E0D\\u540C\\u7684\\u4E24\\u5957\\u673A\\u5236\\uFF0C\\u6240\\u4EE5\\u8FD9\\u90E8\\u5206\\u4EE3\\u7801\\u662F\\u80AF\\u5B9A\\u65E0\\u6CD5\\u516C\\u7528\\u3002\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6570\\u636E\\u540C\\u6784\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u6570\\u636E\\u540C\\u6784\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6570\\u636E\\u540C\\u6784\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6839\\u636ESSR\\u7684\\u67B6\\u6784\\u56FE\\u53EF\\u77E5\\uFF0C\\u9875\\u9762\\u9700\\u8981\\u7ECF\\u8FC7\\u4E24\\u6B21\\u6E32\\u67D3\\uFF0C\\u7B2C\\u4E00\\u6B21\\u6E32\\u67D3\\u662F\\u670D\\u52A1\\u7AEF\\u8FD4\\u56DE\\u7684 HTML \\u57FA\\u672C\\u9875\\u9762\\u4FE1\\u606F\\uFF0C\\u7B2C\\u4E8C\\u6B21\\u6E32\\u67D3\\u5219\\u662F\\u5BA2\\u6237\\u7AEF\\u6E32\\u67D3\\u3002\\u8FD9\\u4E24\\u6B21\\u6E32\\u67D3\\u5206\\u522B\\u9700\\u8981\\u8BF7\\u6C42\\u4E24\\u6B21\\u6570\\u636E\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u4FDD\\u8BC1\\uFF0C\\u4E24\\u6B21\\u6570\\u636E\\u83B7\\u53D6\\u4FE1\\u606F\\u662F\\u76F8\\u540C\\u7684\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4FDD\\u8BC1\\u6570\\u636E\\u540C\\u6784\\u7684\\u65B9\\u6CD5\\u975E\\u5E38\\u7684\\u7B80\\u5355\\uFF0C\\u5C31\\u662F\\u5728\\u670D\\u52A1\\u7AEF\\u8BF7\\u6C42\\u6570\\u636E\\u5E76\\u6E32\\u67D3\\u9875\\u9762\\u4EE5\\u540E\\uFF0C\\u5C06\\u6570\\u636E\\u4EE5\\u5168\\u5C40\\u53D8\\u91CF\\u7684\\u5F62\\u5F0F\\u5199\\u5165\\u9875\\u9762\\u3002\\u5BA2\\u6237\\u7AEF\\u76F4\\u63A5\\u83B7\\u53D6\\u9875\\u9762\\u6570\\u636E\\uFF0C\\u5B8C\\u6210\\u6E32\\u67D3\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u9002\\u7528\\u573A\\u666F\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u9002\\u7528\\u573A\\u666F\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u9002\\u7528\\u573A\\u666F\"]}),`\n`,(0,e.jsx)(n.p,{children:\"1\\u3001\\u6BD4\\u5982\\u4F01\\u4E1A\\u7EA7\\u7F51\\u7AD9\\uFF0C \\u2003 \\u4E3B\\u8981\\u529F\\u80FD\\u662F\\u5C55\\u793A\\u800C\\u6CA1\\u6709\\u590D\\u6742\\u7684\\u4EA4\\u4E92\\uFF0C\\u5E76\\u4E14\\u9700\\u8981\\u826F\\u597D\\u7684SEO\\uFF0C\\u5219\\u8FD9\\u65F6\\u6211\\u4EEC\\u5C31\\u9700\\u8981\\u4F7F\\u7528\\u670D\\u52A1\\u5668\\u7AEF\\u6E32\\u67D3\\uFF1B\"}),`\n`,(0,e.jsx)(n.p,{children:\"2\\u3001\\u7C7B\\u4F3C\\u540E\\u53F0\\u7BA1\\u7406\\u9875\\u9762\\uFF0C \\u2003 \\u4EA4\\u4E92\\u6027\\u6BD4\\u8F83\\u5F3A\\uFF0C\\u4E0D\\u9700\\u8981seo\\u7684\\u8003\\u8651\\uFF0C\\u90A3\\u4E48\\u5C31\\u53EF\\u4EE5\\u4F7F\\u7528\\u5BA2\\u6237\\u7AEF\\u6E32\\u67D3\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"reference\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#reference\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://juejin.cn/post/6844903943902855176#heading-6\",children:\"\\u3010\\u957F\\u6587\\u614E\\u5165\\u3011\\u4E00\\u6587\\u5403\\u900F React SSR \\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u548C\\u540C\\u6784\\u539F\\u7406\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://juejin.cn/post/6844903694870265870#heading-1\",children:\"React \\u4E2D\\u540C\\u6784\\uFF08SSR\\uFF09\\u539F\\u7406\\u8109\\u7EDC\\u68B3\\u7406\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://tech.bytedance.net/articles/11184#heading7\",children:\"SSR \\u57FA\\u672C\\u539F\\u7406\\u4E0E\\u9879\\u76EE\\u5DE5\\u7A0B\\u5316\"})})]})}function D(r={}){let{wrapper:n}=r.components||{};return n?(0,e.jsx)(n,Object.assign({},r,{children:(0,e.jsx)(s,r)})):s(r)}var O=D;return u(J);})();\n;return Component;"
    },
    "_id": "post/2022-09-10-SSR-base.md",
    "_raw": {
      "sourceFilePath": "post/2022-09-10-SSR-base.md",
      "sourceFileName": "2022-09-10-SSR-base.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2022-09-10-SSR-base"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2022-09-10-SSR-base",
    "slugAsParams": "2022-09-10-SSR-base"
  },
  {
    "title": "从前端角度理解 Ferry",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2022-09-11T00:00:00.000Z",
    "body": {
      "raw": "## Ferry是什么？\n\n**一句话描述：****Ferry** **是一个致力于提高前后端协作开发效率的通信框架。**\n\n从接口角度看，Ferry 是一个 HTTP 框架；\n\n从开发角度看，Ferry 又是一个 RPC 框架。\n\nFerry 在服务 HTTP 接口的同时，提供超 RPC 的开发体验。\n\n  \n\n![|300](assets/2022-09-11-ferry-20250119024157.png)\n\n## 为什么需要Ferry？\n\n由于，HTTP 与 RPC 开发隔离。\n\n后端：\n\n- 使用 RPC 框架，通过 IDL 的方式来描述和管理接口文档。\n    \n- IDL 能简洁清晰地描述接口\n    \n- 比较统一，基本成熟\n    \n\n前端：\n\n- 没有接口描述文档 | wiki、docs | Yapi、Swagger\n    \n- key-value类型的数据格式表述能力单一，不适合描述接口\n    \n- 管理混乱，仍处于探索阶段\n    \n\n  \n\n因此，Ferry 从 RPC 框架的开发模式入手，**把底层的 RPC 请求换成 HTTP 请求，从而打通 HTTP 和 RPC。**对后端的 IDL 进行扩展，使得 RPC 的 IDL 能用来描述 HTTP 接口\n\n  \n\n> RPC 请求和 HTTP 请求的区别是有没有对数据进行特殊的序列化/反序列化处理，可以参考另一篇文章： [RPC 的序列化了解一下](https://bytekm.bytedance.net/kmf/articleDetail/5376)\n\n\n| ![](assets/2022-09-11-ferry-20250119024215.png) | ![](assets/2022-09-11-ferry-20250119024220.png) |\n| ---- | ---- |\n\n\n\n\n## Ferry能做什么？\n\n包装RPC接口，利用IDL注释注解扩展HTTP所需信息，自动生成Client代码，发起HTTP请求。\n\n同时帮你做了JS的数据类型检测+Mock（没用过，一般用Mock插件，所以这里不做深入了解）\n\n其中，黑色为传统 RPC 的功能，红色为传统 RPC 不具备的功能，即超 RPC 的功能。\n\n![|500](assets/2022-09-11-ferry-20250119024238.png)\n\n## So，Ferry是如何做的？\n\n### Ferry IDL\n\nFerry IDL 提供了一种用 RPC IDL 来描述 HTTP 接口的方式。\n\n> **Q1：扩展****RPC****的****IDL****，那还缺乏 HTTP 接口的哪些信息？**\n\nA1：由于 RPC 框架一般使用 TCP 进行通信，HTTP 里面的东西基本都是缺乏的。为了方便理解，我们可以先聚焦于发送一个 HTTP 请求的必要信息，比如：URL 和 Method。\n\n> **Q2：怎样在** **RPC** **的** **IDL** **里面优雅地加入 HTTP 接口的信息？**\n\nA2：要保证扩展后的IDL不影响RPC 框架解析器的解析，只能通过注释或注解的形式。\n\n1. 把 HTTP 信息写到注释里面\n    \n2. 把 HTTP 信息写到注解里面\n    \n\n一句话总结，就是继承并扩展IDL，补充原本RPC接口中HTTP请求需要的信息。\n\n  \n\n### Ferry Client\n\nferry-cli的功能是根据Ferry IDL文件生成client代码，模块结构如下图所示：\n\nferry-parser根据Ferry IDL文件生成AST，JS Generator、TS Generator和Mock Generator模块根据AST分别生成JS lib、TS lib和mock代码。\n\n![|500](assets/2022-09-11-ferry-20250119024302.png)\n\n![|500](assets/2022-09-11-ferry-20250119024313.png)\n\n#### 前端RPC调用\n    \n\nferry-cli生成的JS版和TS版lib代码封装了底层通信细节，开发者可以使用传统RPC接口的写法来调用lib里面的接口。\n\n```JavaScript\nconst client = new UserServiceClient();\nclient.Store({ uid: '20190606', name: 'lance' })\n.then((resp) => {});\n```\n\n#### 前端语法检测\n    \n\nJS 是一种弱类型语言，无法在编译或运行时检测数据类型的合法性。开发者给接口传入不符合预期的数据时，**JS 不会有任何提示，这显著地提高了发现和定位问题的成本**。\n\nFerry 可以自动对 JS 的接口数据类型进行合法性检测。\n\n从理论上看，由于能从 Ferry IDL 文件获得数据的预期类型，因此可以对实际数据的类型进行合法性检测。但是，实现起来，并不是一件简单的事情。至少需要解决以下几个问题：\n\n- 怎么处理 JS 中不存在的类型，比如“enum”和“struct”等\n    \n- 怎么处理类型嵌套引用的问题，比如“struct”引用“map”，“map”又引用“list”，“list”又引用“struct”。\n    \n- 生成代码的时候可以执行逻辑，生成的代码运行的时候又可以执行逻辑，怎样拆解逻辑可以使得生成的代码简洁高效。\n    \n\n下图展示了 Ferry 实现类型检测的主要逻辑：\n\n![|600](assets/2022-09-11-ferry-20250119024413.png)\n\n对于上图的例子，整个调用链路为：\n\n1. 接口调用时，调用“_checkStructType”检测传入数据“req”\n    \n2. “_checkStructType”调用“_checkStructOfStoreRequest”检测结构体“StoreRequest”\n    \n3. “_checkStructOfStoreRequest”分别调用“_checkStructType”、“_checkBaseType”和“_checkListType”检测各个字段\n    \n4. “_checkListType”调用“_checkBaseType”检测“list”的成员类型\n    \n5. “_checkStructType”调用“_checkStructOfUserProfile”检测结构体“UserProfile”\n    \n\n依次反复，直至结束。\n\n#### 代码裁剪\n    \n\nFerry 的客户端代码包含了类型检测和接口模拟的代码，这两部分代码是不应该带上线的。另外，一个 IDL 文件里面只有部分接口会被用到，其他不被使用的接口的代码也不应该带上线。Ferry 需要把这些代码裁剪掉。\n\nFerry 采用 **Webpack** **插件**来实现代码裁剪。\n\n使用：webpack中配置\n\n```JavaScript\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: [/node_modules/],\n        use: [\n          // 注意，需要把这个 loader 放在最后面，使其可以最先执行\n          {\n            loader: '@byted-ferry/shake-loader',\n            options: {\n              targetDir: 'api-lib'\n            }\n          }\n        ]\n      }\n    ],\n  },\n}\n```\n\n> 原理\n\n目的虽然是代码裁剪，但实现的方法其实是代码转化。\n\n![|600](assets/2022-09-11-ferry-20250119024436.png)\n\n利用 ts-loader 的“getCustomTransformers”配置项，在 TS 或 JS 代码被 ts-loader 处理前就进行转化。转化方法是用 TS 原生的 API 遍历 && 判断 && 更新 && 生成 AST 节点。\n\n  \n\n## 源码解读\n\n### 前置知识AST\n\n> [用JS解释JS！详解AST及其应用](https://mp.weixin.qq.com/s/SlXIjnwbHS_enHXlZAnMMw)\n\nAST工作流程\n![](assets/2022-09-11-ferry-20250119024453.png)\n\n  \n\n### Ferry Client\n\n> TS生成器和JS生成器同理，在此以JS为例\n\nJS生成器：\n\n1. 调用ferry parser生成AST，\n    \n2. 将AST里的类型映射到JS类型，根据不同类型生对应代码。整个生成的过程其实就是字符串拼接的过程，最后再写出文件。\n    \n3. 在拼接过程中，检测是否存在enum、struct等js不存在的类型，有则标记，并拼接类型检测函数的调用。\n    \n4. 同时在最后生成`_util.js`时，添加类型检测函数的定义\n    \n\n![|500](assets/2022-09-11-ferry-20250119024505.png)\n\n拼接js文件\n\n![|500](assets/2022-09-11-ferry-20250119024602.png)\n\n![|500](assets/2022-09-11-ferry-20250119024612.png)\n\n根据标记，生成_util.js中的校验函数\n\n![|500](assets/2022-09-11-ferry-20250119024621.png)\n\n生成效果\n\n![|500](assets/2022-09-11-ferry-20250119024631.png)\n\n  \n\n### 代码裁剪shake-loader\n\n**babel包的用途：****https://babeljs.io/docs/en/babel-template**\n\n1. 把源代码解析为AST（@babel-parser）\n    \n2. 对AST进行遍历（@babel-traverse）\n    \n3. AST转为code（@babel-generator）\n    \n\n主要裁剪函数：在遍历过程中查找是否调用了检测和mock函数，删除这部分代码。\n\n![|500](assets/2022-09-11-ferry-20250119024646.png)\n\n  \n\n## 总结\n\n对于前端来说还是使用该框架就是从远程拉取thrift文件▶️自动编译生成接口调用代码（ferryclient）\n\n省去了原本手动定义接口的步骤，并且用类RPC调用接口的方式发起请求。\n\n流程梳理\n\n1. 将thrift编译为AST（Ferry parser）\n    \n2. 交由JS Generator、TS Generator和Mock Generato等~~拼接字符串~~解析为相应接口和函数定义（Ferry Client）\n    \n3. 解析同时生成类型检测函数，并在~~拼接字符串~~解析时添加调用代码。\n    \n4. ~~mock功能暂未使用到，不做了解~~\n    \n5. 打包裁剪无用代码，在项目webpack中配置shake-loader插件，在打包时最先执行，利用babel包解析->遍历AST->删除mock及类型检测函数相关代码->生成代码。",
      "code": "var Component=(()=>{var s=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var o=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var E=(A,n)=>()=>(n||A((n={exports:{}}).exports,n),n.exports),C=(A,n)=>{for(var r in n)l(A,r,{get:n[r],enumerable:!0})},c=(A,n,r,a)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let i of g(n))!m.call(A,i)&&i!==r&&l(A,i,{get:()=>n[i],enumerable:!(a=p(n,i))||a.enumerable});return A};var y=(A,n,r)=>(r=A!=null?s(o(A)):{},c(n||!A||!A.__esModule?l(r,\"default\",{value:A,enumerable:!0}):r,A)),u=A=>c(l({},\"__esModule\",{value:!0}),A);var d=E((S,h)=>{h.exports=_jsx_runtime});var b={};C(b,{default:()=>B,frontmatter:()=>R});var e=y(d()),R={title:\"\\u4ECE\\u524D\\u7AEF\\u89D2\\u5EA6\\u7406\\u89E3 Ferry\",subtitle:null,layout:\"post\",date:new Date(16628544e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function t(A){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",img:\"img\",ul:\"ul\",li:\"li\",blockquote:\"blockquote\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",h3:\"h3\",ol:\"ol\",h4:\"h4\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",del:\"del\"},A.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"ferry\\u662F\\u4EC0\\u4E48\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ferry\\u662F\\u4EC0\\u4E48\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Ferry\\u662F\\u4EC0\\u4E48\\uFF1F\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"**\\u4E00\\u53E5\\u8BDD\\u63CF\\u8FF0\\uFF1A**\",(0,e.jsx)(n.strong,{children:\"Ferry\"}),\" \",(0,e.jsx)(n.strong,{children:\"\\u662F\\u4E00\\u4E2A\\u81F4\\u529B\\u4E8E\\u63D0\\u9AD8\\u524D\\u540E\\u7AEF\\u534F\\u4F5C\\u5F00\\u53D1\\u6548\\u7387\\u7684\\u901A\\u4FE1\\u6846\\u67B6\\u3002\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u63A5\\u53E3\\u89D2\\u5EA6\\u770B\\uFF0CFerry \\u662F\\u4E00\\u4E2A HTTP \\u6846\\u67B6\\uFF1B\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u5F00\\u53D1\\u89D2\\u5EA6\\u770B\\uFF0CFerry \\u53C8\\u662F\\u4E00\\u4E2A RPC \\u6846\\u67B6\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"Ferry \\u5728\\u670D\\u52A1 HTTP \\u63A5\\u53E3\\u7684\\u540C\\u65F6\\uFF0C\\u63D0\\u4F9B\\u8D85 RPC \\u7684\\u5F00\\u53D1\\u4F53\\u9A8C\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024157.png\",alt:\"|300\",width:\"868\",height:\"622\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAACVBMVEX////19fXw6+8ymb5RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHUlEQVR4nGNgQAJMTBCakYmJEcJghDIYGKE0BAAAAiAAEvLpiNcAAAAASUVORK5CYII=\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981ferry\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981ferry\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981Ferry\\uFF1F\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7531\\u4E8E\\uFF0CHTTP \\u4E0E RPC \\u5F00\\u53D1\\u9694\\u79BB\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u540E\\u7AEF\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528 RPC \\u6846\\u67B6\\uFF0C\\u901A\\u8FC7 IDL \\u7684\\u65B9\\u5F0F\\u6765\\u63CF\\u8FF0\\u548C\\u7BA1\\u7406\\u63A5\\u53E3\\u6587\\u6863\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"IDL \\u80FD\\u7B80\\u6D01\\u6E05\\u6670\\u5730\\u63CF\\u8FF0\\u63A5\\u53E3\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6BD4\\u8F83\\u7EDF\\u4E00\\uFF0C\\u57FA\\u672C\\u6210\\u719F\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u524D\\u7AEF\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6CA1\\u6709\\u63A5\\u53E3\\u63CF\\u8FF0\\u6587\\u6863 | wiki\\u3001docs | Yapi\\u3001Swagger\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"key-value\\u7C7B\\u578B\\u7684\\u6570\\u636E\\u683C\\u5F0F\\u8868\\u8FF0\\u80FD\\u529B\\u5355\\u4E00\\uFF0C\\u4E0D\\u9002\\u5408\\u63CF\\u8FF0\\u63A5\\u53E3\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7BA1\\u7406\\u6DF7\\u4E71\\uFF0C\\u4ECD\\u5904\\u4E8E\\u63A2\\u7D22\\u9636\\u6BB5\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u56E0\\u6B64\\uFF0CFerry \\u4ECE RPC \\u6846\\u67B6\\u7684\\u5F00\\u53D1\\u6A21\\u5F0F\\u5165\\u624B\\uFF0C**\\u628A\\u5E95\\u5C42\\u7684 RPC \\u8BF7\\u6C42\\u6362\\u6210 HTTP \\u8BF7\\u6C42\\uFF0C\\u4ECE\\u800C\\u6253\\u901A HTTP \\u548C RPC\\u3002**\\u5BF9\\u540E\\u7AEF\\u7684 IDL \\u8FDB\\u884C\\u6269\\u5C55\\uFF0C\\u4F7F\\u5F97 RPC \\u7684 IDL \\u80FD\\u7528\\u6765\\u63CF\\u8FF0 HTTP \\u63A5\\u53E3\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"RPC \\u8BF7\\u6C42\\u548C HTTP \\u8BF7\\u6C42\\u7684\\u533A\\u522B\\u662F\\u6709\\u6CA1\\u6709\\u5BF9\\u6570\\u636E\\u8FDB\\u884C\\u7279\\u6B8A\\u7684\\u5E8F\\u5217\\u5316/\\u53CD\\u5E8F\\u5217\\u5316\\u5904\\u7406\\uFF0C\\u53EF\\u4EE5\\u53C2\\u8003\\u53E6\\u4E00\\u7BC7\\u6587\\u7AE0\\uFF1A \",(0,e.jsx)(n.a,{href:\"https://bytekm.bytedance.net/kmf/articleDetail/5376\",children:\"RPC \\u7684\\u5E8F\\u5217\\u5316\\u4E86\\u89E3\\u4E00\\u4E0B\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024215.png\",alt:\"\",width:\"588\",height:\"333\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAACVBMVEX+/v7y8/j6+PjAu/1+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAH0lEQVR4nGNgYGBgYgABRkYmRiZGRjCbCSyEIgISBwACgQAb2PA9DQAAAABJRU5ErkJggg==\"})}),(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024220.png\",alt:\"\",width:\"588\",height:\"439\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAABlBMVEX9/v719/mxRbBZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAFklEQVR4nGNggANGMIAy0UWQACMjAwAB9AARqyyCYwAAAABJRU5ErkJggg==\"})})]})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"ferry\\u80FD\\u505A\\u4EC0\\u4E48\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ferry\\u80FD\\u505A\\u4EC0\\u4E48\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Ferry\\u80FD\\u505A\\u4EC0\\u4E48\\uFF1F\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5305\\u88C5RPC\\u63A5\\u53E3\\uFF0C\\u5229\\u7528IDL\\u6CE8\\u91CA\\u6CE8\\u89E3\\u6269\\u5C55HTTP\\u6240\\u9700\\u4FE1\\u606F\\uFF0C\\u81EA\\u52A8\\u751F\\u6210Client\\u4EE3\\u7801\\uFF0C\\u53D1\\u8D77HTTP\\u8BF7\\u6C42\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u540C\\u65F6\\u5E2E\\u4F60\\u505A\\u4E86JS\\u7684\\u6570\\u636E\\u7C7B\\u578B\\u68C0\\u6D4B+Mock\\uFF08\\u6CA1\\u7528\\u8FC7\\uFF0C\\u4E00\\u822C\\u7528Mock\\u63D2\\u4EF6\\uFF0C\\u6240\\u4EE5\\u8FD9\\u91CC\\u4E0D\\u505A\\u6DF1\\u5165\\u4E86\\u89E3\\uFF09\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5176\\u4E2D\\uFF0C\\u9ED1\\u8272\\u4E3A\\u4F20\\u7EDF RPC \\u7684\\u529F\\u80FD\\uFF0C\\u7EA2\\u8272\\u4E3A\\u4F20\\u7EDF RPC \\u4E0D\\u5177\\u5907\\u7684\\u529F\\u80FD\\uFF0C\\u5373\\u8D85 RPC \\u7684\\u529F\\u80FD\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024238.png\",alt:\"|500\",width:\"740\",height:\"632\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAFVBMVEX////8+vv08vLu19r64uXu6+3n5OhwSCw+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKklEQVR4nB3FwQ0AMAyDQLCb7D9ypdwDAFs5s7dEE8EDZic7kDa+J1zgAwpOAF36bN5YAAAAAElFTkSuQmCC\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"soferry\\u662F\\u5982\\u4F55\\u505A\\u7684\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#soferry\\u662F\\u5982\\u4F55\\u505A\\u7684\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"So\\uFF0CFerry\\u662F\\u5982\\u4F55\\u505A\\u7684\\uFF1F\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"ferry-idl\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ferry-idl\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Ferry IDL\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Ferry IDL \\u63D0\\u4F9B\\u4E86\\u4E00\\u79CD\\u7528 RPC IDL \\u6765\\u63CF\\u8FF0 HTTP \\u63A5\\u53E3\\u7684\\u65B9\\u5F0F\\u3002\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsxs)(n.strong,{children:[\"Q1\\uFF1A\\u6269\\u5C55\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.strong,{children:\"RPC\"})}),\"\\u7684\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.strong,{children:\"IDL\"})}),\"\\uFF0C\\u90A3\\u8FD8\\u7F3A\\u4E4F HTTP \\u63A5\\u53E3\\u7684\\u54EA\\u4E9B\\u4FE1\\u606F\\uFF1F\"]})}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"A1\\uFF1A\\u7531\\u4E8E RPC \\u6846\\u67B6\\u4E00\\u822C\\u4F7F\\u7528 TCP \\u8FDB\\u884C\\u901A\\u4FE1\\uFF0CHTTP \\u91CC\\u9762\\u7684\\u4E1C\\u897F\\u57FA\\u672C\\u90FD\\u662F\\u7F3A\\u4E4F\\u7684\\u3002\\u4E3A\\u4E86\\u65B9\\u4FBF\\u7406\\u89E3\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5148\\u805A\\u7126\\u4E8E\\u53D1\\u9001\\u4E00\\u4E2A HTTP \\u8BF7\\u6C42\\u7684\\u5FC5\\u8981\\u4FE1\\u606F\\uFF0C\\u6BD4\\u5982\\uFF1AURL \\u548C Method\\u3002\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Q2\\uFF1A\\u600E\\u6837\\u5728\"}),\" \",(0,e.jsx)(n.strong,{children:\"RPC\"}),\" \",(0,e.jsx)(n.strong,{children:\"\\u7684\"}),\" \",(0,e.jsx)(n.strong,{children:\"IDL\"}),\" \",(0,e.jsx)(n.strong,{children:\"\\u91CC\\u9762\\u4F18\\u96C5\\u5730\\u52A0\\u5165 HTTP \\u63A5\\u53E3\\u7684\\u4FE1\\u606F\\uFF1F\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"A2\\uFF1A\\u8981\\u4FDD\\u8BC1\\u6269\\u5C55\\u540E\\u7684IDL\\u4E0D\\u5F71\\u54CDRPC \\u6846\\u67B6\\u89E3\\u6790\\u5668\\u7684\\u89E3\\u6790\\uFF0C\\u53EA\\u80FD\\u901A\\u8FC7\\u6CE8\\u91CA\\u6216\\u6CE8\\u89E3\\u7684\\u5F62\\u5F0F\\u3002\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u628A HTTP \\u4FE1\\u606F\\u5199\\u5230\\u6CE8\\u91CA\\u91CC\\u9762\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u628A HTTP \\u4FE1\\u606F\\u5199\\u5230\\u6CE8\\u89E3\\u91CC\\u9762\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E00\\u53E5\\u8BDD\\u603B\\u7ED3\\uFF0C\\u5C31\\u662F\\u7EE7\\u627F\\u5E76\\u6269\\u5C55IDL\\uFF0C\\u8865\\u5145\\u539F\\u672CRPC\\u63A5\\u53E3\\u4E2DHTTP\\u8BF7\\u6C42\\u9700\\u8981\\u7684\\u4FE1\\u606F\\u3002\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"ferry-client\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ferry-client\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Ferry Client\"]}),`\n`,(0,e.jsx)(n.p,{children:\"ferry-cli\\u7684\\u529F\\u80FD\\u662F\\u6839\\u636EFerry IDL\\u6587\\u4EF6\\u751F\\u6210client\\u4EE3\\u7801\\uFF0C\\u6A21\\u5757\\u7ED3\\u6784\\u5982\\u4E0B\\u56FE\\u6240\\u793A\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:\"ferry-parser\\u6839\\u636EFerry IDL\\u6587\\u4EF6\\u751F\\u6210AST\\uFF0CJS Generator\\u3001TS Generator\\u548CMock Generator\\u6A21\\u5757\\u6839\\u636EAST\\u5206\\u522B\\u751F\\u6210JS lib\\u3001TS lib\\u548Cmock\\u4EE3\\u7801\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024302.png\",alt:\"|500\",width:\"886\",height:\"434\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAACVBMVEX+/v789vb19PR80SBXAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHUlEQVR4nGNgYGBgYGRkBFEMDExgBiMjI4QBlQIAAToAEv3pGzYAAAAASUVORK5CYII=\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024313.png\",alt:\"|500\",width:\"1280\",height:\"581\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAADFBMVEUqJygeHh4lIiI1NDfJfH7BAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAH0lEQVR4nB3GsQ0AAAzCsBD+/7mik00pSULpXAD1o3oDBgAqMTPzmwAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\u524D\\u7AEFrpc\\u8C03\\u7528\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u524D\\u7AEFrpc\\u8C03\\u7528\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u524D\\u7AEFRPC\\u8C03\\u7528\"]}),`\n`,(0,e.jsx)(n.p,{children:\"ferry-cli\\u751F\\u6210\\u7684JS\\u7248\\u548CTS\\u7248lib\\u4EE3\\u7801\\u5C01\\u88C5\\u4E86\\u5E95\\u5C42\\u901A\\u4FE1\\u7EC6\\u8282\\uFF0C\\u5F00\\u53D1\\u8005\\u53EF\\u4EE5\\u4F7F\\u7528\\u4F20\\u7EDFRPC\\u63A5\\u53E3\\u7684\\u5199\\u6CD5\\u6765\\u8C03\\u7528lib\\u91CC\\u9762\\u7684\\u63A5\\u53E3\\u3002\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`const client = new UserServiceClient();\nclient.Store({ uid: '20190606', name: 'lance' })\n.then((resp) => {});\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const client = new UserServiceClient();\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"client.Store({ uid: '20190606', name: 'lance' })\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\".then((resp) => {});\"})})]})})})}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\u524D\\u7AEF\\u8BED\\u6CD5\\u68C0\\u6D4B\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u524D\\u7AEF\\u8BED\\u6CD5\\u68C0\\u6D4B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u524D\\u7AEF\\u8BED\\u6CD5\\u68C0\\u6D4B\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"JS \\u662F\\u4E00\\u79CD\\u5F31\\u7C7B\\u578B\\u8BED\\u8A00\\uFF0C\\u65E0\\u6CD5\\u5728\\u7F16\\u8BD1\\u6216\\u8FD0\\u884C\\u65F6\\u68C0\\u6D4B\\u6570\\u636E\\u7C7B\\u578B\\u7684\\u5408\\u6CD5\\u6027\\u3002\\u5F00\\u53D1\\u8005\\u7ED9\\u63A5\\u53E3\\u4F20\\u5165\\u4E0D\\u7B26\\u5408\\u9884\\u671F\\u7684\\u6570\\u636E\\u65F6\\uFF0C\",(0,e.jsx)(n.strong,{children:\"JS \\u4E0D\\u4F1A\\u6709\\u4EFB\\u4F55\\u63D0\\u793A\\uFF0C\\u8FD9\\u663E\\u8457\\u5730\\u63D0\\u9AD8\\u4E86\\u53D1\\u73B0\\u548C\\u5B9A\\u4F4D\\u95EE\\u9898\\u7684\\u6210\\u672C\"}),\"\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Ferry \\u53EF\\u4EE5\\u81EA\\u52A8\\u5BF9 JS \\u7684\\u63A5\\u53E3\\u6570\\u636E\\u7C7B\\u578B\\u8FDB\\u884C\\u5408\\u6CD5\\u6027\\u68C0\\u6D4B\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u7406\\u8BBA\\u4E0A\\u770B\\uFF0C\\u7531\\u4E8E\\u80FD\\u4ECE Ferry IDL \\u6587\\u4EF6\\u83B7\\u5F97\\u6570\\u636E\\u7684\\u9884\\u671F\\u7C7B\\u578B\\uFF0C\\u56E0\\u6B64\\u53EF\\u4EE5\\u5BF9\\u5B9E\\u9645\\u6570\\u636E\\u7684\\u7C7B\\u578B\\u8FDB\\u884C\\u5408\\u6CD5\\u6027\\u68C0\\u6D4B\\u3002\\u4F46\\u662F\\uFF0C\\u5B9E\\u73B0\\u8D77\\u6765\\uFF0C\\u5E76\\u4E0D\\u662F\\u4E00\\u4EF6\\u7B80\\u5355\\u7684\\u4E8B\\u60C5\\u3002\\u81F3\\u5C11\\u9700\\u8981\\u89E3\\u51B3\\u4EE5\\u4E0B\\u51E0\\u4E2A\\u95EE\\u9898\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u600E\\u4E48\\u5904\\u7406 JS \\u4E2D\\u4E0D\\u5B58\\u5728\\u7684\\u7C7B\\u578B\\uFF0C\\u6BD4\\u5982\\u201Cenum\\u201D\\u548C\\u201Cstruct\\u201D\\u7B49\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u600E\\u4E48\\u5904\\u7406\\u7C7B\\u578B\\u5D4C\\u5957\\u5F15\\u7528\\u7684\\u95EE\\u9898\\uFF0C\\u6BD4\\u5982\\u201Cstruct\\u201D\\u5F15\\u7528\\u201Cmap\\u201D\\uFF0C\\u201Cmap\\u201D\\u53C8\\u5F15\\u7528\\u201Clist\\u201D\\uFF0C\\u201Clist\\u201D\\u53C8\\u5F15\\u7528\\u201Cstruct\\u201D\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u751F\\u6210\\u4EE3\\u7801\\u7684\\u65F6\\u5019\\u53EF\\u4EE5\\u6267\\u884C\\u903B\\u8F91\\uFF0C\\u751F\\u6210\\u7684\\u4EE3\\u7801\\u8FD0\\u884C\\u7684\\u65F6\\u5019\\u53C8\\u53EF\\u4EE5\\u6267\\u884C\\u903B\\u8F91\\uFF0C\\u600E\\u6837\\u62C6\\u89E3\\u903B\\u8F91\\u53EF\\u4EE5\\u4F7F\\u5F97\\u751F\\u6210\\u7684\\u4EE3\\u7801\\u7B80\\u6D01\\u9AD8\\u6548\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E0B\\u56FE\\u5C55\\u793A\\u4E86 Ferry \\u5B9E\\u73B0\\u7C7B\\u578B\\u68C0\\u6D4B\\u7684\\u4E3B\\u8981\\u903B\\u8F91\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024413.png\",alt:\"|600\",width:\"1239\",height:\"568\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAD1BMVEXz8vP49/j+/v7v7e7l4uLUa+9rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAH0lEQVR4nAXBAQEAAAiDMOD2z+yGsmEAd4cgQyOm1QMDMgAuAnITPQAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9\\u4E8E\\u4E0A\\u56FE\\u7684\\u4F8B\\u5B50\\uFF0C\\u6574\\u4E2A\\u8C03\\u7528\\u94FE\\u8DEF\\u4E3A\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u63A5\\u53E3\\u8C03\\u7528\\u65F6\\uFF0C\\u8C03\\u7528\\u201C_checkStructType\\u201D\\u68C0\\u6D4B\\u4F20\\u5165\\u6570\\u636E\\u201Creq\\u201D\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u201C_checkStructType\\u201D\\u8C03\\u7528\\u201C_checkStructOfStoreRequest\\u201D\\u68C0\\u6D4B\\u7ED3\\u6784\\u4F53\\u201CStoreRequest\\u201D\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u201C_checkStructOfStoreRequest\\u201D\\u5206\\u522B\\u8C03\\u7528\\u201C_checkStructType\\u201D\\u3001\\u201C_checkBaseType\\u201D\\u548C\\u201C_checkListType\\u201D\\u68C0\\u6D4B\\u5404\\u4E2A\\u5B57\\u6BB5\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u201C_checkListType\\u201D\\u8C03\\u7528\\u201C_checkBaseType\\u201D\\u68C0\\u6D4B\\u201Clist\\u201D\\u7684\\u6210\\u5458\\u7C7B\\u578B\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u201C_checkStructType\\u201D\\u8C03\\u7528\\u201C_checkStructOfUserProfile\\u201D\\u68C0\\u6D4B\\u7ED3\\u6784\\u4F53\\u201CUserProfile\\u201D\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F9D\\u6B21\\u53CD\\u590D\\uFF0C\\u76F4\\u81F3\\u7ED3\\u675F\\u3002\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\u4EE3\\u7801\\u88C1\\u526A\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u4EE3\\u7801\\u88C1\\u526A\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4EE3\\u7801\\u88C1\\u526A\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Ferry \\u7684\\u5BA2\\u6237\\u7AEF\\u4EE3\\u7801\\u5305\\u542B\\u4E86\\u7C7B\\u578B\\u68C0\\u6D4B\\u548C\\u63A5\\u53E3\\u6A21\\u62DF\\u7684\\u4EE3\\u7801\\uFF0C\\u8FD9\\u4E24\\u90E8\\u5206\\u4EE3\\u7801\\u662F\\u4E0D\\u5E94\\u8BE5\\u5E26\\u4E0A\\u7EBF\\u7684\\u3002\\u53E6\\u5916\\uFF0C\\u4E00\\u4E2A IDL \\u6587\\u4EF6\\u91CC\\u9762\\u53EA\\u6709\\u90E8\\u5206\\u63A5\\u53E3\\u4F1A\\u88AB\\u7528\\u5230\\uFF0C\\u5176\\u4ED6\\u4E0D\\u88AB\\u4F7F\\u7528\\u7684\\u63A5\\u53E3\\u7684\\u4EE3\\u7801\\u4E5F\\u4E0D\\u5E94\\u8BE5\\u5E26\\u4E0A\\u7EBF\\u3002Ferry \\u9700\\u8981\\u628A\\u8FD9\\u4E9B\\u4EE3\\u7801\\u88C1\\u526A\\u6389\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Ferry \\u91C7\\u7528 \",(0,e.jsx)(n.strong,{children:\"Webpack\"}),\" \",(0,e.jsx)(n.strong,{children:\"\\u63D2\\u4EF6\"}),\"\\u6765\\u5B9E\\u73B0\\u4EE3\\u7801\\u88C1\\u526A\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528\\uFF1Awebpack\\u4E2D\\u914D\\u7F6E\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`module.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\\\.js$/,\n        exclude: [/node_modules/],\n        use: [\n          // \\u6CE8\\u610F\\uFF0C\\u9700\\u8981\\u628A\\u8FD9\\u4E2A loader \\u653E\\u5728\\u6700\\u540E\\u9762\\uFF0C\\u4F7F\\u5176\\u53EF\\u4EE5\\u6700\\u5148\\u6267\\u884C\n          {\n            loader: '@byted-ferry/shake-loader',\n            options: {\n              targetDir: 'api-lib'\n            }\n          }\n        ]\n      }\n    ],\n  },\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"module.exports = {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  module: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    rules: [\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"      {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        test: /\\\\.js$/,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        exclude: [/node_modules/],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        use: [\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"          // \\u6CE8\\u610F\\uFF0C\\u9700\\u8981\\u628A\\u8FD9\\u4E2A loader \\u653E\\u5728\\u6700\\u540E\\u9762\\uFF0C\\u4F7F\\u5176\\u53EF\\u4EE5\\u6700\\u5148\\u6267\\u884C\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"          {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            loader: '@byted-ferry/shake-loader',\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            options: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"              targetDir: 'api-lib'\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"          }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        ]\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"      }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u539F\\u7406\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u76EE\\u7684\\u867D\\u7136\\u662F\\u4EE3\\u7801\\u88C1\\u526A\\uFF0C\\u4F46\\u5B9E\\u73B0\\u7684\\u65B9\\u6CD5\\u5176\\u5B9E\\u662F\\u4EE3\\u7801\\u8F6C\\u5316\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024436.png\",alt:\"|600\",width:\"855\",height:\"453\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAACVBMVEX49/n9/f3x9PXOoIGHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAH0lEQVR4nC3IwQkAAAyEMHX/octBfyEISmJIweZRwwECBgAez1YrmwAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5229\\u7528 ts-loader \\u7684\\u201CgetCustomTransformers\\u201D\\u914D\\u7F6E\\u9879\\uFF0C\\u5728 TS \\u6216 JS \\u4EE3\\u7801\\u88AB ts-loader \\u5904\\u7406\\u524D\\u5C31\\u8FDB\\u884C\\u8F6C\\u5316\\u3002\\u8F6C\\u5316\\u65B9\\u6CD5\\u662F\\u7528 TS \\u539F\\u751F\\u7684 API \\u904D\\u5386 && \\u5224\\u65AD && \\u66F4\\u65B0 && \\u751F\\u6210 AST \\u8282\\u70B9\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u6E90\\u7801\\u89E3\\u8BFB\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u6E90\\u7801\\u89E3\\u8BFB\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6E90\\u7801\\u89E3\\u8BFB\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u524D\\u7F6E\\u77E5\\u8BC6ast\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u524D\\u7F6E\\u77E5\\u8BC6ast\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u524D\\u7F6E\\u77E5\\u8BC6AST\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://mp.weixin.qq.com/s/SlXIjnwbHS_enHXlZAnMMw\",children:\"\\u7528JS\\u89E3\\u91CAJS\\uFF01\\u8BE6\\u89E3AST\\u53CA\\u5176\\u5E94\\u7528\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[`AST\\u5DE5\\u4F5C\\u6D41\\u7A0B\n`,(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024453.png\",alt:\"\",width:\"855\",height:\"453\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAACVBMVEX49/n9/f3x9PXOoIGHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAH0lEQVR4nC3IwQkAAAyEMHX/octBfyEISmJIweZRwwECBgAez1YrmwAAAABJRU5ErkJggg==\"})]}),`\n`,(0,e.jsxs)(n.h3,{id:\"ferry-client-1\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ferry-client-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Ferry Client\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"TS\\u751F\\u6210\\u5668\\u548CJS\\u751F\\u6210\\u5668\\u540C\\u7406\\uFF0C\\u5728\\u6B64\\u4EE5JS\\u4E3A\\u4F8B\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"JS\\u751F\\u6210\\u5668\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u8C03\\u7528ferry parser\\u751F\\u6210AST\\uFF0C\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5C06AST\\u91CC\\u7684\\u7C7B\\u578B\\u6620\\u5C04\\u5230JS\\u7C7B\\u578B\\uFF0C\\u6839\\u636E\\u4E0D\\u540C\\u7C7B\\u578B\\u751F\\u5BF9\\u5E94\\u4EE3\\u7801\\u3002\\u6574\\u4E2A\\u751F\\u6210\\u7684\\u8FC7\\u7A0B\\u5176\\u5B9E\\u5C31\\u662F\\u5B57\\u7B26\\u4E32\\u62FC\\u63A5\\u7684\\u8FC7\\u7A0B\\uFF0C\\u6700\\u540E\\u518D\\u5199\\u51FA\\u6587\\u4EF6\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u62FC\\u63A5\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u68C0\\u6D4B\\u662F\\u5426\\u5B58\\u5728enum\\u3001struct\\u7B49js\\u4E0D\\u5B58\\u5728\\u7684\\u7C7B\\u578B\\uFF0C\\u6709\\u5219\\u6807\\u8BB0\\uFF0C\\u5E76\\u62FC\\u63A5\\u7C7B\\u578B\\u68C0\\u6D4B\\u51FD\\u6570\\u7684\\u8C03\\u7528\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u540C\\u65F6\\u5728\\u6700\\u540E\\u751F\\u6210\",(0,e.jsx)(n.code,{children:\"_util.js\"}),\"\\u65F6\\uFF0C\\u6DFB\\u52A0\\u7C7B\\u578B\\u68C0\\u6D4B\\u51FD\\u6570\\u7684\\u5B9A\\u4E49\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024505.png\",alt:\"|500\",width:\"1280\",height:\"887\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAACVBMVEUgHyApKSsuNDfBsX3eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIUlEQVR4nGNgYmRkZAABJiYmJjALJAJhQPhgBkQEqpQBAAR2ACObZi7HAAAAAElFTkSuQmCC\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u62FC\\u63A5js\\u6587\\u4EF6\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024602.png\",alt:\"|500\",width:\"1280\",height:\"355\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAADFBMVEUqJiYdHh06LzArLi9bp7D2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGElEQVR4nAXBAQEAAAABoPD/s2KTJNYWDgDZABS6RtX1AAAAAElFTkSuQmCC\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024612.png\",alt:\"|500\",width:\"1180\",height:\"460\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAACVBMVEUgHx8nKiwuMzcwph27AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAFklEQVR4nGNgZGKAAEYmJkYwgwkqAgAA4gAO+n6hUAAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6839\\u636E\\u6807\\u8BB0\\uFF0C\\u751F\\u6210_util.js\\u4E2D\\u7684\\u6821\\u9A8C\\u51FD\\u6570\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024621.png\",alt:\"|500\",width:\"1280\",height:\"806\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAACVBMVEUfHx8oKiknMTXUT2h+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAE0lEQVR4nGNgYGJkgAC8DBBgAAABrQAUCfK9YAAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u751F\\u6210\\u6548\\u679C\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024631.png\",alt:\"|500\",width:\"1280\",height:\"479\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAADFBMVEUfHh41KCgnJiY1MDOvov9eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAG0lEQVR4nGNgYmJiAAMmZkYIi5GZmZGRkYEBAAFpABnfaxm0AAAAAElFTkSuQmCC\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u4EE3\\u7801\\u88C1\\u526Ashake-loader\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u4EE3\\u7801\\u88C1\\u526Ashake-loader\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4EE3\\u7801\\u88C1\\u526Ashake-loader\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"**babel\\u5305\\u7684\\u7528\\u9014\\uFF1A**\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.a,{href:\"https://babeljs.io/docs/en/babel-template\",children:\"https://babeljs.io/docs/en/babel-template\"})})]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u628A\\u6E90\\u4EE3\\u7801\\u89E3\\u6790\\u4E3AAST\\uFF08@babel-parser\\uFF09\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9AST\\u8FDB\\u884C\\u904D\\u5386\\uFF08@babel-traverse\\uFF09\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"AST\\u8F6C\\u4E3Acode\\uFF08@babel-generator\\uFF09\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3B\\u8981\\u88C1\\u526A\\u51FD\\u6570\\uFF1A\\u5728\\u904D\\u5386\\u8FC7\\u7A0B\\u4E2D\\u67E5\\u627E\\u662F\\u5426\\u8C03\\u7528\\u4E86\\u68C0\\u6D4B\\u548Cmock\\u51FD\\u6570\\uFF0C\\u5220\\u9664\\u8FD9\\u90E8\\u5206\\u4EE3\\u7801\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-09-11-ferry-20250119024646.png\",alt:\"|500\",width:\"1244\",height:\"494\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAFVBMVEUeHyBDLS83JyYpIiE4MC8xKSlKNjtgUbVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAH0lEQVR4nGNgZmFhZWZmYGBgZWNjZGQEM1iYmJgYGAAD2QBANaRXIAAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u603B\\u7ED3\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u603B\\u7ED3\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u603B\\u7ED3\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9\\u4E8E\\u524D\\u7AEF\\u6765\\u8BF4\\u8FD8\\u662F\\u4F7F\\u7528\\u8BE5\\u6846\\u67B6\\u5C31\\u662F\\u4ECE\\u8FDC\\u7A0B\\u62C9\\u53D6thrift\\u6587\\u4EF6\\u25B6\\uFE0F\\u81EA\\u52A8\\u7F16\\u8BD1\\u751F\\u6210\\u63A5\\u53E3\\u8C03\\u7528\\u4EE3\\u7801\\uFF08ferryclient\\uFF09\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7701\\u53BB\\u4E86\\u539F\\u672C\\u624B\\u52A8\\u5B9A\\u4E49\\u63A5\\u53E3\\u7684\\u6B65\\u9AA4\\uFF0C\\u5E76\\u4E14\\u7528\\u7C7BRPC\\u8C03\\u7528\\u63A5\\u53E3\\u7684\\u65B9\\u5F0F\\u53D1\\u8D77\\u8BF7\\u6C42\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6D41\\u7A0B\\u68B3\\u7406\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5C06thrift\\u7F16\\u8BD1\\u4E3AAST\\uFF08Ferry parser\\uFF09\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4EA4\\u7531JS Generator\\u3001TS Generator\\u548CMock Generato\\u7B49\",(0,e.jsx)(n.del,{children:\"\\u62FC\\u63A5\\u5B57\\u7B26\\u4E32\"}),\"\\u89E3\\u6790\\u4E3A\\u76F8\\u5E94\\u63A5\\u53E3\\u548C\\u51FD\\u6570\\u5B9A\\u4E49\\uFF08Ferry Client\\uFF09\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u89E3\\u6790\\u540C\\u65F6\\u751F\\u6210\\u7C7B\\u578B\\u68C0\\u6D4B\\u51FD\\u6570\\uFF0C\\u5E76\\u5728\",(0,e.jsx)(n.del,{children:\"\\u62FC\\u63A5\\u5B57\\u7B26\\u4E32\"}),\"\\u89E3\\u6790\\u65F6\\u6DFB\\u52A0\\u8C03\\u7528\\u4EE3\\u7801\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.del,{children:\"mock\\u529F\\u80FD\\u6682\\u672A\\u4F7F\\u7528\\u5230\\uFF0C\\u4E0D\\u505A\\u4E86\\u89E3\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6253\\u5305\\u88C1\\u526A\\u65E0\\u7528\\u4EE3\\u7801\\uFF0C\\u5728\\u9879\\u76EEwebpack\\u4E2D\\u914D\\u7F6Eshake-loader\\u63D2\\u4EF6\\uFF0C\\u5728\\u6253\\u5305\\u65F6\\u6700\\u5148\\u6267\\u884C\\uFF0C\\u5229\\u7528babel\\u5305\\u89E3\\u6790->\\u904D\\u5386AST->\\u5220\\u9664mock\\u53CA\\u7C7B\\u578B\\u68C0\\u6D4B\\u51FD\\u6570\\u76F8\\u5173\\u4EE3\\u7801->\\u751F\\u6210\\u4EE3\\u7801\\u3002\"}),`\n`]}),`\n`]})]})}function w(A={}){let{wrapper:n}=A.components||{};return n?(0,e.jsx)(n,Object.assign({},A,{children:(0,e.jsx)(t,A)})):t(A)}var B=w;return u(b);})();\n;return Component;"
    },
    "_id": "post/2022-09-11-ferry.md",
    "_raw": {
      "sourceFilePath": "post/2022-09-11-ferry.md",
      "sourceFileName": "2022-09-11-ferry.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2022-09-11-ferry"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2022-09-11-ferry",
    "slugAsParams": "2022-09-11-ferry"
  },
  {
    "title": "代理 & 抓包（Charles 、Eden Proxy、Mock）",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2022-09-12T00:00:00.000Z",
    "body": {
      "raw": "## 前情知识\n\n#### **正向代理**\n\n如果把局域网外的 Internet 想象成一个巨大的资源库，则局域网中的客户端要访 问 Internet，则需要通过代理服务器来访问，这种代理服务就称为正向代理。 简单一点：通过代理服务器来访问服务器的过程 就叫 正向代理。需要在客户端配置代理服务器进行指定网站访问\n\n![](assets/2022-09-12-proxy-charles-20250119024746.png)\n\n#### **反向代理**\n\n其实客户端对代理是无感知的，因为客户端不需要任何配置就可以访问。 我们只需要将请求发送到反向代理服务器，由反向代理服务器去选择目标服务器获取数据后，在返回给客户端，此时反向代理服务器和目标服务器对外就是一个服务器，暴露的是代理服务器 地址，隐藏了真实服务器 IP 地址。\n\n![](assets/2022-09-12-proxy-charles-20250119024752.png)\n\n#### **负载均衡**\n\n增加服务器的数量，然后将请求分发到各个服务器上，将原先请求集中到单个服务器上的 情况改为将请求分发到多个服务器上，将负载分发到不同的服务器，也就是我们所说的负载均衡。 客户端发送多个请求到服务器，服务器处理请求，有一些可能要与数据库进行交互，服 务器处理完毕后，再将结果返回给客户端。\n\n![](assets/2022-09-12-proxy-charles-20250119024801.png)\n\n#### 中间人攻击\n\n中间人攻击（Man-in-the-middle attack，MITM）在密码学和计算机安全领域中是指攻击者与通讯的两端分别创建独立的联系，并交换其所收到的数据，使通讯的两端认为他们正在通过一个私密的连接与对方直接对话，但事实上整个会话都被攻击者完全控制。\n\n![](assets/2022-09-12-proxy-charles-20250119024809.png)\n\n简单来讲就是指攻击者在通讯两端之间接管流量，攻击者可以拦截通讯双方的通话并篡改内容。想要接管流量，就需要攻击者能将自己分别伪装成通讯两端，并且不被另一端识破，DNS 欺骗与会话劫持等都是常见中间人攻击手段。\n\n  \n\n  \n\n## Charles\n\n#### HTTP抓包原理\n\n![](assets/2022-09-12-proxy-charles-20250119024816.png)\n\n- 浏览器（Client）从端口号 56075 发起一个请求，请求发送到本地 Charles 监听的 8888 端口（MITM Server），这个连接直接在本机进行\n    \n- 收到浏览器的请求后，Charles 再从端口号 56076 （MITM Client）发起一个新的请求，因为这个网络包要入公网，所以 IP 为 192.168.31.44（我的电脑 IP 地址，下节会介绍）； cdn.staticfile.org （Server）的 IP 为 111.63.183.223，因为是 HTTP 请求，所以端口号为 80\n    \n- 111.63.183.223:80 返回一个 HTTP 响应到 Charles 的代理客户端 192.168.31.44:56076\n    \n- Charles 内部做了一些处理（Capture & Analysis），然后把响应报文通过 8888 端口发送到 127.0.0.1:56075，到这里浏览器就收到了响应\n    \n\n#### HTTPS\n\n[HTTPS 详解一：附带最精美详尽的 HTTPS 原理图](https://segmentfault.com/a/1190000021494676)\n\nHttps并非应用层的一种新协议，只是http通信接口部分用ssl/tls协议代替而已。通常http直接和tcp通信，当使用ssl时则演变成先和ssl通信，再由ssl和tcp通信。也就是 HTTPS=HTTP+SSL。\n\n![](assets/2022-09-12-proxy-charles-20250119024833.png)\n\n1. 客户端发起 https 请求,连接到 server 的443接口\n    \n2. 采用 HTTPS 协议的服务器必须要有一套数字 CA (Certification Authority)证书，颁发证书的同时会产生一个私钥和公钥。私钥由服务端自己保存，不可泄漏。公钥则是附带在证书的信息中，可以公开的。证书本身也附带一个证书电子签名，这个签名用来验证证书的完整性和真实性，可以防止证书被篡改。\n    \n3. 服务端收到请求后把证书+公钥传给客户端\n    \n4. 客户端解析证书如果证书没有问题，客户端就会从服务器证书中取出服务器的公钥A。然后客户端还会生成一个随机码 KEY，并使用公钥A将其加密。\n    \n5. 客户端把加密后的随机码 KEY 发送给服务器，作为后面**对称加密**的密钥。\n    \n6. 服务器在收到随机码 KEY 之后会使用私钥B将其解密。经过以上这些步骤，客户端和服务器终于建立了安全连接，完美解决了对称加密的密钥泄露问题，接下来就可以用对称加密愉快地进行通信了。\n    \n7. 服务器使用密钥 (随机码 KEY)对数据进行对称加密并发送给客户端，客户端使用相同的密钥 (随机码 KEY)解密数据。\n    \n8. 双方使用对称加密愉快地传输所有数据。\n    \n\n  \n\n#### HTTPS抓包原理\n\n- 客户端发起 SSL握手时,中间人劫持用户请求并伪装成客户端发起 SSL 握手.\n    \n- 服务端发送公钥给中间人,中间人截获这个公钥保存起来,并把自己的公钥发送给客户端.\n    \n- 客户端拿到替换后的公钥加密客户端的对称密钥发送请求给中间人, 中间人利用自己的私钥解出对称密钥,这时候中间人已经拿到公钥和对称密钥,再用服务端发给中间人的公钥来加密对称密钥,发送给服务器.\n    \n- 之后客户端和服务端所有的请求的数据都会被中间人利用对称密钥解密得到所有的信息.\n    \n\n所以要抓包 HTTPS, 前提是我们要安装并信任它的证书.\n\n  \n\n  \n\n## Eden Proxy\n\n[Eden Proxy 原理剖析](https://bytedance.feishu.cn/wiki/wikcncZkURLnRSk9htQ5CrGOsZJ#MLsPDK)\n\n[Eden Proxy 原理和架构——解析 HTTP 代理、TLS 和证书信任链 | ByteT 计划](https://tech.bytedance.net/articles/6851865198618214407#heading9)\n\n### 是什么？\n\nEden Proxy 是 [Eden](https://eden.bytedance.net/index-cn) 的重要组成部分，它为本地模拟线上环境开发、调试、测试等提供了技术基础。Eden Proxy 通过 HTTP 代理的形式来完成请求和响应的转发、修改、拦截，从而达到请求转发到本地开发服务或者本地文件或者远程服务器的功能。\n\nEden Proxy 的基本原理就是在浏览器和服务器之间多了一层中间人（HTTP 代理），由中间人来传递两边的通信，在传递过程中可以根据需要对请求/响应进行修改。或者更简单一点来说，**Eden Proxy 进行了“中间人攻击”**\n\n  \n\n### HTTP代理\n\nHTTP 代理是 Eden Proxy 的核心，HTTP 代理是位于客户端和服务器之间的一个实体，它对客户端充当了服务器，而对服务器充当了客户端。HTTP 代理分两种，第一种称为**普通代理**，第二种称为**隧道代理**。\n\n1. ##### 普通代理（正向代理）\n    \n\n浏览器向代理服务器发起请求（比如访问 `http://gpcp-boe.bytedance.net` ），代理服务器收到浏览器的**完整请求**之后，向真正的服务 xxx 发起请求，代理在获取到**完整响应**之后，再将响应返回给浏览器。\n\n普通 HTTP 代理并不能代理 HTTPS 协议。（无私钥和证书）\n\n2. ##### 隧道代理\n    \n\n隧道代理会在实际客户端和实际服务端之间建立一个 TCP 隧道，代理会**盲转发**两边的通信内容，即客户端发送给服务端的数据，会通过这个代理建立的 TCP 隧道**直接到达**服务端，反之亦然。隧道代理不需要获取完整的请求/响应才能发送实际请求/响应，而是收到一点，发送一点，**不做解析、不做处理**。\n\n正因为隧道代理的这种盲转发特性，隧道代理不仅可以用于 HTTP 代理，还可以用于 HTTPS 代理，实际上任何基于 TCP 的上层协议都可以使用隧道代理（比如 SMTP、POP3 等）。\n\n  \n\n总结：普通代理无法代理 HTTPS 协议，隧道代理虽然能代理 HTTPS 协议但是不能获取请求的明文，这样就无法修改代理的内容。\n\n  \n\n### HTTPS代理\n\n因为 Eden Proxy 需要知道请求的明文，所以直接使用隧道代理并不适合，我们需要对隧道代理做一些改变，在客户端与代理建立隧道的 TCP 连接之后，将客户端的数据转发到一个本地的 HTTPS 服务器上，本地的 HTTPS 服务器负责与真实服务器进行通信。通过这种手段，客户端和代理之间建立的还是隧道连接（**只不过隧道的另一端不是真正的原始服务器，而是一个本地的 HTTPS 服务器**），双方通信的数据则经过了本地的 HTTPS 服务器，HTTPS 服务器就可以根据需要修改请求或者响应的内容了。\n\n![](assets/2022-09-12-proxy-charles-20250119024855.png)\n\n与Charles，进行HTTPS抓包类似，在客户端和本地HTTPS服务器通信时会产生连接不安全的问题，个问题的核心是本地 HTTPS 服务器无法生成由系统信任的 CA 签发的域名的证书。\n\n这就是为什么在使用 Eden Proxy 之前会要求先装一个根证书。这个根证书就是用来给任意域名签发系统能信任的 TLS 证书的。有了根证书之后，客户端经过代理的 HTTPS 连接，实际上**是和一台本地 HTTPS 服务器建立了“安全”的 HTTPS 连接（自签名证书），而本地的 HTTPS 服务器则和原始服务器建立了真正安全的 HTTPS 连接（合法** **CA** **签发的证书）**。这时候代理就可以充当一个“安全”的中间人了，客户端将数据通过代理的 TCP 隧道连接交给本地的 HTTPS 服务器，本地 HTTPS 服务器再通过安全的 HTTPS 连接交给源服务器。\n\n  \n\n### Code Review\n\n> 这也就解释了一直困扰小白的问题：为什么走boe、ppe环境，本地启动后，可以实现热更新？\n\n通过配置Eden Proxy即可将其他域名代理到本地，以此可以实现本地代码开发，而一些api，通过设置流量头请求到boe、ppe的后端数据。\n\n![](assets/2022-09-12-proxy-charles-20250119024932.png)\n\n![](assets/2022-09-12-proxy-charles-20250119024939.png)\n\n![](assets/2022-09-12-proxy-charles-20250119024947.png)\n\n也可以打开`http://localhost:15323/`看看\n\n![](assets/2022-09-12-proxy-charles-20250119024956.png)\n\n  \n\n  \n\n### 多项目支持\n\n在实际开发中，经常会遇到**多个项目同时开着**的情况，这时候如何支持几个项目的规则同时生效、如何平滑地管理项目添加或者退出时的规则变化就成了一个棘手的问题。\n\n![](assets/2022-09-12-proxy-charles-20250119025003.png)\n\nEden Proxy 采用的是 **Master-Slave 形式**的架构：\n\n- Master 是一个 Proxy Server，负责根据配置文件进行实际的代理工作，\n    \n- Slave 是一个 Proxy Service，负责与 Master 进行通信，告诉 Master 该读取哪个配置文件，并在 Master 未启动时启动一个 Master 进程。\n    \n- Master 和 Slave 运行在不同的进程中。Master 和 Slave 之间通过 WebSocket 进行通信，Master 和控制台也是通过 WebSocket 进行通信。\n    \n\n  \n\n在 Eden Proxy 中，Master 负责几乎所有工作：\n\n- 代理服务器的实现\n    \n- 系统代理的设置\n    \n- 控制台的 HTTP 服务\n    \n- 与控制台双向通信的 WebSocket 服务\n    \n- 在 Slave 发送添加/退出项目时更新规则\n    \n\n而 Slave 的工作就比较简单，只有两步：\n\n- 尝试与 Master（如果已启动）通信，成功则将告知 Master 要添加的项目\n    \n- 如果失败，启动一个 Master，再回到第一步。在这一步中，由 Slave 启动的 Master 进程不是 Slave 进程的子进程，因此 Slave 退出时，Master 进程并不会退出，这是通过 Node.js `child_process` 的一个选项 `detached` 来实现的，代码可以看[这里](https://code.byted.org/ife/eden-set/blob/feature-1.17/packages/utils/eden-proxy-next/src/proxyServer/createProxyServer.ts#L27)。\n    \n\n  \n\n  \n\n  \n\n## Bam Mock\n\n[BAM Mock/增强开发工具 Chrome 插件使用说明](https://bytedance.feishu.cn/docs/doccnlKTL7PgMi6lHx1vQYXCwYn#kGZlqK)\n\nMock的优先级较高,Eden Proxy中不会捕获到。\n\n![](assets/2022-09-12-proxy-charles-20250119025013.png)",
      "code": "var Component=(()=>{var t=Object.create;var l=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var T=(e,A)=>()=>(A||e((A={exports:{}}).exports,A),A.exports),E=(e,A)=>{for(var r in A)l(e,r,{get:A[r],enumerable:!0})},c=(e,A,r,h)=>{if(A&&typeof A==\"object\"||typeof A==\"function\")for(let i of p(A))!m.call(e,i)&&i!==r&&l(e,i,{get:()=>A[i],enumerable:!(h=o(A,i))||h.enumerable});return e};var S=(e,A,r)=>(r=e!=null?t(g(e)):{},c(A||!e||!e.__esModule?l(r,\"default\",{value:e,enumerable:!0}):r,e)),C=e=>c(l({},\"__esModule\",{value:!0}),e);var s=T((x,a)=>{a.exports=_jsx_runtime});var B={};E(B,{default:()=>w,frontmatter:()=>P});var n=S(s()),P={title:\"\\u4EE3\\u7406 & \\u6293\\u5305\\uFF08Charles \\u3001Eden Proxy\\u3001Mock\\uFF09\",subtitle:null,layout:\"post\",date:new Date(16629408e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function d(e){let A=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",h4:\"h4\",strong:\"strong\",p:\"p\",img:\"img\",ul:\"ul\",li:\"li\",ol:\"ol\",h3:\"h3\",h5:\"h5\",code:\"code\",blockquote:\"blockquote\"},e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(A.h2,{id:\"\\u524D\\u60C5\\u77E5\\u8BC6\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u524D\\u60C5\\u77E5\\u8BC6\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"\\u524D\\u60C5\\u77E5\\u8BC6\"]}),`\n`,(0,n.jsxs)(A.h4,{id:\"\\u6B63\\u5411\\u4EE3\\u7406\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u6B63\\u5411\\u4EE3\\u7406\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),(0,n.jsx)(A.strong,{children:\"\\u6B63\\u5411\\u4EE3\\u7406\"})]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u5982\\u679C\\u628A\\u5C40\\u57DF\\u7F51\\u5916\\u7684 Internet \\u60F3\\u8C61\\u6210\\u4E00\\u4E2A\\u5DE8\\u5927\\u7684\\u8D44\\u6E90\\u5E93\\uFF0C\\u5219\\u5C40\\u57DF\\u7F51\\u4E2D\\u7684\\u5BA2\\u6237\\u7AEF\\u8981\\u8BBF \\u95EE Internet\\uFF0C\\u5219\\u9700\\u8981\\u901A\\u8FC7\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\u6765\\u8BBF\\u95EE\\uFF0C\\u8FD9\\u79CD\\u4EE3\\u7406\\u670D\\u52A1\\u5C31\\u79F0\\u4E3A\\u6B63\\u5411\\u4EE3\\u7406\\u3002 \\u7B80\\u5355\\u4E00\\u70B9\\uFF1A\\u901A\\u8FC7\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\u6765\\u8BBF\\u95EE\\u670D\\u52A1\\u5668\\u7684\\u8FC7\\u7A0B \\u5C31\\u53EB \\u6B63\\u5411\\u4EE3\\u7406\\u3002\\u9700\\u8981\\u5728\\u5BA2\\u6237\\u7AEF\\u914D\\u7F6E\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\u8FDB\\u884C\\u6307\\u5B9A\\u7F51\\u7AD9\\u8BBF\\u95EE\"}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024746.png\",alt:\"\",width:\"830\",height:\"165\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAHlBMVEXz/fv6+/yhpKTp9PienJqsqqbv6uzbybhydnfX7vflwh3nAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGklEQVR4nGNgYmPkYGFk4GRgYmBgZWdgZgYAAfsANDZJf3cAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsxs)(A.h4,{id:\"\\u53CD\\u5411\\u4EE3\\u7406\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u53CD\\u5411\\u4EE3\\u7406\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),(0,n.jsx)(A.strong,{children:\"\\u53CD\\u5411\\u4EE3\\u7406\"})]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u5176\\u5B9E\\u5BA2\\u6237\\u7AEF\\u5BF9\\u4EE3\\u7406\\u662F\\u65E0\\u611F\\u77E5\\u7684\\uFF0C\\u56E0\\u4E3A\\u5BA2\\u6237\\u7AEF\\u4E0D\\u9700\\u8981\\u4EFB\\u4F55\\u914D\\u7F6E\\u5C31\\u53EF\\u4EE5\\u8BBF\\u95EE\\u3002 \\u6211\\u4EEC\\u53EA\\u9700\\u8981\\u5C06\\u8BF7\\u6C42\\u53D1\\u9001\\u5230\\u53CD\\u5411\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\uFF0C\\u7531\\u53CD\\u5411\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\u53BB\\u9009\\u62E9\\u76EE\\u6807\\u670D\\u52A1\\u5668\\u83B7\\u53D6\\u6570\\u636E\\u540E\\uFF0C\\u5728\\u8FD4\\u56DE\\u7ED9\\u5BA2\\u6237\\u7AEF\\uFF0C\\u6B64\\u65F6\\u53CD\\u5411\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\u548C\\u76EE\\u6807\\u670D\\u52A1\\u5668\\u5BF9\\u5916\\u5C31\\u662F\\u4E00\\u4E2A\\u670D\\u52A1\\u5668\\uFF0C\\u66B4\\u9732\\u7684\\u662F\\u4EE3\\u7406\\u670D\\u52A1\\u5668 \\u5730\\u5740\\uFF0C\\u9690\\u85CF\\u4E86\\u771F\\u5B9E\\u670D\\u52A1\\u5668 IP \\u5730\\u5740\\u3002\"}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024752.png\",alt:\"\",width:\"823\",height:\"234\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAHlBMVEW9w8T////Iy8vPw7erqKazvcGanJ6VqbjS2NaytLZe9na+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGklEQVR4nGNgZ2DkZGFkYmNgYGBkYmbkYAUAAdwAMxubALoAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsxs)(A.h4,{id:\"\\u8D1F\\u8F7D\\u5747\\u8861\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u8D1F\\u8F7D\\u5747\\u8861\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),(0,n.jsx)(A.strong,{children:\"\\u8D1F\\u8F7D\\u5747\\u8861\"})]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u589E\\u52A0\\u670D\\u52A1\\u5668\\u7684\\u6570\\u91CF\\uFF0C\\u7136\\u540E\\u5C06\\u8BF7\\u6C42\\u5206\\u53D1\\u5230\\u5404\\u4E2A\\u670D\\u52A1\\u5668\\u4E0A\\uFF0C\\u5C06\\u539F\\u5148\\u8BF7\\u6C42\\u96C6\\u4E2D\\u5230\\u5355\\u4E2A\\u670D\\u52A1\\u5668\\u4E0A\\u7684 \\u60C5\\u51B5\\u6539\\u4E3A\\u5C06\\u8BF7\\u6C42\\u5206\\u53D1\\u5230\\u591A\\u4E2A\\u670D\\u52A1\\u5668\\u4E0A\\uFF0C\\u5C06\\u8D1F\\u8F7D\\u5206\\u53D1\\u5230\\u4E0D\\u540C\\u7684\\u670D\\u52A1\\u5668\\uFF0C\\u4E5F\\u5C31\\u662F\\u6211\\u4EEC\\u6240\\u8BF4\\u7684\\u8D1F\\u8F7D\\u5747\\u8861\\u3002 \\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u591A\\u4E2A\\u8BF7\\u6C42\\u5230\\u670D\\u52A1\\u5668\\uFF0C\\u670D\\u52A1\\u5668\\u5904\\u7406\\u8BF7\\u6C42\\uFF0C\\u6709\\u4E00\\u4E9B\\u53EF\\u80FD\\u8981\\u4E0E\\u6570\\u636E\\u5E93\\u8FDB\\u884C\\u4EA4\\u4E92\\uFF0C\\u670D \\u52A1\\u5668\\u5904\\u7406\\u5B8C\\u6BD5\\u540E\\uFF0C\\u518D\\u5C06\\u7ED3\\u679C\\u8FD4\\u56DE\\u7ED9\\u5BA2\\u6237\\u7AEF\\u3002\"}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024801.png\",alt:\"\",width:\"808\",height:\"597\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAALVBMVEX9/v7////W19jMz87i4uKWmZqmrrC7xcrGwbqor7bHycmKnqymoZ79+/yBhIem3X+LAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nBXJSRLAIAzAMDtsaUv4/3OZ6ioKwTioYl98r3NXDJ5mJjH/AtsApOzrAhQ4ALex+4QOAAAAAElFTkSuQmCC\"})}),`\n`,(0,n.jsxs)(A.h4,{id:\"\\u4E2D\\u95F4\\u4EBA\\u653B\\u51FB\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u4E2D\\u95F4\\u4EBA\\u653B\\u51FB\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"\\u4E2D\\u95F4\\u4EBA\\u653B\\u51FB\"]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u4E2D\\u95F4\\u4EBA\\u653B\\u51FB\\uFF08Man-in-the-middle attack\\uFF0CMITM\\uFF09\\u5728\\u5BC6\\u7801\\u5B66\\u548C\\u8BA1\\u7B97\\u673A\\u5B89\\u5168\\u9886\\u57DF\\u4E2D\\u662F\\u6307\\u653B\\u51FB\\u8005\\u4E0E\\u901A\\u8BAF\\u7684\\u4E24\\u7AEF\\u5206\\u522B\\u521B\\u5EFA\\u72EC\\u7ACB\\u7684\\u8054\\u7CFB\\uFF0C\\u5E76\\u4EA4\\u6362\\u5176\\u6240\\u6536\\u5230\\u7684\\u6570\\u636E\\uFF0C\\u4F7F\\u901A\\u8BAF\\u7684\\u4E24\\u7AEF\\u8BA4\\u4E3A\\u4ED6\\u4EEC\\u6B63\\u5728\\u901A\\u8FC7\\u4E00\\u4E2A\\u79C1\\u5BC6\\u7684\\u8FDE\\u63A5\\u4E0E\\u5BF9\\u65B9\\u76F4\\u63A5\\u5BF9\\u8BDD\\uFF0C\\u4F46\\u4E8B\\u5B9E\\u4E0A\\u6574\\u4E2A\\u4F1A\\u8BDD\\u90FD\\u88AB\\u653B\\u51FB\\u8005\\u5B8C\\u5168\\u63A7\\u5236\\u3002\"}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024809.png\",alt:\"\",width:\"1280\",height:\"622\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAOVBMVEXH3+al3uLyzL35uq/+xrnc6/H33dGk0dv7uJ7x0sPvx7VlrcZnr8adw9Hrvaz1pozwpItlyNBnydA9H/RgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKUlEQVR4nAXBhwEAIAgDsLLBrf8fawKYc7kBj+SkxsAl2anREeDVCvMDDqYA4Iw0/XsAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsx)(A.p,{children:\"\\u7B80\\u5355\\u6765\\u8BB2\\u5C31\\u662F\\u6307\\u653B\\u51FB\\u8005\\u5728\\u901A\\u8BAF\\u4E24\\u7AEF\\u4E4B\\u95F4\\u63A5\\u7BA1\\u6D41\\u91CF\\uFF0C\\u653B\\u51FB\\u8005\\u53EF\\u4EE5\\u62E6\\u622A\\u901A\\u8BAF\\u53CC\\u65B9\\u7684\\u901A\\u8BDD\\u5E76\\u7BE1\\u6539\\u5185\\u5BB9\\u3002\\u60F3\\u8981\\u63A5\\u7BA1\\u6D41\\u91CF\\uFF0C\\u5C31\\u9700\\u8981\\u653B\\u51FB\\u8005\\u80FD\\u5C06\\u81EA\\u5DF1\\u5206\\u522B\\u4F2A\\u88C5\\u6210\\u901A\\u8BAF\\u4E24\\u7AEF\\uFF0C\\u5E76\\u4E14\\u4E0D\\u88AB\\u53E6\\u4E00\\u7AEF\\u8BC6\\u7834\\uFF0CDNS \\u6B3A\\u9A97\\u4E0E\\u4F1A\\u8BDD\\u52AB\\u6301\\u7B49\\u90FD\\u662F\\u5E38\\u89C1\\u4E2D\\u95F4\\u4EBA\\u653B\\u51FB\\u624B\\u6BB5\\u3002\"}),`\n`,(0,n.jsxs)(A.h2,{id:\"charles\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#charles\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"Charles\"]}),`\n`,(0,n.jsxs)(A.h4,{id:\"http\\u6293\\u5305\\u539F\\u7406\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#http\\u6293\\u5305\\u539F\\u7406\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"HTTP\\u6293\\u5305\\u539F\\u7406\"]}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024816.png\",alt:\"\",width:\"1280\",height:\"392\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAFVBMVEXc4drU4svP4c27z9/k5uPb6tvF2OeuJ7yRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGklEQVR4nGNgZWJiZGRkZGBgY2ZmYGFgYAEAAUIAIiMZxuEAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsxs)(A.ul,{children:[`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u6D4F\\u89C8\\u5668\\uFF08Client\\uFF09\\u4ECE\\u7AEF\\u53E3\\u53F7 56075 \\u53D1\\u8D77\\u4E00\\u4E2A\\u8BF7\\u6C42\\uFF0C\\u8BF7\\u6C42\\u53D1\\u9001\\u5230\\u672C\\u5730 Charles \\u76D1\\u542C\\u7684 8888 \\u7AEF\\u53E3\\uFF08MITM Server\\uFF09\\uFF0C\\u8FD9\\u4E2A\\u8FDE\\u63A5\\u76F4\\u63A5\\u5728\\u672C\\u673A\\u8FDB\\u884C\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u6536\\u5230\\u6D4F\\u89C8\\u5668\\u7684\\u8BF7\\u6C42\\u540E\\uFF0CCharles \\u518D\\u4ECE\\u7AEF\\u53E3\\u53F7 56076 \\uFF08MITM Client\\uFF09\\u53D1\\u8D77\\u4E00\\u4E2A\\u65B0\\u7684\\u8BF7\\u6C42\\uFF0C\\u56E0\\u4E3A\\u8FD9\\u4E2A\\u7F51\\u7EDC\\u5305\\u8981\\u5165\\u516C\\u7F51\\uFF0C\\u6240\\u4EE5 IP \\u4E3A 192.168.31.44\\uFF08\\u6211\\u7684\\u7535\\u8111 IP \\u5730\\u5740\\uFF0C\\u4E0B\\u8282\\u4F1A\\u4ECB\\u7ECD\\uFF09\\uFF1B cdn.staticfile.org \\uFF08Server\\uFF09\\u7684 IP \\u4E3A 111.63.183.223\\uFF0C\\u56E0\\u4E3A\\u662F HTTP \\u8BF7\\u6C42\\uFF0C\\u6240\\u4EE5\\u7AEF\\u53E3\\u53F7\\u4E3A 80\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"111.63.183.223:80 \\u8FD4\\u56DE\\u4E00\\u4E2A HTTP \\u54CD\\u5E94\\u5230 Charles \\u7684\\u4EE3\\u7406\\u5BA2\\u6237\\u7AEF 192.168.31.44:56076\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"Charles \\u5185\\u90E8\\u505A\\u4E86\\u4E00\\u4E9B\\u5904\\u7406\\uFF08Capture & Analysis\\uFF09\\uFF0C\\u7136\\u540E\\u628A\\u54CD\\u5E94\\u62A5\\u6587\\u901A\\u8FC7 8888 \\u7AEF\\u53E3\\u53D1\\u9001\\u5230 127.0.0.1:56075\\uFF0C\\u5230\\u8FD9\\u91CC\\u6D4F\\u89C8\\u5668\\u5C31\\u6536\\u5230\\u4E86\\u54CD\\u5E94\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(A.h4,{id:\"https\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#https\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"HTTPS\"]}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.a,{href:\"https://segmentfault.com/a/1190000021494676\",children:\"HTTPS \\u8BE6\\u89E3\\u4E00\\uFF1A\\u9644\\u5E26\\u6700\\u7CBE\\u7F8E\\u8BE6\\u5C3D\\u7684 HTTPS \\u539F\\u7406\\u56FE\"})}),`\n`,(0,n.jsx)(A.p,{children:\"Https\\u5E76\\u975E\\u5E94\\u7528\\u5C42\\u7684\\u4E00\\u79CD\\u65B0\\u534F\\u8BAE\\uFF0C\\u53EA\\u662Fhttp\\u901A\\u4FE1\\u63A5\\u53E3\\u90E8\\u5206\\u7528ssl/tls\\u534F\\u8BAE\\u4EE3\\u66FF\\u800C\\u5DF2\\u3002\\u901A\\u5E38http\\u76F4\\u63A5\\u548Ctcp\\u901A\\u4FE1\\uFF0C\\u5F53\\u4F7F\\u7528ssl\\u65F6\\u5219\\u6F14\\u53D8\\u6210\\u5148\\u548Cssl\\u901A\\u4FE1\\uFF0C\\u518D\\u7531ssl\\u548Ctcp\\u901A\\u4FE1\\u3002\\u4E5F\\u5C31\\u662F HTTPS=HTTP+SSL\\u3002\"}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024833.png\",alt:\"\",width:\"1280\",height:\"1069\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAMFBMVEXz9Pr27evy6en009Tu7fDb2fPJyvf68/Pv0c7x5+Tz8fHR0fn+/v7xxsfm5PHo3t71P4NBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAN0lEQVR4nBXGRxLAIAwAsXUBXID8/7cZdBJ7SfllsyKKMUFE43vR1PT5YlZ+B+g56aOhzES6+QEoqwE/Asqa2AAAAABJRU5ErkJggg==\"})}),`\n`,(0,n.jsxs)(A.ol,{children:[`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u5BA2\\u6237\\u7AEF\\u53D1\\u8D77 https \\u8BF7\\u6C42,\\u8FDE\\u63A5\\u5230 server \\u7684443\\u63A5\\u53E3\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u91C7\\u7528 HTTPS \\u534F\\u8BAE\\u7684\\u670D\\u52A1\\u5668\\u5FC5\\u987B\\u8981\\u6709\\u4E00\\u5957\\u6570\\u5B57 CA (Certification Authority)\\u8BC1\\u4E66\\uFF0C\\u9881\\u53D1\\u8BC1\\u4E66\\u7684\\u540C\\u65F6\\u4F1A\\u4EA7\\u751F\\u4E00\\u4E2A\\u79C1\\u94A5\\u548C\\u516C\\u94A5\\u3002\\u79C1\\u94A5\\u7531\\u670D\\u52A1\\u7AEF\\u81EA\\u5DF1\\u4FDD\\u5B58\\uFF0C\\u4E0D\\u53EF\\u6CC4\\u6F0F\\u3002\\u516C\\u94A5\\u5219\\u662F\\u9644\\u5E26\\u5728\\u8BC1\\u4E66\\u7684\\u4FE1\\u606F\\u4E2D\\uFF0C\\u53EF\\u4EE5\\u516C\\u5F00\\u7684\\u3002\\u8BC1\\u4E66\\u672C\\u8EAB\\u4E5F\\u9644\\u5E26\\u4E00\\u4E2A\\u8BC1\\u4E66\\u7535\\u5B50\\u7B7E\\u540D\\uFF0C\\u8FD9\\u4E2A\\u7B7E\\u540D\\u7528\\u6765\\u9A8C\\u8BC1\\u8BC1\\u4E66\\u7684\\u5B8C\\u6574\\u6027\\u548C\\u771F\\u5B9E\\u6027\\uFF0C\\u53EF\\u4EE5\\u9632\\u6B62\\u8BC1\\u4E66\\u88AB\\u7BE1\\u6539\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u670D\\u52A1\\u7AEF\\u6536\\u5230\\u8BF7\\u6C42\\u540E\\u628A\\u8BC1\\u4E66+\\u516C\\u94A5\\u4F20\\u7ED9\\u5BA2\\u6237\\u7AEF\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u5BA2\\u6237\\u7AEF\\u89E3\\u6790\\u8BC1\\u4E66\\u5982\\u679C\\u8BC1\\u4E66\\u6CA1\\u6709\\u95EE\\u9898\\uFF0C\\u5BA2\\u6237\\u7AEF\\u5C31\\u4F1A\\u4ECE\\u670D\\u52A1\\u5668\\u8BC1\\u4E66\\u4E2D\\u53D6\\u51FA\\u670D\\u52A1\\u5668\\u7684\\u516C\\u94A5A\\u3002\\u7136\\u540E\\u5BA2\\u6237\\u7AEF\\u8FD8\\u4F1A\\u751F\\u6210\\u4E00\\u4E2A\\u968F\\u673A\\u7801 KEY\\uFF0C\\u5E76\\u4F7F\\u7528\\u516C\\u94A5A\\u5C06\\u5176\\u52A0\\u5BC6\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsxs)(A.p,{children:[\"\\u5BA2\\u6237\\u7AEF\\u628A\\u52A0\\u5BC6\\u540E\\u7684\\u968F\\u673A\\u7801 KEY \\u53D1\\u9001\\u7ED9\\u670D\\u52A1\\u5668\\uFF0C\\u4F5C\\u4E3A\\u540E\\u9762\",(0,n.jsx)(A.strong,{children:\"\\u5BF9\\u79F0\\u52A0\\u5BC6\"}),\"\\u7684\\u5BC6\\u94A5\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u670D\\u52A1\\u5668\\u5728\\u6536\\u5230\\u968F\\u673A\\u7801 KEY \\u4E4B\\u540E\\u4F1A\\u4F7F\\u7528\\u79C1\\u94A5B\\u5C06\\u5176\\u89E3\\u5BC6\\u3002\\u7ECF\\u8FC7\\u4EE5\\u4E0A\\u8FD9\\u4E9B\\u6B65\\u9AA4\\uFF0C\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u7EC8\\u4E8E\\u5EFA\\u7ACB\\u4E86\\u5B89\\u5168\\u8FDE\\u63A5\\uFF0C\\u5B8C\\u7F8E\\u89E3\\u51B3\\u4E86\\u5BF9\\u79F0\\u52A0\\u5BC6\\u7684\\u5BC6\\u94A5\\u6CC4\\u9732\\u95EE\\u9898\\uFF0C\\u63A5\\u4E0B\\u6765\\u5C31\\u53EF\\u4EE5\\u7528\\u5BF9\\u79F0\\u52A0\\u5BC6\\u6109\\u5FEB\\u5730\\u8FDB\\u884C\\u901A\\u4FE1\\u4E86\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u670D\\u52A1\\u5668\\u4F7F\\u7528\\u5BC6\\u94A5 (\\u968F\\u673A\\u7801 KEY)\\u5BF9\\u6570\\u636E\\u8FDB\\u884C\\u5BF9\\u79F0\\u52A0\\u5BC6\\u5E76\\u53D1\\u9001\\u7ED9\\u5BA2\\u6237\\u7AEF\\uFF0C\\u5BA2\\u6237\\u7AEF\\u4F7F\\u7528\\u76F8\\u540C\\u7684\\u5BC6\\u94A5 (\\u968F\\u673A\\u7801 KEY)\\u89E3\\u5BC6\\u6570\\u636E\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u53CC\\u65B9\\u4F7F\\u7528\\u5BF9\\u79F0\\u52A0\\u5BC6\\u6109\\u5FEB\\u5730\\u4F20\\u8F93\\u6240\\u6709\\u6570\\u636E\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(A.h4,{id:\"https\\u6293\\u5305\\u539F\\u7406\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#https\\u6293\\u5305\\u539F\\u7406\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"HTTPS\\u6293\\u5305\\u539F\\u7406\"]}),`\n`,(0,n.jsxs)(A.ul,{children:[`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u5BA2\\u6237\\u7AEF\\u53D1\\u8D77 SSL\\u63E1\\u624B\\u65F6,\\u4E2D\\u95F4\\u4EBA\\u52AB\\u6301\\u7528\\u6237\\u8BF7\\u6C42\\u5E76\\u4F2A\\u88C5\\u6210\\u5BA2\\u6237\\u7AEF\\u53D1\\u8D77 SSL \\u63E1\\u624B.\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u670D\\u52A1\\u7AEF\\u53D1\\u9001\\u516C\\u94A5\\u7ED9\\u4E2D\\u95F4\\u4EBA,\\u4E2D\\u95F4\\u4EBA\\u622A\\u83B7\\u8FD9\\u4E2A\\u516C\\u94A5\\u4FDD\\u5B58\\u8D77\\u6765,\\u5E76\\u628A\\u81EA\\u5DF1\\u7684\\u516C\\u94A5\\u53D1\\u9001\\u7ED9\\u5BA2\\u6237\\u7AEF.\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u5BA2\\u6237\\u7AEF\\u62FF\\u5230\\u66FF\\u6362\\u540E\\u7684\\u516C\\u94A5\\u52A0\\u5BC6\\u5BA2\\u6237\\u7AEF\\u7684\\u5BF9\\u79F0\\u5BC6\\u94A5\\u53D1\\u9001\\u8BF7\\u6C42\\u7ED9\\u4E2D\\u95F4\\u4EBA, \\u4E2D\\u95F4\\u4EBA\\u5229\\u7528\\u81EA\\u5DF1\\u7684\\u79C1\\u94A5\\u89E3\\u51FA\\u5BF9\\u79F0\\u5BC6\\u94A5,\\u8FD9\\u65F6\\u5019\\u4E2D\\u95F4\\u4EBA\\u5DF2\\u7ECF\\u62FF\\u5230\\u516C\\u94A5\\u548C\\u5BF9\\u79F0\\u5BC6\\u94A5,\\u518D\\u7528\\u670D\\u52A1\\u7AEF\\u53D1\\u7ED9\\u4E2D\\u95F4\\u4EBA\\u7684\\u516C\\u94A5\\u6765\\u52A0\\u5BC6\\u5BF9\\u79F0\\u5BC6\\u94A5,\\u53D1\\u9001\\u7ED9\\u670D\\u52A1\\u5668.\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u4E4B\\u540E\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u7AEF\\u6240\\u6709\\u7684\\u8BF7\\u6C42\\u7684\\u6570\\u636E\\u90FD\\u4F1A\\u88AB\\u4E2D\\u95F4\\u4EBA\\u5229\\u7528\\u5BF9\\u79F0\\u5BC6\\u94A5\\u89E3\\u5BC6\\u5F97\\u5230\\u6240\\u6709\\u7684\\u4FE1\\u606F.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u6240\\u4EE5\\u8981\\u6293\\u5305 HTTPS, \\u524D\\u63D0\\u662F\\u6211\\u4EEC\\u8981\\u5B89\\u88C5\\u5E76\\u4FE1\\u4EFB\\u5B83\\u7684\\u8BC1\\u4E66.\"}),`\n`,(0,n.jsxs)(A.h2,{id:\"eden-proxy\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#eden-proxy\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"Eden Proxy\"]}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.a,{href:\"https://bytedance.feishu.cn/wiki/wikcncZkURLnRSk9htQ5CrGOsZJ#MLsPDK\",children:\"Eden Proxy \\u539F\\u7406\\u5256\\u6790\"})}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.a,{href:\"https://tech.bytedance.net/articles/6851865198618214407#heading9\",children:\"Eden Proxy \\u539F\\u7406\\u548C\\u67B6\\u6784\\u2014\\u2014\\u89E3\\u6790 HTTP \\u4EE3\\u7406\\u3001TLS \\u548C\\u8BC1\\u4E66\\u4FE1\\u4EFB\\u94FE | ByteT \\u8BA1\\u5212\"})}),`\n`,(0,n.jsxs)(A.h3,{id:\"\\u662F\\u4EC0\\u4E48\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u662F\\u4EC0\\u4E48\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"\\u662F\\u4EC0\\u4E48\\uFF1F\"]}),`\n`,(0,n.jsxs)(A.p,{children:[\"Eden Proxy \\u662F \",(0,n.jsx)(A.a,{href:\"https://eden.bytedance.net/index-cn\",children:\"Eden\"}),\" \\u7684\\u91CD\\u8981\\u7EC4\\u6210\\u90E8\\u5206\\uFF0C\\u5B83\\u4E3A\\u672C\\u5730\\u6A21\\u62DF\\u7EBF\\u4E0A\\u73AF\\u5883\\u5F00\\u53D1\\u3001\\u8C03\\u8BD5\\u3001\\u6D4B\\u8BD5\\u7B49\\u63D0\\u4F9B\\u4E86\\u6280\\u672F\\u57FA\\u7840\\u3002Eden Proxy \\u901A\\u8FC7 HTTP \\u4EE3\\u7406\\u7684\\u5F62\\u5F0F\\u6765\\u5B8C\\u6210\\u8BF7\\u6C42\\u548C\\u54CD\\u5E94\\u7684\\u8F6C\\u53D1\\u3001\\u4FEE\\u6539\\u3001\\u62E6\\u622A\\uFF0C\\u4ECE\\u800C\\u8FBE\\u5230\\u8BF7\\u6C42\\u8F6C\\u53D1\\u5230\\u672C\\u5730\\u5F00\\u53D1\\u670D\\u52A1\\u6216\\u8005\\u672C\\u5730\\u6587\\u4EF6\\u6216\\u8005\\u8FDC\\u7A0B\\u670D\\u52A1\\u5668\\u7684\\u529F\\u80FD\\u3002\"]}),`\n`,(0,n.jsxs)(A.p,{children:[\"Eden Proxy \\u7684\\u57FA\\u672C\\u539F\\u7406\\u5C31\\u662F\\u5728\\u6D4F\\u89C8\\u5668\\u548C\\u670D\\u52A1\\u5668\\u4E4B\\u95F4\\u591A\\u4E86\\u4E00\\u5C42\\u4E2D\\u95F4\\u4EBA\\uFF08HTTP \\u4EE3\\u7406\\uFF09\\uFF0C\\u7531\\u4E2D\\u95F4\\u4EBA\\u6765\\u4F20\\u9012\\u4E24\\u8FB9\\u7684\\u901A\\u4FE1\\uFF0C\\u5728\\u4F20\\u9012\\u8FC7\\u7A0B\\u4E2D\\u53EF\\u4EE5\\u6839\\u636E\\u9700\\u8981\\u5BF9\\u8BF7\\u6C42/\\u54CD\\u5E94\\u8FDB\\u884C\\u4FEE\\u6539\\u3002\\u6216\\u8005\\u66F4\\u7B80\\u5355\\u4E00\\u70B9\\u6765\\u8BF4\\uFF0C\",(0,n.jsx)(A.strong,{children:\"Eden Proxy \\u8FDB\\u884C\\u4E86\\u201C\\u4E2D\\u95F4\\u4EBA\\u653B\\u51FB\\u201D\"})]}),`\n`,(0,n.jsxs)(A.h3,{id:\"http\\u4EE3\\u7406\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#http\\u4EE3\\u7406\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"HTTP\\u4EE3\\u7406\"]}),`\n`,(0,n.jsxs)(A.p,{children:[\"HTTP \\u4EE3\\u7406\\u662F Eden Proxy \\u7684\\u6838\\u5FC3\\uFF0CHTTP \\u4EE3\\u7406\\u662F\\u4F4D\\u4E8E\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u4E4B\\u95F4\\u7684\\u4E00\\u4E2A\\u5B9E\\u4F53\\uFF0C\\u5B83\\u5BF9\\u5BA2\\u6237\\u7AEF\\u5145\\u5F53\\u4E86\\u670D\\u52A1\\u5668\\uFF0C\\u800C\\u5BF9\\u670D\\u52A1\\u5668\\u5145\\u5F53\\u4E86\\u5BA2\\u6237\\u7AEF\\u3002HTTP \\u4EE3\\u7406\\u5206\\u4E24\\u79CD\\uFF0C\\u7B2C\\u4E00\\u79CD\\u79F0\\u4E3A\",(0,n.jsx)(A.strong,{children:\"\\u666E\\u901A\\u4EE3\\u7406\"}),\"\\uFF0C\\u7B2C\\u4E8C\\u79CD\\u79F0\\u4E3A\",(0,n.jsx)(A.strong,{children:\"\\u96A7\\u9053\\u4EE3\\u7406\"}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(A.ol,{children:[`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsxs)(A.h5,{id:\"\\u666E\\u901A\\u4EE3\\u7406\\u6B63\\u5411\\u4EE3\\u7406\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u666E\\u901A\\u4EE3\\u7406\\u6B63\\u5411\\u4EE3\\u7406\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"\\u666E\\u901A\\u4EE3\\u7406\\uFF08\\u6B63\\u5411\\u4EE3\\u7406\\uFF09\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(A.p,{children:[\"\\u6D4F\\u89C8\\u5668\\u5411\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\u53D1\\u8D77\\u8BF7\\u6C42\\uFF08\\u6BD4\\u5982\\u8BBF\\u95EE \",(0,n.jsx)(A.code,{children:\"http://gpcp-boe.bytedance.net\"}),\" \\uFF09\\uFF0C\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\u6536\\u5230\\u6D4F\\u89C8\\u5668\\u7684\",(0,n.jsx)(A.strong,{children:\"\\u5B8C\\u6574\\u8BF7\\u6C42\"}),\"\\u4E4B\\u540E\\uFF0C\\u5411\\u771F\\u6B63\\u7684\\u670D\\u52A1 xxx \\u53D1\\u8D77\\u8BF7\\u6C42\\uFF0C\\u4EE3\\u7406\\u5728\\u83B7\\u53D6\\u5230\",(0,n.jsx)(A.strong,{children:\"\\u5B8C\\u6574\\u54CD\\u5E94\"}),\"\\u4E4B\\u540E\\uFF0C\\u518D\\u5C06\\u54CD\\u5E94\\u8FD4\\u56DE\\u7ED9\\u6D4F\\u89C8\\u5668\\u3002\"]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u666E\\u901A HTTP \\u4EE3\\u7406\\u5E76\\u4E0D\\u80FD\\u4EE3\\u7406 HTTPS \\u534F\\u8BAE\\u3002\\uFF08\\u65E0\\u79C1\\u94A5\\u548C\\u8BC1\\u4E66\\uFF09\"}),`\n`,(0,n.jsxs)(A.ol,{start:\"2\",children:[`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsxs)(A.h5,{id:\"\\u96A7\\u9053\\u4EE3\\u7406\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u96A7\\u9053\\u4EE3\\u7406\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"\\u96A7\\u9053\\u4EE3\\u7406\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(A.p,{children:[\"\\u96A7\\u9053\\u4EE3\\u7406\\u4F1A\\u5728\\u5B9E\\u9645\\u5BA2\\u6237\\u7AEF\\u548C\\u5B9E\\u9645\\u670D\\u52A1\\u7AEF\\u4E4B\\u95F4\\u5EFA\\u7ACB\\u4E00\\u4E2A TCP \\u96A7\\u9053\\uFF0C\\u4EE3\\u7406\\u4F1A\",(0,n.jsx)(A.strong,{children:\"\\u76F2\\u8F6C\\u53D1\"}),\"\\u4E24\\u8FB9\\u7684\\u901A\\u4FE1\\u5185\\u5BB9\\uFF0C\\u5373\\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u7ED9\\u670D\\u52A1\\u7AEF\\u7684\\u6570\\u636E\\uFF0C\\u4F1A\\u901A\\u8FC7\\u8FD9\\u4E2A\\u4EE3\\u7406\\u5EFA\\u7ACB\\u7684 TCP \\u96A7\\u9053\",(0,n.jsx)(A.strong,{children:\"\\u76F4\\u63A5\\u5230\\u8FBE\"}),\"\\u670D\\u52A1\\u7AEF\\uFF0C\\u53CD\\u4E4B\\u4EA6\\u7136\\u3002\\u96A7\\u9053\\u4EE3\\u7406\\u4E0D\\u9700\\u8981\\u83B7\\u53D6\\u5B8C\\u6574\\u7684\\u8BF7\\u6C42/\\u54CD\\u5E94\\u624D\\u80FD\\u53D1\\u9001\\u5B9E\\u9645\\u8BF7\\u6C42/\\u54CD\\u5E94\\uFF0C\\u800C\\u662F\\u6536\\u5230\\u4E00\\u70B9\\uFF0C\\u53D1\\u9001\\u4E00\\u70B9\\uFF0C\",(0,n.jsx)(A.strong,{children:\"\\u4E0D\\u505A\\u89E3\\u6790\\u3001\\u4E0D\\u505A\\u5904\\u7406\"}),\"\\u3002\"]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u6B63\\u56E0\\u4E3A\\u96A7\\u9053\\u4EE3\\u7406\\u7684\\u8FD9\\u79CD\\u76F2\\u8F6C\\u53D1\\u7279\\u6027\\uFF0C\\u96A7\\u9053\\u4EE3\\u7406\\u4E0D\\u4EC5\\u53EF\\u4EE5\\u7528\\u4E8E HTTP \\u4EE3\\u7406\\uFF0C\\u8FD8\\u53EF\\u4EE5\\u7528\\u4E8E HTTPS \\u4EE3\\u7406\\uFF0C\\u5B9E\\u9645\\u4E0A\\u4EFB\\u4F55\\u57FA\\u4E8E TCP \\u7684\\u4E0A\\u5C42\\u534F\\u8BAE\\u90FD\\u53EF\\u4EE5\\u4F7F\\u7528\\u96A7\\u9053\\u4EE3\\u7406\\uFF08\\u6BD4\\u5982 SMTP\\u3001POP3 \\u7B49\\uFF09\\u3002\"}),`\n`,(0,n.jsx)(A.p,{children:\"\\u603B\\u7ED3\\uFF1A\\u666E\\u901A\\u4EE3\\u7406\\u65E0\\u6CD5\\u4EE3\\u7406 HTTPS \\u534F\\u8BAE\\uFF0C\\u96A7\\u9053\\u4EE3\\u7406\\u867D\\u7136\\u80FD\\u4EE3\\u7406 HTTPS \\u534F\\u8BAE\\u4F46\\u662F\\u4E0D\\u80FD\\u83B7\\u53D6\\u8BF7\\u6C42\\u7684\\u660E\\u6587\\uFF0C\\u8FD9\\u6837\\u5C31\\u65E0\\u6CD5\\u4FEE\\u6539\\u4EE3\\u7406\\u7684\\u5185\\u5BB9\\u3002\"}),`\n`,(0,n.jsxs)(A.h3,{id:\"https\\u4EE3\\u7406\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#https\\u4EE3\\u7406\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"HTTPS\\u4EE3\\u7406\"]}),`\n`,(0,n.jsxs)(A.p,{children:[\"\\u56E0\\u4E3A Eden Proxy \\u9700\\u8981\\u77E5\\u9053\\u8BF7\\u6C42\\u7684\\u660E\\u6587\\uFF0C\\u6240\\u4EE5\\u76F4\\u63A5\\u4F7F\\u7528\\u96A7\\u9053\\u4EE3\\u7406\\u5E76\\u4E0D\\u9002\\u5408\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u5BF9\\u96A7\\u9053\\u4EE3\\u7406\\u505A\\u4E00\\u4E9B\\u6539\\u53D8\\uFF0C\\u5728\\u5BA2\\u6237\\u7AEF\\u4E0E\\u4EE3\\u7406\\u5EFA\\u7ACB\\u96A7\\u9053\\u7684 TCP \\u8FDE\\u63A5\\u4E4B\\u540E\\uFF0C\\u5C06\\u5BA2\\u6237\\u7AEF\\u7684\\u6570\\u636E\\u8F6C\\u53D1\\u5230\\u4E00\\u4E2A\\u672C\\u5730\\u7684 HTTPS \\u670D\\u52A1\\u5668\\u4E0A\\uFF0C\\u672C\\u5730\\u7684 HTTPS \\u670D\\u52A1\\u5668\\u8D1F\\u8D23\\u4E0E\\u771F\\u5B9E\\u670D\\u52A1\\u5668\\u8FDB\\u884C\\u901A\\u4FE1\\u3002\\u901A\\u8FC7\\u8FD9\\u79CD\\u624B\\u6BB5\\uFF0C\\u5BA2\\u6237\\u7AEF\\u548C\\u4EE3\\u7406\\u4E4B\\u95F4\\u5EFA\\u7ACB\\u7684\\u8FD8\\u662F\\u96A7\\u9053\\u8FDE\\u63A5\\uFF08\",(0,n.jsx)(A.strong,{children:\"\\u53EA\\u4E0D\\u8FC7\\u96A7\\u9053\\u7684\\u53E6\\u4E00\\u7AEF\\u4E0D\\u662F\\u771F\\u6B63\\u7684\\u539F\\u59CB\\u670D\\u52A1\\u5668\\uFF0C\\u800C\\u662F\\u4E00\\u4E2A\\u672C\\u5730\\u7684 HTTPS \\u670D\\u52A1\\u5668\"}),\"\\uFF09\\uFF0C\\u53CC\\u65B9\\u901A\\u4FE1\\u7684\\u6570\\u636E\\u5219\\u7ECF\\u8FC7\\u4E86\\u672C\\u5730\\u7684 HTTPS \\u670D\\u52A1\\u5668\\uFF0CHTTPS \\u670D\\u52A1\\u5668\\u5C31\\u53EF\\u4EE5\\u6839\\u636E\\u9700\\u8981\\u4FEE\\u6539\\u8BF7\\u6C42\\u6216\\u8005\\u54CD\\u5E94\\u7684\\u5185\\u5BB9\\u4E86\\u3002\"]}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024855.png\",alt:\"\",width:\"1280\",height:\"493\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAACVBMVEX5+vvz+Pf+/v4ud+lnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAG0lEQVR4nGNgYGBgYAIhJgZGBgZGRgYwAeIAAADMAA9H+F3nAAAAAElFTkSuQmCC\"})}),`\n`,(0,n.jsx)(A.p,{children:\"\\u4E0ECharles\\uFF0C\\u8FDB\\u884CHTTPS\\u6293\\u5305\\u7C7B\\u4F3C\\uFF0C\\u5728\\u5BA2\\u6237\\u7AEF\\u548C\\u672C\\u5730HTTPS\\u670D\\u52A1\\u5668\\u901A\\u4FE1\\u65F6\\u4F1A\\u4EA7\\u751F\\u8FDE\\u63A5\\u4E0D\\u5B89\\u5168\\u7684\\u95EE\\u9898\\uFF0C\\u4E2A\\u95EE\\u9898\\u7684\\u6838\\u5FC3\\u662F\\u672C\\u5730 HTTPS \\u670D\\u52A1\\u5668\\u65E0\\u6CD5\\u751F\\u6210\\u7531\\u7CFB\\u7EDF\\u4FE1\\u4EFB\\u7684 CA \\u7B7E\\u53D1\\u7684\\u57DF\\u540D\\u7684\\u8BC1\\u4E66\\u3002\"}),`\n`,(0,n.jsxs)(A.p,{children:[\"\\u8FD9\\u5C31\\u662F\\u4E3A\\u4EC0\\u4E48\\u5728\\u4F7F\\u7528 Eden Proxy \\u4E4B\\u524D\\u4F1A\\u8981\\u6C42\\u5148\\u88C5\\u4E00\\u4E2A\\u6839\\u8BC1\\u4E66\\u3002\\u8FD9\\u4E2A\\u6839\\u8BC1\\u4E66\\u5C31\\u662F\\u7528\\u6765\\u7ED9\\u4EFB\\u610F\\u57DF\\u540D\\u7B7E\\u53D1\\u7CFB\\u7EDF\\u80FD\\u4FE1\\u4EFB\\u7684 TLS \\u8BC1\\u4E66\\u7684\\u3002\\u6709\\u4E86\\u6839\\u8BC1\\u4E66\\u4E4B\\u540E\\uFF0C\\u5BA2\\u6237\\u7AEF\\u7ECF\\u8FC7\\u4EE3\\u7406\\u7684 HTTPS \\u8FDE\\u63A5\\uFF0C\\u5B9E\\u9645\\u4E0A\",(0,n.jsx)(A.strong,{children:\"\\u662F\\u548C\\u4E00\\u53F0\\u672C\\u5730 HTTPS \\u670D\\u52A1\\u5668\\u5EFA\\u7ACB\\u4E86\\u201C\\u5B89\\u5168\\u201D\\u7684 HTTPS \\u8FDE\\u63A5\\uFF08\\u81EA\\u7B7E\\u540D\\u8BC1\\u4E66\\uFF09\\uFF0C\\u800C\\u672C\\u5730\\u7684 HTTPS \\u670D\\u52A1\\u5668\\u5219\\u548C\\u539F\\u59CB\\u670D\\u52A1\\u5668\\u5EFA\\u7ACB\\u4E86\\u771F\\u6B63\\u5B89\\u5168\\u7684 HTTPS \\u8FDE\\u63A5\\uFF08\\u5408\\u6CD5\"}),\" \",(0,n.jsx)(A.strong,{children:\"CA\"}),\" \",(0,n.jsx)(A.strong,{children:\"\\u7B7E\\u53D1\\u7684\\u8BC1\\u4E66\\uFF09\"}),\"\\u3002\\u8FD9\\u65F6\\u5019\\u4EE3\\u7406\\u5C31\\u53EF\\u4EE5\\u5145\\u5F53\\u4E00\\u4E2A\\u201C\\u5B89\\u5168\\u201D\\u7684\\u4E2D\\u95F4\\u4EBA\\u4E86\\uFF0C\\u5BA2\\u6237\\u7AEF\\u5C06\\u6570\\u636E\\u901A\\u8FC7\\u4EE3\\u7406\\u7684 TCP \\u96A7\\u9053\\u8FDE\\u63A5\\u4EA4\\u7ED9\\u672C\\u5730\\u7684 HTTPS \\u670D\\u52A1\\u5668\\uFF0C\\u672C\\u5730 HTTPS \\u670D\\u52A1\\u5668\\u518D\\u901A\\u8FC7\\u5B89\\u5168\\u7684 HTTPS \\u8FDE\\u63A5\\u4EA4\\u7ED9\\u6E90\\u670D\\u52A1\\u5668\\u3002\"]}),`\n`,(0,n.jsxs)(A.h3,{id:\"code-review\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#code-review\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"Code Review\"]}),`\n`,(0,n.jsxs)(A.blockquote,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u8FD9\\u4E5F\\u5C31\\u89E3\\u91CA\\u4E86\\u4E00\\u76F4\\u56F0\\u6270\\u5C0F\\u767D\\u7684\\u95EE\\u9898\\uFF1A\\u4E3A\\u4EC0\\u4E48\\u8D70boe\\u3001ppe\\u73AF\\u5883\\uFF0C\\u672C\\u5730\\u542F\\u52A8\\u540E\\uFF0C\\u53EF\\u4EE5\\u5B9E\\u73B0\\u70ED\\u66F4\\u65B0\\uFF1F\"}),`\n`]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u901A\\u8FC7\\u914D\\u7F6EEden Proxy\\u5373\\u53EF\\u5C06\\u5176\\u4ED6\\u57DF\\u540D\\u4EE3\\u7406\\u5230\\u672C\\u5730\\uFF0C\\u4EE5\\u6B64\\u53EF\\u4EE5\\u5B9E\\u73B0\\u672C\\u5730\\u4EE3\\u7801\\u5F00\\u53D1\\uFF0C\\u800C\\u4E00\\u4E9Bapi\\uFF0C\\u901A\\u8FC7\\u8BBE\\u7F6E\\u6D41\\u91CF\\u5934\\u8BF7\\u6C42\\u5230boe\\u3001ppe\\u7684\\u540E\\u7AEF\\u6570\\u636E\\u3002\"}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024932.png\",alt:\"\",width:\"1280\",height:\"514\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAACVBMVEUeHh4kJSQpLCw/iBG2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGklEQVR4nGNgYmJiZAABJhCLkZGRgRHCZwAAAYEAFlSe4yYAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024939.png\",alt:\"\",width:\"1280\",height:\"304\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAGFBMVEXo29z99vbr6env8PDj4+L27u/c3N3///8Kw8UzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAF0lEQVR4nGNgYwABZmYGFiZWVkZGRnYAASwAJwjf3LwAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024947.png\",alt:\"\",width:\"1280\",height:\"427\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAADFBMVEX39vn38vT7+/zz6vB1lJylAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAG0lEQVR4nAXBAQEAAACCILX/nwMUqtg2MHQCHQHzACJxMIcrAAAAAElFTkSuQmCC\"})}),`\n`,(0,n.jsxs)(A.p,{children:[\"\\u4E5F\\u53EF\\u4EE5\\u6253\\u5F00\",(0,n.jsx)(A.code,{children:\"http://localhost:15323/\"}),\"\\u770B\\u770B\"]}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119024956.png\",alt:\"\",width:\"1280\",height:\"199\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAACVBMVEX7+/v07u7x6uost8/lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEUlEQVR4nGNgYmRiZGBgYAAAADEABxjKO0AAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsxs)(A.h3,{id:\"\\u591A\\u9879\\u76EE\\u652F\\u6301\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u591A\\u9879\\u76EE\\u652F\\u6301\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"\\u591A\\u9879\\u76EE\\u652F\\u6301\"]}),`\n`,(0,n.jsxs)(A.p,{children:[\"\\u5728\\u5B9E\\u9645\\u5F00\\u53D1\\u4E2D\\uFF0C\\u7ECF\\u5E38\\u4F1A\\u9047\\u5230\",(0,n.jsx)(A.strong,{children:\"\\u591A\\u4E2A\\u9879\\u76EE\\u540C\\u65F6\\u5F00\\u7740\"}),\"\\u7684\\u60C5\\u51B5\\uFF0C\\u8FD9\\u65F6\\u5019\\u5982\\u4F55\\u652F\\u6301\\u51E0\\u4E2A\\u9879\\u76EE\\u7684\\u89C4\\u5219\\u540C\\u65F6\\u751F\\u6548\\u3001\\u5982\\u4F55\\u5E73\\u6ED1\\u5730\\u7BA1\\u7406\\u9879\\u76EE\\u6DFB\\u52A0\\u6216\\u8005\\u9000\\u51FA\\u65F6\\u7684\\u89C4\\u5219\\u53D8\\u5316\\u5C31\\u6210\\u4E86\\u4E00\\u4E2A\\u68D8\\u624B\\u7684\\u95EE\\u9898\\u3002\"]}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119025003.png\",alt:\"\",width:\"1200\",height:\"333\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAACVBMVEX9/f32+/r89/TNGjHPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGElEQVR4nAXBAQEAAACCIOz/6ACLYtvUAQCCABDmNlY8AAAAAElFTkSuQmCC\"})}),`\n`,(0,n.jsxs)(A.p,{children:[\"Eden Proxy \\u91C7\\u7528\\u7684\\u662F \",(0,n.jsx)(A.strong,{children:\"Master-Slave \\u5F62\\u5F0F\"}),\"\\u7684\\u67B6\\u6784\\uFF1A\"]}),`\n`,(0,n.jsxs)(A.ul,{children:[`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"Master \\u662F\\u4E00\\u4E2A Proxy Server\\uFF0C\\u8D1F\\u8D23\\u6839\\u636E\\u914D\\u7F6E\\u6587\\u4EF6\\u8FDB\\u884C\\u5B9E\\u9645\\u7684\\u4EE3\\u7406\\u5DE5\\u4F5C\\uFF0C\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"Slave \\u662F\\u4E00\\u4E2A Proxy Service\\uFF0C\\u8D1F\\u8D23\\u4E0E Master \\u8FDB\\u884C\\u901A\\u4FE1\\uFF0C\\u544A\\u8BC9 Master \\u8BE5\\u8BFB\\u53D6\\u54EA\\u4E2A\\u914D\\u7F6E\\u6587\\u4EF6\\uFF0C\\u5E76\\u5728 Master \\u672A\\u542F\\u52A8\\u65F6\\u542F\\u52A8\\u4E00\\u4E2A Master \\u8FDB\\u7A0B\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"Master \\u548C Slave \\u8FD0\\u884C\\u5728\\u4E0D\\u540C\\u7684\\u8FDB\\u7A0B\\u4E2D\\u3002Master \\u548C Slave \\u4E4B\\u95F4\\u901A\\u8FC7 WebSocket \\u8FDB\\u884C\\u901A\\u4FE1\\uFF0CMaster \\u548C\\u63A7\\u5236\\u53F0\\u4E5F\\u662F\\u901A\\u8FC7 WebSocket \\u8FDB\\u884C\\u901A\\u4FE1\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u5728 Eden Proxy \\u4E2D\\uFF0CMaster \\u8D1F\\u8D23\\u51E0\\u4E4E\\u6240\\u6709\\u5DE5\\u4F5C\\uFF1A\"}),`\n`,(0,n.jsxs)(A.ul,{children:[`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u4EE3\\u7406\\u670D\\u52A1\\u5668\\u7684\\u5B9E\\u73B0\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u7CFB\\u7EDF\\u4EE3\\u7406\\u7684\\u8BBE\\u7F6E\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u63A7\\u5236\\u53F0\\u7684 HTTP \\u670D\\u52A1\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u4E0E\\u63A7\\u5236\\u53F0\\u53CC\\u5411\\u901A\\u4FE1\\u7684 WebSocket \\u670D\\u52A1\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u5728 Slave \\u53D1\\u9001\\u6DFB\\u52A0/\\u9000\\u51FA\\u9879\\u76EE\\u65F6\\u66F4\\u65B0\\u89C4\\u5219\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(A.p,{children:\"\\u800C Slave \\u7684\\u5DE5\\u4F5C\\u5C31\\u6BD4\\u8F83\\u7B80\\u5355\\uFF0C\\u53EA\\u6709\\u4E24\\u6B65\\uFF1A\"}),`\n`,(0,n.jsxs)(A.ul,{children:[`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsx)(A.p,{children:\"\\u5C1D\\u8BD5\\u4E0E Master\\uFF08\\u5982\\u679C\\u5DF2\\u542F\\u52A8\\uFF09\\u901A\\u4FE1\\uFF0C\\u6210\\u529F\\u5219\\u5C06\\u544A\\u77E5 Master \\u8981\\u6DFB\\u52A0\\u7684\\u9879\\u76EE\"}),`\n`]}),`\n`,(0,n.jsxs)(A.li,{children:[`\n`,(0,n.jsxs)(A.p,{children:[\"\\u5982\\u679C\\u5931\\u8D25\\uFF0C\\u542F\\u52A8\\u4E00\\u4E2A Master\\uFF0C\\u518D\\u56DE\\u5230\\u7B2C\\u4E00\\u6B65\\u3002\\u5728\\u8FD9\\u4E00\\u6B65\\u4E2D\\uFF0C\\u7531 Slave \\u542F\\u52A8\\u7684 Master \\u8FDB\\u7A0B\\u4E0D\\u662F Slave \\u8FDB\\u7A0B\\u7684\\u5B50\\u8FDB\\u7A0B\\uFF0C\\u56E0\\u6B64 Slave \\u9000\\u51FA\\u65F6\\uFF0CMaster \\u8FDB\\u7A0B\\u5E76\\u4E0D\\u4F1A\\u9000\\u51FA\\uFF0C\\u8FD9\\u662F\\u901A\\u8FC7 Node.js \",(0,n.jsx)(A.code,{children:\"child_process\"}),\" \\u7684\\u4E00\\u4E2A\\u9009\\u9879 \",(0,n.jsx)(A.code,{children:\"detached\"}),\" \\u6765\\u5B9E\\u73B0\\u7684\\uFF0C\\u4EE3\\u7801\\u53EF\\u4EE5\\u770B\",(0,n.jsx)(A.a,{href:\"https://code.byted.org/ife/eden-set/blob/feature-1.17/packages/utils/eden-proxy-next/src/proxyServer/createProxyServer.ts#L27\",children:\"\\u8FD9\\u91CC\"}),\"\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(A.h2,{id:\"bam-mock\",children:[(0,n.jsx)(A.a,{className:\"header-anchor\",href:\"#bam-mock\",children:(0,n.jsx)(A.span,{className:\"icon icon-link\"})}),\"Bam Mock\"]}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.a,{href:\"https://bytedance.feishu.cn/docs/doccnlKTL7PgMi6lHx1vQYXCwYn#kGZlqK\",children:\"BAM Mock/\\u589E\\u5F3A\\u5F00\\u53D1\\u5DE5\\u5177 Chrome \\u63D2\\u4EF6\\u4F7F\\u7528\\u8BF4\\u660E\"})}),`\n`,(0,n.jsx)(A.p,{children:\"Mock\\u7684\\u4F18\\u5148\\u7EA7\\u8F83\\u9AD8,Eden Proxy\\u4E2D\\u4E0D\\u4F1A\\u6355\\u83B7\\u5230\\u3002\"}),`\n`,(0,n.jsx)(A.p,{children:(0,n.jsx)(A.img,{src:\"/post/assets/2022-09-12-proxy-charles-20250119025013.png\",alt:\"\",width:\"1280\",height:\"327\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAD1BMVEXq6uvt7/D38PHe5eX8/f5jV8lWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAF0lEQVR4nGNgYGZmZmBgZAQhJiYmFhYAAOEAHH83FwgAAAAASUVORK5CYII=\"})})]})}function M(e={}){let{wrapper:A}=e.components||{};return A?(0,n.jsx)(A,Object.assign({},e,{children:(0,n.jsx)(d,e)})):d(e)}var w=M;return C(B);})();\n;return Component;"
    },
    "_id": "post/2022-09-12-proxy-charles.md",
    "_raw": {
      "sourceFilePath": "post/2022-09-12-proxy-charles.md",
      "sourceFileName": "2022-09-12-proxy-charles.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2022-09-12-proxy-charles"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2022-09-12-proxy-charles",
    "slugAsParams": "2022-09-12-proxy-charles"
  },
  {
    "title": "微前端-Garfish & qiankun",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2022-11-25T00:00:00.000Z",
    "body": {
      "raw": "> garfish官方文档 移步👉🏻https://garfish.fn.bytedance.net/guide/\n> \n> qiankun官方文档 移步👉🏻https://qiankun.umijs.org/zh/guide/getting-started\n> \n> 为什么不是iframe？ 移步👉🏻 [Why Not Iframe](https://www.yuque.com/kuitos/gky7yw/gesexv) （简而言之，隔离性太强，共享能力弱）\n\n  \n\n### 概况\n\n微前端目前的落地方案可分为：自组织模式、基座模式、模块加载模式。\n\n与基座模式相比，模块加载模式没有中心容器（去中心化模式），这就意味着任何一个微应用都可以当作模块入口，整个项目的微应用与微应用之间相互串联。具体的代表库就是 [qiankun](https://link.juejin.cn?target=https%3A%2F%2Fqiankun.umijs.org%2Fzh%2Fguide) vs [EMP](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FefoxTeam%2Femp)。\n\n实现模块加载模式需要依赖于 webpack5 的 [Module Federation](https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fconcepts%2Fmodule-federation%2F) 功能。\n\n![](assets/2022-11-25-Garfish-qiankun-20250119025415.png)\n\n  \n\n![](https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=MjU0ZDA2ZDI1NzE2YzgyYzM1Nzk3MzU4ZTk0NWI4MDhfZ3Jpb2JqQ1JaTGdpV3UzMXlRbGwxUGRlOWJIeFVXRHhfVG9rZW46Ym94Y25uUGNyMEV0Mlo4WkF0OVZjbnplaGlkXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA)\n\n![](https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=N2ZmOGFmMDkxMjg5ZWMxMmMyOWE4OTcwMjgwZjQzMDdfQlBXeUp0eHNFTXU2ZTJ0Qkt4b2xMcjBRZTRwVGhQSWxfVG9rZW46Ym94Y241OUUzQWp3clJETkdQU3hiNGNodWhmXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA)\n\n[Garfish 微前端实现原理](https://tech.bytedance.net/articles/7090836932149641224)\n\n[微前端技术原理](https://juejin.cn/post/7099339595233361934)\n\n  \n\n### 生命周期\n\n`Garfish` 应用的生命周期可以归结为：加载、渲染、销毁 三个阶段\n\n- 加载主要是通过 [Garfish.loadApp](https://www.garfishjs.org/api/loadApp)，通过 `loadApp` API 会自动创建应用的实例，\n    \n- 通过应用实例上的 `mount` 和 `show` 方法对应用进行渲染\n    \n- 通过 `unmount` 和 `hide` 方法对应用进行销毁\n    \n\n用户在实际使用的过程中通过 [Garfish.run](https://www.garfishjs.org/api/run)会发现当路由发生变化时符合加载条件的应用会自动加载渲染，实际上是 **`[Garfish Router Plugin](https://www.garfishjs.org/guide/router)`** **通过监听路由变化来触发** **`loadApp`** **和** **`mount`** **自动完成应用的加载、渲染、销毁。**\n\n![](https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGVjZmU3MmUyZTkwNTc3MmM3ZTk2MzM0Yjc2OTNmODdfRWFLeDAxRGpnOHR0eDkxTHZMcTdoQWpnZmM1c1ZBSnRfVG9rZW46Ym94Y25GS0xtRTZrMXNMMWhnVVUzTmROeUlkXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA)\n\n- `loadApp`：\n    \n    - beforeLoad()\n        \n    - 加载资源，html用fetch，js文件用script标签请求\n        \n    - New App()\n        \n    - Plugin & cache\n        \n    - afterLoad()\n        \n- `mount`\n    \n    - beforeMount 钩子\n        \n    - 将 app set 到 Garfish.activeApps 中\n        \n    - 创建 app container并添加到文档流上，编译子应用的代码 compileAndRenderContainer()\n        \n    - 拿到子应用的 provider,调用 provider.render\n        \n    - 将 app.display 和 app.mounted 设置为 true\n        \n    - afterMount 钩子\n        \n    - 如果渲染失败，app.mount 会返回 false，否则渲染成功会返回 true\n        \n- `show`\n    \n    - beforeMount 钩子\n        \n    - 将 app set 到 Garfish.activeApps 中\n        \n    - app container添加到文档流上\n        \n    - 调用 provider.render\n        \n    - 将 app.display 设置为 true\n        \n    - afterMount 钩子\n        \n\n  \n\n  \n\n### 加载器 - Loader\n\n#### JS Entry\n\n在主应用的同一页面载入子应用，可以通过将**子应用的所有资源**（包括布局、功能逻辑与素材）打包进一个js文件里，并将这个文件作为资源的入口在主应用引入，参考 single-spa 的[这个实现](https://github.com/joeldenning/simple-single-spa-webpack-example/blob/master/src/root-application/root-application.js)。\n\n> Js Entry 的缺点是：\n> \n> - 子应用更新打包后的 js bundle 名称会变化，主应用需要保证每次获取都是最新的 js bundle。\n>     \n> - 子应用所有资源打包到一个文件中，会失去 css 提取、静态资源并行加载、首屏加载(体积巨大)等优化。\n>     \n> - 需要在子应用打包过程中，修改相应的配置以补全子应用 js 资源的路径。\n>     \n> - 这种方式增加了主子应用的耦合性，且加载子应用的过程中无法并行加载，存在单个资源过大的问题，较难提升整体的效率；但该方案对应用的部署流程较为便捷，且要求较低。\n>     \n\n#### HTML Entry\n\n主应用在运行时通过提供单独打包好的子应用 URL 地址，以 `fetch` 方式获取子应用的 HTML 文件，经过处理后在指定的容器中**插入 HTML 内容**，这样的方式称为 HTML Entry。相较于 JS Entry 方式，html Entry有着更低的耦合性和更大的灵活度，支持主应用在 fetch 后进行二次处理，通过 CSS 增加前缀、JS sandbox 等方式实现样式隔离和 JS 沙箱隔离，且能对静态资源采用并行加载，子应用的更新可以单独发布；但这种方式必须需要子应用支持跨域。 qiankun 框架采用的就是 HTML Entry 的形式进行子应用的载入，参考官网的 [demo](https://qiankun.umijs.org/zh/api#registermicroappsapps-lifecycles) 注册环节。\n\n  \n\n不论是`qiankun`还是`garfish`都需要**子应用在入口js**中提供生命周期钩子，以供主应用在合适的时机调用。\n\n`qiankun`需要子应用至少导出 `bootstrap`、`mount`、`unmount` 三个生命周期钩子；\n\n`garifsh`需要子应用导出`provider`生命周期钩子\n\n  \n\n1. 根据提供的url作为入口文件加载资源**。通过fetch拿到资源内容**\n    \n    1. 如果是html资源入口会进行标签的序列化和相关处理（具体往下看）。\n        \n    2. 如果是js文件则会直接实例化一个js资源类，目的是保存加载到资源的类型，大小，代码字符串等基本信息。并会尝试缓存加载的资源。\n        \n2. 拿到html文件后如何解析并处理html文件的呢？\n    \n    1. 对加载的html资源进行**AST解析,结构化dom**，以便提取不同类型的标签内容。\n        \n    2. 结构化后进行深度优先遍历把**`link`****,****`style`****,****`script`****标签提取出来**\n        \n        1. 由于当前各个框架的实现基本都是有js生成dom并挂载到指定的元素上，因此这里只要把这三种加载资源的标签提取出来基本就完成了页面的加载。\n            \n        2. 当然还需要配合微前端的加载方式改造下子系统入口，让挂载函数指向主应用提供的dom。至此我们完成了基本资源的提取。\n            \n    \n      \n    \n\n### 环境隔离--CSS\n\n除了 single-spa 默认不提供样式隔离功能外，其余主流的微前端框架都实现了基于子应用作用域下的 CSS 样式隔离（原理类似 Vue 的 style scopted 实现方式）。\n\n- 动态样式表\n    \n- 工程化手段\n    \n    - BEM\n        \n    - CSS Modules\n        \n    - CSS in JS\n        \n- Shadow Dom\n    \n\n  \n\n- **CSS Module & CSS Namespace**\n    \n- **CSS Scope**：一句话理解，就是给子应用的所有样式规则添加一个 scope（类似 Vue 中的 )。\n    \n\n由于子应用有名称作为唯一标示，且挂载的容器在子应用切换时可以保证唯一性，可以通过统一加 `scope` 的形式处理所有的子应用样式。分为编译时和运行时两种处理方案：编译时提供 `webpack` 插件，对 `css` 编译时自动给子应用的样式添加 `scope`；运行时则是加载子应用时解析，由 `loader` 负责处理。\n\n```JavaScript\n// 假如子应用名字叫 child\n// 转换前\n.app-main {\n    font-size: 14px;\n}\n// 转换后\ndiv[data-qiankun=\"child\"] .app-main {\n    font-size: 14px;\n}\n```\n\n- **Shadow DOM**：给子应用容器节点挂载一个 shadow DOM，以实现父子应用、多个子应用之间的样式隔离。\n    \n\n  \n\n### 环境隔离--JS\n\n[三种沙箱隔离方式](https://blog.csdn.net/qq_44746132/article/details/117385571?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166210607016782425122601%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=166210607016782425122601&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-6-117385571-null-null.142^v44^new_blog_pos_by_title&utm_term=%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%B2%99%E7%AE%B1&spm=1018.2226.3001.4187)\n\nJs 沙箱做的事情可以用两句话概括：\n\n1. 为每一个子应用创建一个专属的 “window 对象” (不是真的 window 对象)；\n    \n2. 劫持并代理window，避免数据污染，沙箱内的数据不会暴露到全局。\n    \n\n#### snapshotSandbox - 快照沙箱\n\n> 在某个阶段给当前的运行环境打一个快照，再在需要的时候把快照恢复，从而实现隔离。\n\n1. 在激活前的时候遍历 window 上的变量，存为 `snapshotOriginal`\n    \n2. 在失活的时候再次遍历 window 上的变量，分别和 `snapshotOriginal` 对比，将不同的存到 `snapshotMutated` 里，将 window 恢复回到 `snapshotOriginal`\n    \n3. 当应用再次切换的时候，就可以把 `snapshotMutated` 的变量恢复回 `window` 上，实现一次沙箱的切换。\n    \n\n#### proxySandbox - 代理沙箱\n\n> 当有多个实例的时候，比如有`A`、`B`两个应用，`A` 应用就活在 `A` 应用的沙箱里面，`B` 应用就活在 `B` 应用的沙箱里面，`A` 和 `B` 无法互相干扰，这样的沙箱就是代理沙箱，这个沙箱的实现思路其实也是通过 `ES6` 的 [proxy](https://developer.mozilla.org/zh-cn/docs/web/javascript/reference/global_objects/proxy)，通过代理特性实现的。\n\n```JavaScript\nconst varBox = {};\nconst fakeWindow = new Proxy(window, {\n  get(target, key) {\n    return varBox[key] || window[key];\n  },\n  set(target, key, value) {\n    varBox[key] = value;\n    return true;\n  },\n});\nconst fn = new Function('window', code);\nfn(fakeWindow);\n```\n\n  \n\n#### **LegacySandbox（依赖 Proxy)：**\n\n缺点：虽然子应用之间的状态是隔离的，但是父子应用都会修改同一个 window 对象，互相污染。\n\n![](https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=YzYyMDc3ZGIyZjQ4NTE4OTc5ZTViZjYzZDY0N2RiOTJfNG1Rb3hidFZ6OUYyb3YxdDloQmVSQXZVeTNLYmR1dW5fVG9rZW46Ym94Y25uNzZxeHlSZXZIUmNoVVgxc3pMMVZnXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA)\n\n  \n\n副作用隔离\n\n除了 JS 沙箱，还需要劫持一些全局方法。\n\n- 计时器：`setInterval`、`setTimeout`\n    \n- 全局事件监听：`addEventListener`\n    \n- 全局存储：`localStorage`、`sessionStorage`\n    \n\n解决方法主要分为两类，能够通过劫持收集的：\n\n1. 如 `setInterval`、`setTimeout`、`addEventListener`，通过重写这些方法，在调用的时候记录起来，放进一个队列里，在沙箱销毁的时候统一进行清除。\n    \n2. 持久化数据，无法通过劫持进行收集的，使用命名空间来区分 如 `localStorage`，`sessionStorage`，重写对象和方法\n    \n\n### 环境隔离--DOM\n\nGarfish，首先依然是像构造沙箱window一样构造一份document的副本来作为沙箱内的document元素，保证document的set不会影响全局。这一部分实现就不在多说了。下一步就是代理这个副本document。代理的目标主要是两部分：\n\n1. 对于获取dom元素的方法让他的document对象指向子应用挂载的那个dom。\n    \n2. 对于body和head这种顶级元素代理到子应用挂载dom下沙箱元素（在初始化子应用会在挂载dom下由garfish新建这些临时节点）。\n    \n\n![](https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=YmRjMTJjOWVlNmNmMTc5NjQxMWFlMGU1ZmM0ZjQ5M2FfcUg5M3hqODRra2xjeDVtY2h5QVZuSE9FaWRkSnNQdXZfVG9rZW46Ym94Y25PbXBIVjB3MjQ1SmFMS3Q5ZlVXbTBiXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA)\n\n  \n\n  \n\n  \n\n  \n\n### 路由托管 - Router\n\n当浏览器的路径变化后，router 监听 `hashchange` 和 `popstate` 事件，在事件回调函数中，根据注册的子应用激活规则，卸载/激活子应用。\n\n最先接收到这个变化的是基座的router，通过查询注册信息可以获取到转发到那个微应用，经过一些逻辑处理后，采用`修改hash`方法或者`pushState`方法来路由信息推送给微应用的路由，微应用可以是手动监听hashchange或者popstate事件接收，或者采用React-router，vue-router接管路由，后面的逻辑就由微应用自己控制。\n\n最好的路由模式就是主应用、子应用都统一模式，可以减少不同模式之间的兼容工作\n\n|   |   |   |   |   |\n|---|---|---|---|---|\n|主|子|推荐|接入影响|解决方案|\n|hash|hash|✅|无||\n|hash|history|不推荐|有|history.pushState|\n|history|hash|一般|无||\n|history|history|✅|无||\n\n#### Garfish实现\n\nGarfish 路由系统仅支持主应用的 `history` 路由模式，原因是 hash 路由无法作为子应用的基础路由\n\n> 目前 `Garfish` 主要提供了以下三条策略\n\n- 提供 `Router Map`，减少典型中台应用下的开发者理解成本\n    \n    - 通常可以将应用的结构分为两块，一块是菜单另一块则是内容区域，通过提供路由表来自动化完成子应用的调度，将公共部分作为拆离后的子应用渲染区域。\n        \n- 为不同子应用提供不同的 `basename` 用于隔离应用间的路由抢占问题\n    \n- 路由发生变化时能准确激活并触发应用视图更新\n    \n\n  \n\n  \n\n### 子应用通信\n\n应用之间的通信能通过**发布订阅模**实现，本质原理都类似 [EventEmitter](https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F77876876)。\n\n`Garfish.channel` 为 Garfish 的实例属性，该属性是 [EventEmitter2](https://github.com/EventEmitter2/EventEmitter2) 的实例。\n\n  \n\n### 部署\n\n微前端应用的部署包括以下三部分：\n\n- 主应用部署\n    \n- 服务发现的过程\n    \n- 需要承载子应用部署\n    \n\n![](https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=OTIxYWRmYThlNWM3MDgxZDRkY2RjYTQ2OWY0NDExNGNfZmR5Y3BiZjFUNlpwdjZ2NEN5Z3RwWGM4VFdHT0hUbVVfVG9rZW46Ym94Y24ybGVPQkZIZFFEZXVUVEx3MExRaHhoXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA)\n\n![](https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=YjA5NDY5YTNiNzEyYjExMDUxNTc4ZWRhNmRmNmIzYjRfWDIzUnNUa3AyOXd0aGhVU3pING45NzdQMkc5S2g1eUVfVG9rZW46Ym94Y25IS1R5bHdvYTF3TWFXZjc5OFkwekJmXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA)",
      "code": "var Component=(()=>{var s=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports),M=(i,n)=>{for(var r in n)c(i,r,{get:n[r],enumerable:!0})},h=(i,n,r,l)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let d of m(n))!g.call(i,d)&&d!==r&&c(i,d,{get:()=>n[d],enumerable:!(l=p(n,d))||l.enumerable});return i};var k=(i,n,r)=>(r=i!=null?s(u(i)):{},h(n||!i||!i.__esModule?c(r,\"default\",{value:i,enumerable:!0}):r,i)),w=i=>h(c({},\"__esModule\",{value:!0}),i);var t=f((A,a)=>{a.exports=_jsx_runtime});var j={};M(j,{default:()=>b,frontmatter:()=>y});var e=k(t()),y={title:\"\\u5FAE\\u524D\\u7AEF-Garfish & qiankun\",subtitle:null,layout:\"post\",date:new Date(16693344e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function o(i){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h3:\"h3\",span:\"span\",img:\"img\",code:\"code\",ul:\"ul\",li:\"li\",strong:\"strong\",h4:\"h4\",ol:\"ol\",div:\"div\",figure:\"figure\",pre:\"pre\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\"},i.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"garfish\\u5B98\\u65B9\\u6587\\u6863 \\u79FB\\u6B65\\u{1F449}\\u{1F3FB}\",(0,e.jsx)(n.a,{href:\"https://garfish.fn.bytedance.net/guide/\",children:\"https://garfish.fn.bytedance.net/guide/\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"qiankun\\u5B98\\u65B9\\u6587\\u6863 \\u79FB\\u6B65\\u{1F449}\\u{1F3FB}\",(0,e.jsx)(n.a,{href:\"https://qiankun.umijs.org/zh/guide/getting-started\",children:\"https://qiankun.umijs.org/zh/guide/getting-started\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E3A\\u4EC0\\u4E48\\u4E0D\\u662Fiframe\\uFF1F \\u79FB\\u6B65\\u{1F449}\\u{1F3FB} \",(0,e.jsx)(n.a,{href:\"https://www.yuque.com/kuitos/gky7yw/gesexv\",children:\"Why Not Iframe\"}),\" \\uFF08\\u7B80\\u800C\\u8A00\\u4E4B\\uFF0C\\u9694\\u79BB\\u6027\\u592A\\u5F3A\\uFF0C\\u5171\\u4EAB\\u80FD\\u529B\\u5F31\\uFF09\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6982\\u51B5\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u6982\\u51B5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6982\\u51B5\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5FAE\\u524D\\u7AEF\\u76EE\\u524D\\u7684\\u843D\\u5730\\u65B9\\u6848\\u53EF\\u5206\\u4E3A\\uFF1A\\u81EA\\u7EC4\\u7EC7\\u6A21\\u5F0F\\u3001\\u57FA\\u5EA7\\u6A21\\u5F0F\\u3001\\u6A21\\u5757\\u52A0\\u8F7D\\u6A21\\u5F0F\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E0E\\u57FA\\u5EA7\\u6A21\\u5F0F\\u76F8\\u6BD4\\uFF0C\\u6A21\\u5757\\u52A0\\u8F7D\\u6A21\\u5F0F\\u6CA1\\u6709\\u4E2D\\u5FC3\\u5BB9\\u5668\\uFF08\\u53BB\\u4E2D\\u5FC3\\u5316\\u6A21\\u5F0F\\uFF09\\uFF0C\\u8FD9\\u5C31\\u610F\\u5473\\u7740\\u4EFB\\u4F55\\u4E00\\u4E2A\\u5FAE\\u5E94\\u7528\\u90FD\\u53EF\\u4EE5\\u5F53\\u4F5C\\u6A21\\u5757\\u5165\\u53E3\\uFF0C\\u6574\\u4E2A\\u9879\\u76EE\\u7684\\u5FAE\\u5E94\\u7528\\u4E0E\\u5FAE\\u5E94\\u7528\\u4E4B\\u95F4\\u76F8\\u4E92\\u4E32\\u8054\\u3002\\u5177\\u4F53\\u7684\\u4EE3\\u8868\\u5E93\\u5C31\\u662F \",(0,e.jsx)(n.a,{href:\"https://link.juejin.cn?target=https%3A%2F%2Fqiankun.umijs.org%2Fzh%2Fguide\",children:\"qiankun\"}),\" vs \",(0,e.jsx)(n.a,{href:\"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FefoxTeam%2Femp\",children:\"EMP\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5B9E\\u73B0\\u6A21\\u5757\\u52A0\\u8F7D\\u6A21\\u5F0F\\u9700\\u8981\\u4F9D\\u8D56\\u4E8E webpack5 \\u7684 \",(0,e.jsx)(n.a,{href:\"https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fconcepts%2Fmodule-federation%2F\",children:\"Module Federation\"}),\" \\u529F\\u80FD\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2022-11-25-Garfish-qiankun-20250119025415.png\",alt:\"\",width:\"1280\",height:\"938\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAElBMVEX19PP////7+vrs8Ov38+rf4ODHN3OpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKElEQVR4nB3IyQ0AMBCDQHyk/5Yj7weNQBJwobVEXtodyUniwYadEX8H6wBMUc7xNgAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=MjU0ZDA2ZDI1NzE2YzgyYzM1Nzk3MzU4ZTk0NWI4MDhfZ3Jpb2JqQ1JaTGdpV3UzMXlRbGwxUGRlOWJIeFVXRHhfVG9rZW46Ym94Y25uUGNyMEV0Mlo4WkF0OVZjbnplaGlkXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA\",alt:\"\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=N2ZmOGFmMDkxMjg5ZWMxMmMyOWE4OTcwMjgwZjQzMDdfQlBXeUp0eHNFTXU2ZTJ0Qkt4b2xMcjBRZTRwVGhQSWxfVG9rZW46Ym94Y241OUUzQWp3clJETkdQU3hiNGNodWhmXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA\",alt:\"\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://tech.bytedance.net/articles/7090836932149641224\",children:\"Garfish \\u5FAE\\u524D\\u7AEF\\u5B9E\\u73B0\\u539F\\u7406\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://juejin.cn/post/7099339595233361934\",children:\"\\u5FAE\\u524D\\u7AEF\\u6280\\u672F\\u539F\\u7406\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u751F\\u547D\\u5468\\u671F\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u751F\\u547D\\u5468\\u671F\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u751F\\u547D\\u5468\\u671F\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"Garfish\"}),\" \\u5E94\\u7528\\u7684\\u751F\\u547D\\u5468\\u671F\\u53EF\\u4EE5\\u5F52\\u7ED3\\u4E3A\\uFF1A\\u52A0\\u8F7D\\u3001\\u6E32\\u67D3\\u3001\\u9500\\u6BC1 \\u4E09\\u4E2A\\u9636\\u6BB5\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u52A0\\u8F7D\\u4E3B\\u8981\\u662F\\u901A\\u8FC7 \",(0,e.jsx)(n.a,{href:\"https://www.garfishjs.org/api/loadApp\",children:\"Garfish.loadApp\"}),\"\\uFF0C\\u901A\\u8FC7 \",(0,e.jsx)(n.code,{children:\"loadApp\"}),\" API \\u4F1A\\u81EA\\u52A8\\u521B\\u5EFA\\u5E94\\u7528\\u7684\\u5B9E\\u4F8B\\uFF0C\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u901A\\u8FC7\\u5E94\\u7528\\u5B9E\\u4F8B\\u4E0A\\u7684 \",(0,e.jsx)(n.code,{children:\"mount\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"show\"}),\" \\u65B9\\u6CD5\\u5BF9\\u5E94\\u7528\\u8FDB\\u884C\\u6E32\\u67D3\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u901A\\u8FC7 \",(0,e.jsx)(n.code,{children:\"unmount\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"hide\"}),\" \\u65B9\\u6CD5\\u5BF9\\u5E94\\u7528\\u8FDB\\u884C\\u9500\\u6BC1\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7528\\u6237\\u5728\\u5B9E\\u9645\\u4F7F\\u7528\\u7684\\u8FC7\\u7A0B\\u4E2D\\u901A\\u8FC7 \",(0,e.jsx)(n.a,{href:\"https://www.garfishjs.org/api/run\",children:\"Garfish.run\"}),\"\\u4F1A\\u53D1\\u73B0\\u5F53\\u8DEF\\u7531\\u53D1\\u751F\\u53D8\\u5316\\u65F6\\u7B26\\u5408\\u52A0\\u8F7D\\u6761\\u4EF6\\u7684\\u5E94\\u7528\\u4F1A\\u81EA\\u52A8\\u52A0\\u8F7D\\u6E32\\u67D3\\uFF0C\\u5B9E\\u9645\\u4E0A\\u662F \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"[Garfish Router Plugin](https://www.garfishjs.org/guide/router)\"})}),\" \",(0,e.jsx)(n.strong,{children:\"\\u901A\\u8FC7\\u76D1\\u542C\\u8DEF\\u7531\\u53D8\\u5316\\u6765\\u89E6\\u53D1\"}),\" \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"loadApp\"})}),\" \",(0,e.jsx)(n.strong,{children:\"\\u548C\"}),\" \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"mount\"})}),\" \",(0,e.jsx)(n.strong,{children:\"\\u81EA\\u52A8\\u5B8C\\u6210\\u5E94\\u7528\\u7684\\u52A0\\u8F7D\\u3001\\u6E32\\u67D3\\u3001\\u9500\\u6BC1\\u3002\"})]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGVjZmU3MmUyZTkwNTc3MmM3ZTk2MzM0Yjc2OTNmODdfRWFLeDAxRGpnOHR0eDkxTHZMcTdoQWpnZmM1c1ZBSnRfVG9rZW46Ym94Y25GS0xtRTZrMXNMMWhnVVUzTmROeUlkXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA\",alt:\"\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"loadApp\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"beforeLoad()\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u52A0\\u8F7D\\u8D44\\u6E90\\uFF0Chtml\\u7528fetch\\uFF0Cjs\\u6587\\u4EF6\\u7528script\\u6807\\u7B7E\\u8BF7\\u6C42\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"New App()\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Plugin & cache\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"afterLoad()\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"mount\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"beforeMount \\u94A9\\u5B50\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5C06 app set \\u5230 Garfish.activeApps \\u4E2D\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u521B\\u5EFA app container\\u5E76\\u6DFB\\u52A0\\u5230\\u6587\\u6863\\u6D41\\u4E0A\\uFF0C\\u7F16\\u8BD1\\u5B50\\u5E94\\u7528\\u7684\\u4EE3\\u7801 compileAndRenderContainer()\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u62FF\\u5230\\u5B50\\u5E94\\u7528\\u7684 provider,\\u8C03\\u7528 provider.render\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5C06 app.display \\u548C app.mounted \\u8BBE\\u7F6E\\u4E3A true\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"afterMount \\u94A9\\u5B50\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u6E32\\u67D3\\u5931\\u8D25\\uFF0Capp.mount \\u4F1A\\u8FD4\\u56DE false\\uFF0C\\u5426\\u5219\\u6E32\\u67D3\\u6210\\u529F\\u4F1A\\u8FD4\\u56DE true\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"show\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"beforeMount \\u94A9\\u5B50\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5C06 app set \\u5230 Garfish.activeApps \\u4E2D\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"app container\\u6DFB\\u52A0\\u5230\\u6587\\u6863\\u6D41\\u4E0A\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u8C03\\u7528 provider.render\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5C06 app.display \\u8BBE\\u7F6E\\u4E3A true\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"afterMount \\u94A9\\u5B50\"}),`\n`]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u52A0\\u8F7D\\u5668---loader\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u52A0\\u8F7D\\u5668---loader\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u52A0\\u8F7D\\u5668 - Loader\"]}),`\n`,(0,e.jsxs)(n.h4,{id:\"js-entry\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#js-entry\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"JS Entry\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\\u4E3B\\u5E94\\u7528\\u7684\\u540C\\u4E00\\u9875\\u9762\\u8F7D\\u5165\\u5B50\\u5E94\\u7528\\uFF0C\\u53EF\\u4EE5\\u901A\\u8FC7\\u5C06\",(0,e.jsx)(n.strong,{children:\"\\u5B50\\u5E94\\u7528\\u7684\\u6240\\u6709\\u8D44\\u6E90\"}),\"\\uFF08\\u5305\\u62EC\\u5E03\\u5C40\\u3001\\u529F\\u80FD\\u903B\\u8F91\\u4E0E\\u7D20\\u6750\\uFF09\\u6253\\u5305\\u8FDB\\u4E00\\u4E2Ajs\\u6587\\u4EF6\\u91CC\\uFF0C\\u5E76\\u5C06\\u8FD9\\u4E2A\\u6587\\u4EF6\\u4F5C\\u4E3A\\u8D44\\u6E90\\u7684\\u5165\\u53E3\\u5728\\u4E3B\\u5E94\\u7528\\u5F15\\u5165\\uFF0C\\u53C2\\u8003 single-spa \\u7684\",(0,e.jsx)(n.a,{href:\"https://github.com/joeldenning/simple-single-spa-webpack-example/blob/master/src/root-application/root-application.js\",children:\"\\u8FD9\\u4E2A\\u5B9E\\u73B0\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Js Entry \\u7684\\u7F3A\\u70B9\\u662F\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5B50\\u5E94\\u7528\\u66F4\\u65B0\\u6253\\u5305\\u540E\\u7684 js bundle \\u540D\\u79F0\\u4F1A\\u53D8\\u5316\\uFF0C\\u4E3B\\u5E94\\u7528\\u9700\\u8981\\u4FDD\\u8BC1\\u6BCF\\u6B21\\u83B7\\u53D6\\u90FD\\u662F\\u6700\\u65B0\\u7684 js bundle\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5B50\\u5E94\\u7528\\u6240\\u6709\\u8D44\\u6E90\\u6253\\u5305\\u5230\\u4E00\\u4E2A\\u6587\\u4EF6\\u4E2D\\uFF0C\\u4F1A\\u5931\\u53BB css \\u63D0\\u53D6\\u3001\\u9759\\u6001\\u8D44\\u6E90\\u5E76\\u884C\\u52A0\\u8F7D\\u3001\\u9996\\u5C4F\\u52A0\\u8F7D(\\u4F53\\u79EF\\u5DE8\\u5927)\\u7B49\\u4F18\\u5316\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u9700\\u8981\\u5728\\u5B50\\u5E94\\u7528\\u6253\\u5305\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u4FEE\\u6539\\u76F8\\u5E94\\u7684\\u914D\\u7F6E\\u4EE5\\u8865\\u5168\\u5B50\\u5E94\\u7528 js \\u8D44\\u6E90\\u7684\\u8DEF\\u5F84\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD9\\u79CD\\u65B9\\u5F0F\\u589E\\u52A0\\u4E86\\u4E3B\\u5B50\\u5E94\\u7528\\u7684\\u8026\\u5408\\u6027\\uFF0C\\u4E14\\u52A0\\u8F7D\\u5B50\\u5E94\\u7528\\u7684\\u8FC7\\u7A0B\\u4E2D\\u65E0\\u6CD5\\u5E76\\u884C\\u52A0\\u8F7D\\uFF0C\\u5B58\\u5728\\u5355\\u4E2A\\u8D44\\u6E90\\u8FC7\\u5927\\u7684\\u95EE\\u9898\\uFF0C\\u8F83\\u96BE\\u63D0\\u5347\\u6574\\u4F53\\u7684\\u6548\\u7387\\uFF1B\\u4F46\\u8BE5\\u65B9\\u6848\\u5BF9\\u5E94\\u7528\\u7684\\u90E8\\u7F72\\u6D41\\u7A0B\\u8F83\\u4E3A\\u4FBF\\u6377\\uFF0C\\u4E14\\u8981\\u6C42\\u8F83\\u4F4E\\u3002\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h4,{id:\"html-entry\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#html-entry\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"HTML Entry\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E3B\\u5E94\\u7528\\u5728\\u8FD0\\u884C\\u65F6\\u901A\\u8FC7\\u63D0\\u4F9B\\u5355\\u72EC\\u6253\\u5305\\u597D\\u7684\\u5B50\\u5E94\\u7528 URL \\u5730\\u5740\\uFF0C\\u4EE5 \",(0,e.jsx)(n.code,{children:\"fetch\"}),\" \\u65B9\\u5F0F\\u83B7\\u53D6\\u5B50\\u5E94\\u7528\\u7684 HTML \\u6587\\u4EF6\\uFF0C\\u7ECF\\u8FC7\\u5904\\u7406\\u540E\\u5728\\u6307\\u5B9A\\u7684\\u5BB9\\u5668\\u4E2D\",(0,e.jsx)(n.strong,{children:\"\\u63D2\\u5165 HTML \\u5185\\u5BB9\"}),\"\\uFF0C\\u8FD9\\u6837\\u7684\\u65B9\\u5F0F\\u79F0\\u4E3A HTML Entry\\u3002\\u76F8\\u8F83\\u4E8E JS Entry \\u65B9\\u5F0F\\uFF0Chtml Entry\\u6709\\u7740\\u66F4\\u4F4E\\u7684\\u8026\\u5408\\u6027\\u548C\\u66F4\\u5927\\u7684\\u7075\\u6D3B\\u5EA6\\uFF0C\\u652F\\u6301\\u4E3B\\u5E94\\u7528\\u5728 fetch \\u540E\\u8FDB\\u884C\\u4E8C\\u6B21\\u5904\\u7406\\uFF0C\\u901A\\u8FC7 CSS \\u589E\\u52A0\\u524D\\u7F00\\u3001JS sandbox \\u7B49\\u65B9\\u5F0F\\u5B9E\\u73B0\\u6837\\u5F0F\\u9694\\u79BB\\u548C JS \\u6C99\\u7BB1\\u9694\\u79BB\\uFF0C\\u4E14\\u80FD\\u5BF9\\u9759\\u6001\\u8D44\\u6E90\\u91C7\\u7528\\u5E76\\u884C\\u52A0\\u8F7D\\uFF0C\\u5B50\\u5E94\\u7528\\u7684\\u66F4\\u65B0\\u53EF\\u4EE5\\u5355\\u72EC\\u53D1\\u5E03\\uFF1B\\u4F46\\u8FD9\\u79CD\\u65B9\\u5F0F\\u5FC5\\u987B\\u9700\\u8981\\u5B50\\u5E94\\u7528\\u652F\\u6301\\u8DE8\\u57DF\\u3002 qiankun \\u6846\\u67B6\\u91C7\\u7528\\u7684\\u5C31\\u662F HTML Entry \\u7684\\u5F62\\u5F0F\\u8FDB\\u884C\\u5B50\\u5E94\\u7528\\u7684\\u8F7D\\u5165\\uFF0C\\u53C2\\u8003\\u5B98\\u7F51\\u7684 \",(0,e.jsx)(n.a,{href:\"https://qiankun.umijs.org/zh/api#registermicroappsapps-lifecycles\",children:\"demo\"}),\" \\u6CE8\\u518C\\u73AF\\u8282\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E0D\\u8BBA\\u662F\",(0,e.jsx)(n.code,{children:\"qiankun\"}),\"\\u8FD8\\u662F\",(0,e.jsx)(n.code,{children:\"garfish\"}),\"\\u90FD\\u9700\\u8981\",(0,e.jsx)(n.strong,{children:\"\\u5B50\\u5E94\\u7528\\u5728\\u5165\\u53E3js\"}),\"\\u4E2D\\u63D0\\u4F9B\\u751F\\u547D\\u5468\\u671F\\u94A9\\u5B50\\uFF0C\\u4EE5\\u4F9B\\u4E3B\\u5E94\\u7528\\u5728\\u5408\\u9002\\u7684\\u65F6\\u673A\\u8C03\\u7528\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"qiankun\"}),\"\\u9700\\u8981\\u5B50\\u5E94\\u7528\\u81F3\\u5C11\\u5BFC\\u51FA \",(0,e.jsx)(n.code,{children:\"bootstrap\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"mount\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"unmount\"}),\" \\u4E09\\u4E2A\\u751F\\u547D\\u5468\\u671F\\u94A9\\u5B50\\uFF1B\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"garifsh\"}),\"\\u9700\\u8981\\u5B50\\u5E94\\u7528\\u5BFC\\u51FA\",(0,e.jsx)(n.code,{children:\"provider\"}),\"\\u751F\\u547D\\u5468\\u671F\\u94A9\\u5B50\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6839\\u636E\\u63D0\\u4F9B\\u7684url\\u4F5C\\u4E3A\\u5165\\u53E3\\u6587\\u4EF6\\u52A0\\u8F7D\\u8D44\\u6E90**\\u3002\\u901A\\u8FC7fetch\\u62FF\\u5230\\u8D44\\u6E90\\u5185\\u5BB9**\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u662Fhtml\\u8D44\\u6E90\\u5165\\u53E3\\u4F1A\\u8FDB\\u884C\\u6807\\u7B7E\\u7684\\u5E8F\\u5217\\u5316\\u548C\\u76F8\\u5173\\u5904\\u7406\\uFF08\\u5177\\u4F53\\u5F80\\u4E0B\\u770B\\uFF09\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u662Fjs\\u6587\\u4EF6\\u5219\\u4F1A\\u76F4\\u63A5\\u5B9E\\u4F8B\\u5316\\u4E00\\u4E2Ajs\\u8D44\\u6E90\\u7C7B\\uFF0C\\u76EE\\u7684\\u662F\\u4FDD\\u5B58\\u52A0\\u8F7D\\u5230\\u8D44\\u6E90\\u7684\\u7C7B\\u578B\\uFF0C\\u5927\\u5C0F\\uFF0C\\u4EE3\\u7801\\u5B57\\u7B26\\u4E32\\u7B49\\u57FA\\u672C\\u4FE1\\u606F\\u3002\\u5E76\\u4F1A\\u5C1D\\u8BD5\\u7F13\\u5B58\\u52A0\\u8F7D\\u7684\\u8D44\\u6E90\\u3002\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u62FF\\u5230html\\u6587\\u4EF6\\u540E\\u5982\\u4F55\\u89E3\\u6790\\u5E76\\u5904\\u7406html\\u6587\\u4EF6\\u7684\\u5462\\uFF1F\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5BF9\\u52A0\\u8F7D\\u7684html\\u8D44\\u6E90\\u8FDB\\u884C\",(0,e.jsx)(n.strong,{children:\"AST\\u89E3\\u6790,\\u7ED3\\u6784\\u5316dom\"}),\"\\uFF0C\\u4EE5\\u4FBF\\u63D0\\u53D6\\u4E0D\\u540C\\u7C7B\\u578B\\u7684\\u6807\\u7B7E\\u5185\\u5BB9\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7ED3\\u6784\\u5316\\u540E\\u8FDB\\u884C\\u6DF1\\u5EA6\\u4F18\\u5148\\u904D\\u5386\\u628A**\",(0,e.jsx)(n.code,{children:\"link\"}),(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.strong,{children:\",\"})}),(0,e.jsx)(n.code,{children:\"style\"}),(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.strong,{children:\",\"})}),(0,e.jsx)(n.code,{children:\"script\"}),\"**\",(0,e.jsx)(n.strong,{children:\"\\u6807\\u7B7E\\u63D0\\u53D6\\u51FA\\u6765\"})]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7531\\u4E8E\\u5F53\\u524D\\u5404\\u4E2A\\u6846\\u67B6\\u7684\\u5B9E\\u73B0\\u57FA\\u672C\\u90FD\\u662F\\u6709js\\u751F\\u6210dom\\u5E76\\u6302\\u8F7D\\u5230\\u6307\\u5B9A\\u7684\\u5143\\u7D20\\u4E0A\\uFF0C\\u56E0\\u6B64\\u8FD9\\u91CC\\u53EA\\u8981\\u628A\\u8FD9\\u4E09\\u79CD\\u52A0\\u8F7D\\u8D44\\u6E90\\u7684\\u6807\\u7B7E\\u63D0\\u53D6\\u51FA\\u6765\\u57FA\\u672C\\u5C31\\u5B8C\\u6210\\u4E86\\u9875\\u9762\\u7684\\u52A0\\u8F7D\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5F53\\u7136\\u8FD8\\u9700\\u8981\\u914D\\u5408\\u5FAE\\u524D\\u7AEF\\u7684\\u52A0\\u8F7D\\u65B9\\u5F0F\\u6539\\u9020\\u4E0B\\u5B50\\u7CFB\\u7EDF\\u5165\\u53E3\\uFF0C\\u8BA9\\u6302\\u8F7D\\u51FD\\u6570\\u6307\\u5411\\u4E3B\\u5E94\\u7528\\u63D0\\u4F9B\\u7684dom\\u3002\\u81F3\\u6B64\\u6211\\u4EEC\\u5B8C\\u6210\\u4E86\\u57FA\\u672C\\u8D44\\u6E90\\u7684\\u63D0\\u53D6\\u3002\"}),`\n`]}),`\n`]}),`\n`]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u73AF\\u5883\\u9694\\u79BB--css\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u73AF\\u5883\\u9694\\u79BB--css\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u73AF\\u5883\\u9694\\u79BB--CSS\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u9664\\u4E86 single-spa \\u9ED8\\u8BA4\\u4E0D\\u63D0\\u4F9B\\u6837\\u5F0F\\u9694\\u79BB\\u529F\\u80FD\\u5916\\uFF0C\\u5176\\u4F59\\u4E3B\\u6D41\\u7684\\u5FAE\\u524D\\u7AEF\\u6846\\u67B6\\u90FD\\u5B9E\\u73B0\\u4E86\\u57FA\\u4E8E\\u5B50\\u5E94\\u7528\\u4F5C\\u7528\\u57DF\\u4E0B\\u7684 CSS \\u6837\\u5F0F\\u9694\\u79BB\\uFF08\\u539F\\u7406\\u7C7B\\u4F3C Vue \\u7684 style scopted \\u5B9E\\u73B0\\u65B9\\u5F0F\\uFF09\\u3002\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u52A8\\u6001\\u6837\\u5F0F\\u8868\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5DE5\\u7A0B\\u5316\\u624B\\u6BB5\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"BEM\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"CSS Modules\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"CSS in JS\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Shadow Dom\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"CSS Module & CSS Namespace\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"CSS Scope\"}),\"\\uFF1A\\u4E00\\u53E5\\u8BDD\\u7406\\u89E3\\uFF0C\\u5C31\\u662F\\u7ED9\\u5B50\\u5E94\\u7528\\u7684\\u6240\\u6709\\u6837\\u5F0F\\u89C4\\u5219\\u6DFB\\u52A0\\u4E00\\u4E2A scope\\uFF08\\u7C7B\\u4F3C Vue \\u4E2D\\u7684 )\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7531\\u4E8E\\u5B50\\u5E94\\u7528\\u6709\\u540D\\u79F0\\u4F5C\\u4E3A\\u552F\\u4E00\\u6807\\u793A\\uFF0C\\u4E14\\u6302\\u8F7D\\u7684\\u5BB9\\u5668\\u5728\\u5B50\\u5E94\\u7528\\u5207\\u6362\\u65F6\\u53EF\\u4EE5\\u4FDD\\u8BC1\\u552F\\u4E00\\u6027\\uFF0C\\u53EF\\u4EE5\\u901A\\u8FC7\\u7EDF\\u4E00\\u52A0 \",(0,e.jsx)(n.code,{children:\"scope\"}),\" \\u7684\\u5F62\\u5F0F\\u5904\\u7406\\u6240\\u6709\\u7684\\u5B50\\u5E94\\u7528\\u6837\\u5F0F\\u3002\\u5206\\u4E3A\\u7F16\\u8BD1\\u65F6\\u548C\\u8FD0\\u884C\\u65F6\\u4E24\\u79CD\\u5904\\u7406\\u65B9\\u6848\\uFF1A\\u7F16\\u8BD1\\u65F6\\u63D0\\u4F9B \",(0,e.jsx)(n.code,{children:\"webpack\"}),\" \\u63D2\\u4EF6\\uFF0C\\u5BF9 \",(0,e.jsx)(n.code,{children:\"css\"}),\" \\u7F16\\u8BD1\\u65F6\\u81EA\\u52A8\\u7ED9\\u5B50\\u5E94\\u7528\\u7684\\u6837\\u5F0F\\u6DFB\\u52A0 \",(0,e.jsx)(n.code,{children:\"scope\"}),\"\\uFF1B\\u8FD0\\u884C\\u65F6\\u5219\\u662F\\u52A0\\u8F7D\\u5B50\\u5E94\\u7528\\u65F6\\u89E3\\u6790\\uFF0C\\u7531 \",(0,e.jsx)(n.code,{children:\"loader\"}),\" \\u8D1F\\u8D23\\u5904\\u7406\\u3002\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`// \\u5047\\u5982\\u5B50\\u5E94\\u7528\\u540D\\u5B57\\u53EB child\n// \\u8F6C\\u6362\\u524D\n.app-main {\n    font-size: 14px;\n}\n// \\u8F6C\\u6362\\u540E\ndiv[data-qiankun=\"child\"] .app-main {\n    font-size: 14px;\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"// \\u5047\\u5982\\u5B50\\u5E94\\u7528\\u540D\\u5B57\\u53EB child\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"// \\u8F6C\\u6362\\u524D\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\".app-main {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    font-size: 14px;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"// \\u8F6C\\u6362\\u540E\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:'div[data-qiankun=\"child\"] .app-main {'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    font-size: 14px;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Shadow DOM\"}),\"\\uFF1A\\u7ED9\\u5B50\\u5E94\\u7528\\u5BB9\\u5668\\u8282\\u70B9\\u6302\\u8F7D\\u4E00\\u4E2A shadow DOM\\uFF0C\\u4EE5\\u5B9E\\u73B0\\u7236\\u5B50\\u5E94\\u7528\\u3001\\u591A\\u4E2A\\u5B50\\u5E94\\u7528\\u4E4B\\u95F4\\u7684\\u6837\\u5F0F\\u9694\\u79BB\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u73AF\\u5883\\u9694\\u79BB--js\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u73AF\\u5883\\u9694\\u79BB--js\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u73AF\\u5883\\u9694\\u79BB--JS\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://blog.csdn.net/qq_44746132/article/details/117385571?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166210607016782425122601%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=166210607016782425122601&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-6-117385571-null-null.142%5Ev44%5Enew_blog_pos_by_title&utm_term=%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%B2%99%E7%AE%B1&spm=1018.2226.3001.4187\",children:\"\\u4E09\\u79CD\\u6C99\\u7BB1\\u9694\\u79BB\\u65B9\\u5F0F\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Js \\u6C99\\u7BB1\\u505A\\u7684\\u4E8B\\u60C5\\u53EF\\u4EE5\\u7528\\u4E24\\u53E5\\u8BDD\\u6982\\u62EC\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3A\\u6BCF\\u4E00\\u4E2A\\u5B50\\u5E94\\u7528\\u521B\\u5EFA\\u4E00\\u4E2A\\u4E13\\u5C5E\\u7684 \\u201Cwindow \\u5BF9\\u8C61\\u201D (\\u4E0D\\u662F\\u771F\\u7684 window \\u5BF9\\u8C61)\\uFF1B\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u52AB\\u6301\\u5E76\\u4EE3\\u7406window\\uFF0C\\u907F\\u514D\\u6570\\u636E\\u6C61\\u67D3\\uFF0C\\u6C99\\u7BB1\\u5185\\u7684\\u6570\\u636E\\u4E0D\\u4F1A\\u66B4\\u9732\\u5230\\u5168\\u5C40\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h4,{id:\"snapshotsandbox---\\u5FEB\\u7167\\u6C99\\u7BB1\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#snapshotsandbox---\\u5FEB\\u7167\\u6C99\\u7BB1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"snapshotSandbox - \\u5FEB\\u7167\\u6C99\\u7BB1\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u67D0\\u4E2A\\u9636\\u6BB5\\u7ED9\\u5F53\\u524D\\u7684\\u8FD0\\u884C\\u73AF\\u5883\\u6253\\u4E00\\u4E2A\\u5FEB\\u7167\\uFF0C\\u518D\\u5728\\u9700\\u8981\\u7684\\u65F6\\u5019\\u628A\\u5FEB\\u7167\\u6062\\u590D\\uFF0C\\u4ECE\\u800C\\u5B9E\\u73B0\\u9694\\u79BB\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\\u6FC0\\u6D3B\\u524D\\u7684\\u65F6\\u5019\\u904D\\u5386 window \\u4E0A\\u7684\\u53D8\\u91CF\\uFF0C\\u5B58\\u4E3A \",(0,e.jsx)(n.code,{children:\"snapshotOriginal\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\\u5931\\u6D3B\\u7684\\u65F6\\u5019\\u518D\\u6B21\\u904D\\u5386 window \\u4E0A\\u7684\\u53D8\\u91CF\\uFF0C\\u5206\\u522B\\u548C \",(0,e.jsx)(n.code,{children:\"snapshotOriginal\"}),\" \\u5BF9\\u6BD4\\uFF0C\\u5C06\\u4E0D\\u540C\\u7684\\u5B58\\u5230 \",(0,e.jsx)(n.code,{children:\"snapshotMutated\"}),\" \\u91CC\\uFF0C\\u5C06 window \\u6062\\u590D\\u56DE\\u5230 \",(0,e.jsx)(n.code,{children:\"snapshotOriginal\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5F53\\u5E94\\u7528\\u518D\\u6B21\\u5207\\u6362\\u7684\\u65F6\\u5019\\uFF0C\\u5C31\\u53EF\\u4EE5\\u628A \",(0,e.jsx)(n.code,{children:\"snapshotMutated\"}),\" \\u7684\\u53D8\\u91CF\\u6062\\u590D\\u56DE \",(0,e.jsx)(n.code,{children:\"window\"}),\" \\u4E0A\\uFF0C\\u5B9E\\u73B0\\u4E00\\u6B21\\u6C99\\u7BB1\\u7684\\u5207\\u6362\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h4,{id:\"proxysandbox---\\u4EE3\\u7406\\u6C99\\u7BB1\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#proxysandbox---\\u4EE3\\u7406\\u6C99\\u7BB1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"proxySandbox - \\u4EE3\\u7406\\u6C99\\u7BB1\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5F53\\u6709\\u591A\\u4E2A\\u5B9E\\u4F8B\\u7684\\u65F6\\u5019\\uFF0C\\u6BD4\\u5982\\u6709\",(0,e.jsx)(n.code,{children:\"A\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"B\"}),\"\\u4E24\\u4E2A\\u5E94\\u7528\\uFF0C\",(0,e.jsx)(n.code,{children:\"A\"}),\" \\u5E94\\u7528\\u5C31\\u6D3B\\u5728 \",(0,e.jsx)(n.code,{children:\"A\"}),\" \\u5E94\\u7528\\u7684\\u6C99\\u7BB1\\u91CC\\u9762\\uFF0C\",(0,e.jsx)(n.code,{children:\"B\"}),\" \\u5E94\\u7528\\u5C31\\u6D3B\\u5728 \",(0,e.jsx)(n.code,{children:\"B\"}),\" \\u5E94\\u7528\\u7684\\u6C99\\u7BB1\\u91CC\\u9762\\uFF0C\",(0,e.jsx)(n.code,{children:\"A\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"B\"}),\" \\u65E0\\u6CD5\\u4E92\\u76F8\\u5E72\\u6270\\uFF0C\\u8FD9\\u6837\\u7684\\u6C99\\u7BB1\\u5C31\\u662F\\u4EE3\\u7406\\u6C99\\u7BB1\\uFF0C\\u8FD9\\u4E2A\\u6C99\\u7BB1\\u7684\\u5B9E\\u73B0\\u601D\\u8DEF\\u5176\\u5B9E\\u4E5F\\u662F\\u901A\\u8FC7 \",(0,e.jsx)(n.code,{children:\"ES6\"}),\" \\u7684 \",(0,e.jsx)(n.a,{href:\"https://developer.mozilla.org/zh-cn/docs/web/javascript/reference/global_objects/proxy\",children:\"proxy\"}),\"\\uFF0C\\u901A\\u8FC7\\u4EE3\\u7406\\u7279\\u6027\\u5B9E\\u73B0\\u7684\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`const varBox = {};\nconst fakeWindow = new Proxy(window, {\n  get(target, key) {\n    return varBox[key] || window[key];\n  },\n  set(target, key, value) {\n    varBox[key] = value;\n    return true;\n  },\n});\nconst fn = new Function('window', code);\nfn(fakeWindow);\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const varBox = {};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const fakeWindow = new Proxy(window, {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  get(target, key) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    return varBox[key] || window[key];\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  set(target, key, value) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    varBox[key] = value;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    return true;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"});\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"const fn = new Function('window', code);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"fn(fakeWindow);\"})})]})})})}),`\n`,(0,e.jsxs)(n.h4,{id:\"legacysandbox\\u4F9D\\u8D56-proxy\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#legacysandbox\\u4F9D\\u8D56-proxy\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),(0,e.jsx)(n.strong,{children:\"LegacySandbox\\uFF08\\u4F9D\\u8D56 Proxy)\\uFF1A\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7F3A\\u70B9\\uFF1A\\u867D\\u7136\\u5B50\\u5E94\\u7528\\u4E4B\\u95F4\\u7684\\u72B6\\u6001\\u662F\\u9694\\u79BB\\u7684\\uFF0C\\u4F46\\u662F\\u7236\\u5B50\\u5E94\\u7528\\u90FD\\u4F1A\\u4FEE\\u6539\\u540C\\u4E00\\u4E2A window \\u5BF9\\u8C61\\uFF0C\\u4E92\\u76F8\\u6C61\\u67D3\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=YzYyMDc3ZGIyZjQ4NTE4OTc5ZTViZjYzZDY0N2RiOTJfNG1Rb3hidFZ6OUYyb3YxdDloQmVSQXZVeTNLYmR1dW5fVG9rZW46Ym94Y25uNzZxeHlSZXZIUmNoVVgxc3pMMVZnXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA\",alt:\"\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u526F\\u4F5C\\u7528\\u9694\\u79BB\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u9664\\u4E86 JS \\u6C99\\u7BB1\\uFF0C\\u8FD8\\u9700\\u8981\\u52AB\\u6301\\u4E00\\u4E9B\\u5168\\u5C40\\u65B9\\u6CD5\\u3002\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u8BA1\\u65F6\\u5668\\uFF1A\",(0,e.jsx)(n.code,{children:\"setInterval\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"setTimeout\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5168\\u5C40\\u4E8B\\u4EF6\\u76D1\\u542C\\uFF1A\",(0,e.jsx)(n.code,{children:\"addEventListener\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5168\\u5C40\\u5B58\\u50A8\\uFF1A\",(0,e.jsx)(n.code,{children:\"localStorage\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"sessionStorage\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u89E3\\u51B3\\u65B9\\u6CD5\\u4E3B\\u8981\\u5206\\u4E3A\\u4E24\\u7C7B\\uFF0C\\u80FD\\u591F\\u901A\\u8FC7\\u52AB\\u6301\\u6536\\u96C6\\u7684\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5982 \",(0,e.jsx)(n.code,{children:\"setInterval\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"setTimeout\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"addEventListener\"}),\"\\uFF0C\\u901A\\u8FC7\\u91CD\\u5199\\u8FD9\\u4E9B\\u65B9\\u6CD5\\uFF0C\\u5728\\u8C03\\u7528\\u7684\\u65F6\\u5019\\u8BB0\\u5F55\\u8D77\\u6765\\uFF0C\\u653E\\u8FDB\\u4E00\\u4E2A\\u961F\\u5217\\u91CC\\uFF0C\\u5728\\u6C99\\u7BB1\\u9500\\u6BC1\\u7684\\u65F6\\u5019\\u7EDF\\u4E00\\u8FDB\\u884C\\u6E05\\u9664\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6301\\u4E45\\u5316\\u6570\\u636E\\uFF0C\\u65E0\\u6CD5\\u901A\\u8FC7\\u52AB\\u6301\\u8FDB\\u884C\\u6536\\u96C6\\u7684\\uFF0C\\u4F7F\\u7528\\u547D\\u540D\\u7A7A\\u95F4\\u6765\\u533A\\u5206 \\u5982 \",(0,e.jsx)(n.code,{children:\"localStorage\"}),\"\\uFF0C\",(0,e.jsx)(n.code,{children:\"sessionStorage\"}),\"\\uFF0C\\u91CD\\u5199\\u5BF9\\u8C61\\u548C\\u65B9\\u6CD5\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u73AF\\u5883\\u9694\\u79BB--dom\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u73AF\\u5883\\u9694\\u79BB--dom\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u73AF\\u5883\\u9694\\u79BB--DOM\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Garfish\\uFF0C\\u9996\\u5148\\u4F9D\\u7136\\u662F\\u50CF\\u6784\\u9020\\u6C99\\u7BB1window\\u4E00\\u6837\\u6784\\u9020\\u4E00\\u4EFDdocument\\u7684\\u526F\\u672C\\u6765\\u4F5C\\u4E3A\\u6C99\\u7BB1\\u5185\\u7684document\\u5143\\u7D20\\uFF0C\\u4FDD\\u8BC1document\\u7684set\\u4E0D\\u4F1A\\u5F71\\u54CD\\u5168\\u5C40\\u3002\\u8FD9\\u4E00\\u90E8\\u5206\\u5B9E\\u73B0\\u5C31\\u4E0D\\u5728\\u591A\\u8BF4\\u4E86\\u3002\\u4E0B\\u4E00\\u6B65\\u5C31\\u662F\\u4EE3\\u7406\\u8FD9\\u4E2A\\u526F\\u672Cdocument\\u3002\\u4EE3\\u7406\\u7684\\u76EE\\u6807\\u4E3B\\u8981\\u662F\\u4E24\\u90E8\\u5206\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9\\u4E8E\\u83B7\\u53D6dom\\u5143\\u7D20\\u7684\\u65B9\\u6CD5\\u8BA9\\u4ED6\\u7684document\\u5BF9\\u8C61\\u6307\\u5411\\u5B50\\u5E94\\u7528\\u6302\\u8F7D\\u7684\\u90A3\\u4E2Adom\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9\\u4E8Ebody\\u548Chead\\u8FD9\\u79CD\\u9876\\u7EA7\\u5143\\u7D20\\u4EE3\\u7406\\u5230\\u5B50\\u5E94\\u7528\\u6302\\u8F7Ddom\\u4E0B\\u6C99\\u7BB1\\u5143\\u7D20\\uFF08\\u5728\\u521D\\u59CB\\u5316\\u5B50\\u5E94\\u7528\\u4F1A\\u5728\\u6302\\u8F7Ddom\\u4E0B\\u7531garfish\\u65B0\\u5EFA\\u8FD9\\u4E9B\\u4E34\\u65F6\\u8282\\u70B9\\uFF09\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=YmRjMTJjOWVlNmNmMTc5NjQxMWFlMGU1ZmM0ZjQ5M2FfcUg5M3hqODRra2xjeDVtY2h5QVZuSE9FaWRkSnNQdXZfVG9rZW46Ym94Y25PbXBIVjB3MjQ1SmFMS3Q5ZlVXbTBiXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA\",alt:\"\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u8DEF\\u7531\\u6258\\u7BA1---router\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u8DEF\\u7531\\u6258\\u7BA1---router\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u8DEF\\u7531\\u6258\\u7BA1 - Router\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5F53\\u6D4F\\u89C8\\u5668\\u7684\\u8DEF\\u5F84\\u53D8\\u5316\\u540E\\uFF0Crouter \\u76D1\\u542C \",(0,e.jsx)(n.code,{children:\"hashchange\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"popstate\"}),\" \\u4E8B\\u4EF6\\uFF0C\\u5728\\u4E8B\\u4EF6\\u56DE\\u8C03\\u51FD\\u6570\\u4E2D\\uFF0C\\u6839\\u636E\\u6CE8\\u518C\\u7684\\u5B50\\u5E94\\u7528\\u6FC0\\u6D3B\\u89C4\\u5219\\uFF0C\\u5378\\u8F7D/\\u6FC0\\u6D3B\\u5B50\\u5E94\\u7528\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6700\\u5148\\u63A5\\u6536\\u5230\\u8FD9\\u4E2A\\u53D8\\u5316\\u7684\\u662F\\u57FA\\u5EA7\\u7684router\\uFF0C\\u901A\\u8FC7\\u67E5\\u8BE2\\u6CE8\\u518C\\u4FE1\\u606F\\u53EF\\u4EE5\\u83B7\\u53D6\\u5230\\u8F6C\\u53D1\\u5230\\u90A3\\u4E2A\\u5FAE\\u5E94\\u7528\\uFF0C\\u7ECF\\u8FC7\\u4E00\\u4E9B\\u903B\\u8F91\\u5904\\u7406\\u540E\\uFF0C\\u91C7\\u7528\",(0,e.jsx)(n.code,{children:\"\\u4FEE\\u6539hash\"}),\"\\u65B9\\u6CD5\\u6216\\u8005\",(0,e.jsx)(n.code,{children:\"pushState\"}),\"\\u65B9\\u6CD5\\u6765\\u8DEF\\u7531\\u4FE1\\u606F\\u63A8\\u9001\\u7ED9\\u5FAE\\u5E94\\u7528\\u7684\\u8DEF\\u7531\\uFF0C\\u5FAE\\u5E94\\u7528\\u53EF\\u4EE5\\u662F\\u624B\\u52A8\\u76D1\\u542Chashchange\\u6216\\u8005popstate\\u4E8B\\u4EF6\\u63A5\\u6536\\uFF0C\\u6216\\u8005\\u91C7\\u7528React-router\\uFF0Cvue-router\\u63A5\\u7BA1\\u8DEF\\u7531\\uFF0C\\u540E\\u9762\\u7684\\u903B\\u8F91\\u5C31\\u7531\\u5FAE\\u5E94\\u7528\\u81EA\\u5DF1\\u63A7\\u5236\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6700\\u597D\\u7684\\u8DEF\\u7531\\u6A21\\u5F0F\\u5C31\\u662F\\u4E3B\\u5E94\\u7528\\u3001\\u5B50\\u5E94\\u7528\\u90FD\\u7EDF\\u4E00\\u6A21\\u5F0F\\uFF0C\\u53EF\\u4EE5\\u51CF\\u5C11\\u4E0D\\u540C\\u6A21\\u5F0F\\u4E4B\\u95F4\\u7684\\u517C\\u5BB9\\u5DE5\\u4F5C\"}),`\n`,(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{}),(0,e.jsx)(n.th,{}),(0,e.jsx)(n.th,{}),(0,e.jsx)(n.th,{}),(0,e.jsx)(n.th,{})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u4E3B\"}),(0,e.jsx)(n.td,{children:\"\\u5B50\"}),(0,e.jsx)(n.td,{children:\"\\u63A8\\u8350\"}),(0,e.jsx)(n.td,{children:\"\\u63A5\\u5165\\u5F71\\u54CD\"}),(0,e.jsx)(n.td,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"hash\"}),(0,e.jsx)(n.td,{children:\"hash\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"}),(0,e.jsx)(n.td,{children:\"\\u65E0\"}),(0,e.jsx)(n.td,{})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"hash\"}),(0,e.jsx)(n.td,{children:\"history\"}),(0,e.jsx)(n.td,{children:\"\\u4E0D\\u63A8\\u8350\"}),(0,e.jsx)(n.td,{children:\"\\u6709\"}),(0,e.jsx)(n.td,{children:\"history.pushState\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"history\"}),(0,e.jsx)(n.td,{children:\"hash\"}),(0,e.jsx)(n.td,{children:\"\\u4E00\\u822C\"}),(0,e.jsx)(n.td,{children:\"\\u65E0\"}),(0,e.jsx)(n.td,{})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"history\"}),(0,e.jsx)(n.td,{children:\"history\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"}),(0,e.jsx)(n.td,{children:\"\\u65E0\"}),(0,e.jsx)(n.td,{})]})]})]}),`\n`,(0,e.jsxs)(n.h4,{id:\"garfish\\u5B9E\\u73B0\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#garfish\\u5B9E\\u73B0\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Garfish\\u5B9E\\u73B0\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Garfish \\u8DEF\\u7531\\u7CFB\\u7EDF\\u4EC5\\u652F\\u6301\\u4E3B\\u5E94\\u7528\\u7684 \",(0,e.jsx)(n.code,{children:\"history\"}),\" \\u8DEF\\u7531\\u6A21\\u5F0F\\uFF0C\\u539F\\u56E0\\u662F hash \\u8DEF\\u7531\\u65E0\\u6CD5\\u4F5C\\u4E3A\\u5B50\\u5E94\\u7528\\u7684\\u57FA\\u7840\\u8DEF\\u7531\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u76EE\\u524D \",(0,e.jsx)(n.code,{children:\"Garfish\"}),\" \\u4E3B\\u8981\\u63D0\\u4F9B\\u4E86\\u4EE5\\u4E0B\\u4E09\\u6761\\u7B56\\u7565\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u63D0\\u4F9B \",(0,e.jsx)(n.code,{children:\"Router Map\"}),\"\\uFF0C\\u51CF\\u5C11\\u5178\\u578B\\u4E2D\\u53F0\\u5E94\\u7528\\u4E0B\\u7684\\u5F00\\u53D1\\u8005\\u7406\\u89E3\\u6210\\u672C\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u901A\\u5E38\\u53EF\\u4EE5\\u5C06\\u5E94\\u7528\\u7684\\u7ED3\\u6784\\u5206\\u4E3A\\u4E24\\u5757\\uFF0C\\u4E00\\u5757\\u662F\\u83DC\\u5355\\u53E6\\u4E00\\u5757\\u5219\\u662F\\u5185\\u5BB9\\u533A\\u57DF\\uFF0C\\u901A\\u8FC7\\u63D0\\u4F9B\\u8DEF\\u7531\\u8868\\u6765\\u81EA\\u52A8\\u5316\\u5B8C\\u6210\\u5B50\\u5E94\\u7528\\u7684\\u8C03\\u5EA6\\uFF0C\\u5C06\\u516C\\u5171\\u90E8\\u5206\\u4F5C\\u4E3A\\u62C6\\u79BB\\u540E\\u7684\\u5B50\\u5E94\\u7528\\u6E32\\u67D3\\u533A\\u57DF\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E3A\\u4E0D\\u540C\\u5B50\\u5E94\\u7528\\u63D0\\u4F9B\\u4E0D\\u540C\\u7684 \",(0,e.jsx)(n.code,{children:\"basename\"}),\" \\u7528\\u4E8E\\u9694\\u79BB\\u5E94\\u7528\\u95F4\\u7684\\u8DEF\\u7531\\u62A2\\u5360\\u95EE\\u9898\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u8DEF\\u7531\\u53D1\\u751F\\u53D8\\u5316\\u65F6\\u80FD\\u51C6\\u786E\\u6FC0\\u6D3B\\u5E76\\u89E6\\u53D1\\u5E94\\u7528\\u89C6\\u56FE\\u66F4\\u65B0\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u5B50\\u5E94\\u7528\\u901A\\u4FE1\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5B50\\u5E94\\u7528\\u901A\\u4FE1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5B50\\u5E94\\u7528\\u901A\\u4FE1\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5E94\\u7528\\u4E4B\\u95F4\\u7684\\u901A\\u4FE1\\u80FD\\u901A\\u8FC7\",(0,e.jsx)(n.strong,{children:\"\\u53D1\\u5E03\\u8BA2\\u9605\\u6A21\"}),\"\\u5B9E\\u73B0\\uFF0C\\u672C\\u8D28\\u539F\\u7406\\u90FD\\u7C7B\\u4F3C \",(0,e.jsx)(n.a,{href:\"https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F77876876\",children:\"EventEmitter\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"Garfish.channel\"}),\" \\u4E3A Garfish \\u7684\\u5B9E\\u4F8B\\u5C5E\\u6027\\uFF0C\\u8BE5\\u5C5E\\u6027\\u662F \",(0,e.jsx)(n.a,{href:\"https://github.com/EventEmitter2/EventEmitter2\",children:\"EventEmitter2\"}),\" \\u7684\\u5B9E\\u4F8B\\u3002\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u90E8\\u7F72\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u90E8\\u7F72\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u90E8\\u7F72\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5FAE\\u524D\\u7AEF\\u5E94\\u7528\\u7684\\u90E8\\u7F72\\u5305\\u62EC\\u4EE5\\u4E0B\\u4E09\\u90E8\\u5206\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3B\\u5E94\\u7528\\u90E8\\u7F72\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u670D\\u52A1\\u53D1\\u73B0\\u7684\\u8FC7\\u7A0B\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u9700\\u8981\\u627F\\u8F7D\\u5B50\\u5E94\\u7528\\u90E8\\u7F72\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=OTIxYWRmYThlNWM3MDgxZDRkY2RjYTQ2OWY0NDExNGNfZmR5Y3BiZjFUNlpwdjZ2NEN5Z3RwWGM4VFdHT0hUbVVfVG9rZW46Ym94Y24ybGVPQkZIZFFEZXVUVEx3MExRaHhoXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA\",alt:\"\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://a1j6nbrw76.feishu.cn/space/api/box/stream/download/asynccode/?code=YjA5NDY5YTNiNzEyYjExMDUxNTc4ZWRhNmRmNmIzYjRfWDIzUnNUa3AyOXd0aGhVU3pING45NzdQMkc5S2g1eUVfVG9rZW46Ym94Y25IS1R5bHdvYTF3TWFXZjc5OFkwekJmXzE3MzcyNjk1MTM6MTczNzI3MzExM19WNA\",alt:\"\"})})]})}function N(i={}){let{wrapper:n}=i.components||{};return n?(0,e.jsx)(n,Object.assign({},i,{children:(0,e.jsx)(o,i)})):o(i)}var b=N;return w(j);})();\n;return Component;"
    },
    "_id": "post/2022-11-25-Garfish-qiankun.md",
    "_raw": {
      "sourceFilePath": "post/2022-11-25-Garfish-qiankun.md",
      "sourceFileName": "2022-11-25-Garfish-qiankun.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2022-11-25-Garfish-qiankun"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2022-11-25-Garfish-qiankun",
    "slugAsParams": "2022-11-25-Garfish-qiankun"
  },
  {
    "title": "ubuntu环境配置",
    "tags": [
      "Ubuntu"
    ],
    "author": "heavenmei",
    "subtitle": "适用于ubuntu和mac 的一键安装相关环境脚本",
    "url": "/2023-11-25-one-step-install",
    "description": "装环境实在太麻烦啦，mark一些安装命令，以备不时之需。",
    "date": "2023-11-25T00:00:00.000Z",
    "body": {
      "raw": "\n\n>  装环境实在太麻烦啦，mark一些安装命令，以备不时之需。\n>  一键化自动安装脚本（Both for Mac & Ubuntu）： https://github.com/heavenmei/one-step-install\n## 1、系统安装\n\nubuntu分配桌面版和服务器版，在主机上安装桌面版\n\n1. 下载镜像链接 https://releases.ubuntu.com/\n2. mac使用etcher烧录到U盘： [https://etcher.balena.io/](https://etcher.balena.io/)\n3. f2 进入bios界面，设置u盘启动\n4. 按照界面提示安装ubuntu，最重要是分区\n\n\n\n## 2、显卡驱动\n\n下载显卡驱动：[https://www.nvidia.com/Download/index.aspx?lang=en-us](https://www.nvidia.com/Download/index.aspx?lang=en-us)\n\n\n\n## 3、Clash\n\n下载文件 `clash-linux-amd64-v1.17.0.gz`\n> 链接: https://pan.baidu.com/s/1RzYl_CGHLF9IUS9I5xyvZg?pwd=53kc 提取码: 53kc\n\n解压：`gunzip clash-linux-amd64-v1.17.0.gz`\n移动重命名： `sudo mv clash-linux-amd64-v1.17.0 /usr/local/bin/clash`\n给 Clash 添加执行权限：`sudo chmod +x /usr/local/bin/clash`\n启动 Clash自动创建initial config file：`clash -d ~/.config/clash`\n替换订阅文件：`curl https:/xxxx.yaml > ~/.config/clash/config.yaml`（或者手动复制）\n启动 Clash：`clash -d ~/.config/clash`\n写入 ~/zshrc\n\n```json\necho 'export http_proxy=127.0.0.1:7890' >> ~/.zshrc\necho 'export https_proxy=$http_proxy' >> ~/.zshrc\n```\n\n**开机自启配置：**[https://blog.csdn.net/xiaxinkai/article/details/123563488](https://blog.csdn.net/xiaxinkai/article/details/123563488)\n\n`sudo vim /etc/systemd/system/clash.service`\n\n写入配置\n\n```json\n[Unit]\nDescription=clash service\nAfter=network.target\n \n[Service]\nExecStart=/usr/local/bin/clash -d /home/haiwen/.config/clash/\n \n[Install]\nWantedBy=multi-user.target\n```\n\n`sudo systemctl daemon-reload # 刷新配置` `sudo systemctl start clash # 启动clash.service` `sudo systemctl enable clash # 设置开机启动` `sudo systemctl status clash # 查看clash.service的状态`\n\n## 3、一键配置脚本\n\n下载一键安装脚本，执行`xxx/one_step_install.sh`\n\n### oh-my-zsh\n\n1. `zsh xxx/one_step_install.sh`, 选择ohmyzsh\n\n2. 重启终端，配置主题\n    \n\n如果安装卡住，可能是网络不好 解决1：`zsh one_step_install.sh`, 选择scientific_surfing，再次安装\n\n解决2: 先装clash，科学上网\n\n解决3：直接 `zsh install_ohmyzsh.sh`,但是没有主题配置\n\n查看终端：`echo $SHELL`\n\n若不是zsh，请手动配置：`chsh -s $(which zsh)`，重启后可切换\n\n## nvm & node\n前往[https://github.com/nvm-sh/nvm/releases](https://github.com/nvm-sh/nvm/releases)确认目前nvm最新版本\n\n```bash\n# 二者选其一，注意wget命令里的-q参数表示--quiet，安静模式，无信息输出，看不到错误，也可去掉该参数\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\nwget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash\n\n```\n\n 镜像源\n```bash\n# 设置npm镜像源\nnpm config set registry https://registry.npmmirror.com\n\n# 验证npm镜像源\nnpm config get registry\n\n# 设置yarn镜像源\nyarn config set registry https://registry.npmmirror.com\n\n# 验证yarn镜像源\nyarn config get registry\n\n```\n\nnvm 镜像\n```bash\nnode_mirror: http//npmmirror.com/mirrors/node/ \nnpm_mirror: http://npmmirror.com/mirrors/npm/\n\n\nvim ~/.bashrc\n\n# add\nexport NVM_NODEJS_ORG_MIRROR=http://npmmirror.com/mirrors/node/\n\nsource ~/.bashrc\n\nnvm ls-remote\n```\n\n\n## ssh\n\n配置端口号\n\n查看ip: `ip a`\n\n查看port: `/etc/ssh/sshd-config`\n\n之后可以在本机电脑 ssh username@ip -p PORT 远程连接\n\n\n## conda\n```shell\n# download\ncurl -O https://repo.anaconda.com/archive/Anaconda3-2023.09-0-Linux-x86_64.sh\n# 安装\nsudo bash ./Anaconda3-5.2.0-Linux-x86_64.sh \n# 添加环境变量 \necho 'export PATH=~/anaconda3/bin:$PATH' >> ~/.bashrc \n# 刷新bashrc\nsource ~/.bashrc \n```\n\n\n\n\n\n\n## Git ssh\n查看是否由密钥\n```bash\n$ cd ~/.ssh\n$ ls\nauthorized_keys2  id_dsa       known_hosts\nconfig            id_dsa.pub\n```\n\n若没有则生成\n```bash\nssh-keygen -t rsa -C \"youremail@youremail.com\" \n# or\nssh-keygen -o\n```\n\n\n粘贴公钥->github ->setting -> SSH and GPG keys\n```bash\ncat ~/.ssh/id_rsa.pub\n```\n\n\n验证\n```bash\n ssh -T git@github.com\n```\n\n\n## QA\n##### Q: sudo: command not found\n`apt install sudo`\n\n##### Q：apt & apt-get\n_apt_ 和 _apt-get_ 之间的区别不仅在于 _apt_ 是 _apt-get_ 的较新版本。_apt_ 命令被设计为对用户更加友好的 _apt-get_ 替代方案，结合了多个包管理工具的功能，为用户提供便利。\n[APT 与 APT-GET 之间有什么区别？](https://aws.amazon.com/cn/compare/the-difference-between-apt-and-apt-get/)",
      "code": "var Component=(()=>{var o=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),F=(a,n)=>{for(var l in n)c(a,l,{get:n[l],enumerable:!0})},i=(a,n,l,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of m(n))!g.call(a,r)&&r!==l&&c(a,r,{get:()=>n[r],enumerable:!(s=p(n,r))||s.enumerable});return a};var b=(a,n,l)=>(l=a!=null?o(y(a)):{},i(n||!a||!a.__esModule?c(l,\"default\",{value:a,enumerable:!0}):l,a)),E=a=>i(c({},\"__esModule\",{value:!0}),a);var t=u((C,d)=>{d.exports=_jsx_runtime});var x={};F(x,{default:()=>k,frontmatter:()=>f});var e=b(t()),f={title:\"ubuntu\\u73AF\\u5883\\u914D\\u7F6E\",subtitle:\"\\u9002\\u7528\\u4E8Eubuntu\\u548Cmac \\u7684\\u4E00\\u952E\\u5B89\\u88C5\\u76F8\\u5173\\u73AF\\u5883\\u811A\\u672C\",layout:\"post\",date:new Date(17008704e5),author:\"heavenmei\",categories:[\"Post\"],description:\"\\u88C5\\u73AF\\u5883\\u5B9E\\u5728\\u592A\\u9EBB\\u70E6\\u5566\\uFF0Cmark\\u4E00\\u4E9B\\u5B89\\u88C5\\u547D\\u4EE4\\uFF0C\\u4EE5\\u5907\\u4E0D\\u65F6\\u4E4B\\u9700\\u3002\",tags:[\"Ubuntu\"],url:\"/2023-11-25-one-step-install\",image:null};function h(a){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",ol:\"ol\",li:\"li\",code:\"code\",div:\"div\",figure:\"figure\",pre:\"pre\",strong:\"strong\",h3:\"h3\",h5:\"h5\",em:\"em\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[`\\u88C5\\u73AF\\u5883\\u5B9E\\u5728\\u592A\\u9EBB\\u70E6\\u5566\\uFF0Cmark\\u4E00\\u4E9B\\u5B89\\u88C5\\u547D\\u4EE4\\uFF0C\\u4EE5\\u5907\\u4E0D\\u65F6\\u4E4B\\u9700\\u3002\n\\u4E00\\u952E\\u5316\\u81EA\\u52A8\\u5B89\\u88C5\\u811A\\u672C\\uFF08Both for Mac & Ubuntu\\uFF09\\uFF1A `,(0,e.jsx)(n.a,{href:\"https://github.com/heavenmei/one-step-install\",children:\"https://github.com/heavenmei/one-step-install\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"1\\u7CFB\\u7EDF\\u5B89\\u88C5\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#1\\u7CFB\\u7EDF\\u5B89\\u88C5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1\\u3001\\u7CFB\\u7EDF\\u5B89\\u88C5\"]}),`\n`,(0,e.jsx)(n.p,{children:\"ubuntu\\u5206\\u914D\\u684C\\u9762\\u7248\\u548C\\u670D\\u52A1\\u5668\\u7248\\uFF0C\\u5728\\u4E3B\\u673A\\u4E0A\\u5B89\\u88C5\\u684C\\u9762\\u7248\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u4E0B\\u8F7D\\u955C\\u50CF\\u94FE\\u63A5 \",(0,e.jsx)(n.a,{href:\"https://releases.ubuntu.com/\",children:\"https://releases.ubuntu.com/\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"mac\\u4F7F\\u7528etcher\\u70E7\\u5F55\\u5230U\\u76D8\\uFF1A \",(0,e.jsx)(n.a,{href:\"https://etcher.balena.io/\",children:\"https://etcher.balena.io/\"})]}),`\n`,(0,e.jsx)(n.li,{children:\"f2 \\u8FDB\\u5165bios\\u754C\\u9762\\uFF0C\\u8BBE\\u7F6Eu\\u76D8\\u542F\\u52A8\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6309\\u7167\\u754C\\u9762\\u63D0\\u793A\\u5B89\\u88C5ubuntu\\uFF0C\\u6700\\u91CD\\u8981\\u662F\\u5206\\u533A\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"2\\u663E\\u5361\\u9A71\\u52A8\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#2\\u663E\\u5361\\u9A71\\u52A8\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2\\u3001\\u663E\\u5361\\u9A71\\u52A8\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E0B\\u8F7D\\u663E\\u5361\\u9A71\\u52A8\\uFF1A\",(0,e.jsx)(n.a,{href:\"https://www.nvidia.com/Download/index.aspx?lang=en-us\",children:\"https://www.nvidia.com/Download/index.aspx?lang=en-us\"})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"3clash\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#3clash\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3\\u3001Clash\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E0B\\u8F7D\\u6587\\u4EF6 \",(0,e.jsx)(n.code,{children:\"clash-linux-amd64-v1.17.0.gz\"})]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u94FE\\u63A5: \",(0,e.jsx)(n.a,{href:\"https://pan.baidu.com/s/1RzYl_CGHLF9IUS9I5xyvZg?pwd=53kc\",children:\"https://pan.baidu.com/s/1RzYl_CGHLF9IUS9I5xyvZg?pwd=53kc\"}),\" \\u63D0\\u53D6\\u7801: 53kc\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u89E3\\u538B\\uFF1A\",(0,e.jsx)(n.code,{children:\"gunzip clash-linux-amd64-v1.17.0.gz\"}),`\n\\u79FB\\u52A8\\u91CD\\u547D\\u540D\\uFF1A `,(0,e.jsx)(n.code,{children:\"sudo mv clash-linux-amd64-v1.17.0 /usr/local/bin/clash\"}),`\n\\u7ED9 Clash \\u6DFB\\u52A0\\u6267\\u884C\\u6743\\u9650\\uFF1A`,(0,e.jsx)(n.code,{children:\"sudo chmod +x /usr/local/bin/clash\"}),`\n\\u542F\\u52A8 Clash\\u81EA\\u52A8\\u521B\\u5EFAinitial config file\\uFF1A`,(0,e.jsx)(n.code,{children:\"clash -d ~/.config/clash\"}),`\n\\u66FF\\u6362\\u8BA2\\u9605\\u6587\\u4EF6\\uFF1A`,(0,e.jsx)(n.code,{children:\"curl https:/xxxx.yaml > ~/.config/clash/config.yaml\"}),`\\uFF08\\u6216\\u8005\\u624B\\u52A8\\u590D\\u5236\\uFF09\n\\u542F\\u52A8 Clash\\uFF1A`,(0,e.jsx)(n.code,{children:\"clash -d ~/.config/clash\"}),`\n\\u5199\\u5165 ~/zshrc`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`echo 'export http_proxy=127.0.0.1:7890' >> ~/.zshrc\necho 'export https_proxy=$http_proxy' >> ~/.zshrc\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"echo 'export http_proxy=\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"127.0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.1\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"7890\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"' >> ~/.zshrc\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"echo 'export https_proxy=$http_proxy' >> ~/.zshrc\"})})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u5F00\\u673A\\u81EA\\u542F\\u914D\\u7F6E\\uFF1A\"}),(0,e.jsx)(n.a,{href:\"https://blog.csdn.net/xiaxinkai/article/details/123563488\",children:\"https://blog.csdn.net/xiaxinkai/article/details/123563488\"})]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"sudo vim /etc/systemd/system/clash.service\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5199\\u5165\\u914D\\u7F6E\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`[Unit]\nDescription=clash service\nAfter=network.target\n \n[Service]\nExecStart=/usr/local/bin/clash -d /home/haiwen/.config/clash/\n \n[Install]\nWantedBy=multi-user.target\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"[\"}),(0,e.jsx)(n.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"Unit\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"Description=clash service\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"After=network.target\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"[\"}),(0,e.jsx)(n.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"Service\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"ExecStart=/usr/local/bin/clash -d /home/haiwen/.config/clash/\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"[\"}),(0,e.jsx)(n.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"Install\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"WantedBy=multi-user.target\"})})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"sudo systemctl daemon-reload # \\u5237\\u65B0\\u914D\\u7F6E\"}),\" \",(0,e.jsx)(n.code,{children:\"sudo systemctl start clash # \\u542F\\u52A8clash.service\"}),\" \",(0,e.jsx)(n.code,{children:\"sudo systemctl enable clash # \\u8BBE\\u7F6E\\u5F00\\u673A\\u542F\\u52A8\"}),\" \",(0,e.jsx)(n.code,{children:\"sudo systemctl status clash # \\u67E5\\u770Bclash.service\\u7684\\u72B6\\u6001\"})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"3\\u4E00\\u952E\\u914D\\u7F6E\\u811A\\u672C\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#3\\u4E00\\u952E\\u914D\\u7F6E\\u811A\\u672C\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3\\u3001\\u4E00\\u952E\\u914D\\u7F6E\\u811A\\u672C\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E0B\\u8F7D\\u4E00\\u952E\\u5B89\\u88C5\\u811A\\u672C\\uFF0C\\u6267\\u884C\",(0,e.jsx)(n.code,{children:\"xxx/one_step_install.sh\"})]}),`\n`,(0,e.jsxs)(n.h3,{id:\"oh-my-zsh\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#oh-my-zsh\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"oh-my-zsh\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"zsh xxx/one_step_install.sh\"}),\", \\u9009\\u62E9ohmyzsh\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u91CD\\u542F\\u7EC8\\u7AEF\\uFF0C\\u914D\\u7F6E\\u4E3B\\u9898\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5982\\u679C\\u5B89\\u88C5\\u5361\\u4F4F\\uFF0C\\u53EF\\u80FD\\u662F\\u7F51\\u7EDC\\u4E0D\\u597D \\u89E3\\u51B31\\uFF1A\",(0,e.jsx)(n.code,{children:\"zsh one_step_install.sh\"}),\", \\u9009\\u62E9scientific_surfing\\uFF0C\\u518D\\u6B21\\u5B89\\u88C5\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u89E3\\u51B32: \\u5148\\u88C5clash\\uFF0C\\u79D1\\u5B66\\u4E0A\\u7F51\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u89E3\\u51B33\\uFF1A\\u76F4\\u63A5 \",(0,e.jsx)(n.code,{children:\"zsh install_ohmyzsh.sh\"}),\",\\u4F46\\u662F\\u6CA1\\u6709\\u4E3B\\u9898\\u914D\\u7F6E\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u67E5\\u770B\\u7EC8\\u7AEF\\uFF1A\",(0,e.jsx)(n.code,{children:\"echo $SHELL\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u82E5\\u4E0D\\u662Fzsh\\uFF0C\\u8BF7\\u624B\\u52A8\\u914D\\u7F6E\\uFF1A\",(0,e.jsx)(n.code,{children:\"chsh -s $(which zsh)\"}),\"\\uFF0C\\u91CD\\u542F\\u540E\\u53EF\\u5207\\u6362\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"nvm--node\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#nvm--node\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nvm & node\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u524D\\u5F80\",(0,e.jsx)(n.a,{href:\"https://github.com/nvm-sh/nvm/releases\",children:\"https://github.com/nvm-sh/nvm/releases\"}),\"\\u786E\\u8BA4\\u76EE\\u524Dnvm\\u6700\\u65B0\\u7248\\u672C\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u4E8C\\u8005\\u9009\\u5176\\u4E00\\uFF0C\\u6CE8\\u610Fwget\\u547D\\u4EE4\\u91CC\\u7684-q\\u53C2\\u6570\\u8868\\u793A--quiet\\uFF0C\\u5B89\\u9759\\u6A21\\u5F0F\\uFF0C\\u65E0\\u4FE1\\u606F\\u8F93\\u51FA\\uFF0C\\u770B\\u4E0D\\u5230\\u9519\\u8BEF\\uFF0C\\u4E5F\\u53EF\\u53BB\\u6389\\u8BE5\\u53C2\\u6570\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\nwget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u4E8C\\u8005\\u9009\\u5176\\u4E00\\uFF0C\\u6CE8\\u610Fwget\\u547D\\u4EE4\\u91CC\\u7684-q\\u53C2\\u6570\\u8868\\u793A--quiet\\uFF0C\\u5B89\\u9759\\u6A21\\u5F0F\\uFF0C\\u65E0\\u4FE1\\u606F\\u8F93\\u51FA\\uFF0C\\u770B\\u4E0D\\u5230\\u9519\\u8BEF\\uFF0C\\u4E5F\\u53EF\\u53BB\\u6389\\u8BE5\\u53C2\\u6570\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"curl\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -o-\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" |\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" bash\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"wget\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -qO-\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" |\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" bash\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u955C\\u50CF\\u6E90\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u8BBE\\u7F6Enpm\\u955C\\u50CF\\u6E90\nnpm config set registry https://registry.npmmirror.com\n\n# \\u9A8C\\u8BC1npm\\u955C\\u50CF\\u6E90\nnpm config get registry\n\n# \\u8BBE\\u7F6Eyarn\\u955C\\u50CF\\u6E90\nyarn config set registry https://registry.npmmirror.com\n\n# \\u9A8C\\u8BC1yarn\\u955C\\u50CF\\u6E90\nyarn config get registry\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8BBE\\u7F6Enpm\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" set\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" registry\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://registry.npmmirror.com\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u9A8C\\u8BC1npm\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" registry\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8BBE\\u7F6Eyarn\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" set\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" registry\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://registry.npmmirror.com\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u9A8C\\u8BC1yarn\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" registry\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"nvm \\u955C\\u50CF\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`node_mirror:\\xA0http//npmmirror.com/mirrors/node/\\xA0\nnpm_mirror: http://npmmirror.com/mirrors/npm/\n\n\nvim ~/.bashrc\n\n# add\nexport NVM_NODEJS_ORG_MIRROR=http://npmmirror.com/mirrors/node/\n\nsource ~/.bashrc\n\nnvm ls-remote\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"node_mirror:\\xA0http//npmmirror.com/mirrors/node/\\xA0\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"npm_mirror:\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" http://npmmirror.com/mirrors/npm/\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"vim\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ~/.bashrc\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# add\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" NVM_NODEJS_ORG_MIRROR\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"http://npmmirror.com/mirrors/node/\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"source\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ~/.bashrc\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"nvm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ls-remote\"})]})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"ssh\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ssh\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"ssh\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u914D\\u7F6E\\u7AEF\\u53E3\\u53F7\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u67E5\\u770Bip: \",(0,e.jsx)(n.code,{children:\"ip a\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u67E5\\u770Bport: \",(0,e.jsx)(n.code,{children:\"/etc/ssh/sshd-config\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E4B\\u540E\\u53EF\\u4EE5\\u5728\\u672C\\u673A\\u7535\\u8111 ssh username@ip -p PORT \\u8FDC\\u7A0B\\u8FDE\\u63A5\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"conda\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#conda\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"conda\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`# download\ncurl -O https://repo.anaconda.com/archive/Anaconda3-2023.09-0-Linux-x86_64.sh\n# \\u5B89\\u88C5\nsudo bash ./Anaconda3-5.2.0-Linux-x86_64.sh \n# \\u6DFB\\u52A0\\u73AF\\u5883\\u53D8\\u91CF \necho 'export PATH=~/anaconda3/bin:$PATH' >> ~/.bashrc \n# \\u5237\\u65B0bashrc\nsource ~/.bashrc \n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# download\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"curl\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -O\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://repo.anaconda.com/archive/Anaconda3-2023.09-0-Linux-x86_64.sh\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5B89\\u88C5\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" bash\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ./Anaconda3-5.2.0-Linux-x86_64.sh\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u6DFB\\u52A0\\u73AF\\u5883\\u53D8\\u91CF \"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"echo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" 'export PATH=~/anaconda3/bin:$PATH'\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" >>\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ~/.bashrc\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5237\\u65B0bashrc\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"source\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ~/.bashrc\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"git-ssh\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#git-ssh\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Git ssh\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u67E5\\u770B\\u662F\\u5426\\u7531\\u5BC6\\u94A5\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`$ cd ~/.ssh\n$ ls\nauthorized_keys2  id_dsa       known_hosts\nconfig            id_dsa.pub\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"$\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" cd\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ~/.ssh\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"$\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ls\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"authorized_keys2\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"  id_dsa\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"       known_hosts\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"            id_dsa.pub\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u82E5\\u6CA1\\u6709\\u5219\\u751F\\u6210\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`ssh-keygen -t rsa -C \"youremail@youremail.com\" \n# or\nssh-keygen -o\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"ssh-keygen\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -t\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" rsa\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -C\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"youremail@youremail.com\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# or\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"ssh-keygen\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -o\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7C98\\u8D34\\u516C\\u94A5->github ->setting -> SSH and GPG keys\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`cat ~/.ssh/id_rsa.pub\n`,children:(0,e.jsx)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"cat\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ~/.ssh/id_rsa.pub\"})]})})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u9A8C\\u8BC1\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:` ssh -T git@github.com\n`,children:(0,e.jsx)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" ssh\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -T\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" git@github.com\"})]})})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"qa\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#qa\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"QA\"]}),`\n`,(0,e.jsxs)(n.h5,{id:\"q-sudo-command-not-found\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#q-sudo-command-not-found\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Q: sudo: command not found\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"apt install sudo\"})}),`\n`,(0,e.jsxs)(n.h5,{id:\"qapt--apt-get\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#qapt--apt-get\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Q\\uFF1Aapt & apt-get\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.em,{children:\"apt\"}),\"\\xA0\\u548C\\xA0\",(0,e.jsx)(n.em,{children:\"apt-get\"}),\"\\xA0\\u4E4B\\u95F4\\u7684\\u533A\\u522B\\u4E0D\\u4EC5\\u5728\\u4E8E\\xA0\",(0,e.jsx)(n.em,{children:\"apt\"}),\"\\xA0\\u662F\\xA0\",(0,e.jsx)(n.em,{children:\"apt-get\"}),\"\\xA0\\u7684\\u8F83\\u65B0\\u7248\\u672C\\u3002\",(0,e.jsx)(n.em,{children:\"apt\"}),\"\\xA0\\u547D\\u4EE4\\u88AB\\u8BBE\\u8BA1\\u4E3A\\u5BF9\\u7528\\u6237\\u66F4\\u52A0\\u53CB\\u597D\\u7684\\xA0\",(0,e.jsx)(n.em,{children:\"apt-get\"}),`\\xA0\\u66FF\\u4EE3\\u65B9\\u6848\\uFF0C\\u7ED3\\u5408\\u4E86\\u591A\\u4E2A\\u5305\\u7BA1\\u7406\\u5DE5\\u5177\\u7684\\u529F\\u80FD\\uFF0C\\u4E3A\\u7528\\u6237\\u63D0\\u4F9B\\u4FBF\\u5229\\u3002\n`,(0,e.jsx)(n.a,{href:\"https://aws.amazon.com/cn/compare/the-difference-between-apt-and-apt-get/\",children:\"APT \\u4E0E APT-GET \\u4E4B\\u95F4\\u6709\\u4EC0\\u4E48\\u533A\\u522B\\uFF1F\"})]})]})}function B(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(h,a)})):h(a)}var k=B;return E(x);})();\n;return Component;"
    },
    "_id": "post/2023-11-25-ubuntu-environment.md",
    "_raw": {
      "sourceFilePath": "post/2023-11-25-ubuntu-environment.md",
      "sourceFileName": "2023-11-25-ubuntu-environment.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2023-11-25-ubuntu-environment"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2023-11-25-ubuntu-environment",
    "slugAsParams": "2023-11-25-ubuntu-environment"
  },
  {
    "title": "搭建React+TS项目的几种方式",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "url": "/2023-11-26-react+ts",
    "description": null,
    "date": "2023-11-26T00:00:00.000Z",
    "body": {
      "raw": "\n## 打包工具\n### webpack\nhttps://webpack.js.org/\n\n### Vite\nhttps://cn.vitejs.dev/\n\n取代webpck的快速构建工具，优化构建时间。使用 esbuild\n```shell\n\nnpm create vite@latest\nyarn create vite\n```\n\n\n\n## 包管理器\nnpm, yarn, bnpm\n\n\n**cross-env**\n```json\n// package.json\n\"dev\": \"cross-env PORT=9000 nuxt dev \",\n\"mock\": \"cross-env PORT=9000 MODE=mock nuxt dev \",\n```\n\n## React手脚架\n### CRA/CRACO\n\n[cra](https://create-react-app.dev/)= Create React App。基于webpack和Babel， webpack配置太多。\n\n[craco](https://craco.js.org/docs/getting-started/)= Create React App Configuration Overide。基于cra之上的一个hacky层，用于定制它的配置,allows you to get all of the benefits of Create React App without ejecting\n\n1. `npx create-react-app my-app`\n2. `npm i -D @craco/craco` or `npm i -D @craco/types`(ts)\n3. create configuaration file `craco.config.js`\n4. update `package.json`\n    \n    ```json\n    \"scripts\": {\n    -  \"start\": \"react-scripts start\"\n    +  \"start\": \"craco start\"\n    -  \"build\": \"react-scripts build\"\n    +  \"build\": \"craco build\"\n    -  \"test\": \"react-scripts test\"\n    +  \"test\": \"craco test\"\n    }\n    ```\n    \n\n\n### Next.js\n\nNext.js 是一个基于 React 的[服务端渲染框架](https://cloud.tencent.com/product/ssr?from_column=20065&from=20065)，它提供了约定式路由、多种渲染方式、静态导出等功能。\n\n**渲染方式**\n\n- CSR - 客户端渲染。也就是我们常说的 SPA（single page application），使用 `useEffect` 获取接口数据。\n- SSR - 服务器端渲染\n- SSG - 静态站点生成。\n- ISR – 增量静态再生，可以再次从 API 获取数据，并且生成静态页面，最适合常见的资讯类、新闻类网站。\n- Server component- 也是 SSR 的一种， 但互补了 SSR 的不足，让网页拥有流式渲染的能力。/CRACO（Webpack）\n\n[cra](https://create-react-app.dev/)= Create React App。基于webpack和Babel， webpack配置太多。\n\n[craco](https://craco.js.org/docs/getting-started/)= Create React App Configuration Overide。基于cra之上的一个hacky层，用于定制它的配置,allows you to get all of the benefits of Create React App without ejecting\n\n1. `npx create-react-app my-app`\n    \n2. `npm i -D @craco/craco` or `npm i -D @craco/types`(ts)\n    \n3. create configuaration file `craco.config.js`\n    \n4. update `package.json`\n    \n    ```json\n    \"scripts\": {\n    -  \"start\": \"react-scripts start\"\n    +  \"start\": \"craco start\"\n    -  \"build\": \"react-scripts build\"\n    +  \"build\": \"craco build\"\n    -  \"test\": \"react-scripts test\"\n    +  \"test\": \"craco test\"\n    }\n    ```\n    \n\n\n## Vue手脚架\n### nuxtjs\nhttps://nuxt.com/\n\n## Eslint & ts\n### ts 别名设置\n`yarn add -D @type/node`\nvite.config.ts\n```ts\nexport default defineConfig({\n  ...,\n  resolve: {\n    alias: {\n      \"~\": path.resolve(__dirname, \"./\"),\n      \"@\": path.resolve(__dirname, \"./src\"),\n    },\n  },\n});\n\n```\n\ntsconfig.json\n```json\n{\n  \"compilerOptions\": {\n    ...,\n    \"paths\": {\n      \"~/*\": [\"./*\"],\n      \"@/*\": [\"./src/*\"]\n    }\n  },\n}\n\n```\n\n\n### 禁用any\n\n```js\n//  .eslintrc (tslintrc) file :\nrules: {\n    \"@typescript-eslint/no-explicit-any\": \"off\"\n  },\n```\n\n## 辅助\ntailwindcss： https://tailwindcss.com/\nanimate.css: https://animate.style/\nchroma: https://gka.github.io/chroma.js/ (color util)\n## UI\narco.design: https://arco.design/\n",
      "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var u=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var a in e)r(l,a,{get:e[a],enumerable:!0})},i=(l,e,a,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!F.call(l,c)&&c!==a&&r(l,c,{get:()=>e[c],enumerable:!(t=p(e,c))||t.enumerable});return l};var f=(l,e,a)=>(a=l!=null?h(E(l)):{},i(e||!l||!l.__esModule?r(a,\"default\",{value:l,enumerable:!0}):a,l)),m=l=>i(r({},\"__esModule\",{value:!0}),l);var d=u((j,s)=>{s.exports=_jsx_runtime});var C={};g(C,{default:()=>k,frontmatter:()=>B});var n=f(d()),B={title:\"\\u642D\\u5EFAReact+TS\\u9879\\u76EE\\u7684\\u51E0\\u79CD\\u65B9\\u5F0F\",subtitle:null,layout:\"post\",date:new Date(17009568e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],url:\"/2023-11-26-react+ts\",image:null};function o(l){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",h3:\"h3\",p:\"p\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",strong:\"strong\",ol:\"ol\",li:\"li\",ul:\"ul\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"\\u6253\\u5305\\u5DE5\\u5177\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u6253\\u5305\\u5DE5\\u5177\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6253\\u5305\\u5DE5\\u5177\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"webpack\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#webpack\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"webpack\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://webpack.js.org/\",children:\"https://webpack.js.org/\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"vite\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#vite\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Vite\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://cn.vitejs.dev/\",children:\"https://cn.vitejs.dev/\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u53D6\\u4EE3webpck\\u7684\\u5FEB\\u901F\\u6784\\u5EFA\\u5DE5\\u5177\\uFF0C\\u4F18\\u5316\\u6784\\u5EFA\\u65F6\\u95F4\\u3002\\u4F7F\\u7528 esbuild\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`\nnpm create vite@latest\nyarn create vite\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" create\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" vite@latest\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" create\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" vite\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u5305\\u7BA1\\u7406\\u5668\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u5305\\u7BA1\\u7406\\u5668\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5305\\u7BA1\\u7406\\u5668\"]}),`\n`,(0,n.jsx)(e.p,{children:\"npm, yarn, bnpm\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"cross-env\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`// package.json\n\"dev\": \"cross-env PORT=9000 nuxt dev \",\n\"mock\": \"cross-env PORT=9000 MODE=mock nuxt dev \",\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// package.json\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"dev\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"cross-env PORT=9000 nuxt dev \"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"mock\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"cross-env PORT=9000 MODE=mock nuxt dev \"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"react\\u624B\\u811A\\u67B6\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#react\\u624B\\u811A\\u67B6\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"React\\u624B\\u811A\\u67B6\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"cracraco\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#cracraco\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"CRA/CRACO\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://create-react-app.dev/\",children:\"cra\"}),\"= Create\\xA0React\\xA0App\\u3002\\u57FA\\u4E8Ewebpack\\u548CBabel\\uFF0C webpack\\u914D\\u7F6E\\u592A\\u591A\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://craco.js.org/docs/getting-started/\",children:\"craco\"}),\"= Create\\xA0React\\xA0App\\xA0Configuration\\xA0Overide\\u3002\\u57FA\\u4E8Ecra\\u4E4B\\u4E0A\\u7684\\u4E00\\u4E2Ahacky\\u5C42\\uFF0C\\u7528\\u4E8E\\u5B9A\\u5236\\u5B83\\u7684\\u914D\\u7F6E,allows you to get all of the benefits of\\xA0Create React App\\xA0without ejecting\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"npx create-react-app my-app\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"npm i -D @craco/craco\"}),\" or \",(0,n.jsx)(e.code,{children:\"npm i -D @craco/types\"}),\"(ts)\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"create configuaration file \",(0,n.jsx)(e.code,{children:\"craco.config.js\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"update \",(0,n.jsx)(e.code,{children:\"package.json\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`\"scripts\": {\n-  \"start\": \"react-scripts start\"\n+  \"start\": \"craco start\"\n-  \"build\": \"react-scripts build\"\n+  \"build\": \"craco build\"\n-  \"test\": \"react-scripts test\"\n+  \"test\": \"craco test\"\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"scripts\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'  \"start\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"react-scripts start\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"start\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"craco start\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"build\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"react-scripts build\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"build\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"craco build\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"test\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"react-scripts test\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"test\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"craco test\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"nextjs\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#nextjs\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Next.js\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Next.js \\u662F\\u4E00\\u4E2A\\u57FA\\u4E8E React \\u7684\",(0,n.jsx)(e.a,{href:\"https://cloud.tencent.com/product/ssr?from_column=20065&from=20065\",children:\"\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u6846\\u67B6\"}),\"\\uFF0C\\u5B83\\u63D0\\u4F9B\\u4E86\\u7EA6\\u5B9A\\u5F0F\\u8DEF\\u7531\\u3001\\u591A\\u79CD\\u6E32\\u67D3\\u65B9\\u5F0F\\u3001\\u9759\\u6001\\u5BFC\\u51FA\\u7B49\\u529F\\u80FD\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u6E32\\u67D3\\u65B9\\u5F0F\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"CSR - \\u5BA2\\u6237\\u7AEF\\u6E32\\u67D3\\u3002\\u4E5F\\u5C31\\u662F\\u6211\\u4EEC\\u5E38\\u8BF4\\u7684 SPA\\uFF08single page application\\uFF09\\uFF0C\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" \\u83B7\\u53D6\\u63A5\\u53E3\\u6570\\u636E\\u3002\"]}),`\n`,(0,n.jsx)(e.li,{children:\"SSR - \\u670D\\u52A1\\u5668\\u7AEF\\u6E32\\u67D3\"}),`\n`,(0,n.jsx)(e.li,{children:\"SSG - \\u9759\\u6001\\u7AD9\\u70B9\\u751F\\u6210\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"ISR \\u2013 \\u589E\\u91CF\\u9759\\u6001\\u518D\\u751F\\uFF0C\\u53EF\\u4EE5\\u518D\\u6B21\\u4ECE API \\u83B7\\u53D6\\u6570\\u636E\\uFF0C\\u5E76\\u4E14\\u751F\\u6210\\u9759\\u6001\\u9875\\u9762\\uFF0C\\u6700\\u9002\\u5408\\u5E38\\u89C1\\u7684\\u8D44\\u8BAF\\u7C7B\\u3001\\u65B0\\u95FB\\u7C7B\\u7F51\\u7AD9\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"Server component- \\u4E5F\\u662F SSR \\u7684\\u4E00\\u79CD\\uFF0C \\u4F46\\u4E92\\u8865\\u4E86 SSR \\u7684\\u4E0D\\u8DB3\\uFF0C\\u8BA9\\u7F51\\u9875\\u62E5\\u6709\\u6D41\\u5F0F\\u6E32\\u67D3\\u7684\\u80FD\\u529B\\u3002/CRACO\\uFF08Webpack\\uFF09\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://create-react-app.dev/\",children:\"cra\"}),\"= Create\\xA0React\\xA0App\\u3002\\u57FA\\u4E8Ewebpack\\u548CBabel\\uFF0C webpack\\u914D\\u7F6E\\u592A\\u591A\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://craco.js.org/docs/getting-started/\",children:\"craco\"}),\"= Create\\xA0React\\xA0App\\xA0Configuration\\xA0Overide\\u3002\\u57FA\\u4E8Ecra\\u4E4B\\u4E0A\\u7684\\u4E00\\u4E2Ahacky\\u5C42\\uFF0C\\u7528\\u4E8E\\u5B9A\\u5236\\u5B83\\u7684\\u914D\\u7F6E,allows you to get all of the benefits of\\xA0Create React App\\xA0without ejecting\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"npx create-react-app my-app\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"npm i -D @craco/craco\"}),\" or \",(0,n.jsx)(e.code,{children:\"npm i -D @craco/types\"}),\"(ts)\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"create configuaration file \",(0,n.jsx)(e.code,{children:\"craco.config.js\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"update \",(0,n.jsx)(e.code,{children:\"package.json\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`\"scripts\": {\n-  \"start\": \"react-scripts start\"\n+  \"start\": \"craco start\"\n-  \"build\": \"react-scripts build\"\n+  \"build\": \"craco build\"\n-  \"test\": \"react-scripts test\"\n+  \"test\": \"craco test\"\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"scripts\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'  \"start\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"react-scripts start\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"start\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"craco start\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"build\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"react-scripts build\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"build\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"craco build\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"test\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"react-scripts test\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"test\"'}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"craco test\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"vue\\u624B\\u811A\\u67B6\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#vue\\u624B\\u811A\\u67B6\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Vue\\u624B\\u811A\\u67B6\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"nuxtjs\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#nuxtjs\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"nuxtjs\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nuxt.com/\",children:\"https://nuxt.com/\"})}),`\n`,(0,n.jsxs)(e.h2,{id:\"eslint--ts\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#eslint--ts\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Eslint & ts\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"ts-\\u522B\\u540D\\u8BBE\\u7F6E\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#ts-\\u522B\\u540D\\u8BBE\\u7F6E\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"ts \\u522B\\u540D\\u8BBE\\u7F6E\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"yarn add -D @type/node\"}),`\nvite.config.ts`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark\",raw:`export default defineConfig({\n  ...,\n  resolve: {\n    alias: {\n      \"~\": path.resolve(__dirname, \"./\"),\n      \"@\": path.resolve(__dirname, \"./src\"),\n    },\n  },\n});\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" defineConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  ...\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  resolve: {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    alias: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'      \"~\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": path.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(__dirname, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'      \"@\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": path.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(__dirname, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./src\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"tsconfig.json\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"compilerOptions\": {\n    ...,\n    \"paths\": {\n      \"~/*\": [\"./*\"],\n      \"@/*\": [\"./src/*\"]\n    }\n  },\n}\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'  \"compilerOptions\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"    ...,\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"paths\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'      \"~/*\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./*\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"],\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'      \"@/*\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./src/*\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7981\\u7528any\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u7981\\u7528any\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7981\\u7528any\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`// \\xA0.eslintrc (tslintrc) file :\nrules: {\n    \"@typescript-eslint/no-explicit-any\": \"off\"\n  },\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\xA0.eslintrc (tslintrc) file :\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"rules\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'    \"@typescript-eslint/no-explicit-any\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"off\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})})]})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u8F85\\u52A9\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u8F85\\u52A9\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u8F85\\u52A9\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"tailwindcss\\uFF1A \",(0,n.jsx)(e.a,{href:\"https://tailwindcss.com/\",children:\"https://tailwindcss.com/\"}),`\nanimate.css: `,(0,n.jsx)(e.a,{href:\"https://animate.style/\",children:\"https://animate.style/\"}),`\nchroma: `,(0,n.jsx)(e.a,{href:\"https://gka.github.io/chroma.js/\",children:\"https://gka.github.io/chroma.js/\"}),\" (color util)\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"ui\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#ui\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"UI\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"arco.design: \",(0,n.jsx)(e.a,{href:\"https://arco.design/\",children:\"https://arco.design/\"})]})]})}function b(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(o,l)})):o(l)}var k=b;return m(C);})();\n;return Component;"
    },
    "_id": "post/2023-11-26-font-project-ways.md",
    "_raw": {
      "sourceFilePath": "post/2023-11-26-font-project-ways.md",
      "sourceFileName": "2023-11-26-font-project-ways.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2023-11-26-font-project-ways"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2023-11-26-font-project-ways",
    "slugAsParams": "2023-11-26-font-project-ways"
  },
  {
    "title": "vite+vue+ts+sass项目搭建",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": "从0到1搭建vite+vue+ts+sass基础项目",
    "url": "/2023-11-27-vite+vue",
    "description": null,
    "date": "2023-11-27T00:00:00.000Z",
    "body": {
      "raw": "\n\n\n> 兼容性：Vite 需要 [Node.js](https://nodejs.org/en/) 版本 18+，20+\n> 若用vscode开发不要装vetur插件（垃圾），安装Volar+TypeScript Vue Plugin (Volar)（vetur的升级版）\n\n```shell\nnpm create vite my-vue-app --template vue-ts\n```\n\n\n\n> 相关依赖\n>\n> sass： `npm i sass -D`\n>\n> hooks： \n\n#### Sass\n\n```bash\nnpm i sass -D\n```\n\n全局引入： 在vite.config.js文件添加配置\n\n```js\nexport default defineConfig({\n    ...\n    css: {\n        preprocessorOptions: {\n            additionalData: '@import \"@/assets/scss/globalVar.scss\";@import \"@/assets/scss/globalMixin.scss\";'\n        }\n    }\n});\n```\n\n按需引入\n\n```vue\n<style lang=\"scss\" scoped>\n    @import \"@/assets/scss/globalVar.scss\";\n</style>\n```\n\n\n\n#### 路径别名\n\n```shell\nnpm install @types/node --save-dev\n```\n\n配置vite.config.ts\n\n```tsx\nimport path from \"path\";\n\nexport default defineConfig({\n  ...\n  resolve: {\n    alias: {\n      \"@\": path.resolve(\"./src\"),\n    },\n  },\n});\n\n```\n\n配置tsconfig.json\n\n```tsx\n{\n  \"compilerOptions\": {\n    ...\n    \"baseUrl\": \".\",\n    \"paths\": { \"@/*\": [\"src/*\"] }\n  },\n}\n```\n\n\n\n#### 状态管理-Pinia\n\n[pinia](https://pinia.vuejs.org/zh/)\n[pinia-plugin-persist](https://seb-l.github.io/pinia-plugin-persist/)\n\n```bash\nnpm install pinia -D\nnpm install pinia-plugin-persist -D # 可选，插件\n```\n\n\n\n#### 多环境配置\n\n添加配置文件\n\n```shell\n# .env.user\n# 接口请求地址前缀\nVITE_APP_API_PREFIX = /api\n\n# 删除 console 代码\nVITE_DROP_CONSOLE = true\n\n# 生产环境配置文件名称\nVITE_GLOB_CONFIG_FILE_NAME = app.config.js\n\n# 打包生成目录\nVITE_OUTPUT_DIR = user\n\n# 平台\nVITE_PLATFORM = user\n\n# 重定向路径\nVITE_REDIRECT_INDEX = \"/index\"\n\n```\n\n修改package.json, 添加--mode 参数\n\n```json\n{\n  ...\n\t\"scripts\": {\n    \"dev\": \"vite  --mode dev\",\n    \"build\": \"vue-tsc && vite build --mode prd\",\n    \"preview\": \"vite preview\"\n  },\n}\n```\n\n项目中使用\n\n```js\nconst baseUrl = import.meta.env.VITE_APP_API_PREFIX;\n```\n\n\n\n## 遇到的问题\n\n##### Cannot find module 'vue'. Did you mean to set the 'moduleResolution' option to 'node', or to add aliases to the 'paths' option?Vetur\n\n把tsconfig.json配置项moduleResolution：\"bundler\"改为 moduleResolution：\"node\"\n\n\n\n##### An import path cannot end with a '.ts' extension. Consider importing '@/store/counter.js\n\n配置vite.config.ts中resolve.extensions的配置项\n\n##### Cannot find module '~/store/counter' or its corresponding type declarations.ts(2307)\n\n****\n\n\n\nhttps://juejin.cn/post/7170746000112353293?searchId=2023112613400612F6DE1AB312141A1338#heading-31\n\n\n\n服务器端口无法访问\n\nA：防火墙未开启\n\n查看防火墙中允许被访问的端口号：sudo firewall-cmd --list-all （ports选项）\n\n`firewall-cmd --zone=public --list-ports`\n\n开启端口：sudo firewall-cmd --zone=public --add-port=8887/tcp --permanent\n\n重启防火墙：sudo firewall-cmd --reload\n\n关闭端口：sudo firewall-cmd --zone=public --remove-port=7890/tcp --permanent \n\n再次检查\n\n检查端口网站：https://tool.chinaz.com/port",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),F=(l,e)=>{for(var a in e)s(l,a,{get:e[a],enumerable:!0})},c=(l,e,a,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(l,r)&&r!==a&&s(l,r,{get:()=>e[r],enumerable:!(i=p(e,r))||i.enumerable});return l};var m=(l,e,a)=>(a=l!=null?h(E(l)):{},c(e||!l||!l.__esModule?s(a,\"default\",{value:l,enumerable:!0}):a,l)),b=l=>c(s({},\"__esModule\",{value:!0}),l);var t=g((I,d)=>{d.exports=_jsx_runtime});var C={};F(C,{default:()=>v,frontmatter:()=>f});var n=m(t()),f={layout:\"post\",title:\"vite+vue+ts+sass\\u9879\\u76EE\\u642D\\u5EFA\",subtitle:\"\\u4ECE0\\u52301\\u642D\\u5EFAvite+vue+ts+sass\\u57FA\\u7840\\u9879\\u76EE\",description:null,date:new Date(17010432e5),author:\"heavenmei\",image:\"\",tags:[\"Front\"],url:\"/2023-11-27-vite+vue\",categories:[\"Post\"]};function o(l){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",span:\"span\",h4:\"h4\",h2:\"h2\",h5:\"h5\",hr:\"hr\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u517C\\u5BB9\\u6027\\uFF1AVite \\u9700\\u8981 \",(0,n.jsx)(e.a,{href:\"https://nodejs.org/en/\",children:\"Node.js\"}),` \\u7248\\u672C 18+\\uFF0C20+\n\\u82E5\\u7528vscode\\u5F00\\u53D1\\u4E0D\\u8981\\u88C5vetur\\u63D2\\u4EF6\\uFF08\\u5783\\u573E\\uFF09\\uFF0C\\u5B89\\u88C5Volar+TypeScript Vue Plugin (Volar)\\uFF08vetur\\u7684\\u5347\\u7EA7\\u7248\\uFF09`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`npm create vite my-vue-app --template vue-ts\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" create\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" vite\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" my-vue-app\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --template\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" vue-ts\"})]})})})})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u76F8\\u5173\\u4F9D\\u8D56\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"sass\\uFF1A \",(0,n.jsx)(e.code,{children:\"npm i sass -D\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"hooks\\uFF1A\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h4,{id:\"sass\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#sass\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Sass\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`npm i sass -D\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" i\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" sass\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"})]})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5168\\u5C40\\u5F15\\u5165\\uFF1A \\u5728vite.config.js\\u6587\\u4EF6\\u6DFB\\u52A0\\u914D\\u7F6E\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`export default defineConfig({\n    ...\n    css: {\n        preprocessorOptions: {\n            additionalData: '@import \"@/assets/scss/globalVar.scss\";@import \"@/assets/scss/globalMixin.scss\";'\n        }\n    }\n});\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" defineConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    ...\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    css: {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        preprocessorOptions: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"            additionalData: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:`'@import \"@/assets/scss/globalVar.scss\";@import \"@/assets/scss/globalMixin.scss\";'`})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6309\\u9700\\u5F15\\u5165\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"vue\",\"data-theme\":\"github-dark\",raw:`<style lang=\"scss\" scoped>\n    @import \"@/assets/scss/globalVar.scss\";\n</style>\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"vue\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"style\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" lang\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"scss\"'}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" scoped\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:'    @import \"@/assets/scss/globalVar.scss\";'})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"style\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h4,{id:\"\\u8DEF\\u5F84\\u522B\\u540D\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u8DEF\\u5F84\\u522B\\u540D\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u8DEF\\u5F84\\u522B\\u540D\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`npm install @types/node --save-dev\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @types/node\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --save-dev\"})]})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u914D\\u7F6Evite.config.ts\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"tsx\",\"data-theme\":\"github-dark\",raw:`import path from \"path\";\n\nexport default defineConfig({\n  ...\n  resolve: {\n    alias: {\n      \"@\": path.resolve(\"./src\"),\n    },\n  },\n});\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"tsx\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" path \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"path\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" defineConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  ...\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  resolve: {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    alias: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'      \"@\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": path.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./src\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u914D\\u7F6Etsconfig.json\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"tsx\",\"data-theme\":\"github-dark\",raw:`{\n  \"compilerOptions\": {\n    ...\n    \"baseUrl\": \".\",\n    \"paths\": { \"@/*\": [\"src/*\"] }\n  },\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"tsx\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"compilerOptions\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    ...\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'    \"baseUrl\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\".\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'    \"paths\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": { \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"@/*\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"src/*\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] }\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsxs)(e.h4,{id:\"\\u72B6\\u6001\\u7BA1\\u7406-pinia\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u72B6\\u6001\\u7BA1\\u7406-pinia\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u72B6\\u6001\\u7BA1\\u7406-Pinia\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://pinia.vuejs.org/zh/\",children:\"pinia\"}),`\n`,(0,n.jsx)(e.a,{href:\"https://seb-l.github.io/pinia-plugin-persist/\",children:\"pinia-plugin-persist\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`npm install pinia -D\nnpm install pinia-plugin-persist -D # \\u53EF\\u9009\\uFF0C\\u63D2\\u4EF6\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" pinia\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" pinia-plugin-persist\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" # \\u53EF\\u9009\\uFF0C\\u63D2\\u4EF6\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h4,{id:\"\\u591A\\u73AF\\u5883\\u914D\\u7F6E\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u591A\\u73AF\\u5883\\u914D\\u7F6E\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u591A\\u73AF\\u5883\\u914D\\u7F6E\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6DFB\\u52A0\\u914D\\u7F6E\\u6587\\u4EF6\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`# .env.user\n# \\u63A5\\u53E3\\u8BF7\\u6C42\\u5730\\u5740\\u524D\\u7F00\nVITE_APP_API_PREFIX = /api\n\n# \\u5220\\u9664 console \\u4EE3\\u7801\nVITE_DROP_CONSOLE = true\n\n# \\u751F\\u4EA7\\u73AF\\u5883\\u914D\\u7F6E\\u6587\\u4EF6\\u540D\\u79F0\nVITE_GLOB_CONFIG_FILE_NAME = app.config.js\n\n# \\u6253\\u5305\\u751F\\u6210\\u76EE\\u5F55\nVITE_OUTPUT_DIR = user\n\n# \\u5E73\\u53F0\nVITE_PLATFORM = user\n\n# \\u91CD\\u5B9A\\u5411\\u8DEF\\u5F84\nVITE_REDIRECT_INDEX = \"/index\"\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# .env.user\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u63A5\\u53E3\\u8BF7\\u6C42\\u5730\\u5740\\u524D\\u7F00\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"VITE_APP_API_PREFIX\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /api\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u5220\\u9664 console \\u4EE3\\u7801\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"VITE_DROP_CONSOLE\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" true\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u751F\\u4EA7\\u73AF\\u5883\\u914D\\u7F6E\\u6587\\u4EF6\\u540D\\u79F0\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"VITE_GLOB_CONFIG_FILE_NAME\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" app.config.js\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u6253\\u5305\\u751F\\u6210\\u76EE\\u5F55\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"VITE_OUTPUT_DIR\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" user\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u5E73\\u53F0\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"VITE_PLATFORM\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" user\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u91CD\\u5B9A\\u5411\\u8DEF\\u5F84\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"VITE_REDIRECT_INDEX\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"/index\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4FEE\\u6539package.json, \\u6DFB\\u52A0--mode \\u53C2\\u6570\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  ...\n\t\"scripts\": {\n    \"dev\": \"vite  --mode dev\",\n    \"build\": \"vue-tsc && vite build --mode prd\",\n    \"preview\": \"vite preview\"\n  },\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"  ...\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'\t\"scripts\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"dev\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"vite  --mode dev\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"build\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"vue-tsc && vite build --mode prd\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"preview\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"vite preview\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u9879\\u76EE\\u4E2D\\u4F7F\\u7528\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`const baseUrl = import.meta.env.VITE_APP_API_PREFIX;\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" baseUrl\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"meta\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".env.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"VITE_APP_API_PREFIX\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]})})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u9047\\u5230\\u7684\\u95EE\\u9898\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u9047\\u5230\\u7684\\u95EE\\u9898\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u9047\\u5230\\u7684\\u95EE\\u9898\"]}),`\n`,(0,n.jsxs)(e.h5,{id:\"cannot-find-module-vue-did-you-mean-to-set-the-moduleresolution-option-to-node-or-to-add-aliases-to-the-paths-optionvetur\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#cannot-find-module-vue-did-you-mean-to-set-the-moduleresolution-option-to-node-or-to-add-aliases-to-the-paths-optionvetur\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Cannot find module 'vue'. Did you mean to set the 'moduleResolution' option to 'node', or to add aliases to the 'paths' option?Vetur\"]}),`\n`,(0,n.jsx)(e.p,{children:'\\u628Atsconfig.json\\u914D\\u7F6E\\u9879moduleResolution\\uFF1A\"bundler\"\\u6539\\u4E3A moduleResolution\\uFF1A\"node\"'}),`\n`,(0,n.jsxs)(e.h5,{id:\"an-import-path-cannot-end-with-a-ts-extension-consider-importing-storecounterjs\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#an-import-path-cannot-end-with-a-ts-extension-consider-importing-storecounterjs\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"An import path cannot end with a '.ts' extension. Consider importing '@/store/counter.js\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u914D\\u7F6Evite.config.ts\\u4E2Dresolve.extensions\\u7684\\u914D\\u7F6E\\u9879\"}),`\n`,(0,n.jsxs)(e.h5,{id:\"cannot-find-module-storecounter-or-its-corresponding-type-declarationsts2307\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#cannot-find-module-storecounter-or-its-corresponding-type-declarationsts2307\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Cannot find module '~/store/counter' or its corresponding type declarations.ts(2307)\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://juejin.cn/post/7170746000112353293?searchId=2023112613400612F6DE1AB312141A1338#heading-31\",children:\"https://juejin.cn/post/7170746000112353293?searchId=2023112613400612F6DE1AB312141A1338#heading-31\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u670D\\u52A1\\u5668\\u7AEF\\u53E3\\u65E0\\u6CD5\\u8BBF\\u95EE\"}),`\n`,(0,n.jsx)(e.p,{children:\"A\\uFF1A\\u9632\\u706B\\u5899\\u672A\\u5F00\\u542F\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u67E5\\u770B\\u9632\\u706B\\u5899\\u4E2D\\u5141\\u8BB8\\u88AB\\u8BBF\\u95EE\\u7684\\u7AEF\\u53E3\\u53F7\\uFF1Asudo firewall-cmd --list-all \\uFF08ports\\u9009\\u9879\\uFF09\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"firewall-cmd --zone=public --list-ports\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5F00\\u542F\\u7AEF\\u53E3\\uFF1Asudo firewall-cmd --zone=public --add-port=8887/tcp --permanent\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u91CD\\u542F\\u9632\\u706B\\u5899\\uFF1Asudo firewall-cmd --reload\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5173\\u95ED\\u7AEF\\u53E3\\uFF1Asudo firewall-cmd --zone=public --remove-port=7890/tcp --permanent\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u518D\\u6B21\\u68C0\\u67E5\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u68C0\\u67E5\\u7AEF\\u53E3\\u7F51\\u7AD9\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://tool.chinaz.com/port\",children:\"https://tool.chinaz.com/port\"})]})]})}function B(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(o,l)})):o(l)}var v=B;return b(C);})();\n;return Component;"
    },
    "_id": "post/2023-11-27-vite+vue.md",
    "_raw": {
      "sourceFilePath": "post/2023-11-27-vite+vue.md",
      "sourceFileName": "2023-11-27-vite+vue.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2023-11-27-vite+vue"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2023-11-27-vite+vue",
    "slugAsParams": "2023-11-27-vite+vue"
  },
  {
    "title": "Diffusion Learning",
    "tags": [
      "Academic"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "url": "/2023-12-01-Diffusion Learning",
    "description": null,
    "date": "2023-12-01T00:00:00.000Z",
    "body": {
      "raw": "\n\n![Untitled.png](https://raw.githubusercontent.com/heavenmei/heavenmei.github.io/master/images/202312121119465.png)\n## 评价指标\n\n### Frechet Inception Distance（FID）\n\n评价一张图片的好坏，首先需要一个训练好的分类器，然后比较生成图片与真实图片representation之间的距离，距离越小越好，这需要大量图片来测量。\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/ab32932e-bd14-4d15-8f07-f8a7c6cbab59/Untitled.png)\n\n### ****Contrastive Language-Image Pre-Training（CLIP）****\n\n使用CLIP模型根据对应的文字描述来判断生成图像的质量。400million text-image pairs\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/c2e08dfd-038a-4e6b-b309-b5468c97cb45/Untitled.png)\n\n## Diffusion Model原理 [DDPM](https://arxiv.org/abs/2006.11239)\n\n### 去噪声（生成）\n\n不同时序使用的是**同一个denoise模型**，但是因为输入图片的状态有很大的不同，所以需要把step本身也输入到denoise模型，让它知道当前图片的去噪状况。\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/e2165ea8-9a3e-4a71-85cf-03fcb86bd597/Untitled.png)\n\nDenoise模块中存在一个Predicter，它用来预测输入图片的噪声，再用要被denoise的图片减去噪声就可以得到denoise之后的图片了。\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/5b5b5fee-eef5-4232-9bd6-84bbd4c29ccb/Untitled.png)\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/04f30b69-2ba4-4b55-b86b-3bae8be58906/Untitled.png)\n\n### 加噪声（训练）\n\n那么这个Noise Predicter如何训练呢？在训练时，我们首先需要根据原始无噪声的图片认为生成Predicter的噪声Ground truth。\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/09513c5b-d848-46f1-8b50-78724bf6a1d7/Untitled.png)\n\n在forward process（前向过程）中已经存储了GT，得到了标签。\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/6b58c56a-6008-401a-9b0d-e27947f04d4d/Untitled.png)\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/d497cf60-bce6-4b2f-9bd1-2e35e4801f27/Untitled.png)\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/8b212294-180e-43bf-9b9f-cff8b4482f13/Untitled.png)\n\n## Text2Image框架\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/4bc084c0-52d2-451f-a2c2-f696f7d22757/Untitled.png)\n\n从这个framework中可以看出，文字是没有办法直接输入到模型中的，首先需要一个encoder（GPT,BERT）将文本编码成token，再和噪声一起输入到生成模型（也就是diffusion模型），得到的中间产物最后通过一个decoder生成最终的图像。**其中decoder的训练数据可以不需要标签。**\n\n### ****Stable Diffusion、DALL-E、Imagen****各自框架\n\n> [Stable Diffusion](https://www.notion.so/High-Resolution-Image-Synthesis-with-Latent-Diffusion-Models-66e17659d5e145ea93ed2eaef546d1aa?pvs=21)\n> \n> ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/b4000e36-993d-4d92-9eca-e5ae94c34f3f/Untitled.png)\n\n> DALLE-E\n> \n> ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/3a0a2626-17e4-47f5-97eb-f731ec71e0ce/Untitled.png)\n\n> Imagen\n> \n> ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/d8a3db67-2e42-4fae-a1b3-57dcb3a66bbd/Untitled.png)\n\n### Decoder\n\nDecoder的输入有两种情况，一种是denoise图片的压缩版本（imagen），一种是latent representation（stable diffusion）。对于前者非常简单，只需要拿很多downsample的图片来训练就可以了。对于后者需要训练一个auto encoder，把decoder拿出来。**decoder的训练数据可以不需要标签**\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/ea9fd821-b38b-4e77-89a2-25bc1a224140/Untitled.png)\n\n![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/924e059b-04e6-43ea-a5cd-ae272dc3bf8b/Untitled.png)\n\n### Generation Model\n\n对于framework中的生成模型，noise加在中间产物（latent representation）上而不是原始图像上。",
      "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),u=(a,e)=>{for(var i in e)c(a,i,{get:e[i],enumerable:!0})},r=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of p(e))!g.call(a,s)&&s!==i&&c(a,s,{get:()=>e[s],enumerable:!(t=f(e,s))||t.enumerable});return a};var w=(a,e,i)=>(i=a!=null?h(m(a)):{},r(e||!a||!a.__esModule?c(i,\"default\",{value:a,enumerable:!0}):i,a)),U=a=>r(c({},\"__esModule\",{value:!0}),a);var l=b((L,d)=>{d.exports=_jsx_runtime});var z={};u(z,{default:()=>D,frontmatter:()=>N});var n=w(l()),N={title:\"Diffusion Learning\",subtitle:null,layout:\"post\",date:new Date(17013888e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Academic\"],url:\"/2023-12-01-Diffusion Learning\",image:null};function o(a){let e=Object.assign({p:\"p\",img:\"img\",h2:\"h2\",a:\"a\",span:\"span\",h3:\"h3\",strong:\"strong\",blockquote:\"blockquote\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://raw.githubusercontent.com/heavenmei/heavenmei.github.io/master/images/202312121119465.png\",alt:\"Untitled.png\"})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u8BC4\\u4EF7\\u6307\\u6807\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u8BC4\\u4EF7\\u6307\\u6807\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u8BC4\\u4EF7\\u6307\\u6807\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"frechet-inception-distancefid\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#frechet-inception-distancefid\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Frechet Inception Distance\\uFF08FID\\uFF09\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8BC4\\u4EF7\\u4E00\\u5F20\\u56FE\\u7247\\u7684\\u597D\\u574F\\uFF0C\\u9996\\u5148\\u9700\\u8981\\u4E00\\u4E2A\\u8BAD\\u7EC3\\u597D\\u7684\\u5206\\u7C7B\\u5668\\uFF0C\\u7136\\u540E\\u6BD4\\u8F83\\u751F\\u6210\\u56FE\\u7247\\u4E0E\\u771F\\u5B9E\\u56FE\\u7247representation\\u4E4B\\u95F4\\u7684\\u8DDD\\u79BB\\uFF0C\\u8DDD\\u79BB\\u8D8A\\u5C0F\\u8D8A\\u597D\\uFF0C\\u8FD9\\u9700\\u8981\\u5927\\u91CF\\u56FE\\u7247\\u6765\\u6D4B\\u91CF\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/ab32932e-bd14-4d15-8f07-f8a7c6cbab59/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"contrastive-language-image-pre-trainingclip\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#contrastive-language-image-pre-trainingclip\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.strong,{children:\"Contrastive Language-Image Pre-Training\\uFF08CLIP\\uFF09\"})})]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F7F\\u7528CLIP\\u6A21\\u578B\\u6839\\u636E\\u5BF9\\u5E94\\u7684\\u6587\\u5B57\\u63CF\\u8FF0\\u6765\\u5224\\u65AD\\u751F\\u6210\\u56FE\\u50CF\\u7684\\u8D28\\u91CF\\u3002400million text-image pairs\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/c2e08dfd-038a-4e6b-b309-b5468c97cb45/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsxs)(e.h2,{id:\"diffusion-model\\u539F\\u7406-ddpm\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#diffusion-model\\u539F\\u7406-ddpm\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Diffusion Model\\u539F\\u7406 \",(0,n.jsx)(e.a,{href:\"https://arxiv.org/abs/2006.11239\",children:\"DDPM\"})]}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u53BB\\u566A\\u58F0\\u751F\\u6210\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u53BB\\u566A\\u58F0\\u751F\\u6210\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u53BB\\u566A\\u58F0\\uFF08\\u751F\\u6210\\uFF09\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4E0D\\u540C\\u65F6\\u5E8F\\u4F7F\\u7528\\u7684\\u662F\",(0,n.jsx)(e.strong,{children:\"\\u540C\\u4E00\\u4E2Adenoise\\u6A21\\u578B\"}),\"\\uFF0C\\u4F46\\u662F\\u56E0\\u4E3A\\u8F93\\u5165\\u56FE\\u7247\\u7684\\u72B6\\u6001\\u6709\\u5F88\\u5927\\u7684\\u4E0D\\u540C\\uFF0C\\u6240\\u4EE5\\u9700\\u8981\\u628Astep\\u672C\\u8EAB\\u4E5F\\u8F93\\u5165\\u5230denoise\\u6A21\\u578B\\uFF0C\\u8BA9\\u5B83\\u77E5\\u9053\\u5F53\\u524D\\u56FE\\u7247\\u7684\\u53BB\\u566A\\u72B6\\u51B5\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/e2165ea8-9a3e-4a71-85cf-03fcb86bd597/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Denoise\\u6A21\\u5757\\u4E2D\\u5B58\\u5728\\u4E00\\u4E2APredicter\\uFF0C\\u5B83\\u7528\\u6765\\u9884\\u6D4B\\u8F93\\u5165\\u56FE\\u7247\\u7684\\u566A\\u58F0\\uFF0C\\u518D\\u7528\\u8981\\u88ABdenoise\\u7684\\u56FE\\u7247\\u51CF\\u53BB\\u566A\\u58F0\\u5C31\\u53EF\\u4EE5\\u5F97\\u5230denoise\\u4E4B\\u540E\\u7684\\u56FE\\u7247\\u4E86\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/5b5b5fee-eef5-4232-9bd6-84bbd4c29ccb/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/04f30b69-2ba4-4b55-b86b-3bae8be58906/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u52A0\\u566A\\u58F0\\u8BAD\\u7EC3\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u52A0\\u566A\\u58F0\\u8BAD\\u7EC3\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u52A0\\u566A\\u58F0\\uFF08\\u8BAD\\u7EC3\\uFF09\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u90A3\\u4E48\\u8FD9\\u4E2ANoise Predicter\\u5982\\u4F55\\u8BAD\\u7EC3\\u5462\\uFF1F\\u5728\\u8BAD\\u7EC3\\u65F6\\uFF0C\\u6211\\u4EEC\\u9996\\u5148\\u9700\\u8981\\u6839\\u636E\\u539F\\u59CB\\u65E0\\u566A\\u58F0\\u7684\\u56FE\\u7247\\u8BA4\\u4E3A\\u751F\\u6210Predicter\\u7684\\u566A\\u58F0Ground truth\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/09513c5b-d848-46f1-8b50-78724bf6a1d7/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728forward process\\uFF08\\u524D\\u5411\\u8FC7\\u7A0B\\uFF09\\u4E2D\\u5DF2\\u7ECF\\u5B58\\u50A8\\u4E86GT\\uFF0C\\u5F97\\u5230\\u4E86\\u6807\\u7B7E\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/6b58c56a-6008-401a-9b0d-e27947f04d4d/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/d497cf60-bce6-4b2f-9bd1-2e35e4801f27/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/8b212294-180e-43bf-9b9f-cff8b4482f13/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsxs)(e.h2,{id:\"text2image\\u6846\\u67B6\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#text2image\\u6846\\u67B6\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Text2Image\\u6846\\u67B6\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/4bc084c0-52d2-451f-a2c2-f696f7d22757/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4ECE\\u8FD9\\u4E2Aframework\\u4E2D\\u53EF\\u4EE5\\u770B\\u51FA\\uFF0C\\u6587\\u5B57\\u662F\\u6CA1\\u6709\\u529E\\u6CD5\\u76F4\\u63A5\\u8F93\\u5165\\u5230\\u6A21\\u578B\\u4E2D\\u7684\\uFF0C\\u9996\\u5148\\u9700\\u8981\\u4E00\\u4E2Aencoder\\uFF08GPT,BERT\\uFF09\\u5C06\\u6587\\u672C\\u7F16\\u7801\\u6210token\\uFF0C\\u518D\\u548C\\u566A\\u58F0\\u4E00\\u8D77\\u8F93\\u5165\\u5230\\u751F\\u6210\\u6A21\\u578B\\uFF08\\u4E5F\\u5C31\\u662Fdiffusion\\u6A21\\u578B\\uFF09\\uFF0C\\u5F97\\u5230\\u7684\\u4E2D\\u95F4\\u4EA7\\u7269\\u6700\\u540E\\u901A\\u8FC7\\u4E00\\u4E2Adecoder\\u751F\\u6210\\u6700\\u7EC8\\u7684\\u56FE\\u50CF\\u3002\",(0,n.jsx)(e.strong,{children:\"\\u5176\\u4E2Ddecoder\\u7684\\u8BAD\\u7EC3\\u6570\\u636E\\u53EF\\u4EE5\\u4E0D\\u9700\\u8981\\u6807\\u7B7E\\u3002\"})]}),`\n`,(0,n.jsxs)(e.h3,{id:\"stable-diffusiondall-eimagen\\u5404\\u81EA\\u6846\\u67B6\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#stable-diffusiondall-eimagen\\u5404\\u81EA\\u6846\\u67B6\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.strong,{children:\"Stable Diffusion\\u3001DALL-E\\u3001Imagen\"})}),\"\\u5404\\u81EA\\u6846\\u67B6\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.notion.so/High-Resolution-Image-Synthesis-with-Latent-Diffusion-Models-66e17659d5e145ea93ed2eaef546d1aa?pvs=21\",children:\"Stable Diffusion\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/b4000e36-993d-4d92-9eca-e5ae94c34f3f/Untitled.png\",alt:\"Untitled\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"DALLE-E\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/3a0a2626-17e4-47f5-97eb-f731ec71e0ce/Untitled.png\",alt:\"Untitled\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Imagen\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/d8a3db67-2e42-4fae-a1b3-57dcb3a66bbd/Untitled.png\",alt:\"Untitled\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"decoder\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#decoder\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Decoder\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Decoder\\u7684\\u8F93\\u5165\\u6709\\u4E24\\u79CD\\u60C5\\u51B5\\uFF0C\\u4E00\\u79CD\\u662Fdenoise\\u56FE\\u7247\\u7684\\u538B\\u7F29\\u7248\\u672C\\uFF08imagen\\uFF09\\uFF0C\\u4E00\\u79CD\\u662Flatent representation\\uFF08stable diffusion\\uFF09\\u3002\\u5BF9\\u4E8E\\u524D\\u8005\\u975E\\u5E38\\u7B80\\u5355\\uFF0C\\u53EA\\u9700\\u8981\\u62FF\\u5F88\\u591Adownsample\\u7684\\u56FE\\u7247\\u6765\\u8BAD\\u7EC3\\u5C31\\u53EF\\u4EE5\\u4E86\\u3002\\u5BF9\\u4E8E\\u540E\\u8005\\u9700\\u8981\\u8BAD\\u7EC3\\u4E00\\u4E2Aauto encoder\\uFF0C\\u628Adecoder\\u62FF\\u51FA\\u6765\\u3002\",(0,n.jsx)(e.strong,{children:\"decoder\\u7684\\u8BAD\\u7EC3\\u6570\\u636E\\u53EF\\u4EE5\\u4E0D\\u9700\\u8981\\u6807\\u7B7E\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/ea9fd821-b38b-4e77-89a2-25bc1a224140/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://prod-files-secure.s3.us-west-2.amazonaws.com/568ff324-820e-4458-94c0-e72a5b6a8e65/924e059b-04e6-43ea-a5cd-ae272dc3bf8b/Untitled.png\",alt:\"Untitled\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"generation-model\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#generation-model\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Generation Model\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5BF9\\u4E8Eframework\\u4E2D\\u7684\\u751F\\u6210\\u6A21\\u578B\\uFF0Cnoise\\u52A0\\u5728\\u4E2D\\u95F4\\u4EA7\\u7269\\uFF08latent representation\\uFF09\\u4E0A\\u800C\\u4E0D\\u662F\\u539F\\u59CB\\u56FE\\u50CF\\u4E0A\\u3002\"})]})}function k(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(o,a)})):o(a)}var D=k;return U(z);})();\n;return Component;"
    },
    "_id": "post/2023-12-01-Diffusion-Learning.md",
    "_raw": {
      "sourceFilePath": "post/2023-12-01-Diffusion-Learning.md",
      "sourceFileName": "2023-12-01-Diffusion-Learning.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2023-12-01-Diffusion-Learning"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2023-12-01-Diffusion-Learning",
    "slugAsParams": "2023-12-01-Diffusion-Learning"
  },
  {
    "title": "前端自动化CI/CD：Github Action部署项目到服务器",
    "author": "heavenmei",
    "url": "/2023-12-11-CICD",
    "date": "2023-12-11T00:00:00.000Z",
    "body": {
      "raw": "> **What‘s Github Action？**  \n> [GitHub Actions](https://github.com/features/actions) 是 GitHub 的持续集成服务(CI/CD)。\n> 想要了解的朋友移步 [GitHub Actions 入门教程](https://link.juejin.cn/?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2019%2F09%2Fgetting-started-with-github-actions.html \"https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html\")\n\n\n### 编写workflow\n创建`.github/workflows` 文件夹，创建`demo.yml`文件\n\n主要流程：\n1. 拉取main分支的最新代码\n2. 设置node版本号\n3. 缓存依赖\n4. 安装依赖\n5. 打包\n6. 上传资源到指定路径\n\n```yaml\nname: Node CI\n\n# 触发workflow的条件\non:\n\tpush:\n\t\tbranches: [ \"main\" ]\n\tpull_request:\n\t\tbranches: [ \"main\" ]\n\n# jobs表示执行的一项或多项任务\njobs:\n\t# 任务的job_id，具体名称自定义，这里build代表打包\n\tbuild:\n\t\truns-on: ubuntu-latest\n\t\tstrategy:\n\t\t\tmatrix:\n\t\t\t\tnode-version: [18.18.2]\n\n\t\tsteps:\n\t\t\t  # 拉取main分支最新代码\n\t\t\t  uses: actions/checkout@main\n\t\t\t  \n\t\t\t  # 确定node版本\n\t\t\t- name: Use Node.js ${{ matrix.node-version }}\n\t\t\t  uses: actions/setup-node@v3\n\t\t\t  with:\n\t\t\t\tnode-version: ${{ matrix.node-version }}\n\t\t\n\t\t\t # 缓存依赖\n\t\t\t- name: Cache nodemodules\n\t\t\t  uses: actions/cache@v1\n\t\t\t  env:\n\t\t\t\tcache-name: cache-node-modules\n\t\t\t  with:\n\t\t\t    # 需要缓存的文件的路径\n\t\t\t\tpath: ./node_modules \n\t\t\t\t# 对缓存的文件指定的唯一标识\n\t\t\t\tkey: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('./package.json') }} \n\t\t\t\t# 用于没有再找目标key的缓存的backup选项\n\t\t\t\trestore-keys: |\n\t\t\t\t\t${{ runner.os }}-build-${{ env.cache-name }}-\n\t\t\t\t\t${{ runner.os }}-build-\n\t\t\t\t\t${{ runner.os }}-\n\t\t\n\t\t\t# 装依赖\n\t\t\t- name: Install\n\t\t\t  run: |\n\t\t\t\tnpm install -g yarn@1.22.19\n\t\t\t\tyarn install\n```\n\n\n### 打包\n本地开发时会把所需要的环境编写在.env 文件内，并且不会上传到github上以保证仓库隐私性。因此，在打包时若有相关生产环境变量，可以直接定义在 secret中\n\n\n在脚本中引用\n```yaml\n\nenv:\n\tVITE_SERVER_NAME: ${{ secrets.VITE_SERVER_NAME }} # 服务器域名\n\tcache-name: note\n\njobs:\n\tbuild:\n\t\tsteps:\n\t\t\t...\n\t\t\t# 打包\n\t\t\t- name: Build\n\t\t\trun: |\n\t\t\t\techo \"VITE_SERVER_NAME = ${{ env.VITE_SERVER_NAME }}\" > .env\n\t\t\t\tyarn build\n\n```\n\n### 部署\n部署思想：首先利用ssh 将打包好的资源上传到服务器上，服务器上利用pm2 管理node进程，nginx反向代理端口，脚本重启pm2该项目进程。\n\n1. 在服务器配置nginx指向前端运行的端口\n```shell\nserver {\n\tlisten 8889;  # 对外接口\n\tserver_name api.msg.com;\n\t\n\tlocation / {\n\t\tproxy_pass http://localhost:3008; # 服务器本地运行前端端口\n\t\tadd_header backendIP $upstream_addr;\n\t\tadd_header backendCode $upstream_status;\n\t}\n}\n```\n2. 服务器创建秘钥对\n将本机与服务器创建密钥对，并把本地公钥加入`.ssh/authorized_keys`中，同时保存到github secrets。\n```yaml\n\nenv:\n\tSERVER_PRIVATE_KEY: ${{ secrets.SERVER_PRIVATE_KEY }} # 服务器私钥\n\tSERVER_HOST: ${{ secrets.SERVER_HOST }} # 服务器IP地址\n\tUSER_NAME: ${{ secrets.USER_NAME }} # 服务器用户名\n\njobs:\n\tbuild:\n\t\tsteps:\n\t\t\t...\n\t\t\t# 上传打包资源\n\t\t\t- name: Deploy\n\t\t\tuses: easingthemes/ssh-deploy@v3\n\t\t\tenv:\n\t\t\t\tSSH_PRIVATE_KEY: ${{ env.SERVER_PRIVATE_KEY }}\n\t\t\t\tARGS: '-avz --delete'\n\t\t\t\tSOURCE: '.output/' # \n\t\t\t\t\n\t\t\t\tREMOTE_HOST: ${{ env.SERVER_HOST }}\n\t\t\t\tREMOTE_USER: ${{ env.USER_NAME }}\n\t\t\t\tTARGET: /root/i-lion-front/.output # 服务器目标路径\n```\n\n3. 重新部署脚本\n首先在服务器中安装[pm2](https://pm2.keymetrics.io/)并启动运行该项目，服务器中创建重启脚本`run_node.sh`\n```shell\npm2 reload xxx/ecosystem.config.cjs\n```\naction 执行该脚本\n```yaml\n# 重新部署\n\n- name: Reload pm2\n  uses: appleboy/ssh-action@master\n  with:\n\thost: ${{ env.SERVER_HOST }}\n\tusername: ${{ env.USER_NAME }}\n\tkey: ${{ env.SERVER_PRIVATE_KEY }}\n\tscript: |\n\t\t# 在服务器中执行的命令\n\t\tzsh xxxrun_node.sh\n```\n\n\n### 执行\n GitHub Actions 绑定`.github/workflows/demo.yml` ，执行结果如下：\n\n### 完整代码\n\n```yaml\nname: Node CI\n\n# 触发workflow的条件\non:\n  push:\n    branches: [ \"main\" ]\n  pull_request:\n    branches: [ \"main\" ]\n\nenv:\n    SERVER_PRIVATE_KEY: ${{ secrets.SERVER_PRIVATE_KEY }} # 服务器私钥\n    SERVER_HOST: ${{ secrets.SERVER_HOST }} # 服务器IP地址\n    USER_NAME: ${{ secrets.USER_NAME }} # 服务器用户名\n    VITE_SERVER_NAME: ${{ secrets.VITE_SERVER_NAME }} \n    cache-name: note\n    \njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    strategy:\n      matrix:\n        node-version: [18.18.2]\n        # See supported Node.js release schedule at https://nodejs.org/en/about/releases/\n\n    steps:\n    - uses: actions/checkout@main\n    - name: Use Node.js ${{ matrix.node-version }}\n      uses: actions/setup-node@v3\n      with:\n        node-version: ${{ matrix.node-version }}\n     #缓存依赖\n    - name: Cache nodemodules\n      uses: actions/cache@v1\n      env:\n          cache-name: cache-node-modules\n      with:\n          # 需要缓存的文件的路径\n          path: ./node_modules \n          # 对缓存的文件指定的唯一标识\n          key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('./package.json') }} \n          # 用于没有再找目标key的缓存的backup选项\n          restore-keys: |\n              ${{ runner.os }}-build-${{ env.cache-name }}-\n              ${{ runner.os }}-build-\n              ${{ runner.os }}-\n    # 装依赖\n    - name: Install\n      run: |\n          npm install -g yarn@1.22.19\n          yarn install\n    # 打包\n    - name: Build\n      run: |\n          echo \"VITE_SERVER_NAME = ${{ env.VITE_SERVER_NAME }}\" > .env\n          yarn build\n    # 上传打包资源\n    - name: Deploy\n      uses: easingthemes/ssh-deploy@v3\n      env:\n          SSH_PRIVATE_KEY: ${{ env.SERVER_PRIVATE_KEY }}\n          ARGS: '-avz --delete'\n          SOURCE: '.output/'\n          REMOTE_HOST: ${{ env.SERVER_HOST }}\n          REMOTE_USER: ${{ env.USER_NAME }}\n          TARGET: /root/i-lion-front/.output # 服务器目标路径\n    # 重新部署\n    - name: Reload pm2\n      uses: appleboy/ssh-action@master\n      with:\n        host: ${{ env.SERVER_HOST }}\n        username: ${{ env.USER_NAME }}\n        key: ${{ env.SERVER_PRIVATE_KEY }}\n        script: |\n          source /www/server/nvm/nvm.sh\n          nvm use 18.18.2\n          zsh /root/i-lion-front/run_node.sh\n\n```",
      "code": "var Component=(()=>{var E=Object.create;var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var F=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),m=(l,n)=>{for(var a in n)r(l,a,{get:n[a],enumerable:!0})},c=(l,n,a,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let s of p(n))!u.call(l,s)&&s!==a&&r(l,s,{get:()=>n[s],enumerable:!(t=h(n,s))||t.enumerable});return l};var R=(l,n,a)=>(a=l!=null?E(y(l)):{},c(n||!l||!l.__esModule?r(a,\"default\",{value:l,enumerable:!0}):a,l)),D=l=>c(r({},\"__esModule\",{value:!0}),l);var i=F((v,o)=>{o.exports=_jsx_runtime});var b={};m(b,{default:()=>g,frontmatter:()=>_});var e=R(i()),_={title:\"\\u524D\\u7AEF\\u81EA\\u52A8\\u5316CI/CD\\uFF1AGithub Action\\u90E8\\u7F72\\u9879\\u76EE\\u5230\\u670D\\u52A1\\u5668\",date:new Date(17022528e5),author:\"heavenmei\",categories:[\"Post\"],url:\"/2023-12-11-CICD\"};function d(l){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",strong:\"strong\",br:\"br\",a:\"a\",h3:\"h3\",span:\"span\",code:\"code\",ol:\"ol\",li:\"li\",div:\"div\",figure:\"figure\",pre:\"pre\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"What\\u2018s Github Action\\uFF1F\"}),(0,e.jsx)(n.br,{}),`\n`,(0,e.jsx)(n.a,{href:\"https://github.com/features/actions\",children:\"GitHub Actions\"}),`\\xA0\\u662F GitHub \\u7684\\u6301\\u7EED\\u96C6\\u6210\\u670D\\u52A1(CI/CD)\\u3002\n\\u60F3\\u8981\\u4E86\\u89E3\\u7684\\u670B\\u53CB\\u79FB\\u6B65 `,(0,e.jsx)(n.a,{href:\"https://link.juejin.cn/?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2019%2F09%2Fgetting-started-with-github-actions.html\",title:\"https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html\",children:\"GitHub Actions \\u5165\\u95E8\\u6559\\u7A0B\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u7F16\\u5199workflow\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u7F16\\u5199workflow\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u7F16\\u5199workflow\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u521B\\u5EFA\",(0,e.jsx)(n.code,{children:\".github/workflows\"}),\" \\u6587\\u4EF6\\u5939\\uFF0C\\u521B\\u5EFA\",(0,e.jsx)(n.code,{children:\"demo.yml\"}),\"\\u6587\\u4EF6\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3B\\u8981\\u6D41\\u7A0B\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u62C9\\u53D6main\\u5206\\u652F\\u7684\\u6700\\u65B0\\u4EE3\\u7801\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8BBE\\u7F6Enode\\u7248\\u672C\\u53F7\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7F13\\u5B58\\u4F9D\\u8D56\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5B89\\u88C5\\u4F9D\\u8D56\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6253\\u5305\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E0A\\u4F20\\u8D44\\u6E90\\u5230\\u6307\\u5B9A\\u8DEF\\u5F84\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",raw:`name: Node CI\n\n# \\u89E6\\u53D1workflow\\u7684\\u6761\\u4EF6\non:\n\tpush:\n\t\tbranches: [ \"main\" ]\n\tpull_request:\n\t\tbranches: [ \"main\" ]\n\n# jobs\\u8868\\u793A\\u6267\\u884C\\u7684\\u4E00\\u9879\\u6216\\u591A\\u9879\\u4EFB\\u52A1\njobs:\n\t# \\u4EFB\\u52A1\\u7684job_id\\uFF0C\\u5177\\u4F53\\u540D\\u79F0\\u81EA\\u5B9A\\u4E49\\uFF0C\\u8FD9\\u91CCbuild\\u4EE3\\u8868\\u6253\\u5305\n\tbuild:\n\t\truns-on: ubuntu-latest\n\t\tstrategy:\n\t\t\tmatrix:\n\t\t\t\tnode-version: [18.18.2]\n\n\t\tsteps:\n\t\t\t  # \\u62C9\\u53D6main\\u5206\\u652F\\u6700\\u65B0\\u4EE3\\u7801\n\t\t\t  uses: actions/checkout@main\n\t\t\t  \n\t\t\t  # \\u786E\\u5B9Anode\\u7248\\u672C\n\t\t\t- name: Use Node.js \\${{ matrix.node-version }}\n\t\t\t  uses: actions/setup-node@v3\n\t\t\t  with:\n\t\t\t\tnode-version: \\${{ matrix.node-version }}\n\t\t\n\t\t\t # \\u7F13\\u5B58\\u4F9D\\u8D56\n\t\t\t- name: Cache nodemodules\n\t\t\t  uses: actions/cache@v1\n\t\t\t  env:\n\t\t\t\tcache-name: cache-node-modules\n\t\t\t  with:\n\t\t\t    # \\u9700\\u8981\\u7F13\\u5B58\\u7684\\u6587\\u4EF6\\u7684\\u8DEF\\u5F84\n\t\t\t\tpath: ./node_modules \n\t\t\t\t# \\u5BF9\\u7F13\\u5B58\\u7684\\u6587\\u4EF6\\u6307\\u5B9A\\u7684\\u552F\\u4E00\\u6807\\u8BC6\n\t\t\t\tkey: \\${{ runner.os }}-build-\\${{ env.cache-name }}-\\${{ hashFiles('./package.json') }} \n\t\t\t\t# \\u7528\\u4E8E\\u6CA1\\u6709\\u518D\\u627E\\u76EE\\u6807key\\u7684\\u7F13\\u5B58\\u7684backup\\u9009\\u9879\n\t\t\t\trestore-keys: |\n\t\t\t\t\t\\${{ runner.os }}-build-\\${{ env.cache-name }}-\n\t\t\t\t\t\\${{ runner.os }}-build-\n\t\t\t\t\t\\${{ runner.os }}-\n\t\t\n\t\t\t# \\u88C5\\u4F9D\\u8D56\n\t\t\t- name: Install\n\t\t\t  run: |\n\t\t\t\tnpm install -g yarn@1.22.19\n\t\t\t\tyarn install\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Node CI\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u89E6\\u53D1workflow\\u7684\\u6761\\u4EF6\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"on\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tpush\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\tbranches\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [ \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"main\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" ]\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tpull_request\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\tbranches\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [ \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"main\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" ]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# jobs\\u8868\\u793A\\u6267\\u884C\\u7684\\u4E00\\u9879\\u6216\\u591A\\u9879\\u4EFB\\u52A1\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"jobs\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t# \\u4EFB\\u52A1\\u7684job_id\\uFF0C\\u5177\\u4F53\\u540D\\u79F0\\u81EA\\u5B9A\\u4E49\\uFF0C\\u8FD9\\u91CCbuild\\u4EE3\\u8868\\u6253\\u5305\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tbuild\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\truns-on\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"ubuntu-latest\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\tstrategy\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\tmatrix\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tnode-version\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"18.18.2\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\tsteps\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t  # \\u62C9\\u53D6main\\u5206\\u652F\\u6700\\u65B0\\u4EE3\\u7801\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t  uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"actions/checkout@main\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\t  \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t  # \\u786E\\u5B9Anode\\u7248\\u672C\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\t- \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Use Node.js ${{ matrix.node-version }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t  uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"actions/setup-node@v3\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t  with\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tnode-version\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ matrix.node-version }}\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t # \\u7F13\\u5B58\\u4F9D\\u8D56\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\t- \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Cache nodemodules\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t  uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"actions/cache@v1\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t  env\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tcache-name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"cache-node-modules\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t  with\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t    # \\u9700\\u8981\\u7F13\\u5B58\\u7684\\u6587\\u4EF6\\u7684\\u8DEF\\u5F84\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tpath\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"./node_modules\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t\t# \\u5BF9\\u7F13\\u5B58\\u7684\\u6587\\u4EF6\\u6307\\u5B9A\\u7684\\u552F\\u4E00\\u6807\\u8BC6\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tkey\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('./package.json') }}\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t\t# \\u7528\\u4E8E\\u6CA1\\u6709\\u518D\\u627E\\u76EE\\u6807key\\u7684\\u7F13\\u5B58\\u7684backup\\u9009\\u9879\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\trestore-keys\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"|\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\t\t\t\t\t${{ runner.os }}-build-${{ env.cache-name }}-\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\t\t\t\t\t${{ runner.os }}-build-\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\t\t\t\t\t${{ runner.os }}-\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t# \\u88C5\\u4F9D\\u8D56\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\t- \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Install\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t  run\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"|\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\t\t\t\tnpm install -g yarn@1.22.19\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\t\t\t\tyarn install\"})})]})})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6253\\u5305\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u6253\\u5305\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6253\\u5305\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u672C\\u5730\\u5F00\\u53D1\\u65F6\\u4F1A\\u628A\\u6240\\u9700\\u8981\\u7684\\u73AF\\u5883\\u7F16\\u5199\\u5728.env \\u6587\\u4EF6\\u5185\\uFF0C\\u5E76\\u4E14\\u4E0D\\u4F1A\\u4E0A\\u4F20\\u5230github\\u4E0A\\u4EE5\\u4FDD\\u8BC1\\u4ED3\\u5E93\\u9690\\u79C1\\u6027\\u3002\\u56E0\\u6B64\\uFF0C\\u5728\\u6253\\u5305\\u65F6\\u82E5\\u6709\\u76F8\\u5173\\u751F\\u4EA7\\u73AF\\u5883\\u53D8\\u91CF\\uFF0C\\u53EF\\u4EE5\\u76F4\\u63A5\\u5B9A\\u4E49\\u5728 secret\\u4E2D\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u811A\\u672C\\u4E2D\\u5F15\\u7528\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",raw:`\nenv:\n\tVITE_SERVER_NAME: \\${{ secrets.VITE_SERVER_NAME }} # \\u670D\\u52A1\\u5668\\u57DF\\u540D\n\tcache-name: note\n\njobs:\n\tbuild:\n\t\tsteps:\n\t\t\t...\n\t\t\t# \\u6253\\u5305\n\t\t\t- name: Build\n\t\t\trun: |\n\t\t\t\techo \"VITE_SERVER_NAME = \\${{ env.VITE_SERVER_NAME }}\" > .env\n\t\t\t\tyarn build\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"env\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tVITE_SERVER_NAME\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ secrets.VITE_SERVER_NAME }}\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668\\u57DF\\u540D\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tcache-name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"note\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"jobs\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tbuild\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\tsteps\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"\t\t\t...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t# \\u6253\\u5305\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\t- \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Build\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\trun\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"|\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\t\t\t\techo \"VITE_SERVER_NAME = ${{ env.VITE_SERVER_NAME }}\" > .env'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\t\t\t\tyarn build\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u90E8\\u7F72\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u90E8\\u7F72\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u90E8\\u7F72\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u90E8\\u7F72\\u601D\\u60F3\\uFF1A\\u9996\\u5148\\u5229\\u7528ssh \\u5C06\\u6253\\u5305\\u597D\\u7684\\u8D44\\u6E90\\u4E0A\\u4F20\\u5230\\u670D\\u52A1\\u5668\\u4E0A\\uFF0C\\u670D\\u52A1\\u5668\\u4E0A\\u5229\\u7528pm2 \\u7BA1\\u7406node\\u8FDB\\u7A0B\\uFF0Cnginx\\u53CD\\u5411\\u4EE3\\u7406\\u7AEF\\u53E3\\uFF0C\\u811A\\u672C\\u91CD\\u542Fpm2\\u8BE5\\u9879\\u76EE\\u8FDB\\u7A0B\\u3002\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5728\\u670D\\u52A1\\u5668\\u914D\\u7F6Enginx\\u6307\\u5411\\u524D\\u7AEF\\u8FD0\\u884C\\u7684\\u7AEF\\u53E3\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`server {\n\tlisten 8889;  # \\u5BF9\\u5916\\u63A5\\u53E3\n\tserver_name api.msg.com;\n\t\n\tlocation / {\n\t\tproxy_pass http://localhost:3008; # \\u670D\\u52A1\\u5668\\u672C\\u5730\\u8FD0\\u884C\\u524D\\u7AEF\\u7AEF\\u53E3\n\t\tadd_header backendIP $upstream_addr;\n\t\tadd_header backendCode $upstream_status;\n\t}\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"server\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"\tlisten\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 8889\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";  \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5BF9\\u5916\\u63A5\\u53E3\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"\tserver_name\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" api.msg.com\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"\tlocation\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"\t\tproxy_pass\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" http://localhost:3008\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u670D\\u52A1\\u5668\\u672C\\u5730\\u8FD0\\u884C\\u524D\\u7AEF\\u7AEF\\u53E3\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"\t\tadd_header\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" backendIP\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" $upstream_addr;\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"\t\tadd_header\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" backendCode\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" $upstream_status;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsxs)(n.li,{children:[`\\u670D\\u52A1\\u5668\\u521B\\u5EFA\\u79D8\\u94A5\\u5BF9\n\\u5C06\\u672C\\u673A\\u4E0E\\u670D\\u52A1\\u5668\\u521B\\u5EFA\\u5BC6\\u94A5\\u5BF9\\uFF0C\\u5E76\\u628A\\u672C\\u5730\\u516C\\u94A5\\u52A0\\u5165`,(0,e.jsx)(n.code,{children:\".ssh/authorized_keys\"}),\"\\u4E2D\\uFF0C\\u540C\\u65F6\\u4FDD\\u5B58\\u5230github secrets\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",raw:`\nenv:\n\tSERVER_PRIVATE_KEY: \\${{ secrets.SERVER_PRIVATE_KEY }} # \\u670D\\u52A1\\u5668\\u79C1\\u94A5\n\tSERVER_HOST: \\${{ secrets.SERVER_HOST }} # \\u670D\\u52A1\\u5668IP\\u5730\\u5740\n\tUSER_NAME: \\${{ secrets.USER_NAME }} # \\u670D\\u52A1\\u5668\\u7528\\u6237\\u540D\n\njobs:\n\tbuild:\n\t\tsteps:\n\t\t\t...\n\t\t\t# \\u4E0A\\u4F20\\u6253\\u5305\\u8D44\\u6E90\n\t\t\t- name: Deploy\n\t\t\tuses: easingthemes/ssh-deploy@v3\n\t\t\tenv:\n\t\t\t\tSSH_PRIVATE_KEY: \\${{ env.SERVER_PRIVATE_KEY }}\n\t\t\t\tARGS: '-avz --delete'\n\t\t\t\tSOURCE: '.output/' # \n\t\t\t\t\n\t\t\t\tREMOTE_HOST: \\${{ env.SERVER_HOST }}\n\t\t\t\tREMOTE_USER: \\${{ env.USER_NAME }}\n\t\t\t\tTARGET: /root/i-lion-front/.output # \\u670D\\u52A1\\u5668\\u76EE\\u6807\\u8DEF\\u5F84\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"env\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tSERVER_PRIVATE_KEY\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ secrets.SERVER_PRIVATE_KEY }}\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668\\u79C1\\u94A5\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tSERVER_HOST\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ secrets.SERVER_HOST }}\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668IP\\u5730\\u5740\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tUSER_NAME\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ secrets.USER_NAME }}\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668\\u7528\\u6237\\u540D\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"jobs\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tbuild\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\tsteps\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"\t\t\t...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t\t# \\u4E0A\\u4F20\\u6253\\u5305\\u8D44\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\t- \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Deploy\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\tuses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"easingthemes/ssh-deploy@v3\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\tenv\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tSSH_PRIVATE_KEY\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.SERVER_PRIVATE_KEY }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tARGS\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"'-avz --delete'\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tSOURCE\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"'.output/'\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\t\t\t\t\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tREMOTE_HOST\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.SERVER_HOST }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tREMOTE_USER\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.USER_NAME }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\t\t\t\tTARGET\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"/root/i-lion-front/.output\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668\\u76EE\\u6807\\u8DEF\\u5F84\"})]})]})})})}),`\n`,(0,e.jsxs)(n.ol,{start:\"3\",children:[`\n`,(0,e.jsxs)(n.li,{children:[`\\u91CD\\u65B0\\u90E8\\u7F72\\u811A\\u672C\n\\u9996\\u5148\\u5728\\u670D\\u52A1\\u5668\\u4E2D\\u5B89\\u88C5`,(0,e.jsx)(n.a,{href:\"https://pm2.keymetrics.io/\",children:\"pm2\"}),\"\\u5E76\\u542F\\u52A8\\u8FD0\\u884C\\u8BE5\\u9879\\u76EE\\uFF0C\\u670D\\u52A1\\u5668\\u4E2D\\u521B\\u5EFA\\u91CD\\u542F\\u811A\\u672C\",(0,e.jsx)(n.code,{children:\"run_node.sh\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`pm2 reload xxx/ecosystem.config.cjs\n`,children:(0,e.jsx)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"pm2\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" reload\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" xxx/ecosystem.config.cjs\"})]})})})})}),`\n`,(0,e.jsx)(n.p,{children:\"action \\u6267\\u884C\\u8BE5\\u811A\\u672C\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",raw:`# \\u91CD\\u65B0\\u90E8\\u7F72\n\n- name: Reload pm2\n  uses: appleboy/ssh-action@master\n  with:\n\thost: \\${{ env.SERVER_HOST }}\n\tusername: \\${{ env.USER_NAME }}\n\tkey: \\${{ env.SERVER_PRIVATE_KEY }}\n\tscript: |\n\t\t# \\u5728\\u670D\\u52A1\\u5668\\u4E2D\\u6267\\u884C\\u7684\\u547D\\u4EE4\n\t\tzsh xxxrun_node.sh\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u91CD\\u65B0\\u90E8\\u7F72\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"- \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Reload pm2\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"  uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"appleboy/ssh-action@master\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"  with\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\thost\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.SERVER_HOST }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tusername\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.USER_NAME }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tkey\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.SERVER_PRIVATE_KEY }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"\tscript\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"|\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"\t\t# \\u5728\\u670D\\u52A1\\u5668\\u4E2D\\u6267\\u884C\\u7684\\u547D\\u4EE4\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\t\tzsh xxxrun_node.sh\"})})]})})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u6267\\u884C\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u6267\\u884C\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6267\\u884C\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"GitHub Actions \\u7ED1\\u5B9A\",(0,e.jsx)(n.code,{children:\".github/workflows/demo.yml\"}),\" \\uFF0C\\u6267\\u884C\\u7ED3\\u679C\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u5B8C\\u6574\\u4EE3\\u7801\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5B8C\\u6574\\u4EE3\\u7801\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5B8C\\u6574\\u4EE3\\u7801\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",raw:`name: Node CI\n\n# \\u89E6\\u53D1workflow\\u7684\\u6761\\u4EF6\non:\n  push:\n    branches: [ \"main\" ]\n  pull_request:\n    branches: [ \"main\" ]\n\nenv:\n    SERVER_PRIVATE_KEY: \\${{ secrets.SERVER_PRIVATE_KEY }} # \\u670D\\u52A1\\u5668\\u79C1\\u94A5\n    SERVER_HOST: \\${{ secrets.SERVER_HOST }} # \\u670D\\u52A1\\u5668IP\\u5730\\u5740\n    USER_NAME: \\${{ secrets.USER_NAME }} # \\u670D\\u52A1\\u5668\\u7528\\u6237\\u540D\n    VITE_SERVER_NAME: \\${{ secrets.VITE_SERVER_NAME }} \n    cache-name: note\n    \njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    strategy:\n      matrix:\n        node-version: [18.18.2]\n        # See supported Node.js release schedule at https://nodejs.org/en/about/releases/\n\n    steps:\n    - uses: actions/checkout@main\n    - name: Use Node.js \\${{ matrix.node-version }}\n      uses: actions/setup-node@v3\n      with:\n        node-version: \\${{ matrix.node-version }}\n     #\\u7F13\\u5B58\\u4F9D\\u8D56\n    - name: Cache nodemodules\n      uses: actions/cache@v1\n      env:\n          cache-name: cache-node-modules\n      with:\n          # \\u9700\\u8981\\u7F13\\u5B58\\u7684\\u6587\\u4EF6\\u7684\\u8DEF\\u5F84\n          path: ./node_modules \n          # \\u5BF9\\u7F13\\u5B58\\u7684\\u6587\\u4EF6\\u6307\\u5B9A\\u7684\\u552F\\u4E00\\u6807\\u8BC6\n          key: \\${{ runner.os }}-build-\\${{ env.cache-name }}-\\${{ hashFiles('./package.json') }} \n          # \\u7528\\u4E8E\\u6CA1\\u6709\\u518D\\u627E\\u76EE\\u6807key\\u7684\\u7F13\\u5B58\\u7684backup\\u9009\\u9879\n          restore-keys: |\n              \\${{ runner.os }}-build-\\${{ env.cache-name }}-\n              \\${{ runner.os }}-build-\n              \\${{ runner.os }}-\n    # \\u88C5\\u4F9D\\u8D56\n    - name: Install\n      run: |\n          npm install -g yarn@1.22.19\n          yarn install\n    # \\u6253\\u5305\n    - name: Build\n      run: |\n          echo \"VITE_SERVER_NAME = \\${{ env.VITE_SERVER_NAME }}\" > .env\n          yarn build\n    # \\u4E0A\\u4F20\\u6253\\u5305\\u8D44\\u6E90\n    - name: Deploy\n      uses: easingthemes/ssh-deploy@v3\n      env:\n          SSH_PRIVATE_KEY: \\${{ env.SERVER_PRIVATE_KEY }}\n          ARGS: '-avz --delete'\n          SOURCE: '.output/'\n          REMOTE_HOST: \\${{ env.SERVER_HOST }}\n          REMOTE_USER: \\${{ env.USER_NAME }}\n          TARGET: /root/i-lion-front/.output # \\u670D\\u52A1\\u5668\\u76EE\\u6807\\u8DEF\\u5F84\n    # \\u91CD\\u65B0\\u90E8\\u7F72\n    - name: Reload pm2\n      uses: appleboy/ssh-action@master\n      with:\n        host: \\${{ env.SERVER_HOST }}\n        username: \\${{ env.USER_NAME }}\n        key: \\${{ env.SERVER_PRIVATE_KEY }}\n        script: |\n          source /www/server/nvm/nvm.sh\n          nvm use 18.18.2\n          zsh /root/i-lion-front/run_node.sh\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"yaml\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Node CI\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u89E6\\u53D1workflow\\u7684\\u6761\\u4EF6\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"on\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"  push\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    branches\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [ \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"main\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" ]\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"  pull_request\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    branches\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [ \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"main\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" ]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"env\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    SERVER_PRIVATE_KEY\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ secrets.SERVER_PRIVATE_KEY }}\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668\\u79C1\\u94A5\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    SERVER_HOST\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ secrets.SERVER_HOST }}\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668IP\\u5730\\u5740\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    USER_NAME\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ secrets.USER_NAME }}\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668\\u7528\\u6237\\u540D\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    VITE_SERVER_NAME\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ secrets.VITE_SERVER_NAME }}\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    cache-name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"note\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"jobs\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"  build\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    runs-on\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"ubuntu-latest\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    strategy\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      matrix\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"        node-version\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"18.18.2\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"        # See supported Node.js release schedule at https://nodejs.org/en/about/releases/\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"    steps\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    - \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"actions/checkout@main\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    - \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Use Node.js ${{ matrix.node-version }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"actions/setup-node@v3\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      with\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"        node-version\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ matrix.node-version }}\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"     #\\u7F13\\u5B58\\u4F9D\\u8D56\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    - \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Cache nodemodules\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"actions/cache@v1\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      env\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          cache-name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"cache-node-modules\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      with\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"          # \\u9700\\u8981\\u7F13\\u5B58\\u7684\\u6587\\u4EF6\\u7684\\u8DEF\\u5F84\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          path\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"./node_modules\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"          # \\u5BF9\\u7F13\\u5B58\\u7684\\u6587\\u4EF6\\u6307\\u5B9A\\u7684\\u552F\\u4E00\\u6807\\u8BC6\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          key\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('./package.json') }}\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"          # \\u7528\\u4E8E\\u6CA1\\u6709\\u518D\\u627E\\u76EE\\u6807key\\u7684\\u7F13\\u5B58\\u7684backup\\u9009\\u9879\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          restore-keys\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"|\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"              ${{ runner.os }}-build-${{ env.cache-name }}-\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"              ${{ runner.os }}-build-\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"              ${{ runner.os }}-\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    # \\u88C5\\u4F9D\\u8D56\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    - \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Install\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      run\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"|\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"          npm install -g yarn@1.22.19\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"          yarn install\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    # \\u6253\\u5305\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    - \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Build\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      run\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"|\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'          echo \"VITE_SERVER_NAME = ${{ env.VITE_SERVER_NAME }}\" > .env'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"          yarn build\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    # \\u4E0A\\u4F20\\u6253\\u5305\\u8D44\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    - \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Deploy\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"easingthemes/ssh-deploy@v3\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      env\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          SSH_PRIVATE_KEY\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.SERVER_PRIVATE_KEY }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          ARGS\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"'-avz --delete'\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          SOURCE\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"'.output/'\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          REMOTE_HOST\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.SERVER_HOST }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          REMOTE_USER\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.USER_NAME }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"          TARGET\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"/root/i-lion-front/.output\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u670D\\u52A1\\u5668\\u76EE\\u6807\\u8DEF\\u5F84\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    # \\u91CD\\u65B0\\u90E8\\u7F72\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    - \"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"name\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"Reload pm2\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      uses\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"appleboy/ssh-action@master\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"      with\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"        host\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.SERVER_HOST }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"        username\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.USER_NAME }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"        key\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"${{ env.SERVER_PRIVATE_KEY }}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"        script\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"|\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"          source /www/server/nvm/nvm.sh\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"          nvm use 18.18.2\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"          zsh /root/i-lion-front/run_node.sh\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})})]})}function C(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(d,l)})):d(l)}var g=C;return D(b);})();\n;return Component;"
    },
    "_id": "post/2023-12-11-Front-CICD-with-Github-Actions.md",
    "_raw": {
      "sourceFilePath": "post/2023-12-11-Front-CICD-with-Github-Actions.md",
      "sourceFileName": "2023-12-11-Front-CICD-with-Github-Actions.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2023-12-11-Front-CICD-with-Github-Actions"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2023-12-11-Front-CICD-with-Github-Actions",
    "slugAsParams": "2023-12-11-Front-CICD-with-Github-Actions"
  },
  {
    "title": "ubuntu",
    "author": "heavenmei",
    "url": "/2023-12-23-ubuntu-docker",
    "date": "2023-12-23T00:00:00.000Z",
    "body": {
      "raw": "> 在服务器中安装docker， 并创建pytorch运行环境，实现ssh远程端口登录\n\ndocker安装详见一键安装脚本\nhttps://gitee.com/heavenmei/one-step-install\n\n### 创建容器\n\n镜像仓库： https://hub.docker.com/r/pytorch/pytorch/tags\n```shell\ndocker pull pytorch/pytorch:2.1.2-cuda11.8-cudnn8-devel\n```\n运行容器，这一步尤其重要，要指定好一些参数\n```shell\ndocker run -itd -p 8080:8080 -gpus all --name \"hhw_pyt2\"\n```\n\n\n### 环境配置\n```shell\napt-get update\napt-get install -y curl git openssh-server vim\n```\n\n\n\n### 配置ssh 连接docker 容器\n```shell\n# 1. 安装\napt-get install -y openssh-server \n# 2. 设置登录密码 \npasswd \n\n# 3. 修改配置文件 \nvim /etc/ssh/sshd_config \n开启root登录 PermitRootLogin yes \n开启密码认证 PasswordAuthentication yes\n\n# 4.设置开机自启 systemctl enable ssh 只在宿主机上有效\necho \"service ssh start\" >> ~/.bashrc\n\n# 5.重启\nservice ssh restart\n```\n\n设置完成，即可通过ssh远程访问：（默认root） `ssh -p PORT root@IP`\n\n**SSH连接Docker容器时环境变量丢失** \n在容器中安装openssh-server后，启动ssh服务，然后从外部连接ssh进入docker后，会发现所有的容器环境变量都不见了，只剩下一些ssh必要的环境变量 可以把容器主进程的环境变量拿出来：在ssh的shell中执行。\n```shell\nexport $(cat /proc/1/environ |tr '\\0' '\\n' | xargs)\n# 加到.bashrc 登录默认进入改进程\necho \"export \\$(cat /proc/1/environ |tr '\\0' '\\n' | xargs)\" >> ~/.bashrc\n```",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),m=(l,e)=>{for(var r in e)s(l,r,{get:e[r],enumerable:!0})},t=(l,e,r,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of y(e))!g.call(l,a)&&a!==r&&s(l,a,{get:()=>e[a],enumerable:!(c=p(e,a))||c.enumerable});return l};var B=(l,e,r)=>(r=l!=null?h(F(l)):{},t(e||!l||!l.__esModule?s(r,\"default\",{value:l,enumerable:!0}):r,l)),E=l=>t(s({},\"__esModule\",{value:!0}),l);var d=u((x,o)=>{o.exports=_jsx_runtime});var v={};m(v,{default:()=>C,frontmatter:()=>k});var n=B(d()),k={title:\"ubuntu\",date:new Date(17032896e5),author:\"heavenmei\",categories:[\"Post\"],url:\"/2023-12-23-ubuntu-docker\"};function i(l){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h3:\"h3\",span:\"span\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",strong:\"strong\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u5728\\u670D\\u52A1\\u5668\\u4E2D\\u5B89\\u88C5docker\\uFF0C \\u5E76\\u521B\\u5EFApytorch\\u8FD0\\u884C\\u73AF\\u5883\\uFF0C\\u5B9E\\u73B0ssh\\u8FDC\\u7A0B\\u7AEF\\u53E3\\u767B\\u5F55\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[`docker\\u5B89\\u88C5\\u8BE6\\u89C1\\u4E00\\u952E\\u5B89\\u88C5\\u811A\\u672C\n`,(0,n.jsx)(e.a,{href:\"https://gitee.com/heavenmei/one-step-install\",children:\"https://gitee.com/heavenmei/one-step-install\"})]}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u521B\\u5EFA\\u5BB9\\u5668\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u521B\\u5EFA\\u5BB9\\u5668\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u521B\\u5EFA\\u5BB9\\u5668\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u955C\\u50CF\\u4ED3\\u5E93\\uFF1A \",(0,n.jsx)(e.a,{href:\"https://hub.docker.com/r/pytorch/pytorch/tags\",children:\"https://hub.docker.com/r/pytorch/pytorch/tags\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`docker pull pytorch/pytorch:2.1.2-cuda11.8-cudnn8-devel\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" pull\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" pytorch/pytorch:2.1.2-cuda11.8-cudnn8-devel\"})]})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD0\\u884C\\u5BB9\\u5668\\uFF0C\\u8FD9\\u4E00\\u6B65\\u5C24\\u5176\\u91CD\\u8981\\uFF0C\\u8981\\u6307\\u5B9A\\u597D\\u4E00\\u4E9B\\u53C2\\u6570\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`docker run -itd -p 8080:8080 -gpus all --name \"hhw_pyt2\"\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" run\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -itd\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -p\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 8080:8080\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -gpus\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" all\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --name\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"hhw_pyt2\"'})]})})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u73AF\\u5883\\u914D\\u7F6E\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u73AF\\u5883\\u914D\\u7F6E\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u73AF\\u5883\\u914D\\u7F6E\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`apt-get update\napt-get install -y curl git openssh-server vim\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"apt-get\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" update\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"apt-get\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -y\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" curl\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" openssh-server\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" vim\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u914D\\u7F6Essh-\\u8FDE\\u63A5docker-\\u5BB9\\u5668\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u914D\\u7F6Essh-\\u8FDE\\u63A5docker-\\u5BB9\\u5668\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u914D\\u7F6Essh \\u8FDE\\u63A5docker \\u5BB9\\u5668\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`# 1. \\u5B89\\u88C5\napt-get install -y openssh-server \n# 2. \\u8BBE\\u7F6E\\u767B\\u5F55\\u5BC6\\u7801 \npasswd \n\n# 3. \\u4FEE\\u6539\\u914D\\u7F6E\\u6587\\u4EF6 \nvim /etc/ssh/sshd_config \n\\u5F00\\u542Froot\\u767B\\u5F55 PermitRootLogin yes \n\\u5F00\\u542F\\u5BC6\\u7801\\u8BA4\\u8BC1 PasswordAuthentication yes\n\n# 4.\\u8BBE\\u7F6E\\u5F00\\u673A\\u81EA\\u542F systemctl enable ssh \\u53EA\\u5728\\u5BBF\\u4E3B\\u673A\\u4E0A\\u6709\\u6548\necho \"service ssh start\" >> ~/.bashrc\n\n# 5.\\u91CD\\u542F\nservice ssh restart\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# 1. \\u5B89\\u88C5\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"apt-get\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -y\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" openssh-server\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# 2. \\u8BBE\\u7F6E\\u767B\\u5F55\\u5BC6\\u7801 \"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"passwd\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# 3. \\u4FEE\\u6539\\u914D\\u7F6E\\u6587\\u4EF6 \"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"vim\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /etc/ssh/sshd_config\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"\\u5F00\\u542Froot\\u767B\\u5F55\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" PermitRootLogin\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" yes\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"\\u5F00\\u542F\\u5BC6\\u7801\\u8BA4\\u8BC1\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" PasswordAuthentication\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" yes\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# 4.\\u8BBE\\u7F6E\\u5F00\\u673A\\u81EA\\u542F systemctl enable ssh \\u53EA\\u5728\\u5BBF\\u4E3B\\u673A\\u4E0A\\u6709\\u6548\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"echo\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"service ssh start\"'}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" >>\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" ~/.bashrc\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# 5.\\u91CD\\u542F\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"service\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" restart\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BBE\\u7F6E\\u5B8C\\u6210\\uFF0C\\u5373\\u53EF\\u901A\\u8FC7ssh\\u8FDC\\u7A0B\\u8BBF\\u95EE\\uFF1A\\uFF08\\u9ED8\\u8BA4root\\uFF09\\xA0\",(0,n.jsx)(e.code,{children:\"ssh -p PORT root@IP\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"SSH\\u8FDE\\u63A5Docker\\u5BB9\\u5668\\u65F6\\u73AF\\u5883\\u53D8\\u91CF\\u4E22\\u5931\"}),`\n\\u5728\\u5BB9\\u5668\\u4E2D\\u5B89\\u88C5openssh-server\\u540E\\uFF0C\\u542F\\u52A8ssh\\u670D\\u52A1\\uFF0C\\u7136\\u540E\\u4ECE\\u5916\\u90E8\\u8FDE\\u63A5ssh\\u8FDB\\u5165docker\\u540E\\uFF0C\\u4F1A\\u53D1\\u73B0\\u6240\\u6709\\u7684\\u5BB9\\u5668\\u73AF\\u5883\\u53D8\\u91CF\\u90FD\\u4E0D\\u89C1\\u4E86\\uFF0C\\u53EA\\u5269\\u4E0B\\u4E00\\u4E9Bssh\\u5FC5\\u8981\\u7684\\u73AF\\u5883\\u53D8\\u91CF \\u53EF\\u4EE5\\u628A\\u5BB9\\u5668\\u4E3B\\u8FDB\\u7A0B\\u7684\\u73AF\\u5883\\u53D8\\u91CF\\u62FF\\u51FA\\u6765\\uFF1A\\u5728ssh\\u7684shell\\u4E2D\\u6267\\u884C\\u3002`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`export $(cat /proc/1/environ |tr '\\\\0' '\\\\n' | xargs)\n# \\u52A0\\u5230.bashrc \\u767B\\u5F55\\u9ED8\\u8BA4\\u8FDB\\u5165\\u6539\\u8FDB\\u7A0B\necho \"export \\\\$(cat /proc/1/environ |tr '\\\\0' '\\\\n' | xargs)\" >> ~/.bashrc\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" $(\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"cat\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /proc/1/environ\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"tr\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '\\\\0'\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '\\\\n'\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" xargs\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u52A0\\u5230.bashrc \\u767B\\u5F55\\u9ED8\\u8BA4\\u8FDB\\u5165\\u6539\\u8FDB\\u7A0B\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"echo\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"export '}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\$\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:`(cat /proc/1/environ |tr '\\\\0' '\\\\n' | xargs)\"`}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" >>\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" ~/.bashrc\"})]})]})})})})]})}function b(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(i,l)})):i(l)}var C=b;return E(v);})();\n;return Component;"
    },
    "_id": "post/2023-12-23-ubuntu-docker-pytorch-ssh.md",
    "_raw": {
      "sourceFilePath": "post/2023-12-23-ubuntu-docker-pytorch-ssh.md",
      "sourceFileName": "2023-12-23-ubuntu-docker-pytorch-ssh.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2023-12-23-ubuntu-docker-pytorch-ssh"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2023-12-23-ubuntu-docker-pytorch-ssh",
    "slugAsParams": "2023-12-23-ubuntu-docker-pytorch-ssh"
  },
  {
    "title": "tiptap接入富文本编辑器",
    "author": "heavenmei",
    "url": "/2023-12-27-tiptap",
    "date": "2023-12-27T00:00:00.000Z",
    "body": {
      "raw": "",
      "code": "var Component=(()=>{var p=Object.create;var o=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var _=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),j=(t,e)=>{for(var n in e)o(t,n,{get:e[n],enumerable:!0})},s=(t,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of f(e))!d.call(t,a)&&a!==n&&o(t,a,{get:()=>e[a],enumerable:!(i=x(e,a))||i.enumerable});return t};var l=(t,e,n)=>(n=t!=null?p(_(t)):{},s(e||!t||!t.__esModule?o(n,\"default\",{value:t,enumerable:!0}):n,t)),h=t=>s(o({},\"__esModule\",{value:!0}),t);var u=g((X,c)=>{c.exports=_jsx_runtime});var C={};j(C,{default:()=>w,frontmatter:()=>D});var r=l(u()),D={title:\"tiptap\\u63A5\\u5165\\u5BCC\\u6587\\u672C\\u7F16\\u8F91\\u5668\",date:new Date(17036352e5),author:\"heavenmei\",categories:[\"Post\"],url:\"/2023-12-27-tiptap\"};function m(t){return(0,r.jsx)(r.Fragment,{})}function M(t={}){let{wrapper:e}=t.components||{};return e?(0,r.jsx)(e,Object.assign({},t,{children:(0,r.jsx)(m,t)})):m(t)}var w=M;return h(C);})();\n;return Component;"
    },
    "_id": "post/2023-12-27-tiptap.md",
    "_raw": {
      "sourceFilePath": "post/2023-12-27-tiptap.md",
      "sourceFileName": "2023-12-27-tiptap.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2023-12-27-tiptap"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2023-12-27-tiptap",
    "slugAsParams": "2023-12-27-tiptap"
  },
  {
    "title": "使用pont实现swagger文档生成ts响应类型",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "url": "/2023-12-28-pont-apiDoc",
    "date": "2023-12-28T00:00:00.000Z",
    "body": {
      "raw": "https://blog.csdn.net/m0_65035567/article/details/130278459\n\n> 之前用过字节的ferry， 可以很方便讲thrift文件转成.d.ts类型定义和接口请求文件。但是ferry现在不开源，找到pont，可以把swagger转成ts。尝试接入现有的项目中\n\n## pont\npont是阿里出的一个工具，它可以非常方便的把后端的swagger文档转成ts提示类型，不仅如此，它还支持添加模板，直接生成对应的接口请求，甚至能帮我们生成请求参数的默认基类。\n\nGithub：[github.com/alibaba/pon…](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Falibaba%2Fpont \"https://github.com/alibaba/pont\")\n\n## usage\n1. 全局安装 `yarn add -D pont-engine`\n2. 安装 vscode 插件 pont 以获取 pont 的全部能力\n3. 进入项目目录，在项目中安装 pont-engine\n4. 新建`pont-config.json`， 也可以`pont start`按照提示生成。 [配置参考](https://github.com/alibaba/pont/blob/master/docs/pontConfig.md)\n5. 新建`pontTemplate.ts` 生成自定义接口代码\n\n## API\n### cmd\n\n> 很奇怪，竟然没有代码生成的命令，只能利用vscode插件生成完成之后利用updateMod去更新\n\n\n\n|  cmd |  description |\n|---|---|\n|pont start|一键接入 pont，若本地存在 [pont-config.json](https://github.com/alibaba/pont/blob/master/docs/pontConfig.md)配置文件，将覆盖重复的配置项|\n|pont check|校验本地的 pont-lock.json 文件是否缺失、损坏。建议用户在项目中，在 pre-commit 里加上 pont check 命令，以防止在团队协作过程中，pont-lock.json 被误删、解决该文件冲突时被损坏等情况|\n|pont scan|扫描未使用的接口，在 process.cwd()位置生成并写入 unusedRequests.json 文件，需要配置 scannedRange。请参考 [pont-config.json 配置项](https://github.com/alibaba/pont/blob/master/docs/pontConfig.md)|\n|pont ls|查看所有数据源|\n|pont select [dsName]|切换当前数据源|\n|pont diff|查看远程数据和本地数据在模块、基类上的差异，以作针对性、选择性同步|\n|pont updateMod [modName]|选择性更新本地的模块|\n|pont updateBo [boName]|选择性更新本地的基类|\n\n### pontConfig\n- **originUrl**: swagger文档的json数据\n- **outDir**：生成的文件位置\n- **originType**：swagger文档类型 SwaggerV3/SwaggerV2\n- **templatePath**：生成的接口模板位置\n\n```json\n{\n    \"originUrl\": \"https://petstore.swagger.io/v2/swagger.json\",\n    \"outDir\": \"./apis\",\n    \"originType\": \"SwaggerV3\",\n    \"templatePath\": \"./pontTemplate\",\n}\n```\n\n\n\n### pontTemplate  // todo\n```ts\nexport default class MyGenerator extends CodeGenerator {}\n```",
      "code": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var r in e)a(t,r,{get:e[r],enumerable:!0})},c=(t,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of g(e))!u.call(t,l)&&l!==r&&a(t,l,{get:()=>e[l],enumerable:!(o=p(e,l))||o.enumerable});return t};var f=(t,e,r)=>(r=t!=null?h(m(t)):{},c(e||!t||!t.__esModule?a(r,\"default\",{value:t,enumerable:!0}):r,t)),E=t=>c(a({},\"__esModule\",{value:!0}),t);var d=b((x,i)=>{i.exports=_jsx_runtime});var w={};y(w,{default:()=>j,frontmatter:()=>F});var n=f(d()),F={title:\"\\u4F7F\\u7528pont\\u5B9E\\u73B0swagger\\u6587\\u6863\\u751F\\u6210ts\\u54CD\\u5E94\\u7C7B\\u578B\",date:new Date(17037216e5),author:\"heavenmei\",categories:[\"Post\"],tags:[\"Front\"],url:\"/2023-12-28-pont-apiDoc\"};function s(t){let e=Object.assign({p:\"p\",a:\"a\",blockquote:\"blockquote\",h2:\"h2\",span:\"span\",ol:\"ol\",li:\"li\",code:\"code\",h3:\"h3\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\",ul:\"ul\",strong:\"strong\",div:\"div\",figure:\"figure\",pre:\"pre\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://blog.csdn.net/m0_65035567/article/details/130278459\",children:\"https://blog.csdn.net/m0_65035567/article/details/130278459\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u4E4B\\u524D\\u7528\\u8FC7\\u5B57\\u8282\\u7684ferry\\uFF0C \\u53EF\\u4EE5\\u5F88\\u65B9\\u4FBF\\u8BB2thrift\\u6587\\u4EF6\\u8F6C\\u6210.d.ts\\u7C7B\\u578B\\u5B9A\\u4E49\\u548C\\u63A5\\u53E3\\u8BF7\\u6C42\\u6587\\u4EF6\\u3002\\u4F46\\u662Fferry\\u73B0\\u5728\\u4E0D\\u5F00\\u6E90\\uFF0C\\u627E\\u5230pont\\uFF0C\\u53EF\\u4EE5\\u628Aswagger\\u8F6C\\u6210ts\\u3002\\u5C1D\\u8BD5\\u63A5\\u5165\\u73B0\\u6709\\u7684\\u9879\\u76EE\\u4E2D\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"pont\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#pont\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"pont\"]}),`\n`,(0,n.jsx)(e.p,{children:\"pont\\u662F\\u963F\\u91CC\\u51FA\\u7684\\u4E00\\u4E2A\\u5DE5\\u5177\\uFF0C\\u5B83\\u53EF\\u4EE5\\u975E\\u5E38\\u65B9\\u4FBF\\u7684\\u628A\\u540E\\u7AEF\\u7684swagger\\u6587\\u6863\\u8F6C\\u6210ts\\u63D0\\u793A\\u7C7B\\u578B\\uFF0C\\u4E0D\\u4EC5\\u5982\\u6B64\\uFF0C\\u5B83\\u8FD8\\u652F\\u6301\\u6DFB\\u52A0\\u6A21\\u677F\\uFF0C\\u76F4\\u63A5\\u751F\\u6210\\u5BF9\\u5E94\\u7684\\u63A5\\u53E3\\u8BF7\\u6C42\\uFF0C\\u751A\\u81F3\\u80FD\\u5E2E\\u6211\\u4EEC\\u751F\\u6210\\u8BF7\\u6C42\\u53C2\\u6570\\u7684\\u9ED8\\u8BA4\\u57FA\\u7C7B\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Github\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Falibaba%2Fpont\",title:\"https://github.com/alibaba/pont\",children:\"github.com/alibaba/pon\\u2026\"})]}),`\n`,(0,n.jsxs)(e.h2,{id:\"usage\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#usage\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"usage\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5168\\u5C40\\u5B89\\u88C5 \",(0,n.jsx)(e.code,{children:\"yarn add -D pont-engine\"})]}),`\n`,(0,n.jsx)(e.li,{children:\"\\u5B89\\u88C5 vscode \\u63D2\\u4EF6 pont \\u4EE5\\u83B7\\u53D6 pont \\u7684\\u5168\\u90E8\\u80FD\\u529B\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u8FDB\\u5165\\u9879\\u76EE\\u76EE\\u5F55\\uFF0C\\u5728\\u9879\\u76EE\\u4E2D\\u5B89\\u88C5 pont-engine\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u65B0\\u5EFA\",(0,n.jsx)(e.code,{children:\"pont-config.json\"}),\"\\uFF0C \\u4E5F\\u53EF\\u4EE5\",(0,n.jsx)(e.code,{children:\"pont start\"}),\"\\u6309\\u7167\\u63D0\\u793A\\u751F\\u6210\\u3002 \",(0,n.jsx)(e.a,{href:\"https://github.com/alibaba/pont/blob/master/docs/pontConfig.md\",children:\"\\u914D\\u7F6E\\u53C2\\u8003\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u65B0\\u5EFA\",(0,n.jsx)(e.code,{children:\"pontTemplate.ts\"}),\" \\u751F\\u6210\\u81EA\\u5B9A\\u4E49\\u63A5\\u53E3\\u4EE3\\u7801\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"api\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#api\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"API\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"cmd\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#cmd\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"cmd\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u5F88\\u5947\\u602A\\uFF0C\\u7ADF\\u7136\\u6CA1\\u6709\\u4EE3\\u7801\\u751F\\u6210\\u7684\\u547D\\u4EE4\\uFF0C\\u53EA\\u80FD\\u5229\\u7528vscode\\u63D2\\u4EF6\\u751F\\u6210\\u5B8C\\u6210\\u4E4B\\u540E\\u5229\\u7528updateMod\\u53BB\\u66F4\\u65B0\"}),`\n`]}),`\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:\"cmd\"}),(0,n.jsx)(e.th,{children:\"description\"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont start\"}),(0,n.jsxs)(e.td,{children:[\"\\u4E00\\u952E\\u63A5\\u5165 pont\\uFF0C\\u82E5\\u672C\\u5730\\u5B58\\u5728\\xA0\",(0,n.jsx)(e.a,{href:\"https://github.com/alibaba/pont/blob/master/docs/pontConfig.md\",children:\"pont-config.json\"}),\"\\u914D\\u7F6E\\u6587\\u4EF6\\uFF0C\\u5C06\\u8986\\u76D6\\u91CD\\u590D\\u7684\\u914D\\u7F6E\\u9879\"]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont check\"}),(0,n.jsx)(e.td,{children:\"\\u6821\\u9A8C\\u672C\\u5730\\u7684 pont-lock.json \\u6587\\u4EF6\\u662F\\u5426\\u7F3A\\u5931\\u3001\\u635F\\u574F\\u3002\\u5EFA\\u8BAE\\u7528\\u6237\\u5728\\u9879\\u76EE\\u4E2D\\uFF0C\\u5728 pre-commit \\u91CC\\u52A0\\u4E0A pont check \\u547D\\u4EE4\\uFF0C\\u4EE5\\u9632\\u6B62\\u5728\\u56E2\\u961F\\u534F\\u4F5C\\u8FC7\\u7A0B\\u4E2D\\uFF0Cpont-lock.json \\u88AB\\u8BEF\\u5220\\u3001\\u89E3\\u51B3\\u8BE5\\u6587\\u4EF6\\u51B2\\u7A81\\u65F6\\u88AB\\u635F\\u574F\\u7B49\\u60C5\\u51B5\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont scan\"}),(0,n.jsxs)(e.td,{children:[\"\\u626B\\u63CF\\u672A\\u4F7F\\u7528\\u7684\\u63A5\\u53E3\\uFF0C\\u5728 process.cwd()\\u4F4D\\u7F6E\\u751F\\u6210\\u5E76\\u5199\\u5165 unusedRequests.json \\u6587\\u4EF6\\uFF0C\\u9700\\u8981\\u914D\\u7F6E scannedRange\\u3002\\u8BF7\\u53C2\\u8003\\xA0\",(0,n.jsx)(e.a,{href:\"https://github.com/alibaba/pont/blob/master/docs/pontConfig.md\",children:\"pont-config.json \\u914D\\u7F6E\\u9879\"})]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont ls\"}),(0,n.jsx)(e.td,{children:\"\\u67E5\\u770B\\u6240\\u6709\\u6570\\u636E\\u6E90\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont select [dsName]\"}),(0,n.jsx)(e.td,{children:\"\\u5207\\u6362\\u5F53\\u524D\\u6570\\u636E\\u6E90\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont diff\"}),(0,n.jsx)(e.td,{children:\"\\u67E5\\u770B\\u8FDC\\u7A0B\\u6570\\u636E\\u548C\\u672C\\u5730\\u6570\\u636E\\u5728\\u6A21\\u5757\\u3001\\u57FA\\u7C7B\\u4E0A\\u7684\\u5DEE\\u5F02\\uFF0C\\u4EE5\\u4F5C\\u9488\\u5BF9\\u6027\\u3001\\u9009\\u62E9\\u6027\\u540C\\u6B65\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont updateMod [modName]\"}),(0,n.jsx)(e.td,{children:\"\\u9009\\u62E9\\u6027\\u66F4\\u65B0\\u672C\\u5730\\u7684\\u6A21\\u5757\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont updateBo [boName]\"}),(0,n.jsx)(e.td,{children:\"\\u9009\\u62E9\\u6027\\u66F4\\u65B0\\u672C\\u5730\\u7684\\u57FA\\u7C7B\"})]})]})]}),`\n`,(0,n.jsxs)(e.h3,{id:\"pontconfig\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#pontconfig\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"pontConfig\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"originUrl\"}),\": swagger\\u6587\\u6863\\u7684json\\u6570\\u636E\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"outDir\"}),\"\\uFF1A\\u751F\\u6210\\u7684\\u6587\\u4EF6\\u4F4D\\u7F6E\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"originType\"}),\"\\uFF1Aswagger\\u6587\\u6863\\u7C7B\\u578B SwaggerV3/SwaggerV2\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"templatePath\"}),\"\\uFF1A\\u751F\\u6210\\u7684\\u63A5\\u53E3\\u6A21\\u677F\\u4F4D\\u7F6E\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n    \"originUrl\": \"https://petstore.swagger.io/v2/swagger.json\",\n    \"outDir\": \"./apis\",\n    \"originType\": \"SwaggerV3\",\n    \"templatePath\": \"./pontTemplate\",\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"originUrl\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"https://petstore.swagger.io/v2/swagger.json\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"outDir\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./apis\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"originType\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"SwaggerV3\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"templatePath\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./pontTemplate\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"ponttemplate---todo\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#ponttemplate---todo\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"pontTemplate  // todo\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark\",raw:`export default class MyGenerator extends CodeGenerator {}\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" class\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" MyGenerator\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" extends\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" CodeGenerator\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {}\"})]})})})})})]})}function k(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(s,t)})):s(t)}var j=k;return E(w);})();\n;return Component;"
    },
    "_id": "post/2023-12-28-swagger2ts-pont.md",
    "_raw": {
      "sourceFilePath": "post/2023-12-28-swagger2ts-pont.md",
      "sourceFileName": "2023-12-28-swagger2ts-pont.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2023-12-28-swagger2ts-pont"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2023-12-28-swagger2ts-pont",
    "slugAsParams": "2023-12-28-swagger2ts-pont"
  },
  {
    "title": "git详细使用",
    "tags": [
      "skill"
    ],
    "author": "heavenmei",
    "url": "/2024-01-12-git",
    "date": "2024-01-12T00:00:00.000Z",
    "body": {
      "raw": "> 基础的git知识不重复了，记录一些在实践应用中会需要的命令要点\n\n\n## 基本操作\n**git add** \n\n**git commit**\n```bash\n# 修改git提交记录用法,本质上就是生成了新的commit，替代了上一次commit的位置\ngit commit --amend\n```\n\n**git push**\n\n**git status**\n\n**git fetch**\n\n**git pull**\n\n```bash\ngit pull = git fetch + git merge\ngit pull --rebase = git fetch + git rebase\n\ngit pull --rebase/-r\n```\n\n**git branch**\n列出，创建或删除分支\n```bash\n# 列出你在本地的分支\ngit branch\n\n# 创建分支\ngit branch <branch_name>\n# 删除分支\n-d <branch_name>\n```\n\n**git checkout**\n```bash\n# 切换分支\ngit checkout <branch_name>\n\n# 创建一个名为<new_branch>的新分支并在<start_point>处启动它\n-b <new_branch>\n```\n\n**git remote**\n\n\n**git stash:**\n将变化储存的工作目录中\n`git stash pop`： 恢复缓存\n\n\n**git log**\n命令显示从最近到最远的提交日志\n## 合并\n#### git merge\n**两种用途：**\n1. 用于git-pull中，来整合另一代码仓库中的变化（即：git pull = git fetch + git merge）\n2. 用于从一个分支到另一个分支的合并\n\n**合并策略**：Git merge有两种主要的合并策略：fast-forward和recursive。\n**fast-forward**：默认，当前分支合并到另一分支时，如果没有分歧解决，就会直接移动文件指针。\n例如：假设存在以下历史记录，创建topic分支后主分支没有任何提交，并且当前分支是\"master\"\n```shell\n          A---B---C topic\n         /\n    D---E master\n```\n然后 `git merge topic`将会把ABC节点与E节点连接，直接移动HEAD指针\n```shell\n          A---B---C topic\n         /\n    D---E---A---B---C master\n```\n\n\n**recursive**：Git会创建一个新的提交来表示合并结果，这个提交会包含两个分支的所有变更内容。\n例如：假设存在以下历史记录，并且当前分支是\"master\"：\n```shell\n          A---B---C topic\n         /\n    D---E---F---G master\n```\n\n然后 `git merge topic`将会把ABC节点与G节点合并，并且将结果记录在新的提交H中。C节点和G节点都是H节点的父节点。\n\n```shell\n          A---B---C topic\n         /         \\\n    D---E---F---G---H master\n```\n\n\n\n**子命令**\n- `--abort`：抛弃当前合并冲突的处理过程并尝试重建合并前的状态。\n- `--continue`：由于冲突停止后，您可以通过运行来结束合并\n- `--ff`：当合并策略为fast-forward时，只更新分支指针，而不创建合并提交。这是默认行为。\n- `--no-ff`：即使合并策略为fast-forward，也可以创建合并提交。这是合并tag时的默认行为。\n- `--squash`：将合并结果压缩为一个提交，并且不会保留源分支的提交历史。（与`--no-ff`冲突）\n\n**参数**\n- `-m <message>`：指定新的合并提交的提交信息。\n\n\n#### git rebase\n变基，改变基底\n例如：假设存在以下历史记录，并且当前分支是\"topic\"：\n```shell\n          C---D topic\n         /\n    A---B---M master\n```\n\n此时我们在topic分支上，执行rebase命令，相当于是想要把master分支合并到topic分支（这一步的场景就可以类比为我们在自己的分支 topic 上开发了一段时间了，准备从主干master上拉一下最新改动。模拟了`git pull --rebase`的情形）\n```shell\n# 这两条命令等价于git rebase master topic\ngit checkout topic\ngit rebase master\n```\n此时历史记录变成:**注意这里的接法，实际是会依次拿M和C、D内容分别比较，处理冲突后生成新的C’和D’，然后删除原本的CD提交**，相当于topic分支的基底由原来的B变成了M（主分支最新的提交）\n```shell\n\t          C‘---D’ topic\n\t         /\n    A---B---M master\n```\n\n注意，如果master上在B以后没有新提交，那么就还是用原来的B作为基，rebase操作相当于无效，此时和git merge就基本没区别了，**差异只在于git merge会多一条记录Merge操作的提交记录**\n\n> 上面的例子可抽象为如下实际工作场景：\n> 远程库上有一个master分支目前开发到B了，张三从B拉了代码到本地的 topic 分支进行开发，目前提交了两次，开发到D了；李四也从B拉到本地的master分支，他提交到了M，然后合到远程库的master上了。此时张三想从远程库master拉下最新代码，于是他在feature分支上执行了git pull origin master:topic --rebase（注意要加–rebase参数），即把远程库master分支给rebase下来，\n> 由于李四更早开发完，此时远程master上是李四的最新内容，rebase后再看张三的历史提交记录，就相当于是张三是基于李四的最新提交M进行的开发了。（但实际上张三更早拉代码下来，李四拉的晚但提交早）\n\n\n## 回滚\n#### git reflog\n查看命令历史，以便确定要回到未来的哪个版本\n\n#### git reset\n将当前 HEAD 重置为指定状态\n```shell\n     git add . ------------> git commit -m 说明 -------------> git push\n   (添加到暂存区)              （提交到本地仓库）             （推送到远程仓库）\n```\n**子命令**\n- `--soft`:该命令表示撤销代码到暂存区之后，`commit`之前，代码在本地不会改变。\n- `--mixed`:该命令表示撤销代码到暂存区和`commit`之前，代码在本地不会改变。\n- `--hard`:该命令表示回退代码到某个版本下，代码在本地会改变到指定版本下，谨慎操作。\n\n\n#### git revert\n恢复一些现有的提交\n\n**子命令**\n- `--abort`： 取消操作并返回到预序列状态。\n\n**参数**\n- `-n`: --no-commit,该命令会自动创建一些提交日志消息，提交哪些提交已恢复。此标志应用必要的更改以将命名的提交恢复到您的工作树和索引，但不进行提交。\n\n\n#### reset vs revert\nreset和revert都可以用来回滚代码。但他们是有区别的：\n- reset是用来\"回退\"版本，删除原本的commit记录\n- revert是用来\"还原\"某次或者某几次提交。生成新的一条commit记录\n\n例如，在master分支，有以下提交历史:\n\n```shell\n42eae13 (HEAD -> master) 第四次修改\n97ea0f9 第三次修改\ne50b7c2 第二次修改\n3a52650 第一次修改\n```\n\n执行 `git reset --hard 97ea0f9`,这个时候，git的提交历史变为:\n\n```shell\n97ea0f9 (HEAD -> master) 第三次修改\ne50b7c2 第二次修改\n3a52650 第一次修改\n```\n\n可以看到master当前指向97ea0f9这个版本，我们回到了第三次修改。\n但是如果执行 `git revert -n 97ea0f9`, 然后重新commit `git commit -m \"恢复第三次修改\"`,\n```shell\n33b8b30 (HEAD -> master) Revert \"恢复第三次修改\"\n42eae13 第四次修改\n97ea0f9 第三次修改\ne50b7c2 第二次修改\n3a52650 第一次修改\n```\nGit把第三次修改从提交中剔除(还原)了，还保留了第四次修改，并且产生了新的commit_id。\n\n\n\n## 实际应用\n[一个成功的Git分支模型](https://www.jianshu.com/p/b357df6794e3)\n### git如何把master合并到自己分支\n1. 切换到主分支 `git chekout master`\n2. pull到本地 `git pull`\n3. 切换到自己的分支 `git checkout xxx`\n4. 把主分支merge到自己的分支 `git merge master`\n5. 最后push，自己分支就与主分支拉齐了\n\n### 如何解决冲突\n看到冲突后，你可以做两件事：\n- 决定不合并。`git merge --abort`\n- 解决冲突。重新add/commit 或者`git merge --continue`密封交易。continue在调用之前检查是否存在正在进行的（中断的）合并`git commit`。然后在push\n\n###  Git Clone 速度太慢的问题\n1. https://whatismyipaddress.com/hostname-ip 到这个网站查找git IP\n2. 或者`nslookup` 进行域名解析， git 相关地址的 `IP Address`，配置到 hosts 中\n```shell\nnslookup github.com\nnslookup github.global.ssl.fastly.net\n```\n3. `ping github.com`成功\n4. 修改 hosts 文件 `sudo vim /etc/host` , 在hosts最后追加\n```shell\n180.168.255.118 github.global.ssl.fastly.net\n180.168.255.118 github.com\n```\n\n\n### .gitignore 不生效\n原因是 .gitignore 只能忽略那些原来没有被track的文件，如果某些文件已经被纳入了版本管理中，则修改.gitignore是无效的。  \n那么解决方法就是先把本地缓存删除（改变成未track状态），然后再提交。\n```shell\ngit rm -r --cached .\n\ngit add .\n\ngit commit -m 'update .gitignore'\n```\n\n\n###  git Recv failure: Connection was reset\n移除旧的origin ：`git remote remove origin`  \n再重新建立新的origin ： `git remote add origin xxx`\n重新push就可以了",
      "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var F=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),u=(l,e)=>{for(var r in e)c(l,r,{get:e[r],enumerable:!0})},d=(l,e,r,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of g(e))!m.call(l,a)&&a!==r&&c(l,a,{get:()=>e[a],enumerable:!(i=p(e,a))||i.enumerable});return l};var b=(l,e,r)=>(r=l!=null?h(y(l)):{},d(e||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),B=l=>d(c({},\"__esModule\",{value:!0}),l);var s=F((v,t)=>{t.exports=_jsx_runtime});var f={};u(f,{default:()=>k,frontmatter:()=>E});var n=b(s()),E={title:\"git\\u8BE6\\u7EC6\\u4F7F\\u7528\",date:new Date(17050176e5),author:\"heavenmei\",categories:[\"Post\"],tags:[\"skill\"],url:\"/2024-01-12-git\"};function o(l){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",strong:\"strong\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",h4:\"h4\",ol:\"ol\",li:\"li\",ul:\"ul\",h3:\"h3\",br:\"br\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u57FA\\u7840\\u7684git\\u77E5\\u8BC6\\u4E0D\\u91CD\\u590D\\u4E86\\uFF0C\\u8BB0\\u5F55\\u4E00\\u4E9B\\u5728\\u5B9E\\u8DF5\\u5E94\\u7528\\u4E2D\\u4F1A\\u9700\\u8981\\u7684\\u547D\\u4EE4\\u8981\\u70B9\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u57FA\\u672C\\u64CD\\u4F5C\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u57FA\\u672C\\u64CD\\u4F5C\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u57FA\\u672C\\u64CD\\u4F5C\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"git add\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"git commit\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u4FEE\\u6539git\\u63D0\\u4EA4\\u8BB0\\u5F55\\u7528\\u6CD5,\\u672C\\u8D28\\u4E0A\\u5C31\\u662F\\u751F\\u6210\\u4E86\\u65B0\\u7684commit\\uFF0C\\u66FF\\u4EE3\\u4E86\\u4E0A\\u4E00\\u6B21commit\\u7684\\u4F4D\\u7F6E\ngit commit --amend\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u4FEE\\u6539git\\u63D0\\u4EA4\\u8BB0\\u5F55\\u7528\\u6CD5,\\u672C\\u8D28\\u4E0A\\u5C31\\u662F\\u751F\\u6210\\u4E86\\u65B0\\u7684commit\\uFF0C\\u66FF\\u4EE3\\u4E86\\u4E0A\\u4E00\\u6B21commit\\u7684\\u4F4D\\u7F6E\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" commit\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --amend\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"git push\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"git status\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"git fetch\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"git pull\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`git pull = git fetch + git merge\ngit pull --rebase = git fetch + git rebase\n\ngit pull --rebase/-r\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" pull\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" +\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" merge\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" pull\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --rebase\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" +\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" rebase\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" pull\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --rebase/-r\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"git branch\"}),`\n\\u5217\\u51FA\\uFF0C\\u521B\\u5EFA\\u6216\\u5220\\u9664\\u5206\\u652F`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u5217\\u51FA\\u4F60\\u5728\\u672C\\u5730\\u7684\\u5206\\u652F\ngit branch\n\n# \\u521B\\u5EFA\\u5206\\u652F\ngit branch <branch_name>\n# \\u5220\\u9664\\u5206\\u652F\n-d <branch_name>\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u5217\\u51FA\\u4F60\\u5728\\u672C\\u5730\\u7684\\u5206\\u652F\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" branch\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u521B\\u5EFA\\u5206\\u652F\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" branch\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"branch_nam\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u5220\\u9664\\u5206\\u652F\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"-d\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"branch_nam\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"git checkout\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u5207\\u6362\\u5206\\u652F\ngit checkout <branch_name>\n\n# \\u521B\\u5EFA\\u4E00\\u4E2A\\u540D\\u4E3A<new_branch>\\u7684\\u65B0\\u5206\\u652F\\u5E76\\u5728<start_point>\\u5904\\u542F\\u52A8\\u5B83\n-b <new_branch>\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u5207\\u6362\\u5206\\u652F\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" checkout\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"branch_nam\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u521B\\u5EFA\\u4E00\\u4E2A\\u540D\\u4E3A<new_branch>\\u7684\\u65B0\\u5206\\u652F\\u5E76\\u5728<start_point>\\u5904\\u542F\\u52A8\\u5B83\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"-b\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"new_branc\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"h\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"git remote\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"git stash:\"}),`\n\\u5C06\\u53D8\\u5316\\u50A8\\u5B58\\u7684\\u5DE5\\u4F5C\\u76EE\\u5F55\\u4E2D\n`,(0,n.jsx)(e.code,{children:\"git stash pop\"}),\"\\uFF1A \\u6062\\u590D\\u7F13\\u5B58\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"git log\"}),`\n\\u547D\\u4EE4\\u663E\\u793A\\u4ECE\\u6700\\u8FD1\\u5230\\u6700\\u8FDC\\u7684\\u63D0\\u4EA4\\u65E5\\u5FD7`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u5408\\u5E76\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u5408\\u5E76\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5408\\u5E76\"]}),`\n`,(0,n.jsxs)(e.h4,{id:\"git-merge\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#git-merge\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"git merge\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u4E24\\u79CD\\u7528\\u9014\\uFF1A\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u7528\\u4E8Egit-pull\\u4E2D\\uFF0C\\u6765\\u6574\\u5408\\u53E6\\u4E00\\u4EE3\\u7801\\u4ED3\\u5E93\\u4E2D\\u7684\\u53D8\\u5316\\uFF08\\u5373\\uFF1Agit pull = git fetch + git merge\\uFF09\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u7528\\u4E8E\\u4ECE\\u4E00\\u4E2A\\u5206\\u652F\\u5230\\u53E6\\u4E00\\u4E2A\\u5206\\u652F\\u7684\\u5408\\u5E76\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5408\\u5E76\\u7B56\\u7565\"}),`\\uFF1AGit merge\\u6709\\u4E24\\u79CD\\u4E3B\\u8981\\u7684\\u5408\\u5E76\\u7B56\\u7565\\uFF1Afast-forward\\u548Crecursive\\u3002\n`,(0,n.jsx)(e.strong,{children:\"fast-forward\"}),`\\uFF1A\\u9ED8\\u8BA4\\uFF0C\\u5F53\\u524D\\u5206\\u652F\\u5408\\u5E76\\u5230\\u53E6\\u4E00\\u5206\\u652F\\u65F6\\uFF0C\\u5982\\u679C\\u6CA1\\u6709\\u5206\\u6B67\\u89E3\\u51B3\\uFF0C\\u5C31\\u4F1A\\u76F4\\u63A5\\u79FB\\u52A8\\u6587\\u4EF6\\u6307\\u9488\\u3002\n\\u4F8B\\u5982\\uFF1A\\u5047\\u8BBE\\u5B58\\u5728\\u4EE5\\u4E0B\\u5386\\u53F2\\u8BB0\\u5F55\\uFF0C\\u521B\\u5EFAtopic\\u5206\\u652F\\u540E\\u4E3B\\u5206\\u652F\\u6CA1\\u6709\\u4EFB\\u4F55\\u63D0\\u4EA4\\uFF0C\\u5E76\\u4E14\\u5F53\\u524D\\u5206\\u652F\\u662F\"master\"`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`          A---B---C topic\n         /\n    D---E master\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"          A---B---C\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" topic\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"         /\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    D---E\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E \",(0,n.jsx)(e.code,{children:\"git merge topic\"}),\"\\u5C06\\u4F1A\\u628AABC\\u8282\\u70B9\\u4E0EE\\u8282\\u70B9\\u8FDE\\u63A5\\uFF0C\\u76F4\\u63A5\\u79FB\\u52A8HEAD\\u6307\\u9488\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`          A---B---C topic\n         /\n    D---E---A---B---C master\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"          A---B---C\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" topic\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"         /\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    D---E---A---B---C\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"recursive\"}),`\\uFF1AGit\\u4F1A\\u521B\\u5EFA\\u4E00\\u4E2A\\u65B0\\u7684\\u63D0\\u4EA4\\u6765\\u8868\\u793A\\u5408\\u5E76\\u7ED3\\u679C\\uFF0C\\u8FD9\\u4E2A\\u63D0\\u4EA4\\u4F1A\\u5305\\u542B\\u4E24\\u4E2A\\u5206\\u652F\\u7684\\u6240\\u6709\\u53D8\\u66F4\\u5185\\u5BB9\\u3002\n\\u4F8B\\u5982\\uFF1A\\u5047\\u8BBE\\u5B58\\u5728\\u4EE5\\u4E0B\\u5386\\u53F2\\u8BB0\\u5F55\\uFF0C\\u5E76\\u4E14\\u5F53\\u524D\\u5206\\u652F\\u662F\"master\"\\uFF1A`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`          A---B---C topic\n         /\n    D---E---F---G master\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"          A---B---C\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" topic\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"         /\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    D---E---F---G\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E \",(0,n.jsx)(e.code,{children:\"git merge topic\"}),\"\\u5C06\\u4F1A\\u628AABC\\u8282\\u70B9\\u4E0EG\\u8282\\u70B9\\u5408\\u5E76\\uFF0C\\u5E76\\u4E14\\u5C06\\u7ED3\\u679C\\u8BB0\\u5F55\\u5728\\u65B0\\u7684\\u63D0\\u4EA4H\\u4E2D\\u3002C\\u8282\\u70B9\\u548CG\\u8282\\u70B9\\u90FD\\u662FH\\u8282\\u70B9\\u7684\\u7236\\u8282\\u70B9\\u3002\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`          A---B---C topic\n         /         \\\\\n    D---E---F---G---H master\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"          A---B---C\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" topic\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"         /\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"         \\\\\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"    D---E---F---G---H\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u5B50\\u547D\\u4EE4\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--abort\"}),\"\\uFF1A\\u629B\\u5F03\\u5F53\\u524D\\u5408\\u5E76\\u51B2\\u7A81\\u7684\\u5904\\u7406\\u8FC7\\u7A0B\\u5E76\\u5C1D\\u8BD5\\u91CD\\u5EFA\\u5408\\u5E76\\u524D\\u7684\\u72B6\\u6001\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--continue\"}),\"\\uFF1A\\u7531\\u4E8E\\u51B2\\u7A81\\u505C\\u6B62\\u540E\\uFF0C\\u60A8\\u53EF\\u4EE5\\u901A\\u8FC7\\u8FD0\\u884C\\u6765\\u7ED3\\u675F\\u5408\\u5E76\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--ff\"}),\"\\uFF1A\\u5F53\\u5408\\u5E76\\u7B56\\u7565\\u4E3Afast-forward\\u65F6\\uFF0C\\u53EA\\u66F4\\u65B0\\u5206\\u652F\\u6307\\u9488\\uFF0C\\u800C\\u4E0D\\u521B\\u5EFA\\u5408\\u5E76\\u63D0\\u4EA4\\u3002\\u8FD9\\u662F\\u9ED8\\u8BA4\\u884C\\u4E3A\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--no-ff\"}),\"\\uFF1A\\u5373\\u4F7F\\u5408\\u5E76\\u7B56\\u7565\\u4E3Afast-forward\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u521B\\u5EFA\\u5408\\u5E76\\u63D0\\u4EA4\\u3002\\u8FD9\\u662F\\u5408\\u5E76tag\\u65F6\\u7684\\u9ED8\\u8BA4\\u884C\\u4E3A\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--squash\"}),\"\\uFF1A\\u5C06\\u5408\\u5E76\\u7ED3\\u679C\\u538B\\u7F29\\u4E3A\\u4E00\\u4E2A\\u63D0\\u4EA4\\uFF0C\\u5E76\\u4E14\\u4E0D\\u4F1A\\u4FDD\\u7559\\u6E90\\u5206\\u652F\\u7684\\u63D0\\u4EA4\\u5386\\u53F2\\u3002\\uFF08\\u4E0E\",(0,n.jsx)(e.code,{children:\"--no-ff\"}),\"\\u51B2\\u7A81\\uFF09\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u53C2\\u6570\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-m <message>\"}),\"\\uFF1A\\u6307\\u5B9A\\u65B0\\u7684\\u5408\\u5E76\\u63D0\\u4EA4\\u7684\\u63D0\\u4EA4\\u4FE1\\u606F\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h4,{id:\"git-rebase\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#git-rebase\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"git rebase\"]}),`\n`,(0,n.jsx)(e.p,{children:`\\u53D8\\u57FA\\uFF0C\\u6539\\u53D8\\u57FA\\u5E95\n\\u4F8B\\u5982\\uFF1A\\u5047\\u8BBE\\u5B58\\u5728\\u4EE5\\u4E0B\\u5386\\u53F2\\u8BB0\\u5F55\\uFF0C\\u5E76\\u4E14\\u5F53\\u524D\\u5206\\u652F\\u662F\"topic\"\\uFF1A`}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`          C---D topic\n         /\n    A---B---M master\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"          C---D\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" topic\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"         /\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    A---B---M\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6B64\\u65F6\\u6211\\u4EEC\\u5728topic\\u5206\\u652F\\u4E0A\\uFF0C\\u6267\\u884Crebase\\u547D\\u4EE4\\uFF0C\\u76F8\\u5F53\\u4E8E\\u662F\\u60F3\\u8981\\u628Amaster\\u5206\\u652F\\u5408\\u5E76\\u5230topic\\u5206\\u652F\\uFF08\\u8FD9\\u4E00\\u6B65\\u7684\\u573A\\u666F\\u5C31\\u53EF\\u4EE5\\u7C7B\\u6BD4\\u4E3A\\u6211\\u4EEC\\u5728\\u81EA\\u5DF1\\u7684\\u5206\\u652F topic \\u4E0A\\u5F00\\u53D1\\u4E86\\u4E00\\u6BB5\\u65F6\\u95F4\\u4E86\\uFF0C\\u51C6\\u5907\\u4ECE\\u4E3B\\u5E72master\\u4E0A\\u62C9\\u4E00\\u4E0B\\u6700\\u65B0\\u6539\\u52A8\\u3002\\u6A21\\u62DF\\u4E86\",(0,n.jsx)(e.code,{children:\"git pull --rebase\"}),\"\\u7684\\u60C5\\u5F62\\uFF09\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`# \\u8FD9\\u4E24\\u6761\\u547D\\u4EE4\\u7B49\\u4EF7\\u4E8Egit rebase master topic\ngit checkout topic\ngit rebase master\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u8FD9\\u4E24\\u6761\\u547D\\u4EE4\\u7B49\\u4EF7\\u4E8Egit rebase master topic\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" checkout\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" topic\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" rebase\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6B64\\u65F6\\u5386\\u53F2\\u8BB0\\u5F55\\u53D8\\u6210:\",(0,n.jsx)(e.strong,{children:\"\\u6CE8\\u610F\\u8FD9\\u91CC\\u7684\\u63A5\\u6CD5\\uFF0C\\u5B9E\\u9645\\u662F\\u4F1A\\u4F9D\\u6B21\\u62FFM\\u548CC\\u3001D\\u5185\\u5BB9\\u5206\\u522B\\u6BD4\\u8F83\\uFF0C\\u5904\\u7406\\u51B2\\u7A81\\u540E\\u751F\\u6210\\u65B0\\u7684C\\u2019\\u548CD\\u2019\\uFF0C\\u7136\\u540E\\u5220\\u9664\\u539F\\u672C\\u7684CD\\u63D0\\u4EA4\"}),\"\\uFF0C\\u76F8\\u5F53\\u4E8Etopic\\u5206\\u652F\\u7684\\u57FA\\u5E95\\u7531\\u539F\\u6765\\u7684B\\u53D8\\u6210\\u4E86M\\uFF08\\u4E3B\\u5206\\u652F\\u6700\\u65B0\\u7684\\u63D0\\u4EA4\\uFF09\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`\t          C\\u2018---D\\u2019 topic\n\t         /\n    A---B---M master\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"\t          C\\u2018---D\\u2019\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" topic\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"\t         /\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    A---B---M\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6CE8\\u610F\\uFF0C\\u5982\\u679Cmaster\\u4E0A\\u5728B\\u4EE5\\u540E\\u6CA1\\u6709\\u65B0\\u63D0\\u4EA4\\uFF0C\\u90A3\\u4E48\\u5C31\\u8FD8\\u662F\\u7528\\u539F\\u6765\\u7684B\\u4F5C\\u4E3A\\u57FA\\uFF0Crebase\\u64CD\\u4F5C\\u76F8\\u5F53\\u4E8E\\u65E0\\u6548\\uFF0C\\u6B64\\u65F6\\u548Cgit merge\\u5C31\\u57FA\\u672C\\u6CA1\\u533A\\u522B\\u4E86\\uFF0C\",(0,n.jsx)(e.strong,{children:\"\\u5DEE\\u5F02\\u53EA\\u5728\\u4E8Egit merge\\u4F1A\\u591A\\u4E00\\u6761\\u8BB0\\u5F55Merge\\u64CD\\u4F5C\\u7684\\u63D0\\u4EA4\\u8BB0\\u5F55\"})]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:`\\u4E0A\\u9762\\u7684\\u4F8B\\u5B50\\u53EF\\u62BD\\u8C61\\u4E3A\\u5982\\u4E0B\\u5B9E\\u9645\\u5DE5\\u4F5C\\u573A\\u666F\\uFF1A\n\\u8FDC\\u7A0B\\u5E93\\u4E0A\\u6709\\u4E00\\u4E2Amaster\\u5206\\u652F\\u76EE\\u524D\\u5F00\\u53D1\\u5230B\\u4E86\\uFF0C\\u5F20\\u4E09\\u4ECEB\\u62C9\\u4E86\\u4EE3\\u7801\\u5230\\u672C\\u5730\\u7684 topic \\u5206\\u652F\\u8FDB\\u884C\\u5F00\\u53D1\\uFF0C\\u76EE\\u524D\\u63D0\\u4EA4\\u4E86\\u4E24\\u6B21\\uFF0C\\u5F00\\u53D1\\u5230D\\u4E86\\uFF1B\\u674E\\u56DB\\u4E5F\\u4ECEB\\u62C9\\u5230\\u672C\\u5730\\u7684master\\u5206\\u652F\\uFF0C\\u4ED6\\u63D0\\u4EA4\\u5230\\u4E86M\\uFF0C\\u7136\\u540E\\u5408\\u5230\\u8FDC\\u7A0B\\u5E93\\u7684master\\u4E0A\\u4E86\\u3002\\u6B64\\u65F6\\u5F20\\u4E09\\u60F3\\u4ECE\\u8FDC\\u7A0B\\u5E93master\\u62C9\\u4E0B\\u6700\\u65B0\\u4EE3\\u7801\\uFF0C\\u4E8E\\u662F\\u4ED6\\u5728feature\\u5206\\u652F\\u4E0A\\u6267\\u884C\\u4E86git pull origin master:topic --rebase\\uFF08\\u6CE8\\u610F\\u8981\\u52A0\\u2013rebase\\u53C2\\u6570\\uFF09\\uFF0C\\u5373\\u628A\\u8FDC\\u7A0B\\u5E93master\\u5206\\u652F\\u7ED9rebase\\u4E0B\\u6765\\uFF0C\n\\u7531\\u4E8E\\u674E\\u56DB\\u66F4\\u65E9\\u5F00\\u53D1\\u5B8C\\uFF0C\\u6B64\\u65F6\\u8FDC\\u7A0Bmaster\\u4E0A\\u662F\\u674E\\u56DB\\u7684\\u6700\\u65B0\\u5185\\u5BB9\\uFF0Crebase\\u540E\\u518D\\u770B\\u5F20\\u4E09\\u7684\\u5386\\u53F2\\u63D0\\u4EA4\\u8BB0\\u5F55\\uFF0C\\u5C31\\u76F8\\u5F53\\u4E8E\\u662F\\u5F20\\u4E09\\u662F\\u57FA\\u4E8E\\u674E\\u56DB\\u7684\\u6700\\u65B0\\u63D0\\u4EA4M\\u8FDB\\u884C\\u7684\\u5F00\\u53D1\\u4E86\\u3002\\uFF08\\u4F46\\u5B9E\\u9645\\u4E0A\\u5F20\\u4E09\\u66F4\\u65E9\\u62C9\\u4EE3\\u7801\\u4E0B\\u6765\\uFF0C\\u674E\\u56DB\\u62C9\\u7684\\u665A\\u4F46\\u63D0\\u4EA4\\u65E9\\uFF09`}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u56DE\\u6EDA\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u56DE\\u6EDA\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u56DE\\u6EDA\"]}),`\n`,(0,n.jsxs)(e.h4,{id:\"git-reflog\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#git-reflog\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"git reflog\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u67E5\\u770B\\u547D\\u4EE4\\u5386\\u53F2\\uFF0C\\u4EE5\\u4FBF\\u786E\\u5B9A\\u8981\\u56DE\\u5230\\u672A\\u6765\\u7684\\u54EA\\u4E2A\\u7248\\u672C\"}),`\n`,(0,n.jsxs)(e.h4,{id:\"git-reset\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#git-reset\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"git reset\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5C06\\u5F53\\u524D HEAD \\u91CD\\u7F6E\\u4E3A\\u6307\\u5B9A\\u72B6\\u6001\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`     git add . ------------> git commit -m \\u8BF4\\u660E -------------> git push\n   (\\u6DFB\\u52A0\\u5230\\u6682\\u5B58\\u533A)              \\uFF08\\u63D0\\u4EA4\\u5230\\u672C\\u5730\\u4ED3\\u5E93\\uFF09             \\uFF08\\u63A8\\u9001\\u5230\\u8FDC\\u7A0B\\u4ED3\\u5E93\\uFF09\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"     git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" .\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" ------------\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" commit\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -m\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u8BF4\\u660E\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -------------\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" push\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"   (\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"\\u6DFB\\u52A0\\u5230\\u6682\\u5B58\\u533A\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")              \"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"\\uFF08\\u63D0\\u4EA4\\u5230\\u672C\\u5730\\u4ED3\\u5E93\\uFF09\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"             \\uFF08\\u63A8\\u9001\\u5230\\u8FDC\\u7A0B\\u4ED3\\u5E93\\uFF09\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u5B50\\u547D\\u4EE4\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--soft\"}),\":\\u8BE5\\u547D\\u4EE4\\u8868\\u793A\\u64A4\\u9500\\u4EE3\\u7801\\u5230\\u6682\\u5B58\\u533A\\u4E4B\\u540E\\uFF0C\",(0,n.jsx)(e.code,{children:\"commit\"}),\"\\u4E4B\\u524D\\uFF0C\\u4EE3\\u7801\\u5728\\u672C\\u5730\\u4E0D\\u4F1A\\u6539\\u53D8\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--mixed\"}),\":\\u8BE5\\u547D\\u4EE4\\u8868\\u793A\\u64A4\\u9500\\u4EE3\\u7801\\u5230\\u6682\\u5B58\\u533A\\u548C\",(0,n.jsx)(e.code,{children:\"commit\"}),\"\\u4E4B\\u524D\\uFF0C\\u4EE3\\u7801\\u5728\\u672C\\u5730\\u4E0D\\u4F1A\\u6539\\u53D8\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--hard\"}),\":\\u8BE5\\u547D\\u4EE4\\u8868\\u793A\\u56DE\\u9000\\u4EE3\\u7801\\u5230\\u67D0\\u4E2A\\u7248\\u672C\\u4E0B\\uFF0C\\u4EE3\\u7801\\u5728\\u672C\\u5730\\u4F1A\\u6539\\u53D8\\u5230\\u6307\\u5B9A\\u7248\\u672C\\u4E0B\\uFF0C\\u8C28\\u614E\\u64CD\\u4F5C\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h4,{id:\"git-revert\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#git-revert\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"git revert\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6062\\u590D\\u4E00\\u4E9B\\u73B0\\u6709\\u7684\\u63D0\\u4EA4\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u5B50\\u547D\\u4EE4\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--abort\"}),\"\\uFF1A \\u53D6\\u6D88\\u64CD\\u4F5C\\u5E76\\u8FD4\\u56DE\\u5230\\u9884\\u5E8F\\u5217\\u72B6\\u6001\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u53C2\\u6570\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-n\"}),\": --no-commit,\\u8BE5\\u547D\\u4EE4\\u4F1A\\u81EA\\u52A8\\u521B\\u5EFA\\u4E00\\u4E9B\\u63D0\\u4EA4\\u65E5\\u5FD7\\u6D88\\u606F\\uFF0C\\u63D0\\u4EA4\\u54EA\\u4E9B\\u63D0\\u4EA4\\u5DF2\\u6062\\u590D\\u3002\\u6B64\\u6807\\u5FD7\\u5E94\\u7528\\u5FC5\\u8981\\u7684\\u66F4\\u6539\\u4EE5\\u5C06\\u547D\\u540D\\u7684\\u63D0\\u4EA4\\u6062\\u590D\\u5230\\u60A8\\u7684\\u5DE5\\u4F5C\\u6811\\u548C\\u7D22\\u5F15\\uFF0C\\u4F46\\u4E0D\\u8FDB\\u884C\\u63D0\\u4EA4\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h4,{id:\"reset-vs-revert\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#reset-vs-revert\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"reset vs revert\"]}),`\n`,(0,n.jsx)(e.p,{children:\"reset\\u548Crevert\\u90FD\\u53EF\\u4EE5\\u7528\\u6765\\u56DE\\u6EDA\\u4EE3\\u7801\\u3002\\u4F46\\u4ED6\\u4EEC\\u662F\\u6709\\u533A\\u522B\\u7684\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:'reset\\u662F\\u7528\\u6765\"\\u56DE\\u9000\"\\u7248\\u672C\\uFF0C\\u5220\\u9664\\u539F\\u672C\\u7684commit\\u8BB0\\u5F55'}),`\n`,(0,n.jsx)(e.li,{children:'revert\\u662F\\u7528\\u6765\"\\u8FD8\\u539F\"\\u67D0\\u6B21\\u6216\\u8005\\u67D0\\u51E0\\u6B21\\u63D0\\u4EA4\\u3002\\u751F\\u6210\\u65B0\\u7684\\u4E00\\u6761commit\\u8BB0\\u5F55'}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F8B\\u5982\\uFF0C\\u5728master\\u5206\\u652F\\uFF0C\\u6709\\u4EE5\\u4E0B\\u63D0\\u4EA4\\u5386\\u53F2:\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`42eae13 (HEAD -> master) \\u7B2C\\u56DB\\u6B21\\u4FEE\\u6539\n97ea0f9 \\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\ne50b7c2 \\u7B2C\\u4E8C\\u6B21\\u4FEE\\u6539\n3a52650 \\u7B2C\\u4E00\\u6B21\\u4FEE\\u6539\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"42eae13\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (HEAD -\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \\u7B2C\\u56DB\\u6B21\\u4FEE\\u6539\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"97ea0f9\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"e50b7c2\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u4E8C\\u6B21\\u4FEE\\u6539\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"3a52650\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u4E00\\u6B21\\u4FEE\\u6539\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6267\\u884C \",(0,n.jsx)(e.code,{children:\"git reset --hard 97ea0f9\"}),\",\\u8FD9\\u4E2A\\u65F6\\u5019\\uFF0Cgit\\u7684\\u63D0\\u4EA4\\u5386\\u53F2\\u53D8\\u4E3A:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`97ea0f9 (HEAD -> master) \\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\ne50b7c2 \\u7B2C\\u4E8C\\u6B21\\u4FEE\\u6539\n3a52650 \\u7B2C\\u4E00\\u6B21\\u4FEE\\u6539\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"97ea0f9\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (HEAD -\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"e50b7c2\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u4E8C\\u6B21\\u4FEE\\u6539\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"3a52650\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u4E00\\u6B21\\u4FEE\\u6539\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[`\\u53EF\\u4EE5\\u770B\\u5230master\\u5F53\\u524D\\u6307\\u541197ea0f9\\u8FD9\\u4E2A\\u7248\\u672C\\uFF0C\\u6211\\u4EEC\\u56DE\\u5230\\u4E86\\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\\u3002\n\\u4F46\\u662F\\u5982\\u679C\\u6267\\u884C `,(0,n.jsx)(e.code,{children:\"git revert -n 97ea0f9\"}),\", \\u7136\\u540E\\u91CD\\u65B0commit \",(0,n.jsx)(e.code,{children:'git commit -m \"\\u6062\\u590D\\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\"'}),\",\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`33b8b30 (HEAD -> master) Revert \"\\u6062\\u590D\\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\"\n42eae13 \\u7B2C\\u56DB\\u6B21\\u4FEE\\u6539\n97ea0f9 \\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\ne50b7c2 \\u7B2C\\u4E8C\\u6B21\\u4FEE\\u6539\n3a52650 \\u7B2C\\u4E00\\u6B21\\u4FEE\\u6539\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"33b8b30\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (HEAD -\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" master\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") Revert \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u6062\\u590D\\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"42eae13\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u56DB\\u6B21\\u4FEE\\u6539\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"97ea0f9\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"e50b7c2\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u4E8C\\u6B21\\u4FEE\\u6539\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"3a52650\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" \\u7B2C\\u4E00\\u6B21\\u4FEE\\u6539\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"Git\\u628A\\u7B2C\\u4E09\\u6B21\\u4FEE\\u6539\\u4ECE\\u63D0\\u4EA4\\u4E2D\\u5254\\u9664(\\u8FD8\\u539F)\\u4E86\\uFF0C\\u8FD8\\u4FDD\\u7559\\u4E86\\u7B2C\\u56DB\\u6B21\\u4FEE\\u6539\\uFF0C\\u5E76\\u4E14\\u4EA7\\u751F\\u4E86\\u65B0\\u7684commit_id\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u5B9E\\u9645\\u5E94\\u7528\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u5B9E\\u9645\\u5E94\\u7528\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5B9E\\u9645\\u5E94\\u7528\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.jianshu.com/p/b357df6794e3\",children:\"\\u4E00\\u4E2A\\u6210\\u529F\\u7684Git\\u5206\\u652F\\u6A21\\u578B\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"git\\u5982\\u4F55\\u628Amaster\\u5408\\u5E76\\u5230\\u81EA\\u5DF1\\u5206\\u652F\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#git\\u5982\\u4F55\\u628Amaster\\u5408\\u5E76\\u5230\\u81EA\\u5DF1\\u5206\\u652F\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"git\\u5982\\u4F55\\u628Amaster\\u5408\\u5E76\\u5230\\u81EA\\u5DF1\\u5206\\u652F\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5207\\u6362\\u5230\\u4E3B\\u5206\\u652F \",(0,n.jsx)(e.code,{children:\"git chekout master\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"pull\\u5230\\u672C\\u5730 \",(0,n.jsx)(e.code,{children:\"git pull\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5207\\u6362\\u5230\\u81EA\\u5DF1\\u7684\\u5206\\u652F \",(0,n.jsx)(e.code,{children:\"git checkout xxx\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u628A\\u4E3B\\u5206\\u652Fmerge\\u5230\\u81EA\\u5DF1\\u7684\\u5206\\u652F \",(0,n.jsx)(e.code,{children:\"git merge master\"})]}),`\n`,(0,n.jsx)(e.li,{children:\"\\u6700\\u540Epush\\uFF0C\\u81EA\\u5DF1\\u5206\\u652F\\u5C31\\u4E0E\\u4E3B\\u5206\\u652F\\u62C9\\u9F50\\u4E86\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u5982\\u4F55\\u89E3\\u51B3\\u51B2\\u7A81\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u5982\\u4F55\\u89E3\\u51B3\\u51B2\\u7A81\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5982\\u4F55\\u89E3\\u51B3\\u51B2\\u7A81\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u770B\\u5230\\u51B2\\u7A81\\u540E\\uFF0C\\u4F60\\u53EF\\u4EE5\\u505A\\u4E24\\u4EF6\\u4E8B\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u51B3\\u5B9A\\u4E0D\\u5408\\u5E76\\u3002\",(0,n.jsx)(e.code,{children:\"git merge --abort\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u89E3\\u51B3\\u51B2\\u7A81\\u3002\\u91CD\\u65B0add/commit \\u6216\\u8005\",(0,n.jsx)(e.code,{children:\"git merge --continue\"}),\"\\u5BC6\\u5C01\\u4EA4\\u6613\\u3002continue\\u5728\\u8C03\\u7528\\u4E4B\\u524D\\u68C0\\u67E5\\u662F\\u5426\\u5B58\\u5728\\u6B63\\u5728\\u8FDB\\u884C\\u7684\\uFF08\\u4E2D\\u65AD\\u7684\\uFF09\\u5408\\u5E76\",(0,n.jsx)(e.code,{children:\"git commit\"}),\"\\u3002\\u7136\\u540E\\u5728push\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"git-clone-\\u901F\\u5EA6\\u592A\\u6162\\u7684\\u95EE\\u9898\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#git-clone-\\u901F\\u5EA6\\u592A\\u6162\\u7684\\u95EE\\u9898\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Git Clone \\u901F\\u5EA6\\u592A\\u6162\\u7684\\u95EE\\u9898\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://whatismyipaddress.com/hostname-ip\",children:\"https://whatismyipaddress.com/hostname-ip\"}),\" \\u5230\\u8FD9\\u4E2A\\u7F51\\u7AD9\\u67E5\\u627Egit IP\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u6216\\u8005\",(0,n.jsx)(e.code,{children:\"nslookup\"}),\"\\xA0\\u8FDB\\u884C\\u57DF\\u540D\\u89E3\\u6790\\uFF0C\\xA0git \\u76F8\\u5173\\u5730\\u5740\\u7684\\xA0\",(0,n.jsx)(e.code,{children:\"IP Address\"}),\"\\uFF0C\\u914D\\u7F6E\\u5230 hosts \\u4E2D\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`nslookup github.com\nnslookup github.global.ssl.fastly.net\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"nslookup\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" github.com\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"nslookup\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" github.global.ssl.fastly.net\"})]})]})})})}),`\n`,(0,n.jsxs)(e.ol,{start:\"3\",children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"ping github.com\"}),\"\\u6210\\u529F\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u4FEE\\u6539 hosts \\u6587\\u4EF6 \",(0,n.jsx)(e.code,{children:\"sudo vim /etc/host\"}),\" , \\u5728hosts\\u6700\\u540E\\u8FFD\\u52A0\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`180.168.255.118 github.global.ssl.fastly.net\n180.168.255.118 github.com\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"180.168.255.118\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" github.global.ssl.fastly.net\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"180.168.255.118\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" github.com\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"gitignore-\\u4E0D\\u751F\\u6548\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#gitignore-\\u4E0D\\u751F\\u6548\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\".gitignore \\u4E0D\\u751F\\u6548\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u539F\\u56E0\\u662F .gitignore \\u53EA\\u80FD\\u5FFD\\u7565\\u90A3\\u4E9B\\u539F\\u6765\\u6CA1\\u6709\\u88ABtrack\\u7684\\u6587\\u4EF6\\uFF0C\\u5982\\u679C\\u67D0\\u4E9B\\u6587\\u4EF6\\u5DF2\\u7ECF\\u88AB\\u7EB3\\u5165\\u4E86\\u7248\\u672C\\u7BA1\\u7406\\u4E2D\\uFF0C\\u5219\\u4FEE\\u6539.gitignore\\u662F\\u65E0\\u6548\\u7684\\u3002\",(0,n.jsx)(e.br,{}),`\n`,\"\\u90A3\\u4E48\\u89E3\\u51B3\\u65B9\\u6CD5\\u5C31\\u662F\\u5148\\u628A\\u672C\\u5730\\u7F13\\u5B58\\u5220\\u9664\\uFF08\\u6539\\u53D8\\u6210\\u672Atrack\\u72B6\\u6001\\uFF09\\uFF0C\\u7136\\u540E\\u518D\\u63D0\\u4EA4\\u3002\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`git rm -r --cached .\n\ngit add .\n\ngit commit -m 'update .gitignore'\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" rm\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -r\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --cached\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" .\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" .\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"git\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" commit\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -m\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'update .gitignore'\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"git-recv-failure-connection-was-reset\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#git-recv-failure-connection-was-reset\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"git Recv failure: Connection was reset\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u79FB\\u9664\\u65E7\\u7684origin \\uFF1A\",(0,n.jsx)(e.code,{children:\"git remote remove origin\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u518D\\u91CD\\u65B0\\u5EFA\\u7ACB\\u65B0\\u7684origin \\uFF1A \",(0,n.jsx)(e.code,{children:\"git remote add origin xxx\"}),`\n\\u91CD\\u65B0push\\u5C31\\u53EF\\u4EE5\\u4E86`]})]})}function C(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(o,l)})):o(l)}var k=C;return B(f);})();\n;return Component;"
    },
    "_id": "post/2024-01-12-Git.md",
    "_raw": {
      "sourceFilePath": "post/2024-01-12-Git.md",
      "sourceFileName": "2024-01-12-Git.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-01-12-Git"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-01-12-Git",
    "slugAsParams": "2024-01-12-Git"
  },
  {
    "title": "ubuntu Clash 科学上网",
    "tags": [
      "Ubuntu"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "url": "/2024-07-29-Clash",
    "description": "装环境实在太麻烦啦，mark一些安装命令，以备不时之需。",
    "date": "2023-11-25T00:00:00.000Z",
    "body": {
      "raw": "下载文件 `clash-linux-amd64-v1.17.0.gz`\n> 链接: https://pan.baidu.com/s/1RzYl_CGHLF9IUS9I5xyvZg?pwd=53kc 提取码: 53kc\n\n解压：`gunzip clash-linux-amd64-v1.17.0.gz`\n移动重命名： `sudo mv clash-linux-amd64-v1.17.0 /usr/local/bin/clash`\n给 Clash 添加执行权限：`sudo chmod +x /usr/local/bin/clash`\n启动 Clash自动创建initial config file：`clash -d ~/.config/clash`\n替换订阅文件：`curl https:/xxxx.yaml > ~/.config/clash/config.yaml`（或者手动复制）\n启动 Clash：`clash -d ~/.config/clash`\n写入 ~/zshrc\n\n```json\necho 'export http_proxy=127.0.0.1:7890' >> ~/.zshrc\necho 'export https_proxy=$http_proxy' >> ~/.zshrc\n```\n\n**开机自启配置：**[https://blog.csdn.net/xiaxinkai/article/details/123563488](https://blog.csdn.net/xiaxinkai/article/details/123563488)\n\n`sudo vim /etc/systemd/system/clash.service`\n\n写入配置\n\n```json\n[Unit]\nDescription=clash service\nAfter=network.target\n \n[Service]\nExecStart=/usr/local/bin/clash -d /home/haiwen/.config/clash/\n \n[Install]\nWantedBy=multi-user.target\n```\n\n\n\n```bash\nsudo systemctl daemon-reload # 刷新配置\n\nsudo systemctl start clash # 启动clash.service` \nsudo systemctl enable clash # 设置开机启动\nsudo systemctl status clash # 查看clash.service的状态`\n```",
      "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),m=(l,e)=>{for(var a in e)r(l,a,{get:e[a],enumerable:!0})},t=(l,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!E.call(l,c)&&c!==a&&r(l,c,{get:()=>e[c],enumerable:!(s=p(e,c))||s.enumerable});return l};var F=(l,e,a)=>(a=l!=null?h(u(l)):{},t(e||!l||!l.__esModule?r(a,\"default\",{value:l,enumerable:!0}):a,l)),x=l=>t(r({},\"__esModule\",{value:!0}),l);var i=g((v,o)=>{o.exports=_jsx_runtime});var B={};m(B,{default:()=>k,frontmatter:()=>b});var n=F(i()),b={title:\"ubuntu Clash \\u79D1\\u5B66\\u4E0A\\u7F51\",subtitle:null,layout:\"post\",date:new Date(17008704e5),author:\"heavenmei\",categories:[\"Post\"],description:\"\\u88C5\\u73AF\\u5883\\u5B9E\\u5728\\u592A\\u9EBB\\u70E6\\u5566\\uFF0Cmark\\u4E00\\u4E9B\\u5B89\\u88C5\\u547D\\u4EE4\\uFF0C\\u4EE5\\u5907\\u4E0D\\u65F6\\u4E4B\\u9700\\u3002\",tags:[\"Ubuntu\"],url:\"/2024-07-29-Clash\",image:null};function d(l){let e=Object.assign({p:\"p\",code:\"code\",blockquote:\"blockquote\",a:\"a\",div:\"div\",figure:\"figure\",pre:\"pre\",span:\"span\",strong:\"strong\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"\\u4E0B\\u8F7D\\u6587\\u4EF6 \",(0,n.jsx)(e.code,{children:\"clash-linux-amd64-v1.17.0.gz\"})]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u94FE\\u63A5: \",(0,n.jsx)(e.a,{href:\"https://pan.baidu.com/s/1RzYl_CGHLF9IUS9I5xyvZg?pwd=53kc\",children:\"https://pan.baidu.com/s/1RzYl_CGHLF9IUS9I5xyvZg?pwd=53kc\"}),\" \\u63D0\\u53D6\\u7801: 53kc\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u89E3\\u538B\\uFF1A\",(0,n.jsx)(e.code,{children:\"gunzip clash-linux-amd64-v1.17.0.gz\"}),`\n\\u79FB\\u52A8\\u91CD\\u547D\\u540D\\uFF1A `,(0,n.jsx)(e.code,{children:\"sudo mv clash-linux-amd64-v1.17.0 /usr/local/bin/clash\"}),`\n\\u7ED9 Clash \\u6DFB\\u52A0\\u6267\\u884C\\u6743\\u9650\\uFF1A`,(0,n.jsx)(e.code,{children:\"sudo chmod +x /usr/local/bin/clash\"}),`\n\\u542F\\u52A8 Clash\\u81EA\\u52A8\\u521B\\u5EFAinitial config file\\uFF1A`,(0,n.jsx)(e.code,{children:\"clash -d ~/.config/clash\"}),`\n\\u66FF\\u6362\\u8BA2\\u9605\\u6587\\u4EF6\\uFF1A`,(0,n.jsx)(e.code,{children:\"curl https:/xxxx.yaml > ~/.config/clash/config.yaml\"}),`\\uFF08\\u6216\\u8005\\u624B\\u52A8\\u590D\\u5236\\uFF09\n\\u542F\\u52A8 Clash\\uFF1A`,(0,n.jsx)(e.code,{children:\"clash -d ~/.config/clash\"}),`\n\\u5199\\u5165 ~/zshrc`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`echo 'export http_proxy=127.0.0.1:7890' >> ~/.zshrc\necho 'export https_proxy=$http_proxy' >> ~/.zshrc\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"echo 'export http_proxy=\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"127.0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"7890\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"' >> ~/.zshrc\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"echo 'export https_proxy=$http_proxy' >> ~/.zshrc\"})})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5F00\\u673A\\u81EA\\u542F\\u914D\\u7F6E\\uFF1A\"}),(0,n.jsx)(e.a,{href:\"https://blog.csdn.net/xiaxinkai/article/details/123563488\",children:\"https://blog.csdn.net/xiaxinkai/article/details/123563488\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"sudo vim /etc/systemd/system/clash.service\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5199\\u5165\\u914D\\u7F6E\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`[Unit]\nDescription=clash service\nAfter=network.target\n \n[Service]\nExecStart=/usr/local/bin/clash -d /home/haiwen/.config/clash/\n \n[Install]\nWantedBy=multi-user.target\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"Unit\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"Description=clash service\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"After=network.target\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"Service\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"ExecStart=/usr/local/bin/clash -d /home/haiwen/.config/clash/\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"Install\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"WantedBy=multi-user.target\"})})]})})})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`sudo systemctl daemon-reload # \\u5237\\u65B0\\u914D\\u7F6E\n\nsudo systemctl start clash # \\u542F\\u52A8clash.service\\` \nsudo systemctl enable clash # \\u8BBE\\u7F6E\\u5F00\\u673A\\u542F\\u52A8\nsudo systemctl status clash # \\u67E5\\u770Bclash.service\\u7684\\u72B6\\u6001\\`\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" daemon-reload\"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" # \\u5237\\u65B0\\u914D\\u7F6E\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" start\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" clash\"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" # \\u542F\\u52A8clash.service` \"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" enable\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" clash\"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" # \\u8BBE\\u7F6E\\u5F00\\u673A\\u542F\\u52A8\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" status\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" clash\"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" # \\u67E5\\u770Bclash.service\\u7684\\u72B6\\u6001`\"})]})]})})})})]})}function f(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(d,l)})):d(l)}var k=f;return x(B);})();\n;return Component;"
    },
    "_id": "post/2024-07-29-Clash.md",
    "_raw": {
      "sourceFilePath": "post/2024-07-29-Clash.md",
      "sourceFileName": "2024-07-29-Clash.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-07-29-Clash"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-07-29-Clash",
    "slugAsParams": "2024-07-29-Clash"
  },
  {
    "title": "ubuntu Docker 配置",
    "tags": [
      "Ubuntu"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "url": "/2024-07-29-Clash",
    "description": "装环境实在太麻烦啦，mark一些安装命令，以备不时之需。",
    "date": "2024-07-29T00:00:00.000Z",
    "body": {
      "raw": "### docker\nhttps://www.runoob.com/docker/docker-container-connection.html\n\nfor ubuntu20+\n\n[Ubuntu中docker的安装和使用_ubuntu docker_urnotlanxi的博客-CSDN博客](https://blog.csdn.net/urnotlanxi/article/details/128005616)\n\n### 常用命令\n#### image\n```bash\ndocker images\n\ndocker pull <image_name>\ndocker pull <镜像源>/<image_name>\n\n\n# delete\ndocker rmi <image_name_or_id>\ndocker rmi my_image:my_tag\n# 强制删除\ndocker rmi -f abc123\n\n\n```\n#### container\n```bash\n# ALL Container\ndocker ps -a \n# Running Conatiner\ndocker ps\n\ndocker start <container_id_or_name>\ndocker stop <container_id_or_name>\n\n# 删除\ndocker rm <container_id_or_name>\n\ndocker run <options> <image_name>\n\n# 查看容器资源使用情况\ndocker stats <container_id_or_name>\n\n# 进入容器\ndocker exec -it <container_id_or_name> /bin/bash\n\n\n# 查看那详细信息\ndocker inspect <container_id_or_name>\n\n```\n\n#### Docker Compose\n```bash\n# 启动服务\ndocker-compose up\n# 后台启动\ndocker-compose up -d\n\ndocker-compose down\n```\n\n### docker pull 加速\n```bash\nsudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n    \"registry-mirrors\": [\n\t    \"https://dockerproxy.cn\",\n        \"https://dockerproxy.com\",\n        \"https://docker.mirrors.ustc.edu.cn\",\n        \"https://docker.nju.edu.cn\"\n    ]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n\n在挂了clash代理后docker pull的速度非常慢，后来得知docker不走系统代理，原来docker需要单独配置代理\n\n1. 使用 `sudo systemctl edit docker.service`编辑 Docker 的 systemd 服务文件\n```bash\n[Service]\nEnvironment=\"HTTP_PROXY=http://127.0.0.1:7890\"\nEnvironment=\"HTTPS_PROXY=http://127.0.0.1:7890\"\nEnvironment=\"NO_PROXY=localhost,127.0.0.1,docker-registry.example.com\"\n```\n2. `ctrl+o`保存,`ctrl+x`关闭编辑器\n3. 使用`sudo systemctl daemon-reload`重载docker配置\n4. 使用`sudo systemctl restart docker`重启docker进程守护\n5. 再次进行docker pull\n\n\nhttps://blog.ohmykreee.top/article/deploy-nextjs-static-page-to-github-pages/\n\n\n\n### Brew 太慢\nhttps://zhuanlan.zhihu.com/p/90508170\n\n\n\n\n### docker 配置ssh\n\n创建`entrypoint.sh`指定password\n```sh\n#!/bin/bash\n\necho \"root:${PASSWORD}\" | chpasswd\n\n/usr/sbin/sshd -D\n```\n\n创建`DockerFile`\n```bash\nFROM ubuntu:20.04\n\nENV PASSWORD \"root\"\n\nRUN sed -i \"s/archive.ubuntu.com/mirrors.aliyun.com/g\" /etc/apt/sources.list \\\n\n&& apt update \\\n\n&& apt-get install -y openssh-server \\\n\n&& apt-get clean \\\n\n&& rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n  \n\n# Create the privilege separation directory and fix permissions\n\nRUN mkdir -p /run/sshd \\\n\n&& chmod 755 /run/sshd\n\nRUN sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config\n\n  \n\nCOPY entrypoint.sh /entrypoint.sh\n\nRUN chmod +x /entrypoint.sh\n\n  \n\n# Expose SSH port\n\nEXPOSE 22\n\n  \n\nENTRYPOINT [\"bash\", \"-c\", \"/entrypoint.sh\"]\n```\n\n运行\n```bash\ndocker build -t my-sshd:latest .\n\n\ndocker run -d --name mysshd -p 222:22 -e PASSWORD=\"123456\" my-sshd:latest \n\nssh -p 222 root@localhost\n\n```\n\n\n\n**分步运行**\n```shell\n# 检查容器中是否有ssh服务\n/etc/init.d/ssh status\n\n# 若没有相关ssh服务，则需进行ssh安装\nsudo apt-get update && apt-get install -y openssh-server\n\n# 设置允许root 远程访问\nvim /etc/ssh/sshd_config\n\n\n# 在#PermitRootLogin prohibit-password下添加如下内容 \nPermitRootLogin yes \nRSAAuthentication yes \nPubkeyAuthentication yes\n\n\n# 重启ssh服务\nservice ssh restart\n# or\nsystemctl restart sshd #由于容器中不能调用 systmctl命令,故命令只在宿主机配置ssh时使用 ，容器中使用service\n\n\n# 配置容器内的用户密码\npasswd\n```\n\n\n\n**开机自启动**\n在宿主机上设置开机自启可动\n```shell\nsudo systemctl enable ssh\n```\n\n在容器中设置开机自启动(登陆容器时，即触发)\n```shell\n # 找到并打开文件/root/.bashrc\nvim ~/.bashrc\n# 在.bashrc末尾添加如下代码\nservice ssh start\n\nsource ~/.bashrc\n```\n\n**一键创建**\n```shell\n\ndocker run -d -it \\\n  --name my-ubuntu-ssh \\\n  -p 7800:22 \n  -p 7801:80 \\\n  ubuntu:latest \\\n  /bin/bash -c \"apt-get update && apt-get install -y openssh-server && \\\n  sed -i 's/#PasswordAuthentication yes/' /etc/ssh/sshd_config && \\\n  sed -i 's/#PermitRootLogin yes/PermitRootLogin yes/' /etc/ssh/sshd_config && \\\n  /usr/sbin/sshd -D\"\n```\n\n\ndocker run -d -it --name spanish -p 7800:22 -p 7801:8080  ubuntu-ssh:latest",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var m=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),u=(l,n)=>{for(var r in n)s(l,r,{get:n[r],enumerable:!0})},o=(l,n,r,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let a of y(n))!E.call(l,a)&&a!==r&&s(l,a,{get:()=>n[a],enumerable:!(c=p(n,a))||c.enumerable});return l};var B=(l,n,r)=>(r=l!=null?h(F(l)):{},o(n||!l||!l.__esModule?s(r,\"default\",{value:l,enumerable:!0}):r,l)),g=l=>o(s({},\"__esModule\",{value:!0}),l);var i=m((v,d)=>{d.exports=_jsx_runtime});var _={};u(_,{default:()=>b,frontmatter:()=>k});var e=B(i()),k={title:\"ubuntu Docker \\u914D\\u7F6E\",subtitle:null,layout:\"post\",date:new Date(17222112e5),author:\"heavenmei\",categories:[\"Post\"],description:\"\\u88C5\\u73AF\\u5883\\u5B9E\\u5728\\u592A\\u9EBB\\u70E6\\u5566\\uFF0Cmark\\u4E00\\u4E9B\\u5B89\\u88C5\\u547D\\u4EE4\\uFF0C\\u4EE5\\u5907\\u4E0D\\u65F6\\u4E4B\\u9700\\u3002\",tags:[\"Ubuntu\"],url:\"/2024-07-29-Clash\",image:null};function t(l){let n=Object.assign({h3:\"h3\",a:\"a\",span:\"span\",p:\"p\",h4:\"h4\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",ol:\"ol\",li:\"li\",strong:\"strong\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h3,{id:\"docker\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#docker\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"docker\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://www.runoob.com/docker/docker-container-connection.html\",children:\"https://www.runoob.com/docker/docker-container-connection.html\"})}),`\n`,(0,e.jsx)(n.p,{children:\"for ubuntu20+\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://blog.csdn.net/urnotlanxi/article/details/128005616\",children:\"Ubuntu\\u4E2Ddocker\\u7684\\u5B89\\u88C5\\u548C\\u4F7F\\u7528_ubuntu docker_urnotlanxi\\u7684\\u535A\\u5BA2-CSDN\\u535A\\u5BA2\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u5E38\\u7528\\u547D\\u4EE4\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5E38\\u7528\\u547D\\u4EE4\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5E38\\u7528\\u547D\\u4EE4\"]}),`\n`,(0,e.jsxs)(n.h4,{id:\"image\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#image\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"image\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`docker images\n\ndocker pull <image_name>\ndocker pull <\\u955C\\u50CF\\u6E90>/<image_name>\n\n\n# delete\ndocker rmi <image_name_or_id>\ndocker rmi my_image:my_tag\n# \\u5F3A\\u5236\\u5220\\u9664\ndocker rmi -f abc123\n\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" images\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" pull\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"image_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" pull\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\\u955C\\u50CF\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"\\u6E90\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"image_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# delete\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" rmi\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"image_name_or_i\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"d\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" rmi\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" my_image:my_tag\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5F3A\\u5236\\u5220\\u9664\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" rmi\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -f\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" abc123\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.h4,{id:\"container\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#container\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"container\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# ALL Container\ndocker ps -a \n# Running Conatiner\ndocker ps\n\ndocker start <container_id_or_name>\ndocker stop <container_id_or_name>\n\n# \\u5220\\u9664\ndocker rm <container_id_or_name>\n\ndocker run <options> <image_name>\n\n# \\u67E5\\u770B\\u5BB9\\u5668\\u8D44\\u6E90\\u4F7F\\u7528\\u60C5\\u51B5\ndocker stats <container_id_or_name>\n\n# \\u8FDB\\u5165\\u5BB9\\u5668\ndocker exec -it <container_id_or_name> /bin/bash\n\n\n# \\u67E5\\u770B\\u90A3\\u8BE6\\u7EC6\\u4FE1\\u606F\ndocker inspect <container_id_or_name>\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# ALL Container\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ps\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -a\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# Running Conatiner\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ps\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" start\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"container_id_or_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" stop\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"container_id_or_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5220\\u9664\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" rm\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"container_id_or_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" run\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"option\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"s\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"image_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u770B\\u5BB9\\u5668\\u8D44\\u6E90\\u4F7F\\u7528\\u60C5\\u51B5\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" stats\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"container_id_or_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8FDB\\u5165\\u5BB9\\u5668\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" exec\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -it\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"container_id_or_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /bin/bash\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u770B\\u90A3\\u8BE6\\u7EC6\\u4FE1\\u606F\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" inspect\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"container_id_or_nam\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.h4,{id:\"docker-compose\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#docker-compose\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u542F\\u52A8\\u670D\\u52A1\ndocker-compose up\n# \\u540E\\u53F0\\u542F\\u52A8\ndocker-compose up -d\n\ndocker-compose down\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u542F\\u52A8\\u670D\\u52A1\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker-compose\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" up\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u540E\\u53F0\\u542F\\u52A8\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker-compose\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" up\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -d\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker-compose\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" down\"})]})]})})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"docker-pull-\\u52A0\\u901F\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#docker-pull-\\u52A0\\u901F\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"docker pull \\u52A0\\u901F\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`sudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n    \"registry-mirrors\": [\n\t    \"https://dockerproxy.cn\",\n        \"https://dockerproxy.com\",\n        \"https://docker.mirrors.ustc.edu.cn\",\n        \"https://docker.nju.edu.cn\"\n    ]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" mkdir\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -p\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /etc/docker\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" tee\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /etc/docker/daemon.json\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" <<-\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"'EOF'\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"{\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'    \"registry-mirrors\": ['})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\t    \"https://dockerproxy.cn\",'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"https://dockerproxy.com\",'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"https://docker.mirrors.ustc.edu.cn\",'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"https://docker.nju.edu.cn\"'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"    ]\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"EOF\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" daemon-reload\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" restart\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" docker\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u6302\\u4E86clash\\u4EE3\\u7406\\u540Edocker pull\\u7684\\u901F\\u5EA6\\u975E\\u5E38\\u6162\\uFF0C\\u540E\\u6765\\u5F97\\u77E5docker\\u4E0D\\u8D70\\u7CFB\\u7EDF\\u4EE3\\u7406\\uFF0C\\u539F\\u6765docker\\u9700\\u8981\\u5355\\u72EC\\u914D\\u7F6E\\u4EE3\\u7406\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u4F7F\\u7528\\xA0\",(0,e.jsx)(n.code,{children:\"sudo systemctl edit docker.service\"}),\"\\u7F16\\u8F91 Docker \\u7684 systemd \\u670D\\u52A1\\u6587\\u4EF6\"]}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`[Service]\nEnvironment=\"HTTP_PROXY=http://127.0.0.1:7890\"\nEnvironment=\"HTTPS_PROXY=http://127.0.0.1:7890\"\nEnvironment=\"NO_PROXY=localhost,127.0.0.1,docker-registry.example.com\"\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"[Service]\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"Environment\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"HTTP_PROXY=http://127.0.0.1:7890\"'})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"Environment\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"HTTPS_PROXY=http://127.0.0.1:7890\"'})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"Environment\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"NO_PROXY=localhost,127.0.0.1,docker-registry.example.com\"'})]})]})})})}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"ctrl+o\"}),\"\\u4FDD\\u5B58,\",(0,e.jsx)(n.code,{children:\"ctrl+x\"}),\"\\u5173\\u95ED\\u7F16\\u8F91\\u5668\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u4F7F\\u7528\",(0,e.jsx)(n.code,{children:\"sudo systemctl daemon-reload\"}),\"\\u91CD\\u8F7Ddocker\\u914D\\u7F6E\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u4F7F\\u7528\",(0,e.jsx)(n.code,{children:\"sudo systemctl restart docker\"}),\"\\u91CD\\u542Fdocker\\u8FDB\\u7A0B\\u5B88\\u62A4\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u518D\\u6B21\\u8FDB\\u884Cdocker pull\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://blog.ohmykreee.top/article/deploy-nextjs-static-page-to-github-pages/\",children:\"https://blog.ohmykreee.top/article/deploy-nextjs-static-page-to-github-pages/\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"brew-\\u592A\\u6162\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#brew-\\u592A\\u6162\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Brew \\u592A\\u6162\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://zhuanlan.zhihu.com/p/90508170\",children:\"https://zhuanlan.zhihu.com/p/90508170\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"docker-\\u914D\\u7F6Essh\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#docker-\\u914D\\u7F6Essh\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"docker \\u914D\\u7F6Essh\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u521B\\u5EFA\",(0,e.jsx)(n.code,{children:\"entrypoint.sh\"}),\"\\u6307\\u5B9Apassword\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"sh\",\"data-theme\":\"github-dark\",raw:`#!/bin/bash\n\necho \"root:\\${PASSWORD}\" | chpasswd\n\n/usr/sbin/sshd -D\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"sh\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#!/bin/bash\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"echo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"root:${'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"PASSWORD\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'}\"'}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" |\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" chpasswd\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"/usr/sbin/sshd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -D\"})]})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u521B\\u5EFA\",(0,e.jsx)(n.code,{children:\"DockerFile\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`FROM ubuntu:20.04\n\nENV PASSWORD \"root\"\n\nRUN sed -i \"s/archive.ubuntu.com/mirrors.aliyun.com/g\" /etc/apt/sources.list \\\\\n\n&& apt update \\\\\n\n&& apt-get install -y openssh-server \\\\\n\n&& apt-get clean \\\\\n\n&& rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n  \n\n# Create the privilege separation directory and fix permissions\n\nRUN mkdir -p /run/sshd \\\\\n\n&& chmod 755 /run/sshd\n\nRUN sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config\n\n  \n\nCOPY entrypoint.sh /entrypoint.sh\n\nRUN chmod +x /entrypoint.sh\n\n  \n\n# Expose SSH port\n\nEXPOSE 22\n\n  \n\nENTRYPOINT [\"bash\", \"-c\", \"/entrypoint.sh\"]\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"FROM\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ubuntu:20.04\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"ENV\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" PASSWORD\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"root\"'})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"RUN\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" sed\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -i\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"s/archive.ubuntu.com/mirrors.aliyun.com/g\"'}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /etc/apt/sources.list\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"&& \"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"apt\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" update\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"&& \"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"apt-get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -y\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" openssh-server\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"&& \"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"apt-get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" clean\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"&& \"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"rm\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -rf\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /var/lib/apt/lists/\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /tmp/\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /var/tmp/\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"*\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# Create the privilege separation directory and fix permissions\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"RUN\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" mkdir\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -p\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /run/sshd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"&& \"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"chmod\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 755\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /run/sshd\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"RUN\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" sed\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -i\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/'\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /etc/ssh/sshd_config\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"COPY\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" entrypoint.sh\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /entrypoint.sh\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"RUN\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" chmod\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" +x\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /entrypoint.sh\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# Expose SSH port\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"EXPOSE\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 22\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"ENTRYPOINT\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"bash\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"-c\",'}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"/entrypoint.sh\"]'})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD0\\u884C\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`docker build -t my-sshd:latest .\n\n\ndocker run -d --name mysshd -p 222:22 -e PASSWORD=\"123456\" my-sshd:latest \n\nssh -p 222 root@localhost\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" build\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -t\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" my-sshd:latest\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" .\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" run\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -d\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --name\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" mysshd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -p\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" 222:22\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -e\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' PASSWORD=\"123456\"'}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" my-sshd:latest\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"ssh\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -p\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 222\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" root@localhost\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u5206\\u6B65\\u8FD0\\u884C\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`# \\u68C0\\u67E5\\u5BB9\\u5668\\u4E2D\\u662F\\u5426\\u6709ssh\\u670D\\u52A1\n/etc/init.d/ssh status\n\n# \\u82E5\\u6CA1\\u6709\\u76F8\\u5173ssh\\u670D\\u52A1\\uFF0C\\u5219\\u9700\\u8FDB\\u884Cssh\\u5B89\\u88C5\nsudo apt-get update && apt-get install -y openssh-server\n\n# \\u8BBE\\u7F6E\\u5141\\u8BB8root \\u8FDC\\u7A0B\\u8BBF\\u95EE\nvim /etc/ssh/sshd_config\n\n\n# \\u5728#PermitRootLogin prohibit-password\\u4E0B\\u6DFB\\u52A0\\u5982\\u4E0B\\u5185\\u5BB9 \nPermitRootLogin yes \nRSAAuthentication yes \nPubkeyAuthentication yes\n\n\n# \\u91CD\\u542Fssh\\u670D\\u52A1\nservice ssh restart\n# or\nsystemctl restart sshd #\\u7531\\u4E8E\\u5BB9\\u5668\\u4E2D\\u4E0D\\u80FD\\u8C03\\u7528 systmctl\\u547D\\u4EE4,\\u6545\\u547D\\u4EE4\\u53EA\\u5728\\u5BBF\\u4E3B\\u673A\\u914D\\u7F6Essh\\u65F6\\u4F7F\\u7528 \\uFF0C\\u5BB9\\u5668\\u4E2D\\u4F7F\\u7528service\n\n\n# \\u914D\\u7F6E\\u5BB9\\u5668\\u5185\\u7684\\u7528\\u6237\\u5BC6\\u7801\npasswd\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u68C0\\u67E5\\u5BB9\\u5668\\u4E2D\\u662F\\u5426\\u6709ssh\\u670D\\u52A1\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"/etc/init.d/ssh\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" status\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u82E5\\u6CA1\\u6709\\u76F8\\u5173ssh\\u670D\\u52A1\\uFF0C\\u5219\\u9700\\u8FDB\\u884Cssh\\u5B89\\u88C5\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" apt-get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" update\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" && \"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"apt-get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -y\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" openssh-server\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8BBE\\u7F6E\\u5141\\u8BB8root \\u8FDC\\u7A0B\\u8BBF\\u95EE\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"vim\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /etc/ssh/sshd_config\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5728#PermitRootLogin prohibit-password\\u4E0B\\u6DFB\\u52A0\\u5982\\u4E0B\\u5185\\u5BB9 \"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"PermitRootLogin\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" yes\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"RSAAuthentication\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" yes\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"PubkeyAuthentication\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" yes\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u91CD\\u542Fssh\\u670D\\u52A1\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"service\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" restart\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# or\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" restart\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" sshd\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" #\\u7531\\u4E8E\\u5BB9\\u5668\\u4E2D\\u4E0D\\u80FD\\u8C03\\u7528 systmctl\\u547D\\u4EE4,\\u6545\\u547D\\u4EE4\\u53EA\\u5728\\u5BBF\\u4E3B\\u673A\\u914D\\u7F6Essh\\u65F6\\u4F7F\\u7528 \\uFF0C\\u5BB9\\u5668\\u4E2D\\u4F7F\\u7528service\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u914D\\u7F6E\\u5BB9\\u5668\\u5185\\u7684\\u7528\\u6237\\u5BC6\\u7801\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"passwd\"})})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u5F00\\u673A\\u81EA\\u542F\\u52A8\"}),`\n\\u5728\\u5BBF\\u4E3B\\u673A\\u4E0A\\u8BBE\\u7F6E\\u5F00\\u673A\\u81EA\\u542F\\u53EF\\u52A8`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`sudo systemctl enable ssh\n`,children:(0,e.jsx)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" enable\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"})]})})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u5BB9\\u5668\\u4E2D\\u8BBE\\u7F6E\\u5F00\\u673A\\u81EA\\u542F\\u52A8(\\u767B\\u9646\\u5BB9\\u5668\\u65F6\\uFF0C\\u5373\\u89E6\\u53D1)\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:` # \\u627E\\u5230\\u5E76\\u6253\\u5F00\\u6587\\u4EF6/root/.bashrc\nvim ~/.bashrc\n# \\u5728.bashrc\\u672B\\u5C3E\\u6DFB\\u52A0\\u5982\\u4E0B\\u4EE3\\u7801\nservice ssh start\n\nsource ~/.bashrc\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\" # \\u627E\\u5230\\u5E76\\u6253\\u5F00\\u6587\\u4EF6/root/.bashrc\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"vim\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ~/.bashrc\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5728.bashrc\\u672B\\u5C3E\\u6DFB\\u52A0\\u5982\\u4E0B\\u4EE3\\u7801\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"service\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" start\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"source\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ~/.bashrc\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u4E00\\u952E\\u521B\\u5EFA\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`\ndocker run -d -it \\\\\n  --name my-ubuntu-ssh \\\\\n  -p 7800:22 \n  -p 7801:80 \\\\\n  ubuntu:latest \\\\\n  /bin/bash -c \"apt-get update && apt-get install -y openssh-server && \\\\\n  sed -i 's/#PasswordAuthentication yes/' /etc/ssh/sshd_config && \\\\\n  sed -i 's/#PermitRootLogin yes/PermitRootLogin yes/' /etc/ssh/sshd_config && \\\\\n  /usr/sbin/sshd -D\"\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" run\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -d\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -it\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"  --name\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" my-ubuntu-ssh\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"  -p\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" 7800:22\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" \"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"  -p\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" 7801:80\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"  ubuntu:latest\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" \\\\\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"  /bin/bash\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -c\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"apt-get update && apt-get install -y openssh-server && '}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"\\\\\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"  sed -i 's/#PasswordAuthentication yes/' /etc/ssh/sshd_config && \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"\\\\\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"  sed -i 's/#PermitRootLogin yes/PermitRootLogin yes/' /etc/ssh/sshd_config && \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"\\\\\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'  /usr/sbin/sshd -D\"'})})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"docker run -d -it --name spanish -p 7800:22 -p 7801:8080  ubuntu-ssh:latest\"})]})}function C(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(t,l)})):t(l)}var b=C;return g(_);})();\n;return Component;"
    },
    "_id": "post/2024-07-29-Docker.md",
    "_raw": {
      "sourceFilePath": "post/2024-07-29-Docker.md",
      "sourceFileName": "2024-07-29-Docker.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-07-29-Docker"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-07-29-Docker",
    "slugAsParams": "2024-07-29-Docker"
  },
  {
    "title": "ubuntu 使用技巧",
    "tags": [
      "Ubuntu"
    ],
    "date": "2024-08-24T16:00:00.000Z",
    "body": {
      "raw": "\n> ecnu13: `ssh haiwen@172.23.137.29`\n\n## 基本命令\n\nrm [-rf] dirName\n\n参数：-r 将目录及以下之档案亦逐一删除，-f 强行删除，不需询问。\n\n## 科学上网\n\n科学上网：`source <(curl -s 172.23.148.93/s/ecnuproxy.sh)`\n\n关闭代理：`unset http_proxy https_proxy all_proxy`\n\n检测代理： `curl ipinfo.io`\n\n查看 ip: `ip a`\n\n查看 port: `/etc/ssh/sshd-config`\n\n## 内网穿透之 Tailscale\n\nTailscale 属于一种虚拟组网工具，把安装了 Tailscale 服务的机器，都放到同一个局域网，稳定连接\n\necnu5 内网 ip： 100.115.188.110 -p 49940\n\n## ssh\n\n```shell\napt-get install -y openssh-server\n# 设置登录密码\npasswd\n# 修改配置文件\nvim /etc/ssh/sshd_config\n# 开启root登录 PermitRootLogin yes\n# 开启密码认证 PasswordAuthentication yes\n\n# 查看 ssh 状态\nservice ssh status/start/restart\n\n# 开机自动启动ssh命令\nsudo systemctl enable ssh\n\n# 关闭ssh开机自动启动命令\nsudo systemctl disable ssh\n\n# 单次开启ssh\nsudo systemctl start ssh\n\n# 单次关闭ssh\nsudo systemctl stop ssh\n\n# 设置好后重启系统\nreboot\n\n#查看ssh是否启动，看到Active: active (running)即表示成功\nsudo systemctl status ssh\n\n```\n\nssh 链接时 将服务器的 8097 端口重定向到本机 18097 端口： `ssh -L 18097:127.0.0.1:8097 username@xx.xx.xx.xx -p PORT`\n\n## 查看占用空间\n\n`du -h --max-depth=1 |sort`\n\n查看终端：`echo $SHELL`\n\n设置默认终端：\n\n快捷键：\n\n切换桌面：ctrl+alt+方向键\n\n显示终端：ctrl+alt+T\n\n## 防火墙\n\n> 检查端口网站：[https://tool.chinaz.com/port](https://tool.chinaz.com/port)\n\n```shell\n# 查看端口是否开启（无返回信息则表示该端口未开放。）\nlsof -i:22\n# 查看当前主机在监听的端口\nnetstat -tlunp\nnetstat -tlunp | grep 22\n```\n\n> 常见的 linux 系统防火墙有：UFW、firewall、[iptables](https://so.csdn.net/so/search?q=iptables&spm=1001.2101.3001.7020)，\n> 其中，UFW 是 Debian 系列的默认防火墙，firewall 是红帽系列 7 及以上的防火墙（如 CentOS7.x）\n> 相互作用影响\n\n### ufw\n\n```shell\n# 防火墙状态/规则：inactive是关闭，active是开启\nsudo ufw status\n# 开启防火墙\nsudo ufw enable/disable\n# 重启防火墙\nsudo ufw reload\n#恢复初始化设置\nsudo ufw reset\n# 允许/拒绝访问20端口\nsudo ufw allow/deny 20[/tcp]\n# 批量打开\nsudo ufw allow 4900:5000/tcp\n# 比如删除端口\nsudo ufw delete allow 3690\n\n```\n\n### firewall-cmd\n\n```shell\n# 状态\nsudo firewall-cmd --state\n# 查看防火墙中允许被访问的端口号\nsudo firewall-cmd --list-all\nsudo firewall-cmd --zone=public --list-ports\n\n# 开启端口\nsudo firewall-cmd --zone=public --add-port=8885/tcp --permanent\n# 重启\nsudo firewall-cmd --reload\n# 关闭\nsudo firewall-cmd --zone=public --remove-port=7890/tcp --permanent\n\n```\n\n## 通信\n\n从服务器下载到本地：\n\n```bash\n#命令格式\nscp [-params] 用户名@计算机IP或者计算机名称:文件名   本地路径\n\n#示例\nscp -P 4900 -r haiwen@172.23.137.29:/data/jsq/pix2pix-zero/output  /Users/heavenmei/Documents/homework/CV/HW/p2p\n```\n\n从本地上传到服务器：\n\n```bash\n#命令格式\nscp  本地路径/文件名 用户名@计算机IP或者计算机名称:远程路径\n\n#示例\nscp  ./files_name.txt git@166.111.77.123:/home/shangyj/files\n\n```\n\n**参数**\n\n- `-r` : 复制\n- `-P`：port\n\n## pm2\n\n```bash\nnpm install pm2 -g\n\npm2 list\n\npm2 start\n\npm2 restart {app_name}\n\npm2 stop {app_name}\n\npm2 delete {app_name}\n\npm2 clean --all\n```\n\n## tmux\n\n[Tmux 配置：打造最适合自己的终端复用工具 - zuorn - 博客园](https://www.cnblogs.com/zuoruining/p/11074367.html)\n\n```bash\n#启动新session：\ntmux [new -s 会话名 -n 窗口名]\n#恢复session：\ntmux at [-t 会话名]\n#列出所有sessions：\ntmux ls\n#关闭session：\ntmux kill-session -t 会话名\n#关闭整个tmux服务器：\ntmux kill-server\n```\n\n​\n\n**vscode 中 tmux 无法选中复制？** vscode->setting->macOptionClickForcesSelection :true-> option+\n\n## Docker\n\n[https://blog.csdn.net/qq_38418314/article/details/125074080?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170329365416800186525040%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=170329365416800186525040&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-125074080-null-null.142](https://blog.csdn.net/qq_38418314/article/details/125074080?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170329365416800186525040%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=170329365416800186525040&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-125074080-null-null.142)v96pc_search_result_base7&utm_term=docker-compose%20%E5%90%AF%E5%8A%A8pytorch&spm=1018.2226.3001.4187\n\n### image\n\n**delete image**\n\n```bash\n\n# 删除单个镜像\ndocker rmi -f [image_id/image_name]\n# 删除多个镜像\ndocker rmi -f [image_id] [image_id]\n# 删除所有镜像\ndocker rmi -f $(docker images -aq)\n```\n\n​\n\n### container\n\n**run**\n\n```bash\ndocker run [params] [image_id/name]\n​\n--name=\"Name\" 容器名字\n-d 后台方式运行\n-it 指定交互方式运行，进入容器查看内容\n-p 8080:8080 (主机端口:容器端口)\n-gpus all : 指定gpu\n```\n\n​\n\n### copy container\n\n```bash\n# 查找正在运行的容器\ndocker ps\n# 将容器打包为镜像\ndocker commit [container_id/container_name] [image_name]\n# 查看镜像\ndocker images\n# 启动新的容器\ndocker run -it [image_name]\n```\n\n## 磁盘管理\n\n查看磁盘信息：`lsblk`\n\n## GPU\n\n`nvidia-smi` & `nvidia-smi -l` （自动实时刷新 GPU 的使用情况） 上图显示的显卡信息，第一行是版本信息，第二行是标题栏，第三行是具体的显卡信息。如果有多个显卡，就会有多行对应标题栏的信息。例如我上面显示了共 0~4 号，共 5 个卡。\n\nGPU：显卡编号，从 0 开始。 Fan：风扇转速，在 0~100%之间变动。这个速度是计算机期望的风扇转速，实际情况下如果风扇堵转，可能就不会显示具体转速值。有的设备不会返回转速，因为它不依赖风扇冷却，而是通过其他外设保持低温，比如我们实验室的服务器是常年放在空掉房间里面的。 Name：显卡名，以上都是 Tesla。 Temp：显卡内部的温度，以上分别是 54、49、46、50、39 摄氏度。 Perf：性能状态，从 P0 到 P12，P0 性能最大，P12 最小 。 Persistence-M：持续模式的状态开关，持续模式虽然耗能大，但是在新的 GPU 应用启动时，花费的时间更少。以上都是 Off 的状态。 Pwr：能耗表示。 Bus-Id：涉及 GPU 总线的相关信息。 Disp.A：是 Display Active 的意思，表示 GPU 的显示是否初始化。 Memory-Usage：显存的使用率。 GPU-Util：GPU 的利用率。 Compute M.：计算模式。 下面的 Process 显示每块 GPU 上每个进程所使用的显存情况。 显卡占用和 GPU 占用是两个不一样的东西，显卡是由 GPU 和显卡等组成的，显卡和 GPU 的关系有点类似于内存和 CPU 的关系，两个指标的占用率不一定是互相对应的。例如跑 tensorflow 代码的时候，可能显存占得多，GPU 占得少。\n\n**判断 cuda 是否可用：** `python -c \"import torch; print(torch.cuda.is_available())\"`\n\ntip： 内存使用： `free -m` cpu 使用：`top`\n",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var u=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),g=(l,n)=>{for(var a in n)s(l,a,{get:n[a],enumerable:!0})},i=(l,n,a,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of y(n))!m.call(l,r)&&r!==a&&s(l,r,{get:()=>n[r],enumerable:!(c=p(n,r))||c.enumerable});return l};var B=(l,n,a)=>(a=l!=null?h(F(l)):{},i(n||!l||!l.__esModule?s(a,\"default\",{value:l,enumerable:!0}):a,l)),E=l=>i(s({},\"__esModule\",{value:!0}),l);var o=u((w,d)=>{d.exports=_jsx_runtime});var b={};g(b,{default:()=>k,frontmatter:()=>f});var e=B(o()),f={title:\"ubuntu \\u4F7F\\u7528\\u6280\\u5DE7\",tags:[\"Ubuntu\"],date:\"2024-8-25\",layout:\"post\",categories:[\"Post\"]};function t(l){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",code:\"code\",h2:\"h2\",a:\"a\",span:\"span\",div:\"div\",figure:\"figure\",pre:\"pre\",h3:\"h3\",strong:\"strong\",ul:\"ul\",li:\"li\",del:\"del\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"ecnu13: \",(0,e.jsx)(n.code,{children:\"ssh haiwen@172.23.137.29\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u57FA\\u672C\\u547D\\u4EE4\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u57FA\\u672C\\u547D\\u4EE4\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u57FA\\u672C\\u547D\\u4EE4\"]}),`\n`,(0,e.jsx)(n.p,{children:\"rm [-rf] dirName\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u53C2\\u6570\\uFF1A-r \\u5C06\\u76EE\\u5F55\\u53CA\\u4EE5\\u4E0B\\u4E4B\\u6863\\u6848\\u4EA6\\u9010\\u4E00\\u5220\\u9664\\uFF0C-f \\u5F3A\\u884C\\u5220\\u9664\\uFF0C\\u4E0D\\u9700\\u8BE2\\u95EE\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u79D1\\u5B66\\u4E0A\\u7F51\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u79D1\\u5B66\\u4E0A\\u7F51\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u79D1\\u5B66\\u4E0A\\u7F51\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u79D1\\u5B66\\u4E0A\\u7F51\\uFF1A\",(0,e.jsx)(n.code,{children:\"source <(curl -s 172.23.148.93/s/ecnuproxy.sh)\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5173\\u95ED\\u4EE3\\u7406\\uFF1A\",(0,e.jsx)(n.code,{children:\"unset http_proxy https_proxy all_proxy\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u68C0\\u6D4B\\u4EE3\\u7406\\uFF1A \",(0,e.jsx)(n.code,{children:\"curl ipinfo.io\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u67E5\\u770B ip: \",(0,e.jsx)(n.code,{children:\"ip a\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u67E5\\u770B port: \",(0,e.jsx)(n.code,{children:\"/etc/ssh/sshd-config\"})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5185\\u7F51\\u7A7F\\u900F\\u4E4B-tailscale\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5185\\u7F51\\u7A7F\\u900F\\u4E4B-tailscale\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5185\\u7F51\\u7A7F\\u900F\\u4E4B Tailscale\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Tailscale \\u5C5E\\u4E8E\\u4E00\\u79CD\\u865A\\u62DF\\u7EC4\\u7F51\\u5DE5\\u5177\\uFF0C\\u628A\\u5B89\\u88C5\\u4E86 Tailscale \\u670D\\u52A1\\u7684\\u673A\\u5668\\uFF0C\\u90FD\\u653E\\u5230\\u540C\\u4E00\\u4E2A\\u5C40\\u57DF\\u7F51\\uFF0C\\u7A33\\u5B9A\\u8FDE\\u63A5\"}),`\n`,(0,e.jsx)(n.p,{children:\"ecnu5 \\u5185\\u7F51 ip\\uFF1A 100.115.188.110 -p 49940\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"ssh\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ssh\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"ssh\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`apt-get install -y openssh-server\n# \\u8BBE\\u7F6E\\u767B\\u5F55\\u5BC6\\u7801\npasswd\n# \\u4FEE\\u6539\\u914D\\u7F6E\\u6587\\u4EF6\nvim /etc/ssh/sshd_config\n# \\u5F00\\u542Froot\\u767B\\u5F55 PermitRootLogin yes\n# \\u5F00\\u542F\\u5BC6\\u7801\\u8BA4\\u8BC1 PasswordAuthentication yes\n\n# \\u67E5\\u770B ssh \\u72B6\\u6001\nservice ssh status/start/restart\n\n# \\u5F00\\u673A\\u81EA\\u52A8\\u542F\\u52A8ssh\\u547D\\u4EE4\nsudo systemctl enable ssh\n\n# \\u5173\\u95EDssh\\u5F00\\u673A\\u81EA\\u52A8\\u542F\\u52A8\\u547D\\u4EE4\nsudo systemctl disable ssh\n\n# \\u5355\\u6B21\\u5F00\\u542Fssh\nsudo systemctl start ssh\n\n# \\u5355\\u6B21\\u5173\\u95EDssh\nsudo systemctl stop ssh\n\n# \\u8BBE\\u7F6E\\u597D\\u540E\\u91CD\\u542F\\u7CFB\\u7EDF\nreboot\n\n#\\u67E5\\u770Bssh\\u662F\\u5426\\u542F\\u52A8\\uFF0C\\u770B\\u5230Active: active (running)\\u5373\\u8868\\u793A\\u6210\\u529F\nsudo systemctl status ssh\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"apt-get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -y\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" openssh-server\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8BBE\\u7F6E\\u767B\\u5F55\\u5BC6\\u7801\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"passwd\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u4FEE\\u6539\\u914D\\u7F6E\\u6587\\u4EF6\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"vim\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" /etc/ssh/sshd_config\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5F00\\u542Froot\\u767B\\u5F55 PermitRootLogin yes\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5F00\\u542F\\u5BC6\\u7801\\u8BA4\\u8BC1 PasswordAuthentication yes\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u770B ssh \\u72B6\\u6001\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"service\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" status/start/restart\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5F00\\u673A\\u81EA\\u52A8\\u542F\\u52A8ssh\\u547D\\u4EE4\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" enable\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5173\\u95EDssh\\u5F00\\u673A\\u81EA\\u52A8\\u542F\\u52A8\\u547D\\u4EE4\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" disable\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5355\\u6B21\\u5F00\\u542Fssh\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" start\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5355\\u6B21\\u5173\\u95EDssh\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" stop\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8BBE\\u7F6E\\u597D\\u540E\\u91CD\\u542F\\u7CFB\\u7EDF\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"reboot\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u67E5\\u770Bssh\\u662F\\u5426\\u542F\\u52A8\\uFF0C\\u770B\\u5230Active: active (running)\\u5373\\u8868\\u793A\\u6210\\u529F\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" systemctl\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" status\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ssh\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"ssh \\u94FE\\u63A5\\u65F6 \\u5C06\\u670D\\u52A1\\u5668\\u7684 8097 \\u7AEF\\u53E3\\u91CD\\u5B9A\\u5411\\u5230\\u672C\\u673A 18097 \\u7AEF\\u53E3\\uFF1A \",(0,e.jsx)(n.code,{children:\"ssh -L 18097:127.0.0.1:8097 username@xx.xx.xx.xx -p PORT\"})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u67E5\\u770B\\u5360\\u7528\\u7A7A\\u95F4\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u67E5\\u770B\\u5360\\u7528\\u7A7A\\u95F4\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u67E5\\u770B\\u5360\\u7528\\u7A7A\\u95F4\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"du -h --max-depth=1 |sort\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u67E5\\u770B\\u7EC8\\u7AEF\\uFF1A\",(0,e.jsx)(n.code,{children:\"echo $SHELL\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8BBE\\u7F6E\\u9ED8\\u8BA4\\u7EC8\\u7AEF\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5FEB\\u6377\\u952E\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5207\\u6362\\u684C\\u9762\\uFF1Actrl+alt+\\u65B9\\u5411\\u952E\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u663E\\u793A\\u7EC8\\u7AEF\\uFF1Actrl+alt+T\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u9632\\u706B\\u5899\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u9632\\u706B\\u5899\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u9632\\u706B\\u5899\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u68C0\\u67E5\\u7AEF\\u53E3\\u7F51\\u7AD9\\uFF1A\",(0,e.jsx)(n.a,{href:\"https://tool.chinaz.com/port\",children:\"https://tool.chinaz.com/port\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`# \\u67E5\\u770B\\u7AEF\\u53E3\\u662F\\u5426\\u5F00\\u542F\\uFF08\\u65E0\\u8FD4\\u56DE\\u4FE1\\u606F\\u5219\\u8868\\u793A\\u8BE5\\u7AEF\\u53E3\\u672A\\u5F00\\u653E\\u3002\\uFF09\nlsof -i:22\n# \\u67E5\\u770B\\u5F53\\u524D\\u4E3B\\u673A\\u5728\\u76D1\\u542C\\u7684\\u7AEF\\u53E3\nnetstat -tlunp\nnetstat -tlunp | grep 22\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u770B\\u7AEF\\u53E3\\u662F\\u5426\\u5F00\\u542F\\uFF08\\u65E0\\u8FD4\\u56DE\\u4FE1\\u606F\\u5219\\u8868\\u793A\\u8BE5\\u7AEF\\u53E3\\u672A\\u5F00\\u653E\\u3002\\uFF09\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"lsof\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -i:22\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u770B\\u5F53\\u524D\\u4E3B\\u673A\\u5728\\u76D1\\u542C\\u7684\\u7AEF\\u53E3\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"netstat\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -tlunp\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"netstat\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -tlunp\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" |\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" grep\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 22\"})]})]})})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5E38\\u89C1\\u7684 linux \\u7CFB\\u7EDF\\u9632\\u706B\\u5899\\u6709\\uFF1AUFW\\u3001firewall\\u3001\",(0,e.jsx)(n.a,{href:\"https://so.csdn.net/so/search?q=iptables&spm=1001.2101.3001.7020\",children:\"iptables\"}),`\\uFF0C\n\\u5176\\u4E2D\\uFF0CUFW \\u662F Debian \\u7CFB\\u5217\\u7684\\u9ED8\\u8BA4\\u9632\\u706B\\u5899\\uFF0Cfirewall \\u662F\\u7EA2\\u5E3D\\u7CFB\\u5217 7 \\u53CA\\u4EE5\\u4E0A\\u7684\\u9632\\u706B\\u5899\\uFF08\\u5982 CentOS7.x\\uFF09\n\\u76F8\\u4E92\\u4F5C\\u7528\\u5F71\\u54CD`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"ufw\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#ufw\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"ufw\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`# \\u9632\\u706B\\u5899\\u72B6\\u6001/\\u89C4\\u5219\\uFF1Ainactive\\u662F\\u5173\\u95ED\\uFF0Cactive\\u662F\\u5F00\\u542F\nsudo ufw status\n# \\u5F00\\u542F\\u9632\\u706B\\u5899\nsudo ufw enable/disable\n# \\u91CD\\u542F\\u9632\\u706B\\u5899\nsudo ufw reload\n#\\u6062\\u590D\\u521D\\u59CB\\u5316\\u8BBE\\u7F6E\nsudo ufw reset\n# \\u5141\\u8BB8/\\u62D2\\u7EDD\\u8BBF\\u95EE20\\u7AEF\\u53E3\nsudo ufw allow/deny 20[/tcp]\n# \\u6279\\u91CF\\u6253\\u5F00\nsudo ufw allow 4900:5000/tcp\n# \\u6BD4\\u5982\\u5220\\u9664\\u7AEF\\u53E3\nsudo ufw delete allow 3690\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u9632\\u706B\\u5899\\u72B6\\u6001/\\u89C4\\u5219\\uFF1Ainactive\\u662F\\u5173\\u95ED\\uFF0Cactive\\u662F\\u5F00\\u542F\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ufw\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" status\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5F00\\u542F\\u9632\\u706B\\u5899\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ufw\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" enable/disable\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u91CD\\u542F\\u9632\\u706B\\u5899\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ufw\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" reload\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u6062\\u590D\\u521D\\u59CB\\u5316\\u8BBE\\u7F6E\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ufw\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" reset\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5141\\u8BB8/\\u62D2\\u7EDD\\u8BBF\\u95EE20\\u7AEF\\u53E3\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ufw\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" allow/deny\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" 20[/tcp]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u6279\\u91CF\\u6253\\u5F00\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ufw\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" allow\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" 4900:5000/tcp\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u6BD4\\u5982\\u5220\\u9664\\u7AEF\\u53E3\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ufw\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" delete\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" allow\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 3690\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"firewall-cmd\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#firewall-cmd\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"firewall-cmd\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`# \\u72B6\\u6001\nsudo firewall-cmd --state\n# \\u67E5\\u770B\\u9632\\u706B\\u5899\\u4E2D\\u5141\\u8BB8\\u88AB\\u8BBF\\u95EE\\u7684\\u7AEF\\u53E3\\u53F7\nsudo firewall-cmd --list-all\nsudo firewall-cmd --zone=public --list-ports\n\n# \\u5F00\\u542F\\u7AEF\\u53E3\nsudo firewall-cmd --zone=public --add-port=8885/tcp --permanent\n# \\u91CD\\u542F\nsudo firewall-cmd --reload\n# \\u5173\\u95ED\nsudo firewall-cmd --zone=public --remove-port=7890/tcp --permanent\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u72B6\\u6001\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" firewall-cmd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --state\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u770B\\u9632\\u706B\\u5899\\u4E2D\\u5141\\u8BB8\\u88AB\\u8BBF\\u95EE\\u7684\\u7AEF\\u53E3\\u53F7\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" firewall-cmd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --list-all\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" firewall-cmd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --zone=public\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --list-ports\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5F00\\u542F\\u7AEF\\u53E3\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" firewall-cmd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --zone=public\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --add-port=8885/tcp\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --permanent\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u91CD\\u542F\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" firewall-cmd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --reload\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5173\\u95ED\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sudo\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" firewall-cmd\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --zone=public\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --remove-port=7890/tcp\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --permanent\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u901A\\u4FE1\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u901A\\u4FE1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u901A\\u4FE1\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u670D\\u52A1\\u5668\\u4E0B\\u8F7D\\u5230\\u672C\\u5730\\uFF1A\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`#\\u547D\\u4EE4\\u683C\\u5F0F\nscp [-params] \\u7528\\u6237\\u540D@\\u8BA1\\u7B97\\u673AIP\\u6216\\u8005\\u8BA1\\u7B97\\u673A\\u540D\\u79F0:\\u6587\\u4EF6\\u540D   \\u672C\\u5730\\u8DEF\\u5F84\n\n#\\u793A\\u4F8B\nscp -P 4900 -r haiwen@172.23.137.29:/data/jsq/pix2pix-zero/output  /Users/heavenmei/Documents/homework/CV/HW/p2p\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u547D\\u4EE4\\u683C\\u5F0F\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"scp\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [-params] \\u7528\\u6237\\u540D@\\u8BA1\\u7B97\\u673AIP\\u6216\\u8005\\u8BA1\\u7B97\\u673A\\u540D\\u79F0:\\u6587\\u4EF6\\u540D   \\u672C\\u5730\\u8DEF\\u5F84\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u793A\\u4F8B\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"scp\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -P\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 4900\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -r\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" haiwen@172.23.137.29:/data/jsq/pix2pix-zero/output\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"  /Users/heavenmei/Documents/homework/CV/HW/p2p\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u672C\\u5730\\u4E0A\\u4F20\\u5230\\u670D\\u52A1\\u5668\\uFF1A\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`#\\u547D\\u4EE4\\u683C\\u5F0F\nscp  \\u672C\\u5730\\u8DEF\\u5F84/\\u6587\\u4EF6\\u540D \\u7528\\u6237\\u540D@\\u8BA1\\u7B97\\u673AIP\\u6216\\u8005\\u8BA1\\u7B97\\u673A\\u540D\\u79F0:\\u8FDC\\u7A0B\\u8DEF\\u5F84\n\n#\\u793A\\u4F8B\nscp  ./files_name.txt git@166.111.77.123:/home/shangyj/files\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u547D\\u4EE4\\u683C\\u5F0F\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"scp\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"  \\u672C\\u5730\\u8DEF\\u5F84/\\u6587\\u4EF6\\u540D\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" \\u7528\\u6237\\u540D@\\u8BA1\\u7B97\\u673AIP\\u6216\\u8005\\u8BA1\\u7B97\\u673A\\u540D\\u79F0:\\u8FDC\\u7A0B\\u8DEF\\u5F84\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u793A\\u4F8B\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"scp\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"  ./files_name.txt\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" git@166.111.77.123:/home/shangyj/files\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u53C2\\u6570\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"-r\"}),\" : \\u590D\\u5236\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"-P\"}),\"\\uFF1Aport\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"pm2\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#pm2\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"pm2\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`npm install pm2 -g\n\npm2 list\n\npm2 start\n\npm2 restart {app_name}\n\npm2 stop {app_name}\n\npm2 delete {app_name}\n\npm2 clean --all\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" pm2\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -g\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"pm2\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" list\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"pm2\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" start\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"pm2\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" restart\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" {app_name}\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"pm2\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" stop\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" {app_name}\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"pm2\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" delete\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" {app_name}\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"pm2\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" clean\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --all\"})]})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"tmux\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#tmux\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"tmux\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://www.cnblogs.com/zuoruining/p/11074367.html\",children:\"Tmux \\u914D\\u7F6E\\uFF1A\\u6253\\u9020\\u6700\\u9002\\u5408\\u81EA\\u5DF1\\u7684\\u7EC8\\u7AEF\\u590D\\u7528\\u5DE5\\u5177 - zuorn - \\u535A\\u5BA2\\u56ED\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`#\\u542F\\u52A8\\u65B0session\\uFF1A\ntmux [new -s \\u4F1A\\u8BDD\\u540D -n \\u7A97\\u53E3\\u540D]\n#\\u6062\\u590Dsession\\uFF1A\ntmux at [-t \\u4F1A\\u8BDD\\u540D]\n#\\u5217\\u51FA\\u6240\\u6709sessions\\uFF1A\ntmux ls\n#\\u5173\\u95EDsession\\uFF1A\ntmux kill-session -t \\u4F1A\\u8BDD\\u540D\n#\\u5173\\u95ED\\u6574\\u4E2Atmux\\u670D\\u52A1\\u5668\\uFF1A\ntmux kill-server\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u542F\\u52A8\\u65B0session\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"tmux\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [new \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"-s\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" \\u4F1A\\u8BDD\\u540D\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -n\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" \\u7A97\\u53E3\\u540D]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u6062\\u590Dsession\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"tmux\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" at\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [-t \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"\\u4F1A\\u8BDD\\u540D]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u5217\\u51FA\\u6240\\u6709sessions\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"tmux\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ls\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u5173\\u95EDsession\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"tmux\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" kill-session\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -t\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" \\u4F1A\\u8BDD\\u540D\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u5173\\u95ED\\u6574\\u4E2Atmux\\u670D\\u52A1\\u5668\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"tmux\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" kill-server\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u200B\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"vscode \\u4E2D tmux \\u65E0\\u6CD5\\u9009\\u4E2D\\u590D\\u5236\\uFF1F\"}),\" vscode->setting->macOptionClickForcesSelection :true-> option+\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"docker\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#docker\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsxs)(n.a,{href:\"https://blog.csdn.net/qq_38418314/article/details/125074080?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170329365416800186525040%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=170329365416800186525040&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-125074080-null-null.142\",children:[\"https://blog.csdn.net/qq_38418314/article/details/125074080?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170329365416800186525040%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=170329365416800186525040&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2\",(0,e.jsx)(n.del,{children:\"all\"}),\"first_rank_ecpm_v1~rank_v31_ecpm-1-125074080-null-null.142\"]}),\"v96pc_search_result_base7&utm_term=docker-compose%20%E5%90%AF%E5%8A%A8pytorch&spm=1018.2226.3001.4187\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"image\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#image\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"image\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"delete image\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`\n# \\u5220\\u9664\\u5355\\u4E2A\\u955C\\u50CF\ndocker rmi -f [image_id/image_name]\n# \\u5220\\u9664\\u591A\\u4E2A\\u955C\\u50CF\ndocker rmi -f [image_id] [image_id]\n# \\u5220\\u9664\\u6240\\u6709\\u955C\\u50CF\ndocker rmi -f $(docker images -aq)\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5220\\u9664\\u5355\\u4E2A\\u955C\\u50CF\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" rmi\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -f\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [image_id/image_name]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5220\\u9664\\u591A\\u4E2A\\u955C\\u50CF\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" rmi\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -f\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [image_id] [image_id]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5220\\u9664\\u6240\\u6709\\u955C\\u50CF\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" rmi\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -f\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" $(\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" images\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -aq\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\")\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u200B\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"container\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#container\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"container\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"run\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`docker run [params] [image_id/name]\n\\u200B\n--name=\"Name\" \\u5BB9\\u5668\\u540D\\u5B57\n-d \\u540E\\u53F0\\u65B9\\u5F0F\\u8FD0\\u884C\n-it \\u6307\\u5B9A\\u4EA4\\u4E92\\u65B9\\u5F0F\\u8FD0\\u884C\\uFF0C\\u8FDB\\u5165\\u5BB9\\u5668\\u67E5\\u770B\\u5185\\u5BB9\n-p 8080:8080 (\\u4E3B\\u673A\\u7AEF\\u53E3:\\u5BB9\\u5668\\u7AEF\\u53E3)\n-gpus all : \\u6307\\u5B9Agpu\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" run\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [params] [image_id/name]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"\\u200B\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"--name\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"Name\"'}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" \\u5BB9\\u5668\\u540D\\u5B57\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"-d\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" \\u540E\\u53F0\\u65B9\\u5F0F\\u8FD0\\u884C\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"-it\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" \\u6307\\u5B9A\\u4EA4\\u4E92\\u65B9\\u5F0F\\u8FD0\\u884C\\uFF0C\\u8FDB\\u5165\\u5BB9\\u5668\\u67E5\\u770B\\u5185\\u5BB9\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"-p\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" 8080:8080\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\\u4E3B\\u673A\\u7AEF\\u53E3:\\u5BB9\\u5668\\u7AEF\\u53E3)\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"-gpus\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" all\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" :\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" \\u6307\\u5B9Agpu\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u200B\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"copy-container\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#copy-container\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"copy container\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u67E5\\u627E\\u6B63\\u5728\\u8FD0\\u884C\\u7684\\u5BB9\\u5668\ndocker ps\n# \\u5C06\\u5BB9\\u5668\\u6253\\u5305\\u4E3A\\u955C\\u50CF\ndocker commit [container_id/container_name] [image_name]\n# \\u67E5\\u770B\\u955C\\u50CF\ndocker images\n# \\u542F\\u52A8\\u65B0\\u7684\\u5BB9\\u5668\ndocker run -it [image_name]\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u627E\\u6B63\\u5728\\u8FD0\\u884C\\u7684\\u5BB9\\u5668\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" ps\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u5C06\\u5BB9\\u5668\\u6253\\u5305\\u4E3A\\u955C\\u50CF\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" commit\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [container_id/container_name] [image_name]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u770B\\u955C\\u50CF\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" images\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u542F\\u52A8\\u65B0\\u7684\\u5BB9\\u5668\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"docker\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" run\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -it\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [image_name]\"})]})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u78C1\\u76D8\\u7BA1\\u7406\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u78C1\\u76D8\\u7BA1\\u7406\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u78C1\\u76D8\\u7BA1\\u7406\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u67E5\\u770B\\u78C1\\u76D8\\u4FE1\\u606F\\uFF1A\",(0,e.jsx)(n.code,{children:\"lsblk\"})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"gpu\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#gpu\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"GPU\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"nvidia-smi\"}),\" & \",(0,e.jsx)(n.code,{children:\"nvidia-smi -l\"}),\" \\uFF08\\u81EA\\u52A8\\u5B9E\\u65F6\\u5237\\u65B0 GPU \\u7684\\u4F7F\\u7528\\u60C5\\u51B5\\uFF09 \\u4E0A\\u56FE\\u663E\\u793A\\u7684\\u663E\\u5361\\u4FE1\\u606F\\uFF0C\\u7B2C\\u4E00\\u884C\\u662F\\u7248\\u672C\\u4FE1\\u606F\\uFF0C\\u7B2C\\u4E8C\\u884C\\u662F\\u6807\\u9898\\u680F\\uFF0C\\u7B2C\\u4E09\\u884C\\u662F\\u5177\\u4F53\\u7684\\u663E\\u5361\\u4FE1\\u606F\\u3002\\u5982\\u679C\\u6709\\u591A\\u4E2A\\u663E\\u5361\\uFF0C\\u5C31\\u4F1A\\u6709\\u591A\\u884C\\u5BF9\\u5E94\\u6807\\u9898\\u680F\\u7684\\u4FE1\\u606F\\u3002\\u4F8B\\u5982\\u6211\\u4E0A\\u9762\\u663E\\u793A\\u4E86\\u5171 0~4 \\u53F7\\uFF0C\\u5171 5 \\u4E2A\\u5361\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"GPU\\uFF1A\\u663E\\u5361\\u7F16\\u53F7\\uFF0C\\u4ECE 0 \\u5F00\\u59CB\\u3002 Fan\\uFF1A\\u98CE\\u6247\\u8F6C\\u901F\\uFF0C\\u5728 0~100%\\u4E4B\\u95F4\\u53D8\\u52A8\\u3002\\u8FD9\\u4E2A\\u901F\\u5EA6\\u662F\\u8BA1\\u7B97\\u673A\\u671F\\u671B\\u7684\\u98CE\\u6247\\u8F6C\\u901F\\uFF0C\\u5B9E\\u9645\\u60C5\\u51B5\\u4E0B\\u5982\\u679C\\u98CE\\u6247\\u5835\\u8F6C\\uFF0C\\u53EF\\u80FD\\u5C31\\u4E0D\\u4F1A\\u663E\\u793A\\u5177\\u4F53\\u8F6C\\u901F\\u503C\\u3002\\u6709\\u7684\\u8BBE\\u5907\\u4E0D\\u4F1A\\u8FD4\\u56DE\\u8F6C\\u901F\\uFF0C\\u56E0\\u4E3A\\u5B83\\u4E0D\\u4F9D\\u8D56\\u98CE\\u6247\\u51B7\\u5374\\uFF0C\\u800C\\u662F\\u901A\\u8FC7\\u5176\\u4ED6\\u5916\\u8BBE\\u4FDD\\u6301\\u4F4E\\u6E29\\uFF0C\\u6BD4\\u5982\\u6211\\u4EEC\\u5B9E\\u9A8C\\u5BA4\\u7684\\u670D\\u52A1\\u5668\\u662F\\u5E38\\u5E74\\u653E\\u5728\\u7A7A\\u6389\\u623F\\u95F4\\u91CC\\u9762\\u7684\\u3002 Name\\uFF1A\\u663E\\u5361\\u540D\\uFF0C\\u4EE5\\u4E0A\\u90FD\\u662F Tesla\\u3002 Temp\\uFF1A\\u663E\\u5361\\u5185\\u90E8\\u7684\\u6E29\\u5EA6\\uFF0C\\u4EE5\\u4E0A\\u5206\\u522B\\u662F 54\\u300149\\u300146\\u300150\\u300139 \\u6444\\u6C0F\\u5EA6\\u3002 Perf\\uFF1A\\u6027\\u80FD\\u72B6\\u6001\\uFF0C\\u4ECE P0 \\u5230 P12\\uFF0CP0 \\u6027\\u80FD\\u6700\\u5927\\uFF0CP12 \\u6700\\u5C0F \\u3002 Persistence-M\\uFF1A\\u6301\\u7EED\\u6A21\\u5F0F\\u7684\\u72B6\\u6001\\u5F00\\u5173\\uFF0C\\u6301\\u7EED\\u6A21\\u5F0F\\u867D\\u7136\\u8017\\u80FD\\u5927\\uFF0C\\u4F46\\u662F\\u5728\\u65B0\\u7684 GPU \\u5E94\\u7528\\u542F\\u52A8\\u65F6\\uFF0C\\u82B1\\u8D39\\u7684\\u65F6\\u95F4\\u66F4\\u5C11\\u3002\\u4EE5\\u4E0A\\u90FD\\u662F Off \\u7684\\u72B6\\u6001\\u3002 Pwr\\uFF1A\\u80FD\\u8017\\u8868\\u793A\\u3002 Bus-Id\\uFF1A\\u6D89\\u53CA GPU \\u603B\\u7EBF\\u7684\\u76F8\\u5173\\u4FE1\\u606F\\u3002 Disp.A\\uFF1A\\u662F Display Active \\u7684\\u610F\\u601D\\uFF0C\\u8868\\u793A GPU \\u7684\\u663E\\u793A\\u662F\\u5426\\u521D\\u59CB\\u5316\\u3002 Memory-Usage\\uFF1A\\u663E\\u5B58\\u7684\\u4F7F\\u7528\\u7387\\u3002 GPU-Util\\uFF1AGPU \\u7684\\u5229\\u7528\\u7387\\u3002 Compute M.\\uFF1A\\u8BA1\\u7B97\\u6A21\\u5F0F\\u3002 \\u4E0B\\u9762\\u7684 Process \\u663E\\u793A\\u6BCF\\u5757 GPU \\u4E0A\\u6BCF\\u4E2A\\u8FDB\\u7A0B\\u6240\\u4F7F\\u7528\\u7684\\u663E\\u5B58\\u60C5\\u51B5\\u3002 \\u663E\\u5361\\u5360\\u7528\\u548C GPU \\u5360\\u7528\\u662F\\u4E24\\u4E2A\\u4E0D\\u4E00\\u6837\\u7684\\u4E1C\\u897F\\uFF0C\\u663E\\u5361\\u662F\\u7531 GPU \\u548C\\u663E\\u5361\\u7B49\\u7EC4\\u6210\\u7684\\uFF0C\\u663E\\u5361\\u548C GPU \\u7684\\u5173\\u7CFB\\u6709\\u70B9\\u7C7B\\u4F3C\\u4E8E\\u5185\\u5B58\\u548C CPU \\u7684\\u5173\\u7CFB\\uFF0C\\u4E24\\u4E2A\\u6307\\u6807\\u7684\\u5360\\u7528\\u7387\\u4E0D\\u4E00\\u5B9A\\u662F\\u4E92\\u76F8\\u5BF9\\u5E94\\u7684\\u3002\\u4F8B\\u5982\\u8DD1 tensorflow \\u4EE3\\u7801\\u7684\\u65F6\\u5019\\uFF0C\\u53EF\\u80FD\\u663E\\u5B58\\u5360\\u5F97\\u591A\\uFF0CGPU \\u5360\\u5F97\\u5C11\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u5224\\u65AD cuda \\u662F\\u5426\\u53EF\\u7528\\uFF1A\"}),\" \",(0,e.jsx)(n.code,{children:'python -c \"import torch; print(torch.cuda.is_available())\"'})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"tip\\uFF1A \\u5185\\u5B58\\u4F7F\\u7528\\uFF1A \",(0,e.jsx)(n.code,{children:\"free -m\"}),\" cpu \\u4F7F\\u7528\\uFF1A\",(0,e.jsx)(n.code,{children:\"top\"})]})]})}function C(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(t,l)})):t(l)}var k=C;return E(b);})();\n;return Component;"
    },
    "_id": "post/2024-08-25-ubuntu-skill.md",
    "_raw": {
      "sourceFilePath": "post/2024-08-25-ubuntu-skill.md",
      "sourceFileName": "2024-08-25-ubuntu-skill.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-08-25-ubuntu-skill"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-08-25-ubuntu-skill",
    "slugAsParams": "2024-08-25-ubuntu-skill"
  },
  {
    "title": "React+Webpack 简易框架",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": "编写markdown文件，利用前端技术栈搭建静态网站，部署GitHub Page",
    "date": "2024-09-29T00:00:00.000Z",
    "body": {
      "raw": "\n## 项目初始化\n首先我们创建一个目录，初始化 npm,得到一个**package.json**文件。\n```bash\nmkdir react-cli\ncd react-cli\nnpm init -y\n# or\nyarn init\n\n```\n\n\n## 配置webpack\n\n```bash\nnpm install webpack webpack-cli webpack-dev-server html-webpack-plugin -D\n```\n- 安装webpack和相关依赖。\n- **webpack-dev-server**是开启开发环境的服务\n- **html-webpack-plugin**：该插件将为你生成一个 HTML5 文件， 在 body 中使用 `script` 标签引入你所有 webpack 生成的 bundle\n\n\n手动创建目录结构\n```diff\n react-cli\n  |- node_modules\n  |- package.json\n  |- package-lock.json\n+ |- public\n+   |- index.html        //入口文件\n+ |- src\n+   |- index.js          \n+ |- webpack.config.js    //环境配置\n+ |- .babelrc            // babel\n```\n\n\n**webpack.config.js** \n```js\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'bundle.js',\n  },\n  devServer: {\n    historyApiFallback: true, // 热更新\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './public/index.html',\n    }),\n  ],\n  resolve: {\n    extensions: ['*', '.jsx', '.tsx', '.ts', '.js'],\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n    },\n  },\n};\n\n```\n\n\n**index.html**\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>react-cli</title>\n</head>\n<body>\n  <div id=\"root\"></div>\n</body>\n</html>\n\n```\n\n\n**index.js**\n```js\nconst root = document.getElementById('root');\nroot.innerHTML = '<div>Hello World</div>';\n```\n\n\n修改package.json文件，加上dev命令。\n```json\n  \"scripts\": {\n    \"dev\": \"webpack-dev-server --mode development --open\",\n    \"build\": \"webpack --mode production\"\n  },\n\n```\n\n\n然后控制台`npm run dev`回车，打开网页\n\n\n## 配置React\n\n```bash\nnpm install --save react react-dom react-router-dom\n```\n- **react-router-dom*** 路径管理\n\n若采用jsx形式安装babel、loader等插件（ts可跳过直接配置ts-loader）\n```zsh\nnpm install babel-loader @babel/core @babel/preset-env @babel/preset-react -D\n```\n\n- **@babel/core**:  babel核心包。Babel是一个JavaScript编译器\n- **@babel/preset-react**: JSX 转换JS\n- **babel-loader**: 转义 js 文件代码的 loader\n- **@babel/preset-env**: ES6转ES5\n\n\n修改项目目录\n```diff\n react-cli\n  |- node_modules\n  |- package.json\n  |- package-lock.json\n  |- public\n     |- index.html        //入口文件\n  |- src\n+   |- index.jsx    \n-   |- index.js             \n+ |- webpack.config.js    //环境配置\n```\n\n\n```js\nmodule.exports = {\n  entry: './src/index.jsx',\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.js|jsx$/,\n        exclude: /node_modules/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env', '@babel/preset-react'],\n          },\n        },\n      },\n    ],\n  },\n  // ...\n};\n```\n\n**index.jsx**\n```tsx\nimport React from 'react';\nimport { createRoot } from 'react-dom/client';\n\nfunction App() {\n  return <div>Hello World</div>;\n}\n\nconst container = document.getElementById('root');\n// createRoot(container!) if you use TypeScript\nconst root = createRoot(container);\n\nroot.render(<App />);\n\n```\n\n\n\n## 配置css&sass\n\n安装样式文件相关的loader，在webpack 5 中，可以使用内置的**Asset Modules**处理图像和字体，我们不用额外安装。\n```bash\nnpm install --save-dev style-loader css-loader sass sass-loader\n```\n\n修改**webpack.config.js** \n```js\n\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /css$/i,    //匹配css、scss文件\n        use: [\"style-loader\", \"css-loader\", \"sass-loader\"] // 注意执行顺序是后往前\n      },\n      {\n        test: /.(png|jpg|jpeg|svg|gif)$/i,\n        type: \"asset/resource\"\n      },\n      {\n        test: /.(woff|woff2|eot|ttf|otf)$/i,\n        type: \"asset/resource\"\n      }\n    ],\n  },\n};\n```\n\n这样即可创建css/sass文件\n\n## 配置TS\n```zsh\nnpm i -D typescript ts-loader\n```\n\n配置react相应的types\n```bash\nnpm i --save-dev @types/react @types/react-dom\n```\n\n修改**webpack.config.js** \n```js\n\nmodule.exports = {\n entry: './src/index.tsx',\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.tsx?$/,\n        use: 'ts-loader',\n        exclude: '/node-modules/',\n      },\n    ],\n  },\n};\n```\n\n\n新建 **tsconfig.json**\n```json\n{\n  \"compilerOptions\": {\n    \"outDir\": \"./dist/\",\n    \"sourceMap\": true,\n    \"strict\": true,\n    \"noImplicitReturns\": true,\n    \"noImplicitAny\": true,\n    \"module\": \"es6\",\n    \"moduleResolution\": \"node\",\n    \"allowSyntheticDefaultImports\": true,\n    \"esModuleInterop\": true,\n    \"target\": \"es5\",\n    \"allowJs\": true,\n    \"jsx\": \"react-jsx\",\n    \"paths\": {\n      \"@/*\": [\n        \"./src/*\"\n      ]\n    }\n  },\n  \"include\": [\n    \"./src/**/*\"\n  ]\n}\n```",
      "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var u=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var r in e)c(l,r,{get:e[r],enumerable:!0})},o=(l,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of E(e))!F.call(l,a)&&a!==r&&c(l,a,{get:()=>e[a],enumerable:!(s=p(e,a))||s.enumerable});return l};var m=(l,e,r)=>(r=l!=null?h(y(l)):{},o(e||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),b=l=>o(c({},\"__esModule\",{value:!0}),l);var t=u((v,d)=>{d.exports=_jsx_runtime});var f={};g(f,{default:()=>C,frontmatter:()=>B});var n=m(t()),B={title:\"React+Webpack \\u7B80\\u6613\\u6846\\u67B6\",subtitle:null,layout:\"post\",date:new Date(1727568e6),author:\"heavenmei\",categories:[\"Post\"],description:\"\\u7F16\\u5199markdown\\u6587\\u4EF6\\uFF0C\\u5229\\u7528\\u524D\\u7AEF\\u6280\\u672F\\u6808\\u642D\\u5EFA\\u9759\\u6001\\u7F51\\u7AD9\\uFF0C\\u90E8\\u7F72GitHub Page\",tags:[\"Front\"],image:null};function i(l){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",ul:\"ul\",li:\"li\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"\\u9879\\u76EE\\u521D\\u59CB\\u5316\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u9879\\u76EE\\u521D\\u59CB\\u5316\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u9879\\u76EE\\u521D\\u59CB\\u5316\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148\\u6211\\u4EEC\\u521B\\u5EFA\\u4E00\\u4E2A\\u76EE\\u5F55\\uFF0C\\u521D\\u59CB\\u5316 npm,\\u5F97\\u5230\\u4E00\\u4E2A\",(0,n.jsx)(e.strong,{children:\"package.json\"}),\"\\u6587\\u4EF6\\u3002\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`mkdir react-cli\ncd react-cli\nnpm init -y\n# or\nyarn init\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"mkdir\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" react-cli\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"cd\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" react-cli\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" init\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -y\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# or\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" init\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u914D\\u7F6Ewebpack\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u914D\\u7F6Ewebpack\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u914D\\u7F6Ewebpack\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`npm install webpack webpack-cli webpack-dev-server html-webpack-plugin -D\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" webpack\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" webpack-cli\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" webpack-dev-server\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" html-webpack-plugin\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"})]})})})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u5B89\\u88C5webpack\\u548C\\u76F8\\u5173\\u4F9D\\u8D56\\u3002\"}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"webpack-dev-server\"}),\"\\u662F\\u5F00\\u542F\\u5F00\\u53D1\\u73AF\\u5883\\u7684\\u670D\\u52A1\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"html-webpack-plugin\"}),\"\\uFF1A\\u8BE5\\u63D2\\u4EF6\\u5C06\\u4E3A\\u4F60\\u751F\\u6210\\u4E00\\u4E2A HTML5 \\u6587\\u4EF6\\uFF0C \\u5728 body \\u4E2D\\u4F7F\\u7528\\xA0\",(0,n.jsx)(e.code,{children:\"script\"}),\"\\xA0\\u6807\\u7B7E\\u5F15\\u5165\\u4F60\\u6240\\u6709 webpack \\u751F\\u6210\\u7684 bundle\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u624B\\u52A8\\u521B\\u5EFA\\u76EE\\u5F55\\u7ED3\\u6784\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"diff\",\"data-theme\":\"github-dark\",raw:` react-cli\n  |- node_modules\n  |- package.json\n  |- package-lock.json\n+ |- public\n+   |- index.html        //\\u5165\\u53E3\\u6587\\u4EF6\n+ |- src\n+   |- index.js          \n+ |- webpack.config.js    //\\u73AF\\u5883\\u914D\\u7F6E\n+ |- .babelrc            // babel\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"diff\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" react-cli\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  |- node_modules\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  |- package.json\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  |- package-lock.json\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"+ |- public\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"+   |- index.html        //\\u5165\\u53E3\\u6587\\u4EF6\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"+ |- src\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"+   |- index.js          \"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"+ |- webpack.config.js    //\\u73AF\\u5883\\u914D\\u7F6E\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"+ |- .babelrc            // babel\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"webpack.config.js\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`const path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'bundle.js',\n  },\n  devServer: {\n    historyApiFallback: true, // \\u70ED\\u66F4\\u65B0\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './public/index.html',\n    }),\n  ],\n  resolve: {\n    extensions: ['*', '.jsx', '.tsx', '.ts', '.js'],\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n    },\n  },\n};\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" path\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'path'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" HtmlWebpackPlugin\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'html-webpack-plugin'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"module\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"exports\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  entry: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'./src/index.js'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  output: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    path: path.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(__dirname, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'dist'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    filename: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'bundle.js'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  devServer: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    historyApiFallback: \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u70ED\\u66F4\\u65B0\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  plugins: [\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" HtmlWebpackPlugin\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      template: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'./public/index.html'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }),\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ],\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  resolve: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    extensions: [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'*'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'.jsx'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'.tsx'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'.ts'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'.js'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    alias: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"      '@'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": path.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(__dirname, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'./src'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"index.html\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"html\",\"data-theme\":\"github-dark\",raw:`<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>react-cli</title>\n</head>\n<body>\n  <div id=\"root\"></div>\n</body>\n</html>\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"html\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<!\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"DOCTYPE\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" html\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"html\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" lang\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"en\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"head\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"meta\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" charset\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"UTF-8\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"meta\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" http-equiv\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"X-UA-Compatible\"'}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" content\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"IE=edge\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"meta\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" name\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"viewport\"'}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" content\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"width=device-width, initial-scale=1.0\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"title\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">react-cli</\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"title\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"head\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"body\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" id\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"root\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"body\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"html\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"index.js\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`const root = document.getElementById('root');\nroot.innerHTML = '<div>Hello World</div>';\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" root\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getElementById\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'root'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"root.innerHTML \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '<div>Hello World</div>'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4FEE\\u6539package.json\\u6587\\u4EF6\\uFF0C\\u52A0\\u4E0Adev\\u547D\\u4EE4\\u3002\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`  \"scripts\": {\n    \"dev\": \"webpack-dev-server --mode development --open\",\n    \"build\": \"webpack --mode production\"\n  },\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'  \"scripts\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"dev\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"webpack-dev-server --mode development --open\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"build\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"webpack --mode production\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E\\u63A7\\u5236\\u53F0\",(0,n.jsx)(e.code,{children:\"npm run dev\"}),\"\\u56DE\\u8F66\\uFF0C\\u6253\\u5F00\\u7F51\\u9875\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u914D\\u7F6Ereact\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u914D\\u7F6Ereact\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u914D\\u7F6EReact\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`npm install --save react react-dom react-router-dom\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --save\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" react\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" react-dom\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" react-router-dom\"})]})})})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"react-router-dom\"}),\"* \\u8DEF\\u5F84\\u7BA1\\u7406\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u82E5\\u91C7\\u7528jsx\\u5F62\\u5F0F\\u5B89\\u88C5babel\\u3001loader\\u7B49\\u63D2\\u4EF6\\uFF08ts\\u53EF\\u8DF3\\u8FC7\\u76F4\\u63A5\\u914D\\u7F6Ets-loader\\uFF09\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"zsh\",\"data-theme\":\"github-dark\",raw:`npm install babel-loader @babel/core @babel/preset-env @babel/preset-react -D\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"zsh\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" babel-loader\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @babel/core\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @babel/preset-env\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @babel/preset-react\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"})]})})})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"@babel/core\"}),\":  babel\\u6838\\u5FC3\\u5305\\u3002Babel\\u662F\\u4E00\\u4E2AJavaScript\\u7F16\\u8BD1\\u5668\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"@babel/preset-react\"}),\": JSX \\u8F6C\\u6362JS\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"babel-loader\"}),\": \\u8F6C\\u4E49 js \\u6587\\u4EF6\\u4EE3\\u7801\\u7684 loader\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"@babel/preset-env\"}),\": ES6\\u8F6CES5\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4FEE\\u6539\\u9879\\u76EE\\u76EE\\u5F55\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"diff\",\"data-theme\":\"github-dark\",raw:` react-cli\n  |- node_modules\n  |- package.json\n  |- package-lock.json\n  |- public\n     |- index.html        //\\u5165\\u53E3\\u6587\\u4EF6\n  |- src\n+   |- index.jsx    \n-   |- index.js             \n+ |- webpack.config.js    //\\u73AF\\u5883\\u914D\\u7F6E\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"diff\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" react-cli\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  |- node_modules\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  |- package.json\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  |- package-lock.json\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  |- public\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"     |- index.html        //\\u5165\\u53E3\\u6587\\u4EF6\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  |- src\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"+   |- index.jsx    \"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\"},children:\"-   |- index.js             \"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"+ |- webpack.config.js    //\\u73AF\\u5883\\u914D\\u7F6E\"})})]})})})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`module.exports = {\n  entry: './src/index.jsx',\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\\\.js|jsx$/,\n        exclude: /node_modules/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env', '@babel/preset-react'],\n          },\n        },\n      },\n    ],\n  },\n  // ...\n};\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"module\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"exports\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  entry: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'./src/index.jsx'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // ...\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  module: {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    rules: [\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        test:\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\",fontWeight:\"bold\"},children:\"\\\\.\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"js\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"jsx\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        exclude:\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"node_modules\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        use: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          loader: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'babel-loader'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          options: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"            presets: [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'@babel/preset-env'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'@babel/preset-react'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // ...\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"index.jsx\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"tsx\",\"data-theme\":\"github-dark\",raw:`import React from 'react';\nimport { createRoot } from 'react-dom/client';\n\nfunction App() {\n  return <div>Hello World</div>;\n}\n\nconst container = document.getElementById('root');\n// createRoot(container!) if you use TypeScript\nconst root = createRoot(container);\n\nroot.render(<App />);\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"tsx\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" React \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'react'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { createRoot } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'react-dom/client'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" App\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">Hello World</\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">;\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" container\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getElementById\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'root'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// createRoot(container!) if you use TypeScript\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" root\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" createRoot\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(container);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"root.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"render\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(<\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"App\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" />);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u914D\\u7F6Ecsssass\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u914D\\u7F6Ecsssass\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u914D\\u7F6Ecss&sass\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B89\\u88C5\\u6837\\u5F0F\\u6587\\u4EF6\\u76F8\\u5173\\u7684loader\\uFF0C\\u5728webpack 5 \\u4E2D\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528\\u5185\\u7F6E\\u7684\",(0,n.jsx)(e.strong,{children:\"Asset Modules\"}),\"\\u5904\\u7406\\u56FE\\u50CF\\u548C\\u5B57\\u4F53\\uFF0C\\u6211\\u4EEC\\u4E0D\\u7528\\u989D\\u5916\\u5B89\\u88C5\\u3002\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`npm install --save-dev style-loader css-loader sass sass-loader\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --save-dev\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" style-loader\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" css-loader\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" sass\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" sass-loader\"})]})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4FEE\\u6539\",(0,n.jsx)(e.strong,{children:\"webpack.config.js\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /css$/i,    //\\u5339\\u914Dcss\\u3001scss\\u6587\\u4EF6\n        use: [\"style-loader\", \"css-loader\", \"sass-loader\"] // \\u6CE8\\u610F\\u6267\\u884C\\u987A\\u5E8F\\u662F\\u540E\\u5F80\\u524D\n      },\n      {\n        test: /.(png|jpg|jpeg|svg|gif)$/i,\n        type: \"asset/resource\"\n      },\n      {\n        test: /.(woff|woff2|eot|ttf|otf)$/i,\n        type: \"asset/resource\"\n      }\n    ],\n  },\n};\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"module\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"exports\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // ...\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  module: {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    rules: [\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        test:\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"css\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"i\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",    \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"//\\u5339\\u914Dcss\\u3001scss\\u6587\\u4EF6\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        use: [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"style-loader\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"css-loader\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"sass-loader\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6CE8\\u610F\\u6267\\u884C\\u987A\\u5E8F\\u662F\\u540E\\u5F80\\u524D\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        test:\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"(png\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"jpg\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"jpeg\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"svg\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"gif)\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"i\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        type: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"asset/resource\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        test:\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"(woff\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"woff2\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"eot\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"ttf\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"otf)\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"i\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        type: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"asset/resource\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD9\\u6837\\u5373\\u53EF\\u521B\\u5EFAcss/sass\\u6587\\u4EF6\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u914D\\u7F6Ets\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u914D\\u7F6Ets\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u914D\\u7F6ETS\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"zsh\",\"data-theme\":\"github-dark\",raw:`npm i -D typescript ts-loader\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"zsh\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" i\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" typescript\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" ts-loader\"})]})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u914D\\u7F6Ereact\\u76F8\\u5E94\\u7684types\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`npm i --save-dev @types/react @types/react-dom\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" i\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --save-dev\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @types/react\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @types/react-dom\"})]})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4FEE\\u6539\",(0,n.jsx)(e.strong,{children:\"webpack.config.js\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\nmodule.exports = {\n entry: './src/index.tsx',\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\\\.tsx?$/,\n        use: 'ts-loader',\n        exclude: '/node-modules/',\n      },\n    ],\n  },\n};\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"module\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"exports\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" entry: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'./src/index.tsx'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // ...\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  module: {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    rules: [\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        test:\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" /\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\",fontWeight:\"bold\"},children:\"\\\\.\"}),(0,n.jsx)(e.span,{style:{color:\"#DBEDFF\"},children:\"tsx\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"?$\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        use: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ts-loader'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        exclude: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/node-modules/'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u65B0\\u5EFA \",(0,n.jsx)(e.strong,{children:\"tsconfig.json\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"compilerOptions\": {\n    \"outDir\": \"./dist/\",\n    \"sourceMap\": true,\n    \"strict\": true,\n    \"noImplicitReturns\": true,\n    \"noImplicitAny\": true,\n    \"module\": \"es6\",\n    \"moduleResolution\": \"node\",\n    \"allowSyntheticDefaultImports\": true,\n    \"esModuleInterop\": true,\n    \"target\": \"es5\",\n    \"allowJs\": true,\n    \"jsx\": \"react-jsx\",\n    \"paths\": {\n      \"@/*\": [\n        \"./src/*\"\n      ]\n    }\n  },\n  \"include\": [\n    \"./src/**/*\"\n  ]\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'  \"compilerOptions\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"outDir\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./dist/\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"sourceMap\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"strict\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"noImplicitReturns\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"noImplicitAny\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"module\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"es6\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"moduleResolution\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"node\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"allowSyntheticDefaultImports\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"esModuleInterop\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"target\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"es5\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"allowJs\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"jsx\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"react-jsx\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"paths\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'      \"@/*\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"./src/*\"'})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      ]\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'  \"include\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'    \"./src/**/*\"'})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ]\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})})]})}function k(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(i,l)})):i(l)}var C=k;return b(f);})();\n;return Component;"
    },
    "_id": "post/2024-09-03-React+Webpack Cli.md",
    "_raw": {
      "sourceFilePath": "post/2024-09-03-React+Webpack Cli.md",
      "sourceFileName": "2024-09-03-React+Webpack Cli.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-09-03-React+Webpack Cli"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-09-03-React+Webpack Cli",
    "slugAsParams": "2024-09-03-React+Webpack Cli"
  },
  {
    "title": "React+Contentlayer构建静态博客网站",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "url": null,
    "description": null,
    "date": "2024-09-04T00:00:00.000Z",
    "body": {
      "raw": "> [Contentlayer](https://www.contentlayer.dev/) 是一个功能强大的静态网站生成器，专为构建和管理静态页面、网站和博客而设计。它提供了一种简单而灵活的方式来创建和组织内容，可以将`Markdown`文件转换为静态`HTML`页面。\n\n\n## 使用\n基于Next，安装\n```zsh\nyarn add contentlayer next-contentlayer -S\n```\n\n\n创建 **contentlayer.config.ts**\n```ts\n\n```\n\n\n## 原理\n\nmarkdown 处理在[contentlayer](https://www.contentlayer.dev/)中是如何工作的。\n[contentlayer](https://www.contentlayer.dev/)使用[remark](https://github.com/remarkjs/remark)将 markdown 解析为[mdast](https://github.com/syntax-tree/mdast)。我们现在可以使用`remark plugins`来修改`mdast`。然后`rehype`发挥作用并将 转换`mdast`为[hast](https://github.com/syntax-tree/hast)。 `rehype plugins`现在可以修改`hast`。最后`hast`将 转换为[react](https://reactjs.org/)组件。\n\n![|500](./assets/20241109134809.png)\n\n\n\n## Markdown优化插件\n\n- **`remark-gfm`**：用于扩展 **`remark`** 的功能，支持 GitHub Flavored Markdown (GFM) 的语法。它可以处理 GFM 的特殊语法，如任务列表、表格等。\n- **`remark-math`**：用于在 Markdown 中支持数学公式的渲染。它可以解析 LaTeX 或 MathML 格式的数学公式，并将其转换为 HTML 或其他格式进行显示。\n- **`remark-rehype`**：用于将 **`remark`** 的 AST 转换为 **`rehype`** 的 AST。它可以在 **`remark`** 和 **`rehype`** 之间进行转换，以便使用 **`rehype`** 的插件对 Markdown 进行进一步处理。\n\n\n\n- **`rehype-pretty-code`**：用于美化代码块的样式和显示。它可以对代码进行语法高亮、添加行号等操作，以提升代码的可读性。\n- **`rehype-raw`**：用于保留 HTML 标签的原始内容，而不进行任何转换。它可以用于处理包含自定义 HTML 标签或特殊需求的内容。\n- **`rehype-stringify`**：用于将 **`rehype`** 的 AST（Abstract Syntax Tree）转换回 HTML 字符串。它可以将经过处理的 AST 转换为有效的 HTML 代码。\n- [`rehype-slug`](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Frehypejs%2Frehype-slug \"https://github.com/rehypejs/rehype-slug\"): h1-h6 标签添加 id，用于为标题生成唯一的 slug（URL-friendly string，常用于锚链接）。它可以将标题文本转换为小写、移除特殊字符等，以生成易于处理和识别的 slug。\n- [`rehype-autolink-headings`](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Frehypejs%2Frehype-autolink-headings \"https://github.com/rehypejs/rehype-autolink-headings\"): 添加锚点\n\n\n## 自定义rehype 插件处理本地图片\n> reference：[Contentlayer with next/image](https://sdorra.dev/posts/2022-12-11-contentlayer-next-image)\n\n**思路**\n1. 搜索 `hast` 树，对于每个带`img` 的元素，找到图片真实路径。\n2. 利用`sharp`读取图像宽高，创建占位符。(若不使用next/Image可以略过)\n3. 将图片复制到`public`文件夹，保持路径一致。\n4. 更新`img`标签属性\n5. 配置插件\n\n**注意⚠️**\n`Rehype` 插件不能是异步的，但图像处理是异步的。这就是为什么我们将 `processImage` 函数的每个结果的 `Promise` 存储在一个数组中，如果所有 `Promise` 都已解决并且工作已完成，则调用 `done` 函数\n\n\n**Implementation**\n编写文件`static-images.ts`\n\n```js\nimport fs from \"fs/promises\";\nimport { Element, Root } from \"hast\";\nimport crypto from \"node:crypto\";\nimport path from \"node:path\";\nimport sharp from \"sharp\";\nimport { Plugin } from \"unified\";\nimport { visit } from \"unist-util-visit\";\n\ntype Options = {\n  sourceRoot: string;\n  publicDir: string;\n  resourcePath: string;\n};\n\nconst fileChecksum = async (file: string) => {\n  try {\n    return checksum(await fs.readFile(file));\n  } catch (_) {\n    return \"\";\n  }\n};\n\nconst checksum = (content: Buffer) => {\n  return crypto.createHash(\"sha256\").update(content).digest(\"hex\");\n};\n\nconst copy = async (source: string, sha256sum: string, target: string) => {\n  if (sha256sum !== (await fileChecksum(target))) {\n    const targetDir = path.dirname(target);\n\n    await fs.mkdir(targetDir, { recursive: true });\n    await fs.copyFile(source, target);\n  }\n};\n\nconst createPlaceholder = async (image: sharp.Sharp) => {\n  const { width, height } = await image.metadata();\n  if (!width || !height) {\n    throw new Error(\"fetched image without width and height\");\n  }\n\n  const imgAspectRatio = width / height;\n\n  const placeholderImgWidth = 8;\n  const placeholderImgHeight = Math.round(placeholderImgWidth / imgAspectRatio);\n\n  return image\n    .resize(placeholderImgWidth, placeholderImgHeight)\n    .png({\n      quality: 75,\n    })\n    .toBuffer()\n    .then((buffer) => `data:image/png;base64,${buffer.toString(\"base64\")}`);\n};\n\nconst metadata = async (\n  resourcePath: string,\n  source: string,\n  pathname: string\n) => {\n  const content = await fs.readFile(source);\n  const image = await sharp(content);\n\n  const { width, height } = await image.metadata();\n\n  if (!width || !height) {\n    return null;\n  }\n\n  const src = resourcePath + \"/\" + pathname;\n\n  const sha256 = checksum(content);\n\n  const blurDataURL = await createPlaceholder(image);\n  return {\n    sha256,\n    props: {\n      width,\n      height,\n      src,\n      blurDataURL,\n    },\n  };\n};\n\nconst processImage = async (\n  options: Options,\n  file: any,\n  node: Element\n): Promise<void> => {\n  const root = options.sourceRoot;\n  const pathname = path.join(\n    file.data.rawDocumentData.sourceFileDir,\n    (node.properties?.src as string) || \"\"\n  );\n  const source = path.join(root, pathname);\n\n  const meta = await metadata(options.resourcePath, source, pathname);\n  if (!meta) {\n    return;\n  }\n\n  const target = path.join(options.publicDir, pathname);\n  await copy(source, meta.sha256, target);\n\n  if (!node.properties) {\n    node.properties = {};\n  }\n  node.properties = {\n    ...node.properties,\n    ...meta.props,\n  };\n};\n\nexport const staticCoverImage = async (\n  sourceRoot: string,\n  targetRoot: string,\n  resourcePath: string,\n  directory: string,\n  image: string\n) => {\n  if (image.includes(\"://\")) {\n    return image;\n  }\n\n  const source = path.join(sourceRoot, directory, image);\n  const content = await fs.readFile(source);\n  const sha256sum = checksum(content);\n  const target = path.join(targetRoot, directory, image);\n\n  await copy(source, sha256sum, target);\n\n  return `${resourcePath}/${directory}/${image}`;\n};\n\nconst staticImages: Plugin<[Options], Root> =\n  // @ts-ignore\n  (options) => (tree, file, done) => {\n    const tasks: Promise<void>[] = [];\n\n    visit(tree, \"element\", (node) => {\n      if (node.tagName === \"img\" && !node.properties.src.includes(\"://\")) {\n        tasks.push(processImage(options, file, node));\n      }\n    });\n\n    Promise.all(tasks).then(() => done());\n  };\n\nexport default staticImages;\n\n```\n\n\n\n`contentlayer.config.js` 中引用该插件\n```js\nimport mdxImages from \"./lib/static-images\";\n...\nexport default makeSource({\n  ...\n  mdx: {\n    remarkPlugins: [\n     ...\n    ],\n    rehypePlugins: [\n      [\n        mdxImages,\n        {\n          publicDir: path.join(process.cwd(), \"public\"),\n          sourceRoot: path.join(process.cwd(), \"content\"),\n          resourcePath: \"\",\n        },\n      ],\n      ...\n    ],\n  },\n});\n\n```\n\n\n`Markdown.tsx` 在组件中使用并传递参数\n```js\nimport { useMDXComponent } from \"next-contentlayer/hooks\";\nimport type { MDXComponents } from \"mdx/types\";\n\nconst components: MDXComponents = {\n  ...\n  img: ({ className, ...props }: any) =>\n    props.width ? (\n      //Image必须指定width/height,若没有该值则用img标签自适应image本身大小\n      <Image className={cn(\"rounded-md border m-auto\", className)} {...props} />\n    ) : (\n      <img className={cn(\"rounded-md border\", className)} {...props} />\n    ),\n};\n\nexport function Mdx({ code }: { code: string }) {\n  const Component = useMDXComponent(code);\n\n  return (\n    <div className=\"mdx\">\n      <Component components={components} />\n    </div>\n  );\n}\n\n```\n\n\n\n\n## 自定义rehype 插件-代码块复制\n**思路**\n1. 获取`pre`的内容放在该节点raw参数中\n2. 由于`rehypePrettyCode`会把代码格式化，将`pre`的属性重置到`figure`标签中，并对代码按行拆分。因此，该函数得在该插件之前执行\n3. 将后置处理时，将`figure`标签中raw参数重新复制到`pre`标签上\n4. 配置插件\n\n`copy-code.js`\n```js\nimport { visit } from \"unist-util-visit\";\n\n// 获取代码块内容\nexport const preProcess = () => (tree) => {\n  visit(tree, (node) => {\n    if (node?.type === \"element\" && node?.tagName === \"pre\") {\n      const [codeEl] = node.children;\n\n      if (codeEl.tagName !== \"code\") return;\n      node.properties.raw = codeEl.children?.[0].value;\n      // console.log(\"🚨 preProcess ~\", node);\n    }\n  });\n};\n\n// 代码块内容放进pre.raw\nexport const postProcess = () => (tree) => {\n  visit(tree, \"element\", (node) => {\n    if (node?.type === \"element\" && node?.tagName === \"figure\") {\n      if (!(\"data-rehype-pretty-code-figure\" in node.properties)) {\n        return;\n      }\n\n      for (const child of node.children) {\n        if (child.tagName === \"pre\") {\n          child.properties[\"raw\"] = node.properties.raw;\n          node.properties.raw = undefined;\n          // console.log(\"🚨 postProcess ~\", child, node.properties.raw);\n        }\n      }\n    }\n  });\n};\n\n\n```\n\n`contentlayer.config.js` 中引用该插件\n```js\nimport { preProcess, postProcess } from \"./lib/copy-code\";\n\n...\nexport default makeSource({\n  ...\n  mdx: {\n    remarkPlugins: [\n     ...\n    ],\n    rehypePlugins: [\n      // 获取代码块内容\n      preProcess,\n      [\n        rehypePrettyCode,\n        {\n          theme: \"github-dark\",\n        },\n      ],\n      // 代码块内容放进pre.raw\n      postProcess,\n      ...\n    ],\n  },\n});\n```\n\n`Markdown.tsx` 在组件中使用并传递参数\n```js\nimport { useMDXComponent } from \"next-contentlayer/hooks\";\nimport type { MDXComponents } from \"mdx/types\";\n\nconst components: MDXComponents = {\n  ...\n  pre: ({ className, ...props }) => (\n    <pre\n      className={cn(\n        \"px-0\",\n        \"group relative m-0 overflow-x-auto rounded-md py-4\",\n        className\n      )}\n      {...props}\n    >\n      {/* @ts-ignore */}\n      {/* 自己编写的复制按钮，props.raw为代码块内容 */}\n      <CodeCopyButton text={props.raw} />\n      {props.children}\n    </pre>\n  ),\n};\n\nexport function Mdx({ code }: { code: string }) {\n  const Component = useMDXComponent(code);\n\n  return (\n    <div className=\"mdx\">\n      <Component components={components} />\n    </div>\n  );\n}\n\n```\n",
      "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var m=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),g=(l,n)=>{for(var r in n)c(l,r,{get:n[r],enumerable:!0})},a=(l,n,r,o)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let s of E(n))!F.call(l,s)&&s!==r&&c(l,s,{get:()=>n[s],enumerable:!(o=p(n,s))||o.enumerable});return l};var u=(l,n,r)=>(r=l!=null?h(y(l)):{},a(n||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),B=l=>a(c({},\"__esModule\",{value:!0}),l);var t=m((b,i)=>{i.exports=_jsx_runtime});var k={};g(k,{default:()=>C,frontmatter:()=>f});var e=u(t()),f={title:\"React+Contentlayer\\u6784\\u5EFA\\u9759\\u6001\\u535A\\u5BA2\\u7F51\\u7AD9\",subtitle:null,layout:\"post\",date:new Date(1725408e6),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],url:null,image:null};function d(l){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",code:\"code\",h2:\"h2\",span:\"span\",div:\"div\",figure:\"figure\",pre:\"pre\",strong:\"strong\",img:\"img\",ul:\"ul\",li:\"li\",ol:\"ol\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://www.contentlayer.dev/\",children:\"Contentlayer\"}),\"\\xA0\\u662F\\u4E00\\u4E2A\\u529F\\u80FD\\u5F3A\\u5927\\u7684\\u9759\\u6001\\u7F51\\u7AD9\\u751F\\u6210\\u5668\\uFF0C\\u4E13\\u4E3A\\u6784\\u5EFA\\u548C\\u7BA1\\u7406\\u9759\\u6001\\u9875\\u9762\\u3001\\u7F51\\u7AD9\\u548C\\u535A\\u5BA2\\u800C\\u8BBE\\u8BA1\\u3002\\u5B83\\u63D0\\u4F9B\\u4E86\\u4E00\\u79CD\\u7B80\\u5355\\u800C\\u7075\\u6D3B\\u7684\\u65B9\\u5F0F\\u6765\\u521B\\u5EFA\\u548C\\u7EC4\\u7EC7\\u5185\\u5BB9\\uFF0C\\u53EF\\u4EE5\\u5C06\",(0,e.jsx)(n.code,{children:\"Markdown\"}),\"\\u6587\\u4EF6\\u8F6C\\u6362\\u4E3A\\u9759\\u6001\",(0,e.jsx)(n.code,{children:\"HTML\"}),\"\\u9875\\u9762\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u4F7F\\u7528\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u4F7F\\u7528\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u57FA\\u4E8ENext\\uFF0C\\u5B89\\u88C5\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"zsh\",\"data-theme\":\"github-dark\",raw:`yarn add contentlayer next-contentlayer -S\n`,children:(0,e.jsx)(n.code,{\"data-language\":\"zsh\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" contentlayer\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" next-contentlayer\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -S\"})]})})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u521B\\u5EFA \",(0,e.jsx)(n.strong,{children:\"contentlayer.config.ts\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark\",raw:\"\",children:(0,e.jsx)(n.code,{\"data-language\":\"ts\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u539F\\u7406\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u539F\\u7406\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u539F\\u7406\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"markdown \\u5904\\u7406\\u5728\",(0,e.jsx)(n.a,{href:\"https://www.contentlayer.dev/\",children:\"contentlayer\"}),`\\u4E2D\\u662F\\u5982\\u4F55\\u5DE5\\u4F5C\\u7684\\u3002\n`,(0,e.jsx)(n.a,{href:\"https://www.contentlayer.dev/\",children:\"contentlayer\"}),\"\\u4F7F\\u7528\",(0,e.jsx)(n.a,{href:\"https://github.com/remarkjs/remark\",children:\"remark\"}),\"\\u5C06 markdown \\u89E3\\u6790\\u4E3A\",(0,e.jsx)(n.a,{href:\"https://github.com/syntax-tree/mdast\",children:\"mdast\"}),\"\\u3002\\u6211\\u4EEC\\u73B0\\u5728\\u53EF\\u4EE5\\u4F7F\\u7528\",(0,e.jsx)(n.code,{children:\"remark plugins\"}),\"\\u6765\\u4FEE\\u6539\",(0,e.jsx)(n.code,{children:\"mdast\"}),\"\\u3002\\u7136\\u540E\",(0,e.jsx)(n.code,{children:\"rehype\"}),\"\\u53D1\\u6325\\u4F5C\\u7528\\u5E76\\u5C06 \\u8F6C\\u6362\",(0,e.jsx)(n.code,{children:\"mdast\"}),\"\\u4E3A\",(0,e.jsx)(n.a,{href:\"https://github.com/syntax-tree/hast\",children:\"hast\"}),\"\\u3002\\xA0\",(0,e.jsx)(n.code,{children:\"rehype plugins\"}),\"\\u73B0\\u5728\\u53EF\\u4EE5\\u4FEE\\u6539\",(0,e.jsx)(n.code,{children:\"hast\"}),\"\\u3002\\u6700\\u540E\",(0,e.jsx)(n.code,{children:\"hast\"}),\"\\u5C06 \\u8F6C\\u6362\\u4E3A\",(0,e.jsx)(n.a,{href:\"https://reactjs.org/\",children:\"react\"}),\"\\u7EC4\\u4EF6\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/20241109134809.png\",alt:\"|500\",width:\"686\",height:\"917\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAALCAMAAAB1RTwXAAAAElBMVEXy8vL5+fnq6ur////j4+PZ2dlEIs49AAAACXBIWXMAAAsTAAALEwEAmpwYAAAANklEQVR4nD2MWwrAQBDCEmd6/ysXW3Y/lIAP8qwzM3DAUBCSX7Uk4hhV2C9r1D6gpjPuYXYpvCCoAKdr6H32AAAAAElFTkSuQmCC\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"markdown\\u4F18\\u5316\\u63D2\\u4EF6\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#markdown\\u4F18\\u5316\\u63D2\\u4EF6\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Markdown\\u4F18\\u5316\\u63D2\\u4EF6\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"remark-gfm\"})}),\"\\uFF1A\\u7528\\u4E8E\\u6269\\u5C55\\xA0\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"remark\"})}),\"\\xA0\\u7684\\u529F\\u80FD\\uFF0C\\u652F\\u6301 GitHub Flavored Markdown (GFM) \\u7684\\u8BED\\u6CD5\\u3002\\u5B83\\u53EF\\u4EE5\\u5904\\u7406 GFM \\u7684\\u7279\\u6B8A\\u8BED\\u6CD5\\uFF0C\\u5982\\u4EFB\\u52A1\\u5217\\u8868\\u3001\\u8868\\u683C\\u7B49\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"remark-math\"})}),\"\\uFF1A\\u7528\\u4E8E\\u5728 Markdown \\u4E2D\\u652F\\u6301\\u6570\\u5B66\\u516C\\u5F0F\\u7684\\u6E32\\u67D3\\u3002\\u5B83\\u53EF\\u4EE5\\u89E3\\u6790 LaTeX \\u6216 MathML \\u683C\\u5F0F\\u7684\\u6570\\u5B66\\u516C\\u5F0F\\uFF0C\\u5E76\\u5C06\\u5176\\u8F6C\\u6362\\u4E3A HTML \\u6216\\u5176\\u4ED6\\u683C\\u5F0F\\u8FDB\\u884C\\u663E\\u793A\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"remark-rehype\"})}),\"\\uFF1A\\u7528\\u4E8E\\u5C06\\xA0\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"remark\"})}),\"\\xA0\\u7684 AST \\u8F6C\\u6362\\u4E3A\\xA0\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"rehype\"})}),\"\\xA0\\u7684 AST\\u3002\\u5B83\\u53EF\\u4EE5\\u5728\\xA0\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"remark\"})}),\"\\xA0\\u548C\\xA0\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"rehype\"})}),\"\\xA0\\u4E4B\\u95F4\\u8FDB\\u884C\\u8F6C\\u6362\\uFF0C\\u4EE5\\u4FBF\\u4F7F\\u7528\\xA0\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"rehype\"})}),\"\\xA0\\u7684\\u63D2\\u4EF6\\u5BF9 Markdown \\u8FDB\\u884C\\u8FDB\\u4E00\\u6B65\\u5904\\u7406\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"rehype-pretty-code\"})}),\"\\uFF1A\\u7528\\u4E8E\\u7F8E\\u5316\\u4EE3\\u7801\\u5757\\u7684\\u6837\\u5F0F\\u548C\\u663E\\u793A\\u3002\\u5B83\\u53EF\\u4EE5\\u5BF9\\u4EE3\\u7801\\u8FDB\\u884C\\u8BED\\u6CD5\\u9AD8\\u4EAE\\u3001\\u6DFB\\u52A0\\u884C\\u53F7\\u7B49\\u64CD\\u4F5C\\uFF0C\\u4EE5\\u63D0\\u5347\\u4EE3\\u7801\\u7684\\u53EF\\u8BFB\\u6027\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"rehype-raw\"})}),\"\\uFF1A\\u7528\\u4E8E\\u4FDD\\u7559 HTML \\u6807\\u7B7E\\u7684\\u539F\\u59CB\\u5185\\u5BB9\\uFF0C\\u800C\\u4E0D\\u8FDB\\u884C\\u4EFB\\u4F55\\u8F6C\\u6362\\u3002\\u5B83\\u53EF\\u4EE5\\u7528\\u4E8E\\u5904\\u7406\\u5305\\u542B\\u81EA\\u5B9A\\u4E49 HTML \\u6807\\u7B7E\\u6216\\u7279\\u6B8A\\u9700\\u6C42\\u7684\\u5185\\u5BB9\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"rehype-stringify\"})}),\"\\uFF1A\\u7528\\u4E8E\\u5C06\\xA0\",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"rehype\"})}),\"\\xA0\\u7684 AST\\uFF08Abstract Syntax Tree\\uFF09\\u8F6C\\u6362\\u56DE HTML \\u5B57\\u7B26\\u4E32\\u3002\\u5B83\\u53EF\\u4EE5\\u5C06\\u7ECF\\u8FC7\\u5904\\u7406\\u7684 AST \\u8F6C\\u6362\\u4E3A\\u6709\\u6548\\u7684 HTML \\u4EE3\\u7801\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Frehypejs%2Frehype-slug\",title:\"https://github.com/rehypejs/rehype-slug\",children:(0,e.jsx)(n.code,{children:\"rehype-slug\"})}),\": h1-h6 \\u6807\\u7B7E\\u6DFB\\u52A0 id\\uFF0C\\u7528\\u4E8E\\u4E3A\\u6807\\u9898\\u751F\\u6210\\u552F\\u4E00\\u7684 slug\\uFF08URL-friendly string\\uFF0C\\u5E38\\u7528\\u4E8E\\u951A\\u94FE\\u63A5\\uFF09\\u3002\\u5B83\\u53EF\\u4EE5\\u5C06\\u6807\\u9898\\u6587\\u672C\\u8F6C\\u6362\\u4E3A\\u5C0F\\u5199\\u3001\\u79FB\\u9664\\u7279\\u6B8A\\u5B57\\u7B26\\u7B49\\uFF0C\\u4EE5\\u751F\\u6210\\u6613\\u4E8E\\u5904\\u7406\\u548C\\u8BC6\\u522B\\u7684 slug\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Frehypejs%2Frehype-autolink-headings\",title:\"https://github.com/rehypejs/rehype-autolink-headings\",children:(0,e.jsx)(n.code,{children:\"rehype-autolink-headings\"})}),\": \\u6DFB\\u52A0\\u951A\\u70B9\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u81EA\\u5B9A\\u4E49rehype-\\u63D2\\u4EF6\\u5904\\u7406\\u672C\\u5730\\u56FE\\u7247\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u81EA\\u5B9A\\u4E49rehype-\\u63D2\\u4EF6\\u5904\\u7406\\u672C\\u5730\\u56FE\\u7247\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u81EA\\u5B9A\\u4E49rehype \\u63D2\\u4EF6\\u5904\\u7406\\u672C\\u5730\\u56FE\\u7247\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"reference\\uFF1A\",(0,e.jsx)(n.a,{href:\"https://sdorra.dev/posts/2022-12-11-contentlayer-next-image\",children:\"Contentlayer with next/image\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u601D\\u8DEF\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u641C\\u7D22\\xA0\",(0,e.jsx)(n.code,{children:\"hast\"}),\"\\xA0\\u6811\\uFF0C\\u5BF9\\u4E8E\\u6BCF\\u4E2A\\u5E26\",(0,e.jsx)(n.code,{children:\"img\"}),\"\\xA0\\u7684\\u5143\\u7D20\\uFF0C\\u627E\\u5230\\u56FE\\u7247\\u771F\\u5B9E\\u8DEF\\u5F84\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u5229\\u7528\",(0,e.jsx)(n.code,{children:\"sharp\"}),\"\\u8BFB\\u53D6\\u56FE\\u50CF\\u5BBD\\u9AD8\\uFF0C\\u521B\\u5EFA\\u5360\\u4F4D\\u7B26\\u3002(\\u82E5\\u4E0D\\u4F7F\\u7528next/Image\\u53EF\\u4EE5\\u7565\\u8FC7)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u5C06\\u56FE\\u7247\\u590D\\u5236\\u5230\",(0,e.jsx)(n.code,{children:\"public\"}),\"\\u6587\\u4EF6\\u5939\\uFF0C\\u4FDD\\u6301\\u8DEF\\u5F84\\u4E00\\u81F4\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u66F4\\u65B0\",(0,e.jsx)(n.code,{children:\"img\"}),\"\\u6807\\u7B7E\\u5C5E\\u6027\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u914D\\u7F6E\\u63D2\\u4EF6\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u6CE8\\u610F\\u26A0\\uFE0F\"}),`\n`,(0,e.jsx)(n.code,{children:\"Rehype\"}),\"\\xA0\\u63D2\\u4EF6\\u4E0D\\u80FD\\u662F\\u5F02\\u6B65\\u7684\\uFF0C\\u4F46\\u56FE\\u50CF\\u5904\\u7406\\u662F\\u5F02\\u6B65\\u7684\\u3002\\u8FD9\\u5C31\\u662F\\u4E3A\\u4EC0\\u4E48\\u6211\\u4EEC\\u5C06\\xA0\",(0,e.jsx)(n.code,{children:\"processImage\"}),\"\\xA0\\u51FD\\u6570\\u7684\\u6BCF\\u4E2A\\u7ED3\\u679C\\u7684\\xA0\",(0,e.jsx)(n.code,{children:\"Promise\"}),\"\\xA0\\u5B58\\u50A8\\u5728\\u4E00\\u4E2A\\u6570\\u7EC4\\u4E2D\\uFF0C\\u5982\\u679C\\u6240\\u6709\\xA0\",(0,e.jsx)(n.code,{children:\"Promise\"}),\"\\xA0\\u90FD\\u5DF2\\u89E3\\u51B3\\u5E76\\u4E14\\u5DE5\\u4F5C\\u5DF2\\u5B8C\\u6210\\uFF0C\\u5219\\u8C03\\u7528\\xA0\",(0,e.jsx)(n.code,{children:\"done\"}),\"\\xA0\\u51FD\\u6570\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Implementation\"}),`\n\\u7F16\\u5199\\u6587\\u4EF6`,(0,e.jsx)(n.code,{children:\"static-images.ts\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import fs from \"fs/promises\";\nimport { Element, Root } from \"hast\";\nimport crypto from \"node:crypto\";\nimport path from \"node:path\";\nimport sharp from \"sharp\";\nimport { Plugin } from \"unified\";\nimport { visit } from \"unist-util-visit\";\n\ntype Options = {\n  sourceRoot: string;\n  publicDir: string;\n  resourcePath: string;\n};\n\nconst fileChecksum = async (file: string) => {\n  try {\n    return checksum(await fs.readFile(file));\n  } catch (_) {\n    return \"\";\n  }\n};\n\nconst checksum = (content: Buffer) => {\n  return crypto.createHash(\"sha256\").update(content).digest(\"hex\");\n};\n\nconst copy = async (source: string, sha256sum: string, target: string) => {\n  if (sha256sum !== (await fileChecksum(target))) {\n    const targetDir = path.dirname(target);\n\n    await fs.mkdir(targetDir, { recursive: true });\n    await fs.copyFile(source, target);\n  }\n};\n\nconst createPlaceholder = async (image: sharp.Sharp) => {\n  const { width, height } = await image.metadata();\n  if (!width || !height) {\n    throw new Error(\"fetched image without width and height\");\n  }\n\n  const imgAspectRatio = width / height;\n\n  const placeholderImgWidth = 8;\n  const placeholderImgHeight = Math.round(placeholderImgWidth / imgAspectRatio);\n\n  return image\n    .resize(placeholderImgWidth, placeholderImgHeight)\n    .png({\n      quality: 75,\n    })\n    .toBuffer()\n    .then((buffer) => \\`data:image/png;base64,\\${buffer.toString(\"base64\")}\\`);\n};\n\nconst metadata = async (\n  resourcePath: string,\n  source: string,\n  pathname: string\n) => {\n  const content = await fs.readFile(source);\n  const image = await sharp(content);\n\n  const { width, height } = await image.metadata();\n\n  if (!width || !height) {\n    return null;\n  }\n\n  const src = resourcePath + \"/\" + pathname;\n\n  const sha256 = checksum(content);\n\n  const blurDataURL = await createPlaceholder(image);\n  return {\n    sha256,\n    props: {\n      width,\n      height,\n      src,\n      blurDataURL,\n    },\n  };\n};\n\nconst processImage = async (\n  options: Options,\n  file: any,\n  node: Element\n): Promise<void> => {\n  const root = options.sourceRoot;\n  const pathname = path.join(\n    file.data.rawDocumentData.sourceFileDir,\n    (node.properties?.src as string) || \"\"\n  );\n  const source = path.join(root, pathname);\n\n  const meta = await metadata(options.resourcePath, source, pathname);\n  if (!meta) {\n    return;\n  }\n\n  const target = path.join(options.publicDir, pathname);\n  await copy(source, meta.sha256, target);\n\n  if (!node.properties) {\n    node.properties = {};\n  }\n  node.properties = {\n    ...node.properties,\n    ...meta.props,\n  };\n};\n\nexport const staticCoverImage = async (\n  sourceRoot: string,\n  targetRoot: string,\n  resourcePath: string,\n  directory: string,\n  image: string\n) => {\n  if (image.includes(\"://\")) {\n    return image;\n  }\n\n  const source = path.join(sourceRoot, directory, image);\n  const content = await fs.readFile(source);\n  const sha256sum = checksum(content);\n  const target = path.join(targetRoot, directory, image);\n\n  await copy(source, sha256sum, target);\n\n  return \\`\\${resourcePath}/\\${directory}/\\${image}\\`;\n};\n\nconst staticImages: Plugin<[Options], Root> =\n  // @ts-ignore\n  (options) => (tree, file, done) => {\n    const tasks: Promise<void>[] = [];\n\n    visit(tree, \"element\", (node) => {\n      if (node.tagName === \"img\" && !node.properties.src.includes(\"://\")) {\n        tasks.push(processImage(options, file, node));\n      }\n    });\n\n    Promise.all(tasks).then(() => done());\n  };\n\nexport default staticImages;\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" fs \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"fs/promises\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { Element, Root } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"hast\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" crypto \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"node:crypto\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" path \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"node:path\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" sharp \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"sharp\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { Plugin } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"unified\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { visit } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"unist-util-visit\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"type\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Options\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  sourceRoot\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  publicDir\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  resourcePath\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" fileChecksum\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"file\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  try\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" checksum\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" fs.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"readFile\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(file));\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (_) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" checksum\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"content\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Buffer\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" crypto.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"createHash\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"sha256\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"update\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(content).\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"digest\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"hex\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" copy\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"source\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"sha256sum\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"target\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (sha256sum \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!==\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" fileChecksum\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(target))) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" targetDir\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" path.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"dirname\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(target);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" fs.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"mkdir\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(targetDir, { recursive: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" fs.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"copyFile\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(source, target);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" createPlaceholder\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"image\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" sharp\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"Sharp\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"width\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"height\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" image.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"metadata\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"width \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" !\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"height) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    throw\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"fetched image without width and height\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" imgAspectRatio\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" width \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" height;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" placeholderImgWidth\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 8\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" placeholderImgHeight\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"round\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(placeholderImgWidth \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" imgAspectRatio);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" image\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"resize\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(placeholderImgWidth, placeholderImgHeight)\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"png\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      quality: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"75\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    })\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"toBuffer\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"buffer\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" `data:image/png;base64,${\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"buffer\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"toString\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"base64\"'}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" metadata\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  resourcePath\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  source\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  pathname\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" content\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" fs.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"readFile\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(source);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" image\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" sharp\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(content);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"width\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"height\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" image.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"metadata\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"width \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" !\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"height) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" src\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" resourcePath \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"/\"'}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" pathname;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" sha256\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" checksum\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(content);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" blurDataURL\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" createPlaceholder\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(image);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    sha256,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    props: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      width,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      height,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      src,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      blurDataURL,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" processImage\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  options\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Options\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  file\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  node\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Element\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\")\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"void\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"> \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" root\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" options.sourceRoot;\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" pathname\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" path.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"join\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    file.data.rawDocumentData.sourceFileDir,\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    (node.properties?.src \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"\"'})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" source\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" path.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"join\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(root, pathname);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" meta\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" metadata\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(options.resourcePath, source, pathname);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"meta) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" target\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" path.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"join\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(options.publicDir, pathname);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" copy\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(source, meta.sha256, target);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"node.properties) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    node.properties \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {};\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  node.properties \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    ...\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"node.properties,\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    ...\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"meta.props,\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" staticCoverImage\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  sourceRoot\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  targetRoot\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  resourcePath\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  directory\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"  image\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (image.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"includes\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"://\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\")) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" image;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" source\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" path.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"join\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(sourceRoot, directory, image);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" content\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" fs.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"readFile\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(source);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" sha256sum\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" checksum\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(content);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" target\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" path.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"join\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(targetRoot, directory, image);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" copy\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(source, sha256sum, target);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" `${\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"resourcePath\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}/${\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"directory\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}/${\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"image\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" staticImages\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Plugin\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"<[\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"Options\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"], \"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"Root\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"> \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // @ts-ignore\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"options\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"tree\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"file\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"done\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" tasks\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"void\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">[] \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    visit\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(tree, \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"element\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"node\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (node.tagName \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"img\"'}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" &&\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" !\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"node.properties.src.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"includes\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"://\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\")) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        tasks.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"processImage\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(options, file, node));\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"    Promise\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(tasks).\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" done\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" staticImages;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"contentlayer.config.js\"}),\" \\u4E2D\\u5F15\\u7528\\u8BE5\\u63D2\\u4EF6\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import mdxImages from \"./lib/static-images\";\n...\nexport default makeSource({\n  ...\n  mdx: {\n    remarkPlugins: [\n     ...\n    ],\n    rehypePlugins: [\n      [\n        mdxImages,\n        {\n          publicDir: path.join(process.cwd(), \"public\"),\n          sourceRoot: path.join(process.cwd(), \"content\"),\n          resourcePath: \"\",\n        },\n      ],\n      ...\n    ],\n  },\n});\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" mdxImages \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"./lib/static-images\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"...\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" makeSource\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  ...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  mdx: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    remarkPlugins: [\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"     ...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    rehypePlugins: [\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      [\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        mdxImages,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          publicDir: path.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"join\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(process.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"cwd\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(), \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"public\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          sourceRoot: path.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"join\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(process.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"cwd\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(), \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"content\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          resourcePath: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      ...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"Markdown.tsx\"}),\" \\u5728\\u7EC4\\u4EF6\\u4E2D\\u4F7F\\u7528\\u5E76\\u4F20\\u9012\\u53C2\\u6570\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import { useMDXComponent } from \"next-contentlayer/hooks\";\nimport type { MDXComponents } from \"mdx/types\";\n\nconst components: MDXComponents = {\n  ...\n  img: ({ className, ...props }: any) =>\n    props.width ? (\n      //Image\\u5FC5\\u987B\\u6307\\u5B9Awidth/height,\\u82E5\\u6CA1\\u6709\\u8BE5\\u503C\\u5219\\u7528img\\u6807\\u7B7E\\u81EA\\u9002\\u5E94image\\u672C\\u8EAB\\u5927\\u5C0F\n      <Image className={cn(\"rounded-md border m-auto\", className)} {...props} />\n    ) : (\n      <img className={cn(\"rounded-md border\", className)} {...props} />\n    ),\n};\n\nexport function Mdx({ code }: { code: string }) {\n  const Component = useMDXComponent(code);\n\n  return (\n    <div className=\"mdx\">\n      <Component components={components} />\n    </div>\n  );\n}\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { useMDXComponent } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"next-contentlayer/hooks\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" type\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { MDXComponents } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"mdx/types\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" components\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" MDXComponents\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  ...\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  img: ({ \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"className\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"...\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"props\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" }\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    props.width \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"?\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"      //Image\\u5FC5\\u987B\\u6307\\u5B9Awidth/height,\\u82E5\\u6CA1\\u6709\\u8BE5\\u503C\\u5219\\u7528img\\u6807\\u7B7E\\u81EA\\u9002\\u5E94image\\u672C\\u8EAB\\u5927\\u5C0F\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"Image\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" className\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"cn\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"rounded-md border m-auto\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", className)} {\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"...\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"props} />\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    ) \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"img\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" className\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"cn\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"rounded-md border\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", className)} {\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"...\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"props} />\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    ),\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Mdx\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"code\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" }\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"code\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" }) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" Component\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" useMDXComponent\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(code);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" className\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"mdx\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"Component\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" components\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{components} />\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u81EA\\u5B9A\\u4E49rehype-\\u63D2\\u4EF6-\\u4EE3\\u7801\\u5757\\u590D\\u5236\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u81EA\\u5B9A\\u4E49rehype-\\u63D2\\u4EF6-\\u4EE3\\u7801\\u5757\\u590D\\u5236\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u81EA\\u5B9A\\u4E49rehype \\u63D2\\u4EF6-\\u4EE3\\u7801\\u5757\\u590D\\u5236\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u601D\\u8DEF\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u83B7\\u53D6\",(0,e.jsx)(n.code,{children:\"pre\"}),\"\\u7684\\u5185\\u5BB9\\u653E\\u5728\\u8BE5\\u8282\\u70B9raw\\u53C2\\u6570\\u4E2D\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u7531\\u4E8E\",(0,e.jsx)(n.code,{children:\"rehypePrettyCode\"}),\"\\u4F1A\\u628A\\u4EE3\\u7801\\u683C\\u5F0F\\u5316\\uFF0C\\u5C06\",(0,e.jsx)(n.code,{children:\"pre\"}),\"\\u7684\\u5C5E\\u6027\\u91CD\\u7F6E\\u5230\",(0,e.jsx)(n.code,{children:\"figure\"}),\"\\u6807\\u7B7E\\u4E2D\\uFF0C\\u5E76\\u5BF9\\u4EE3\\u7801\\u6309\\u884C\\u62C6\\u5206\\u3002\\u56E0\\u6B64\\uFF0C\\u8BE5\\u51FD\\u6570\\u5F97\\u5728\\u8BE5\\u63D2\\u4EF6\\u4E4B\\u524D\\u6267\\u884C\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u5C06\\u540E\\u7F6E\\u5904\\u7406\\u65F6\\uFF0C\\u5C06\",(0,e.jsx)(n.code,{children:\"figure\"}),\"\\u6807\\u7B7E\\u4E2Draw\\u53C2\\u6570\\u91CD\\u65B0\\u590D\\u5236\\u5230\",(0,e.jsx)(n.code,{children:\"pre\"}),\"\\u6807\\u7B7E\\u4E0A\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u914D\\u7F6E\\u63D2\\u4EF6\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"copy-code.js\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import { visit } from \"unist-util-visit\";\n\n// \\u83B7\\u53D6\\u4EE3\\u7801\\u5757\\u5185\\u5BB9\nexport const preProcess = () => (tree) => {\n  visit(tree, (node) => {\n    if (node?.type === \"element\" && node?.tagName === \"pre\") {\n      const [codeEl] = node.children;\n\n      if (codeEl.tagName !== \"code\") return;\n      node.properties.raw = codeEl.children?.[0].value;\n      // console.log(\"\\u{1F6A8} preProcess ~\", node);\n    }\n  });\n};\n\n// \\u4EE3\\u7801\\u5757\\u5185\\u5BB9\\u653E\\u8FDBpre.raw\nexport const postProcess = () => (tree) => {\n  visit(tree, \"element\", (node) => {\n    if (node?.type === \"element\" && node?.tagName === \"figure\") {\n      if (!(\"data-rehype-pretty-code-figure\" in node.properties)) {\n        return;\n      }\n\n      for (const child of node.children) {\n        if (child.tagName === \"pre\") {\n          child.properties[\"raw\"] = node.properties.raw;\n          node.properties.raw = undefined;\n          // console.log(\"\\u{1F6A8} postProcess ~\", child, node.properties.raw);\n        }\n      }\n    }\n  });\n};\n\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { visit } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"unist-util-visit\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u83B7\\u53D6\\u4EE3\\u7801\\u5757\\u5185\\u5BB9\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" preProcess\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"tree\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"  visit\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(tree, (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"node\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (node?.type \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"element\"'}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" &&\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" node?.tagName \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"pre\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"codeEl\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" node.children;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (codeEl.tagName \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!==\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"code\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      node.properties.raw \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" codeEl.children?.[\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"].value;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:'      // console.log(\"\\u{1F6A8} preProcess ~\", node);'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u4EE3\\u7801\\u5757\\u5185\\u5BB9\\u653E\\u8FDBpre.raw\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" postProcess\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"tree\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"  visit\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(tree, \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"element\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"node\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (node?.type \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"element\"'}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" &&\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" node?.tagName \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"figure\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"data-rehype-pretty-code-figure\"'}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" in\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" node.properties)) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"        return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      for\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" child\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" of\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" node.children) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"        if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (child.tagName \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"pre\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          child.properties[\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"raw\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" node.properties.raw;\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          node.properties.raw \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" undefined\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:'          // console.log(\"\\u{1F6A8} postProcess ~\", child, node.properties.raw);'})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"contentlayer.config.js\"}),\" \\u4E2D\\u5F15\\u7528\\u8BE5\\u63D2\\u4EF6\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import { preProcess, postProcess } from \"./lib/copy-code\";\n\n...\nexport default makeSource({\n  ...\n  mdx: {\n    remarkPlugins: [\n     ...\n    ],\n    rehypePlugins: [\n      // \\u83B7\\u53D6\\u4EE3\\u7801\\u5757\\u5185\\u5BB9\n      preProcess,\n      [\n        rehypePrettyCode,\n        {\n          theme: \"github-dark\",\n        },\n      ],\n      // \\u4EE3\\u7801\\u5757\\u5185\\u5BB9\\u653E\\u8FDBpre.raw\n      postProcess,\n      ...\n    ],\n  },\n});\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { preProcess, postProcess } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"./lib/copy-code\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"...\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" makeSource\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  ...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  mdx: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    remarkPlugins: [\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"     ...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    rehypePlugins: [\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"      // \\u83B7\\u53D6\\u4EE3\\u7801\\u5757\\u5185\\u5BB9\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      preProcess,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      [\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        rehypePrettyCode,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          theme: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"github-dark\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"      // \\u4EE3\\u7801\\u5757\\u5185\\u5BB9\\u653E\\u8FDBpre.raw\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      postProcess,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      ...\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"Markdown.tsx\"}),\" \\u5728\\u7EC4\\u4EF6\\u4E2D\\u4F7F\\u7528\\u5E76\\u4F20\\u9012\\u53C2\\u6570\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import { useMDXComponent } from \"next-contentlayer/hooks\";\nimport type { MDXComponents } from \"mdx/types\";\n\nconst components: MDXComponents = {\n  ...\n  pre: ({ className, ...props }) => (\n    <pre\n      className={cn(\n        \"px-0\",\n        \"group relative m-0 overflow-x-auto rounded-md py-4\",\n        className\n      )}\n      {...props}\n    >\n      {/* @ts-ignore */}\n      {/* \\u81EA\\u5DF1\\u7F16\\u5199\\u7684\\u590D\\u5236\\u6309\\u94AE\\uFF0Cprops.raw\\u4E3A\\u4EE3\\u7801\\u5757\\u5185\\u5BB9 */}\n      <CodeCopyButton text={props.raw} />\n      {props.children}\n    </pre>\n  ),\n};\n\nexport function Mdx({ code }: { code: string }) {\n  const Component = useMDXComponent(code);\n\n  return (\n    <div className=\"mdx\">\n      <Component components={components} />\n    </div>\n  );\n}\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { useMDXComponent } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"next-contentlayer/hooks\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" type\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { MDXComponents } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"mdx/types\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" components\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" MDXComponents\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  ...\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  pre: ({ \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"className\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"...\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"props\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" }) \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"pre\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"      className\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"cn\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"px-0\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"group relative m-0 overflow-x-auto rounded-md py-4\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        className\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      )}\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      {\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"...\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"props}\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    >\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      {\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"/* @ts-ignore */\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      {\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"/* \\u81EA\\u5DF1\\u7F16\\u5199\\u7684\\u590D\\u5236\\u6309\\u94AE\\uFF0Cprops.raw\\u4E3A\\u4EE3\\u7801\\u5757\\u5185\\u5BB9 */\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"CodeCopyButton\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" text\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{props.raw} />\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      {props.children}\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"pre\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  ),\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Mdx\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"code\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" }\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"code\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" }) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" Component\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" useMDXComponent\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(code);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" className\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"mdx\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"Component\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" components\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{components} />\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})})]})}function w(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(d,l)})):d(l)}var C=w;return B(k);})();\n;return Component;"
    },
    "_id": "post/2024-09-04-MD2HTML.md",
    "_raw": {
      "sourceFilePath": "post/2024-09-04-MD2HTML.md",
      "sourceFileName": "2024-09-04-MD2HTML.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-09-04-MD2HTML"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-09-04-MD2HTML",
    "slugAsParams": "2024-09-04-MD2HTML"
  },
  {
    "title": "WebGL 基础概念",
    "tags": [
      "Graphic"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "url": null,
    "description": null,
    "date": "2024-10-22T00:00:00.000Z",
    "body": {
      "raw": "### What's WebGL\n\nWebGL 实际上是**一种 2D API**，而非 3D API。WebGL 只关心 2 个方面。2D 中的**剪裁空间坐标（-1~1）和颜色**。\n> 裁剪空间的`x`坐标范围是 -1 到 +1. 这就意味着0在中间并且正值在它右边。\n> \n> 裁剪空间中 -1 是最底端 +1 是最顶端， 这也意味值0在中间，正值在上方\n\nWebGL在电脑的GPU中运行。因此你需要使用能够在GPU上运行的代码。 这样的代码需要提供成对的方法。每对方法包含：\n- 顶点着色器（`.vert` ）：计算顶点的位置 \n- 片段着色器（ `.frag` ）：计算出当前绘制图元中每个像素的颜色值\n并且使用一种和C或C++类似的强类型的语言 [GLSL](https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html)。 (GL着色语言)。 每一对组合起来称作一个 _program_（着色程序）。\n\n> GLSL全称是 Graphics Library Shader Language （图形库着色器语言），是着色器使用的语言。 它有一些不同于JavaScript的特性，主要目的是为栅格化图形提供常用的计算功能。\n\n\n对于想要绘制的每一个对象，都需要先设置一系列状态值，然后通过调用 `gl.drawArrays` 或 `gl.drawElements` 运行一个着色方法对，使得你的着色器对能够在GPU上运行。\n\n\n##### 着色器(shader)获取数据方法\n1. **Attributes 属性**  (从缓冲中获取的数据) 缓冲是发送到GPU的一些二进制数据序列，顶点着色器 每一次运行属性会从指定的缓冲中按照指定规则依次获取下一个值。\n2.  **Uniforms 全局变量** (在一次绘制中对所有顶点保持一致值)\n3. **Textures 纹理** (从像素或纹理元素中获取的数据，来自于图片的数据), 纹理是一个数据序列,*也可以随意存放除了颜色数据以外的其它数据*。\n4. **Varyings 可变量**（一种顶点着色器给片断着色器传值的方式）\n\n```js\ngl_Position = vec4(x，y,z，w);\ngl_FragColor = vec4(r,g,b,a);\n```\n\n![](assets/20241024161847.png)\n\n\n### Pipeline\n\n#### 1、着色器（shader）& 程序（Program）创建\n```js\n// 创建着色器对象\ngl.createShader(type)\n// 提供数据源 source: string\ngl.shaderSource(shader, source);\n// 编译 -> 生成着色器\ngl.compileShader(shader);\n\n\n// shader的Program程序创建\nvar program = gl.createProgram();\ngl.attachShader(program, vertrexShader);\ngl.attachShader(program, fragmentShader);\ngl.linkProgram(program);// 连接program\n\n\n// 使用program\ngl.useProgram(program);\n```\n\n\n\n#### 2、缓存区创建与数据绑定\n分类型讲各自的数据绑定的方法\n##### 2.1 attribute绑定\n在`shader`上声明好变量（ `.vert`文件中变量 `a_position`）\n```js\nattribute vec4 a_position;\nvoid main() {\n\tgl_Position = a_position;\n}\n```\n\n绑定程序并启用这个变量\n```js\nconst positionAttributeLocation = gl.getAttribLocation(program, 'a_position');\n// 启用变量\ngl.enableVertexAttribArray(positionAttributeLocation);\n```\n\n绑定好了与着色器的通信管道，就可以传数据了，数据一般都是使用缓存区来保存\n```js\n// 创建缓存区\nconst positionBuffer = gl.createBuffer();\n\n\n/** \n * 首先绑定一个数据源到绑定点，然后可以引用绑定点指向该数据源\n * target - 指定绑定点，可以想象成一个WebGL内部的全局变量\n * buffer - 要绑定的缓存区\n*/\ngl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n\n// 三个二维点坐标\nvar positions = [\n\t0, 0,\n\t0, 0.5,\n\t0.7, 0,\n];\n/** \n * 创建并初始化了 Buffer 对象的数据存储区\n * target\n * size - 缓存区大小\n * srcData\n * usage - 缓存的usage类型\n*/\ngl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\n\n```\n\n至此，shader与缓存区的数据+连接都搞定了，最后要打通program与缓存区之间的隔阂\n```js\n/**\n * 属性绑定到当前的ARRAY_BUFFER\n * size - 每次迭代运行提取size个单位数据\n * type - 每个单位的数据类型\n * normalized - 是否归一化\n * stride - 0 = 移动单位数量 * 每个单位占用内存（sizeof(type)）每次迭代运行运动多少内存到下一个数据开始点\n * offset - 从缓冲起始位置开始读取\n*/\ngl.vertexAttribPointer(positionAttributeLocation, size, type, normalize, stride, offset);\n\n```\n这样我们就把一个顶点的数组传给`program`的顶点着色器里去了\n\n##### 2.2 uniform全局变量传递\n在`shader`上声明好变量\n```js\nuniform vec2 u_resolution;\nattribute vec2 a_position;\n\nvoid main() {\n  vec2 zeroToOne = a_position / u_resolution;\n  vec2 zeroToTwo = zeroToOne * 2.0;\n  vec2 clipSpace = zeroToTwo - 1.0;\n  // gl_Position = vec4(a_position, 0, 1);\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n}\n```\n\n绑定program与JS层，传递数据\n```js\nvar resolutionUniformLocation = gl.getUniformLocation(program, 'u_resolution');\n\n\n// 二维uniform2f，三维uniform3f，四维uniform4f\ngl.uniform2f(resolutionUniformLocation, gl.canvas.width, gl.canvas.height)\n\n```\n\n\n\n##### 2.3 texture纹理\n\n纹理可以将一个图片贴在我们画好的形状上。\n渲染纹理时需要纹理坐标，而不是像素坐标。无论纹理是什么尺寸，纹理坐标范围始终是**0.0 到 1.0** 。\n我们需要告诉WebGL矩形中每个顶点对应的纹理坐标。使用**varying**将纹理坐标从顶点着色器传到片段着色器。webgl只提供了绑定顶点着色器上attribute的方法\n\n首先先读取图片\n```js\nvar image = new Image();\n  image.src = \"./startNight.jpeg\";\n  image.onload = function () {\n\t// todo next\n\trender(image);\n  };\n```\n\n创建纹理缓存\n```js\n  // 创建纹理\nvar texture = gl.createTexture();\ngl.bindTexture(gl.TEXTURE_2D, texture);\n// 设置参数，让我们可以绘制任何尺寸的图像\n// webgl 1.0\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n// 纹理缩小过滤器\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n```\n\n纹理数据-> program\n\n```js\n\ngl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);// 加载的图片\n```\n\n纹理位置-> program\n```js\nconst texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\n // 给矩形提供纹理坐标\nvar texCoordBuffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\ngl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\ngl.enableVertexAttribArray(texCoordLocation);\ngl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n```\n\n\n\n\n#### 3、渲染\n```js\n\n/**\n * 清空画布 \n * clearColor: 指定清空canvas的颜色 \n * clear(mask): mask- 需要清除的缓冲区(颜色/深度/模板)\n*/\ngl.clearColor(0.0, 0.0, 0.0, 1.0); // 指定清空canvas的颜色 \ngl.clear(gl.COLOR_BUFFER_BIT); // 清空canvas\n\n/**\n * 画出形状 \n * mode: 图元类型\n * first: 指定从哪个点开始绘制\n * count: 绘制需要使用到多少个点\n*/\ngl.drawArrays(gl.TRIANGLES, 0, n);\n```\n\n\n\n\n### WebGL 重置画布尺寸\n每个画布都有两个尺寸:\n- **drawingbuffer** 的尺寸， 这个表示画布中有多少个像素。\n- **画布显示** 的尺寸， CSS决定画布显示的尺寸。\n```html\n<!-- 画布的显示尺寸是 400x300，drawingbuffer 是 10x15 -->\n<canvas id=\"c\" width=\"10\" height=\"15\" style=\"width: 400px; height: 300px;\"></canvas>\n```\n\n\n重置画布尺寸时除了需要重置canva的宽高，还需要调用`gl.viewport`设置视域\n```js\n\nfunction drawScene() {\n\twindow.addEventListener(\"resize\", onResize);\n\tonResize();\n\t\n\tgl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\t...\n}\nonResize() {\n\tthis.canvas.width = window.innerWidth;\n\tthis.canvas.height = window.innerHeight;\n}\n```\n\n\n\n\n### 坐标系的种类\n在webgl中使用贴图前，需要了解的是坐标系的种类。\n**canvas坐标系统（左）**：左上角为坐标原点，往右是X轴正方向，往下是Y轴正方向\n**顶点坐标系统（中）**：右手坐标系，拇指X方向，食指Y方向，中指为Z方向。\n**纹理坐标系统（右）**：纹理坐标为`UV`，`U`代表水平坐标，`V`代表垂直坐标。\n\n|  |  |  |\n| :--: | :--: | ---- |\n| ![](assets/2024-10-22-WebGL-BasicConcept-20241117011528.png) | ![\\|120](assets/2024-10-22-WebGL-BasicConcept-20241117011600.png) | ![](assets/2024-10-22-WebGL-BasicConcept-20241117011605.png) |\n\n\n\n### Summary\n初始化阶段\n\n- 创建所有着色器和程序并寻找参数位置 `gl.getUniformLocation`\n- 创建缓冲并上传顶点数据\n- 创建纹理并上传纹理数据\n\n渲染阶段\n\n- 清空并设置视图和其他全局状态（开启深度检测，剔除等等）\n- 对于想要绘制的每个物体\n    - 调用 `gl.useProgram` 使用需要的程序\n    - 设置物体的属性变量\n        - 为每个属性调用 `gl.bindBuffer`, `gl.vertexAttribPointer`, `gl.enableVertexAttribArray`\n    - 设置物体的全局变量\n        - 为每个全局变量调用 `gl.uniformXXX`\n        - 调用 `gl.activeTexture` 和 `gl.bindTexture` 设置纹理到纹理单元\n    - 调用 `gl.drawArrays` 或 `gl.drawElements`\n\n编译着色器\n\n>  [WebGL 码少趣多](https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-less-code-more-fun.html)\n>  \n>  [典型的WebGL着色程序模板](https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-boilerplate.html)，\n\n###  Reference\n[WebGL 基础知识](https://web.dev/articles/webgl-fundamentals?hl=zh-cn)\n\n[MDN WebGL API](https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API)\n\n[WebGL 基础概念](https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-fundamentals.html#toc)\n\n[带你快速入门webgl与shader着色器渲染基础](https://blog.csdn.net/gdutRex/article/details/107658328)\n\n[WebGL状态可视化](https://webglfundamentals.org/webgl/lessons/resources/webgl-state-diagram.html)\n\nhttps://thebookofshaders.com/02/?lan=ch",
      "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var A=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),F=(l,e)=>{for(var r in e)c(l,r,{get:e[r],enumerable:!0})},i=(l,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of E(e))!g.call(l,a)&&a!==r&&c(l,a,{get:()=>e[a],enumerable:!(o=p(e,a))||o.enumerable});return l};var u=(l,e,r)=>(r=l!=null?h(y(l)):{},i(e||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),m=l=>i(c({},\"__esModule\",{value:!0}),l);var d=A((D,s)=>{s.exports=_jsx_runtime});var w={};F(w,{default:()=>f,frontmatter:()=>B});var n=u(d()),B={title:\"WebGL \\u57FA\\u7840\\u6982\\u5FF5\",subtitle:null,layout:\"post\",date:new Date(17295552e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Graphic\"],url:null,image:null};function t(l){let e=Object.assign({h3:\"h3\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",blockquote:\"blockquote\",code:\"code\",ul:\"ul\",li:\"li\",em:\"em\",h5:\"h5\",ol:\"ol\",div:\"div\",figure:\"figure\",pre:\"pre\",img:\"img\",h4:\"h4\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h3,{id:\"whats-webgl\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#whats-webgl\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"What's WebGL\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"WebGL \\u5B9E\\u9645\\u4E0A\\u662F\",(0,n.jsx)(e.strong,{children:\"\\u4E00\\u79CD 2D API\"}),\"\\uFF0C\\u800C\\u975E 3D API\\u3002WebGL \\u53EA\\u5173\\u5FC3 2 \\u4E2A\\u65B9\\u9762\\u30022D \\u4E2D\\u7684\",(0,n.jsx)(e.strong,{children:\"\\u526A\\u88C1\\u7A7A\\u95F4\\u5750\\u6807\\uFF08-1~1\\uFF09\\u548C\\u989C\\u8272\"}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u88C1\\u526A\\u7A7A\\u95F4\\u7684\",(0,n.jsx)(e.code,{children:\"x\"}),\"\\u5750\\u6807\\u8303\\u56F4\\u662F -1 \\u5230 +1. \\u8FD9\\u5C31\\u610F\\u5473\\u77400\\u5728\\u4E2D\\u95F4\\u5E76\\u4E14\\u6B63\\u503C\\u5728\\u5B83\\u53F3\\u8FB9\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u88C1\\u526A\\u7A7A\\u95F4\\u4E2D -1 \\u662F\\u6700\\u5E95\\u7AEF +1 \\u662F\\u6700\\u9876\\u7AEF\\uFF0C \\u8FD9\\u4E5F\\u610F\\u5473\\u503C0\\u5728\\u4E2D\\u95F4\\uFF0C\\u6B63\\u503C\\u5728\\u4E0A\\u65B9\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"WebGL\\u5728\\u7535\\u8111\\u7684GPU\\u4E2D\\u8FD0\\u884C\\u3002\\u56E0\\u6B64\\u4F60\\u9700\\u8981\\u4F7F\\u7528\\u80FD\\u591F\\u5728GPU\\u4E0A\\u8FD0\\u884C\\u7684\\u4EE3\\u7801\\u3002 \\u8FD9\\u6837\\u7684\\u4EE3\\u7801\\u9700\\u8981\\u63D0\\u4F9B\\u6210\\u5BF9\\u7684\\u65B9\\u6CD5\\u3002\\u6BCF\\u5BF9\\u65B9\\u6CD5\\u5305\\u542B\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u9876\\u70B9\\u7740\\u8272\\u5668\\uFF08\",(0,n.jsx)(e.code,{children:\".vert\"}),\"\\xA0\\uFF09\\uFF1A\\u8BA1\\u7B97\\u9876\\u70B9\\u7684\\u4F4D\\u7F6E\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u7247\\u6BB5\\u7740\\u8272\\u5668\\uFF08 \",(0,n.jsx)(e.code,{children:\".frag\"}),`\\xA0\\uFF09\\uFF1A\\u8BA1\\u7B97\\u51FA\\u5F53\\u524D\\u7ED8\\u5236\\u56FE\\u5143\\u4E2D\\u6BCF\\u4E2A\\u50CF\\u7D20\\u7684\\u989C\\u8272\\u503C\n\\u5E76\\u4E14\\u4F7F\\u7528\\u4E00\\u79CD\\u548CC\\u6216C++\\u7C7B\\u4F3C\\u7684\\u5F3A\\u7C7B\\u578B\\u7684\\u8BED\\u8A00\\xA0`,(0,n.jsx)(e.a,{href:\"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html\",children:\"GLSL\"}),\"\\u3002 (GL\\u7740\\u8272\\u8BED\\u8A00)\\u3002 \\u6BCF\\u4E00\\u5BF9\\u7EC4\\u5408\\u8D77\\u6765\\u79F0\\u4F5C\\u4E00\\u4E2A\\xA0\",(0,n.jsx)(e.em,{children:\"program\"}),\"\\uFF08\\u7740\\u8272\\u7A0B\\u5E8F\\uFF09\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"GLSL\\u5168\\u79F0\\u662F Graphics\\xA0Library\\xA0Shader Language \\uFF08\\u56FE\\u5F62\\u5E93\\u7740\\u8272\\u5668\\u8BED\\u8A00\\uFF09\\uFF0C\\u662F\\u7740\\u8272\\u5668\\u4F7F\\u7528\\u7684\\u8BED\\u8A00\\u3002 \\u5B83\\u6709\\u4E00\\u4E9B\\u4E0D\\u540C\\u4E8EJavaScript\\u7684\\u7279\\u6027\\uFF0C\\u4E3B\\u8981\\u76EE\\u7684\\u662F\\u4E3A\\u6805\\u683C\\u5316\\u56FE\\u5F62\\u63D0\\u4F9B\\u5E38\\u7528\\u7684\\u8BA1\\u7B97\\u529F\\u80FD\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5BF9\\u4E8E\\u60F3\\u8981\\u7ED8\\u5236\\u7684\\u6BCF\\u4E00\\u4E2A\\u5BF9\\u8C61\\uFF0C\\u90FD\\u9700\\u8981\\u5148\\u8BBE\\u7F6E\\u4E00\\u7CFB\\u5217\\u72B6\\u6001\\u503C\\uFF0C\\u7136\\u540E\\u901A\\u8FC7\\u8C03\\u7528\\xA0\",(0,n.jsx)(e.code,{children:\"gl.drawArrays\"}),\"\\xA0\\u6216\\xA0\",(0,n.jsx)(e.code,{children:\"gl.drawElements\"}),\"\\xA0\\u8FD0\\u884C\\u4E00\\u4E2A\\u7740\\u8272\\u65B9\\u6CD5\\u5BF9\\uFF0C\\u4F7F\\u5F97\\u4F60\\u7684\\u7740\\u8272\\u5668\\u5BF9\\u80FD\\u591F\\u5728GPU\\u4E0A\\u8FD0\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.h5,{id:\"\\u7740\\u8272\\u5668shader\\u83B7\\u53D6\\u6570\\u636E\\u65B9\\u6CD5\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u7740\\u8272\\u5668shader\\u83B7\\u53D6\\u6570\\u636E\\u65B9\\u6CD5\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7740\\u8272\\u5668(shader)\\u83B7\\u53D6\\u6570\\u636E\\u65B9\\u6CD5\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Attributes \\u5C5E\\u6027\"}),\"  (\\u4ECE\\u7F13\\u51B2\\u4E2D\\u83B7\\u53D6\\u7684\\u6570\\u636E) \\u7F13\\u51B2\\u662F\\u53D1\\u9001\\u5230GPU\\u7684\\u4E00\\u4E9B\\u4E8C\\u8FDB\\u5236\\u6570\\u636E\\u5E8F\\u5217\\uFF0C\\u9876\\u70B9\\u7740\\u8272\\u5668 \\u6BCF\\u4E00\\u6B21\\u8FD0\\u884C\\u5C5E\\u6027\\u4F1A\\u4ECE\\u6307\\u5B9A\\u7684\\u7F13\\u51B2\\u4E2D\\u6309\\u7167\\u6307\\u5B9A\\u89C4\\u5219\\u4F9D\\u6B21\\u83B7\\u53D6\\u4E0B\\u4E00\\u4E2A\\u503C\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Uniforms \\u5168\\u5C40\\u53D8\\u91CF\"}),\" (\\u5728\\u4E00\\u6B21\\u7ED8\\u5236\\u4E2D\\u5BF9\\u6240\\u6709\\u9876\\u70B9\\u4FDD\\u6301\\u4E00\\u81F4\\u503C)\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Textures \\u7EB9\\u7406\"}),\" (\\u4ECE\\u50CF\\u7D20\\u6216\\u7EB9\\u7406\\u5143\\u7D20\\u4E2D\\u83B7\\u53D6\\u7684\\u6570\\u636E\\uFF0C\\u6765\\u81EA\\u4E8E\\u56FE\\u7247\\u7684\\u6570\\u636E), \\u7EB9\\u7406\\u662F\\u4E00\\u4E2A\\u6570\\u636E\\u5E8F\\u5217,\",(0,n.jsx)(e.em,{children:\"\\u4E5F\\u53EF\\u4EE5\\u968F\\u610F\\u5B58\\u653E\\u9664\\u4E86\\u989C\\u8272\\u6570\\u636E\\u4EE5\\u5916\\u7684\\u5176\\u5B83\\u6570\\u636E\"}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Varyings \\u53EF\\u53D8\\u91CF\"}),\"\\uFF08\\u4E00\\u79CD\\u9876\\u70B9\\u7740\\u8272\\u5668\\u7ED9\\u7247\\u65AD\\u7740\\u8272\\u5668\\u4F20\\u503C\\u7684\\u65B9\\u5F0F\\uFF09\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`gl_Position = vec4(x\\uFF0Cy,z\\uFF0Cw);\ngl_FragColor = vec4(r,g,b,a);\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl_Position \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" vec4\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(x\\uFF0Cy,z\\uFF0Cw);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl_FragColor \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" vec4\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(r,g,b,a);\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/post/assets/20241024161847.png\",alt:\"\",width:\"861\",height:\"281\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAALVBMVEWjYz3lyABUc5O2sjFrgpu2fli9lzxqgI6sp0+7lUHVwSG+emLHo562kobjpCV/Xsl1AAAACHRSTlN3/c/EzIXPxg3wV5oAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAfSURBVHicY+BjY+BmYOZiZOBkYuBhZeEAM3gZ2DkYAQclAH+Z4dnCAAAAAElFTkSuQmCC\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"pipeline\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#pipeline\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Pipeline\"]}),`\n`,(0,n.jsxs)(e.h4,{id:\"1\\u7740\\u8272\\u5668shader-\\u7A0B\\u5E8Fprogram\\u521B\\u5EFA\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#1\\u7740\\u8272\\u5668shader-\\u7A0B\\u5E8Fprogram\\u521B\\u5EFA\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"1\\u3001\\u7740\\u8272\\u5668\\uFF08shader\\uFF09& \\u7A0B\\u5E8F\\uFF08Program\\uFF09\\u521B\\u5EFA\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`// \\u521B\\u5EFA\\u7740\\u8272\\u5668\\u5BF9\\u8C61\ngl.createShader(type)\n// \\u63D0\\u4F9B\\u6570\\u636E\\u6E90 source: string\ngl.shaderSource(shader, source);\n// \\u7F16\\u8BD1 -> \\u751F\\u6210\\u7740\\u8272\\u5668\ngl.compileShader(shader);\n\n\n// shader\\u7684Program\\u7A0B\\u5E8F\\u521B\\u5EFA\nvar program = gl.createProgram();\ngl.attachShader(program, vertrexShader);\ngl.attachShader(program, fragmentShader);\ngl.linkProgram(program);// \\u8FDE\\u63A5program\n\n\n// \\u4F7F\\u7528program\ngl.useProgram(program);\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u521B\\u5EFA\\u7740\\u8272\\u5668\\u5BF9\\u8C61\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createShader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(type)\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u63D0\\u4F9B\\u6570\\u636E\\u6E90 source: string\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"shaderSource\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(shader, source);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u7F16\\u8BD1 -> \\u751F\\u6210\\u7740\\u8272\\u5668\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"compileShader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(shader);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// shader\\u7684Program\\u7A0B\\u5E8F\\u521B\\u5EFA\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" program \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createProgram\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"attachShader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(program, vertrexShader);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"attachShader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(program, fragmentShader);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"linkProgram\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(program);\"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u8FDE\\u63A5program\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528program\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"useProgram\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(program);\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h4,{id:\"2\\u7F13\\u5B58\\u533A\\u521B\\u5EFA\\u4E0E\\u6570\\u636E\\u7ED1\\u5B9A\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#2\\u7F13\\u5B58\\u533A\\u521B\\u5EFA\\u4E0E\\u6570\\u636E\\u7ED1\\u5B9A\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"2\\u3001\\u7F13\\u5B58\\u533A\\u521B\\u5EFA\\u4E0E\\u6570\\u636E\\u7ED1\\u5B9A\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5206\\u7C7B\\u578B\\u8BB2\\u5404\\u81EA\\u7684\\u6570\\u636E\\u7ED1\\u5B9A\\u7684\\u65B9\\u6CD5\"}),`\n`,(0,n.jsxs)(e.h5,{id:\"21-attribute\\u7ED1\\u5B9A\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#21-attribute\\u7ED1\\u5B9A\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"2.1 attribute\\u7ED1\\u5B9A\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\",(0,n.jsx)(e.code,{children:\"shader\"}),\"\\u4E0A\\u58F0\\u660E\\u597D\\u53D8\\u91CF\\uFF08 \",(0,n.jsx)(e.code,{children:\".vert\"}),\"\\u6587\\u4EF6\\u4E2D\\u53D8\\u91CF \",(0,n.jsx)(e.code,{children:\"a_position\"}),\"\\uFF09\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`attribute vec4 a_position;\nvoid main() {\n\tgl_Position = a_position;\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"attribute vec4 a_position;\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"void\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" main\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"\tgl_Position \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" a_position;\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7ED1\\u5B9A\\u7A0B\\u5E8F\\u5E76\\u542F\\u7528\\u8FD9\\u4E2A\\u53D8\\u91CF\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`const positionAttributeLocation = gl.getAttribLocation(program, 'a_position');\n// \\u542F\\u7528\\u53D8\\u91CF\ngl.enableVertexAttribArray(positionAttributeLocation);\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" positionAttributeLocation\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getAttribLocation\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(program, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'a_position'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u542F\\u7528\\u53D8\\u91CF\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"enableVertexAttribArray\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(positionAttributeLocation);\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7ED1\\u5B9A\\u597D\\u4E86\\u4E0E\\u7740\\u8272\\u5668\\u7684\\u901A\\u4FE1\\u7BA1\\u9053\\uFF0C\\u5C31\\u53EF\\u4EE5\\u4F20\\u6570\\u636E\\u4E86\\uFF0C\\u6570\\u636E\\u4E00\\u822C\\u90FD\\u662F\\u4F7F\\u7528\\u7F13\\u5B58\\u533A\\u6765\\u4FDD\\u5B58\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`// \\u521B\\u5EFA\\u7F13\\u5B58\\u533A\nconst positionBuffer = gl.createBuffer();\n\n\n/** \n * \\u9996\\u5148\\u7ED1\\u5B9A\\u4E00\\u4E2A\\u6570\\u636E\\u6E90\\u5230\\u7ED1\\u5B9A\\u70B9\\uFF0C\\u7136\\u540E\\u53EF\\u4EE5\\u5F15\\u7528\\u7ED1\\u5B9A\\u70B9\\u6307\\u5411\\u8BE5\\u6570\\u636E\\u6E90\n * target - \\u6307\\u5B9A\\u7ED1\\u5B9A\\u70B9\\uFF0C\\u53EF\\u4EE5\\u60F3\\u8C61\\u6210\\u4E00\\u4E2AWebGL\\u5185\\u90E8\\u7684\\u5168\\u5C40\\u53D8\\u91CF\n * buffer - \\u8981\\u7ED1\\u5B9A\\u7684\\u7F13\\u5B58\\u533A\n*/\ngl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n\n// \\u4E09\\u4E2A\\u4E8C\\u7EF4\\u70B9\\u5750\\u6807\nvar positions = [\n\t0, 0,\n\t0, 0.5,\n\t0.7, 0,\n];\n/** \n * \\u521B\\u5EFA\\u5E76\\u521D\\u59CB\\u5316\\u4E86 Buffer \\u5BF9\\u8C61\\u7684\\u6570\\u636E\\u5B58\\u50A8\\u533A\n * target\n * size - \\u7F13\\u5B58\\u533A\\u5927\\u5C0F\n * srcData\n * usage - \\u7F13\\u5B58\\u7684usage\\u7C7B\\u578B\n*/\ngl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u521B\\u5EFA\\u7F13\\u5B58\\u533A\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" positionBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/** \"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \\u9996\\u5148\\u7ED1\\u5B9A\\u4E00\\u4E2A\\u6570\\u636E\\u6E90\\u5230\\u7ED1\\u5B9A\\u70B9\\uFF0C\\u7136\\u540E\\u53EF\\u4EE5\\u5F15\\u7528\\u7ED1\\u5B9A\\u70B9\\u6307\\u5411\\u8BE5\\u6570\\u636E\\u6E90\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * target - \\u6307\\u5B9A\\u7ED1\\u5B9A\\u70B9\\uFF0C\\u53EF\\u4EE5\\u60F3\\u8C61\\u6210\\u4E00\\u4E2AWebGL\\u5185\\u90E8\\u7684\\u5168\\u5C40\\u53D8\\u91CF\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * buffer - \\u8981\\u7ED1\\u5B9A\\u7684\\u7F13\\u5B58\\u533A\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"*/\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"bindBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"ARRAY_BUFFER\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", positionBuffer);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4E09\\u4E2A\\u4E8C\\u7EF4\\u70B9\\u5750\\u6807\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" positions \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.5\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t0.7\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/** \"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \\u521B\\u5EFA\\u5E76\\u521D\\u59CB\\u5316\\u4E86 Buffer \\u5BF9\\u8C61\\u7684\\u6570\\u636E\\u5B58\\u50A8\\u533A\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * target\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * size - \\u7F13\\u5B58\\u533A\\u5927\\u5C0F\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * srcData\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * usage - \\u7F13\\u5B58\\u7684usage\\u7C7B\\u578B\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"*/\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"bufferData\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"ARRAY_BUFFER\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Float32Array\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(positions), gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"STATIC_DRAW\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u81F3\\u6B64\\uFF0Cshader\\u4E0E\\u7F13\\u5B58\\u533A\\u7684\\u6570\\u636E+\\u8FDE\\u63A5\\u90FD\\u641E\\u5B9A\\u4E86\\uFF0C\\u6700\\u540E\\u8981\\u6253\\u901Aprogram\\u4E0E\\u7F13\\u5B58\\u533A\\u4E4B\\u95F4\\u7684\\u9694\\u9602\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * \\u5C5E\\u6027\\u7ED1\\u5B9A\\u5230\\u5F53\\u524D\\u7684ARRAY_BUFFER\n * size - \\u6BCF\\u6B21\\u8FED\\u4EE3\\u8FD0\\u884C\\u63D0\\u53D6size\\u4E2A\\u5355\\u4F4D\\u6570\\u636E\n * type - \\u6BCF\\u4E2A\\u5355\\u4F4D\\u7684\\u6570\\u636E\\u7C7B\\u578B\n * normalized - \\u662F\\u5426\\u5F52\\u4E00\\u5316\n * stride - 0 = \\u79FB\\u52A8\\u5355\\u4F4D\\u6570\\u91CF * \\u6BCF\\u4E2A\\u5355\\u4F4D\\u5360\\u7528\\u5185\\u5B58\\uFF08sizeof(type)\\uFF09\\u6BCF\\u6B21\\u8FED\\u4EE3\\u8FD0\\u884C\\u8FD0\\u52A8\\u591A\\u5C11\\u5185\\u5B58\\u5230\\u4E0B\\u4E00\\u4E2A\\u6570\\u636E\\u5F00\\u59CB\\u70B9\n * offset - \\u4ECE\\u7F13\\u51B2\\u8D77\\u59CB\\u4F4D\\u7F6E\\u5F00\\u59CB\\u8BFB\\u53D6\n*/\ngl.vertexAttribPointer(positionAttributeLocation, size, type, normalize, stride, offset);\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \\u5C5E\\u6027\\u7ED1\\u5B9A\\u5230\\u5F53\\u524D\\u7684ARRAY_BUFFER\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * size - \\u6BCF\\u6B21\\u8FED\\u4EE3\\u8FD0\\u884C\\u63D0\\u53D6size\\u4E2A\\u5355\\u4F4D\\u6570\\u636E\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * type - \\u6BCF\\u4E2A\\u5355\\u4F4D\\u7684\\u6570\\u636E\\u7C7B\\u578B\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * normalized - \\u662F\\u5426\\u5F52\\u4E00\\u5316\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * stride - 0 = \\u79FB\\u52A8\\u5355\\u4F4D\\u6570\\u91CF * \\u6BCF\\u4E2A\\u5355\\u4F4D\\u5360\\u7528\\u5185\\u5B58\\uFF08sizeof(type)\\uFF09\\u6BCF\\u6B21\\u8FED\\u4EE3\\u8FD0\\u884C\\u8FD0\\u52A8\\u591A\\u5C11\\u5185\\u5B58\\u5230\\u4E0B\\u4E00\\u4E2A\\u6570\\u636E\\u5F00\\u59CB\\u70B9\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * offset - \\u4ECE\\u7F13\\u51B2\\u8D77\\u59CB\\u4F4D\\u7F6E\\u5F00\\u59CB\\u8BFB\\u53D6\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"*/\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"vertexAttribPointer\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(positionAttributeLocation, size, type, normalize, stride, offset);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u6837\\u6211\\u4EEC\\u5C31\\u628A\\u4E00\\u4E2A\\u9876\\u70B9\\u7684\\u6570\\u7EC4\\u4F20\\u7ED9\",(0,n.jsx)(e.code,{children:\"program\"}),\"\\u7684\\u9876\\u70B9\\u7740\\u8272\\u5668\\u91CC\\u53BB\\u4E86\"]}),`\n`,(0,n.jsxs)(e.h5,{id:\"22-uniform\\u5168\\u5C40\\u53D8\\u91CF\\u4F20\\u9012\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#22-uniform\\u5168\\u5C40\\u53D8\\u91CF\\u4F20\\u9012\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"2.2 uniform\\u5168\\u5C40\\u53D8\\u91CF\\u4F20\\u9012\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\",(0,n.jsx)(e.code,{children:\"shader\"}),\"\\u4E0A\\u58F0\\u660E\\u597D\\u53D8\\u91CF\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`uniform vec2 u_resolution;\nattribute vec2 a_position;\n\nvoid main() {\n  vec2 zeroToOne = a_position / u_resolution;\n  vec2 zeroToTwo = zeroToOne * 2.0;\n  vec2 clipSpace = zeroToTwo - 1.0;\n  // gl_Position = vec4(a_position, 0, 1);\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"uniform vec2 u_resolution;\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"attribute vec2 a_position;\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"void\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" main\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 zeroToOne \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" a_position \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" u_resolution;\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 zeroToTwo \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" zeroToOne \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 2.0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 clipSpace \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" zeroToTwo \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1.0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // gl_Position = vec4(a_position, 0, 1);\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  gl_Position \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" vec4\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(clipSpace \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" vec2\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"), \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7ED1\\u5B9Aprogram\\u4E0EJS\\u5C42\\uFF0C\\u4F20\\u9012\\u6570\\u636E\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`var resolutionUniformLocation = gl.getUniformLocation(program, 'u_resolution');\n\n\n// \\u4E8C\\u7EF4uniform2f\\uFF0C\\u4E09\\u7EF4uniform3f\\uFF0C\\u56DB\\u7EF4uniform4f\ngl.uniform2f(resolutionUniformLocation, gl.canvas.width, gl.canvas.height)\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" resolutionUniformLocation \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getUniformLocation\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(program, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'u_resolution'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4E8C\\u7EF4uniform2f\\uFF0C\\u4E09\\u7EF4uniform3f\\uFF0C\\u56DB\\u7EF4uniform4f\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"uniform2f\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(resolutionUniformLocation, gl.canvas.width, gl.canvas.height)\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.h5,{id:\"23-texture\\u7EB9\\u7406\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#23-texture\\u7EB9\\u7406\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"2.3 texture\\u7EB9\\u7406\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`\\u7EB9\\u7406\\u53EF\\u4EE5\\u5C06\\u4E00\\u4E2A\\u56FE\\u7247\\u8D34\\u5728\\u6211\\u4EEC\\u753B\\u597D\\u7684\\u5F62\\u72B6\\u4E0A\\u3002\n\\u6E32\\u67D3\\u7EB9\\u7406\\u65F6\\u9700\\u8981\\u7EB9\\u7406\\u5750\\u6807\\uFF0C\\u800C\\u4E0D\\u662F\\u50CF\\u7D20\\u5750\\u6807\\u3002\\u65E0\\u8BBA\\u7EB9\\u7406\\u662F\\u4EC0\\u4E48\\u5C3A\\u5BF8\\uFF0C\\u7EB9\\u7406\\u5750\\u6807\\u8303\\u56F4\\u59CB\\u7EC8\\u662F`,(0,n.jsx)(e.strong,{children:\"0.0 \\u5230 1.0\"}),` \\u3002\n\\u6211\\u4EEC\\u9700\\u8981\\u544A\\u8BC9WebGL\\u77E9\\u5F62\\u4E2D\\u6BCF\\u4E2A\\u9876\\u70B9\\u5BF9\\u5E94\\u7684\\u7EB9\\u7406\\u5750\\u6807\\u3002\\u4F7F\\u7528`,(0,n.jsx)(e.strong,{children:\"varying\"}),\"\\u5C06\\u7EB9\\u7406\\u5750\\u6807\\u4ECE\\u9876\\u70B9\\u7740\\u8272\\u5668\\u4F20\\u5230\\u7247\\u6BB5\\u7740\\u8272\\u5668\\u3002webgl\\u53EA\\u63D0\\u4F9B\\u4E86\\u7ED1\\u5B9A\\u9876\\u70B9\\u7740\\u8272\\u5668\\u4E0Aattribute\\u7684\\u65B9\\u6CD5\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u9996\\u5148\\u5148\\u8BFB\\u53D6\\u56FE\\u7247\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`var image = new Image();\n  image.src = \"./startNight.jpeg\";\n  image.onload = function () {\n\t// todo next\n\trender(image);\n  };\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" image \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Image\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  image.src \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"./startNight.jpeg\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  image.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onload\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"\t// todo next\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"\trender\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(image);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u521B\\u5EFA\\u7EB9\\u7406\\u7F13\\u5B58\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`  // \\u521B\\u5EFA\\u7EB9\\u7406\nvar texture = gl.createTexture();\ngl.bindTexture(gl.TEXTURE_2D, texture);\n// \\u8BBE\\u7F6E\\u53C2\\u6570\\uFF0C\\u8BA9\\u6211\\u4EEC\\u53EF\\u4EE5\\u7ED8\\u5236\\u4EFB\\u4F55\\u5C3A\\u5BF8\\u7684\\u56FE\\u50CF\n// webgl 1.0\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n// \\u7EB9\\u7406\\u7F29\\u5C0F\\u8FC7\\u6EE4\\u5668\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // \\u521B\\u5EFA\\u7EB9\\u7406\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" texture \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createTexture\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"bindTexture\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_2D\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", texture);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u8BBE\\u7F6E\\u53C2\\u6570\\uFF0C\\u8BA9\\u6211\\u4EEC\\u53EF\\u4EE5\\u7ED8\\u5236\\u4EFB\\u4F55\\u5C3A\\u5BF8\\u7684\\u56FE\\u50CF\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// webgl 1.0\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"texParameteri\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_2D\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_WRAP_S\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"CLAMP_TO_EDGE\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"texParameteri\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_2D\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_WRAP_T\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"CLAMP_TO_EDGE\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u7EB9\\u7406\\u7F29\\u5C0F\\u8FC7\\u6EE4\\u5668\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"texParameteri\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_2D\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_MIN_FILTER\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"NEAREST\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"texParameteri\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_2D\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_MAG_FILTER\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"NEAREST\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7EB9\\u7406\\u6570\\u636E-> program\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\ngl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);// \\u52A0\\u8F7D\\u7684\\u56FE\\u7247\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"texImage2D\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TEXTURE_2D\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"RGBA\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"RGBA\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"UNSIGNED_BYTE\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", image);\"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u52A0\\u8F7D\\u7684\\u56FE\\u7247\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7EB9\\u7406\\u4F4D\\u7F6E-> program\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`const texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\n // \\u7ED9\\u77E9\\u5F62\\u63D0\\u4F9B\\u7EB9\\u7406\\u5750\\u6807\nvar texCoordBuffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\ngl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\ngl.enableVertexAttribArray(texCoordLocation);\ngl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" texCoordLocation\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getAttribLocation\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(program, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'a_texCoord'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" // \\u7ED9\\u77E9\\u5F62\\u63D0\\u4F9B\\u7EB9\\u7406\\u5750\\u6807\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" texCoordBuffer \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"bindBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"ARRAY_BUFFER\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", texCoordBuffer);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"bufferData\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"ARRAY_BUFFER\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Float32Array\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"([\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]), gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"STATIC_DRAW\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"enableVertexAttribArray\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(texCoordLocation);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"vertexAttribPointer\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(texCoordLocation, \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"FLOAT\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h4,{id:\"3\\u6E32\\u67D3\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#3\\u6E32\\u67D3\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"3\\u3001\\u6E32\\u67D3\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\n/**\n * \\u6E05\\u7A7A\\u753B\\u5E03 \n * clearColor: \\u6307\\u5B9A\\u6E05\\u7A7Acanvas\\u7684\\u989C\\u8272 \n * clear(mask): mask- \\u9700\\u8981\\u6E05\\u9664\\u7684\\u7F13\\u51B2\\u533A(\\u989C\\u8272/\\u6DF1\\u5EA6/\\u6A21\\u677F)\n*/\ngl.clearColor(0.0, 0.0, 0.0, 1.0); // \\u6307\\u5B9A\\u6E05\\u7A7Acanvas\\u7684\\u989C\\u8272 \ngl.clear(gl.COLOR_BUFFER_BIT); // \\u6E05\\u7A7Acanvas\n\n/**\n * \\u753B\\u51FA\\u5F62\\u72B6 \n * mode: \\u56FE\\u5143\\u7C7B\\u578B\n * first: \\u6307\\u5B9A\\u4ECE\\u54EA\\u4E2A\\u70B9\\u5F00\\u59CB\\u7ED8\\u5236\n * count: \\u7ED8\\u5236\\u9700\\u8981\\u4F7F\\u7528\\u5230\\u591A\\u5C11\\u4E2A\\u70B9\n*/\ngl.drawArrays(gl.TRIANGLES, 0, n);\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \\u6E05\\u7A7A\\u753B\\u5E03 \"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * clearColor: \\u6307\\u5B9A\\u6E05\\u7A7Acanvas\\u7684\\u989C\\u8272 \"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * clear(mask): mask- \\u9700\\u8981\\u6E05\\u9664\\u7684\\u7F13\\u51B2\\u533A(\\u989C\\u8272/\\u6DF1\\u5EA6/\\u6A21\\u677F)\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"*/\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"clearColor\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1.0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6307\\u5B9A\\u6E05\\u7A7Acanvas\\u7684\\u989C\\u8272 \"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"clear\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"COLOR_BUFFER_BIT\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6E05\\u7A7Acanvas\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \\u753B\\u51FA\\u5F62\\u72B6 \"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * mode: \\u56FE\\u5143\\u7C7B\\u578B\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * first: \\u6307\\u5B9A\\u4ECE\\u54EA\\u4E2A\\u70B9\\u5F00\\u59CB\\u7ED8\\u5236\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * count: \\u7ED8\\u5236\\u9700\\u8981\\u4F7F\\u7528\\u5230\\u591A\\u5C11\\u4E2A\\u70B9\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"*/\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"drawArrays\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(gl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TRIANGLES\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", n);\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"webgl-\\u91CD\\u7F6E\\u753B\\u5E03\\u5C3A\\u5BF8\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#webgl-\\u91CD\\u7F6E\\u753B\\u5E03\\u5C3A\\u5BF8\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"WebGL \\u91CD\\u7F6E\\u753B\\u5E03\\u5C3A\\u5BF8\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6BCF\\u4E2A\\u753B\\u5E03\\u90FD\\u6709\\u4E24\\u4E2A\\u5C3A\\u5BF8:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"drawingbuffer\"}),\" \\u7684\\u5C3A\\u5BF8\\uFF0C \\u8FD9\\u4E2A\\u8868\\u793A\\u753B\\u5E03\\u4E2D\\u6709\\u591A\\u5C11\\u4E2A\\u50CF\\u7D20\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u753B\\u5E03\\u663E\\u793A\"}),\" \\u7684\\u5C3A\\u5BF8\\uFF0C CSS\\u51B3\\u5B9A\\u753B\\u5E03\\u663E\\u793A\\u7684\\u5C3A\\u5BF8\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"html\",\"data-theme\":\"github-dark\",raw:`<!-- \\u753B\\u5E03\\u7684\\u663E\\u793A\\u5C3A\\u5BF8\\u662F 400x300\\uFF0Cdrawingbuffer \\u662F 10x15 -->\n<canvas id=\"c\" width=\"10\" height=\"15\" style=\"width: 400px; height: 300px;\"></canvas>\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"html\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"<!-- \\u753B\\u5E03\\u7684\\u663E\\u793A\\u5C3A\\u5BF8\\u662F 400x300\\uFF0Cdrawingbuffer \\u662F 10x15 -->\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"canvas\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" id\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"c\"'}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" width\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"10\"'}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" height\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"15\"'}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" style\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"width: 400px; height: 300px;\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"canvas\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u91CD\\u7F6E\\u753B\\u5E03\\u5C3A\\u5BF8\\u65F6\\u9664\\u4E86\\u9700\\u8981\\u91CD\\u7F6Ecanva\\u7684\\u5BBD\\u9AD8\\uFF0C\\u8FD8\\u9700\\u8981\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"gl.viewport\"}),\"\\u8BBE\\u7F6E\\u89C6\\u57DF\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\nfunction drawScene() {\n\twindow.addEventListener(\"resize\", onResize);\n\tonResize();\n\t\n\tgl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\t...\n}\nonResize() {\n\tthis.canvas.width = window.innerWidth;\n\tthis.canvas.height = window.innerHeight;\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" drawScene\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"\twindow.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"resize\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", onResize);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"\tonResize\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"\t\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"\tgl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"viewport\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", gl.canvas.width, gl.canvas.height);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\t...\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onResize\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\tthis\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".canvas.width \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" window.innerWidth;\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\tthis\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".canvas.height \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" window.innerHeight;\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u5750\\u6807\\u7CFB\\u7684\\u79CD\\u7C7B\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u5750\\u6807\\u7CFB\\u7684\\u79CD\\u7C7B\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5750\\u6807\\u7CFB\\u7684\\u79CD\\u7C7B\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`\\u5728webgl\\u4E2D\\u4F7F\\u7528\\u8D34\\u56FE\\u524D\\uFF0C\\u9700\\u8981\\u4E86\\u89E3\\u7684\\u662F\\u5750\\u6807\\u7CFB\\u7684\\u79CD\\u7C7B\\u3002\n`,(0,n.jsx)(e.strong,{children:\"canvas\\u5750\\u6807\\u7CFB\\u7EDF\\uFF08\\u5DE6\\uFF09\"}),`\\uFF1A\\u5DE6\\u4E0A\\u89D2\\u4E3A\\u5750\\u6807\\u539F\\u70B9\\uFF0C\\u5F80\\u53F3\\u662FX\\u8F74\\u6B63\\u65B9\\u5411\\uFF0C\\u5F80\\u4E0B\\u662FY\\u8F74\\u6B63\\u65B9\\u5411\n`,(0,n.jsx)(e.strong,{children:\"\\u9876\\u70B9\\u5750\\u6807\\u7CFB\\u7EDF\\uFF08\\u4E2D\\uFF09\"}),`\\uFF1A\\u53F3\\u624B\\u5750\\u6807\\u7CFB\\uFF0C\\u62C7\\u6307X\\u65B9\\u5411\\uFF0C\\u98DF\\u6307Y\\u65B9\\u5411\\uFF0C\\u4E2D\\u6307\\u4E3AZ\\u65B9\\u5411\\u3002\n`,(0,n.jsx)(e.strong,{children:\"\\u7EB9\\u7406\\u5750\\u6807\\u7CFB\\u7EDF\\uFF08\\u53F3\\uFF09\"}),\"\\uFF1A\\u7EB9\\u7406\\u5750\\u6807\\u4E3A\",(0,n.jsx)(e.code,{children:\"UV\"}),\"\\uFF0C\",(0,n.jsx)(e.code,{children:\"U\"}),\"\\u4EE3\\u8868\\u6C34\\u5E73\\u5750\\u6807\\uFF0C\",(0,n.jsx)(e.code,{children:\"V\"}),\"\\u4EE3\\u8868\\u5782\\u76F4\\u5750\\u6807\\u3002\"]}),`\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{align:\"center\"}),(0,n.jsx)(e.th,{align:\"center\"}),(0,n.jsx)(e.th,{})]})}),(0,n.jsx)(e.tbody,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\"center\",children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-22-WebGL-BasicConcept-20241117011528.png\",alt:\"\",width:\"550\",height:\"346\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAADFBMVEX9/f309PTt7e3m5ubajU4gAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIUlEQVR4nDWIsQ0AIAyAgP7/s9FGJoAKUGrU8RZLX96FAwOZAB8vSVfOAAAAAElFTkSuQmCC\"})}),(0,n.jsx)(e.td,{align:\"center\",children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-22-WebGL-BasicConcept-20241117011600.png\",alt:\"|120\",width:\"482\",height:\"712\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAMCAMAAABoQAyvAAAAMFBMVEXv7+/t7e3x8fHf3t7q6unV0tDm5eT19/nY2Nm5p5qQZ0vSysTNwrqkfGGwkX3AwsNO4AudAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASUlEQVR4nC2LyQ3AMAzDKB9JnPTYf9vCQPkiKAiZJ40IlySEflE4mHVJ97XAlivGIHLYEZA+T80+z9rPGaB57btaiLp6EvEuC306KAFtmYG/GwAAAABJRU5ErkJggg==\"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-22-WebGL-BasicConcept-20241117011605.png\",alt:\"\",width:\"540\",height:\"380\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAD1BMVEX09PT+/v76+vrs7Ozg4OC1Um+IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJ0lEQVR4nB3IwQ0AMBCDMAK3/8yV6qe5tBwFtSGbTEDBwR1dsv77AAlDAFDWMhCFAAAAAElFTkSuQmCC\"})})]})})]}),`\n`,(0,n.jsxs)(e.h3,{id:\"summary\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#summary\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Summary\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u521D\\u59CB\\u5316\\u9636\\u6BB5\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u521B\\u5EFA\\u6240\\u6709\\u7740\\u8272\\u5668\\u548C\\u7A0B\\u5E8F\\u5E76\\u5BFB\\u627E\\u53C2\\u6570\\u4F4D\\u7F6E \",(0,n.jsx)(e.code,{children:\"gl.getUniformLocation\"})]}),`\n`,(0,n.jsx)(e.li,{children:\"\\u521B\\u5EFA\\u7F13\\u51B2\\u5E76\\u4E0A\\u4F20\\u9876\\u70B9\\u6570\\u636E\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u521B\\u5EFA\\u7EB9\\u7406\\u5E76\\u4E0A\\u4F20\\u7EB9\\u7406\\u6570\\u636E\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6E32\\u67D3\\u9636\\u6BB5\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u6E05\\u7A7A\\u5E76\\u8BBE\\u7F6E\\u89C6\\u56FE\\u548C\\u5176\\u4ED6\\u5168\\u5C40\\u72B6\\u6001\\uFF08\\u5F00\\u542F\\u6DF1\\u5EA6\\u68C0\\u6D4B\\uFF0C\\u5254\\u9664\\u7B49\\u7B49\\uFF09\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5BF9\\u4E8E\\u60F3\\u8981\\u7ED8\\u5236\\u7684\\u6BCF\\u4E2A\\u7269\\u4F53\",`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8C03\\u7528\\xA0\",(0,n.jsx)(e.code,{children:\"gl.useProgram\"}),\"\\xA0\\u4F7F\\u7528\\u9700\\u8981\\u7684\\u7A0B\\u5E8F\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8BBE\\u7F6E\\u7269\\u4F53\\u7684\\u5C5E\\u6027\\u53D8\\u91CF\",`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u4E3A\\u6BCF\\u4E2A\\u5C5E\\u6027\\u8C03\\u7528\\xA0\",(0,n.jsx)(e.code,{children:\"gl.bindBuffer\"}),\",\\xA0\",(0,n.jsx)(e.code,{children:\"gl.vertexAttribPointer\"}),\",\\xA0\",(0,n.jsx)(e.code,{children:\"gl.enableVertexAttribArray\"})]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8BBE\\u7F6E\\u7269\\u4F53\\u7684\\u5168\\u5C40\\u53D8\\u91CF\",`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u4E3A\\u6BCF\\u4E2A\\u5168\\u5C40\\u53D8\\u91CF\\u8C03\\u7528\\xA0\",(0,n.jsx)(e.code,{children:\"gl.uniformXXX\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8C03\\u7528\\xA0\",(0,n.jsx)(e.code,{children:\"gl.activeTexture\"}),\"\\xA0\\u548C\\xA0\",(0,n.jsx)(e.code,{children:\"gl.bindTexture\"}),\"\\xA0\\u8BBE\\u7F6E\\u7EB9\\u7406\\u5230\\u7EB9\\u7406\\u5355\\u5143\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8C03\\u7528\\xA0\",(0,n.jsx)(e.code,{children:\"gl.drawArrays\"}),\"\\xA0\\u6216\\xA0\",(0,n.jsx)(e.code,{children:\"gl.drawElements\"})]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7F16\\u8BD1\\u7740\\u8272\\u5668\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-less-code-more-fun.html\",children:\"WebGL \\u7801\\u5C11\\u8DA3\\u591A\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-boilerplate.html\",children:\"\\u5178\\u578B\\u7684WebGL\\u7740\\u8272\\u7A0B\\u5E8F\\u6A21\\u677F\"}),\"\\uFF0C\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"reference\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#reference\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://web.dev/articles/webgl-fundamentals?hl=zh-cn\",children:\"WebGL \\u57FA\\u7840\\u77E5\\u8BC6\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API\",children:\"MDN WebGL API\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-fundamentals.html#toc\",children:\"WebGL \\u57FA\\u7840\\u6982\\u5FF5\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://blog.csdn.net/gdutRex/article/details/107658328\",children:\"\\u5E26\\u4F60\\u5FEB\\u901F\\u5165\\u95E8webgl\\u4E0Eshader\\u7740\\u8272\\u5668\\u6E32\\u67D3\\u57FA\\u7840\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://webglfundamentals.org/webgl/lessons/resources/webgl-state-diagram.html\",children:\"WebGL\\u72B6\\u6001\\u53EF\\u89C6\\u5316\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://thebookofshaders.com/02/?lan=ch\",children:\"https://thebookofshaders.com/02/?lan=ch\"})})]})}function b(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(t,l)})):t(l)}var f=b;return m(w);})();\n;return Component;"
    },
    "_id": "post/2024-10-22-WebGL-BasicConcept.md",
    "_raw": {
      "sourceFilePath": "post/2024-10-22-WebGL-BasicConcept.md",
      "sourceFileName": "2024-10-22-WebGL-BasicConcept.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-10-22-WebGL-BasicConcept"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-10-22-WebGL-BasicConcept",
    "slugAsParams": "2024-10-22-WebGL-BasicConcept"
  },
  {
    "title": "WebGL david/Fluid 代码解读",
    "tags": [
      "Graphic"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "url": null,
    "description": null,
    "date": "2024-10-25T00:00:00.000Z",
    "body": {
      "raw": "> 针对[https://github.com/dli/fluid](https://github.com/dli/fluid)该代码修改艺术粒子效果\n> [http://david.li/fluid](http://david.li/fluid) ([video](http://www.youtube.com/watch?v=DhNt_A3k4B4))\n> 粒子系统是模拟中的核心，采用了PIC/FLIP方法来模拟流体动力学。GPU并行处理能力的利用大大提升了模拟速度和渲染性能，而球形环境光遮挡体积技术+ PCF(Percentage Closer Filtering)则增强了3D模型的真实感。\n> \n\n\n## pipeline梳理\n![](assets/2024-10-25-WebGL-david-Fluid-20241110081353.png)\n\n\n### 球体渲染\n\n#### 粒子颜色\n\n以延迟的方式渲染到一个特殊的RGBA纹理格式: **(normal.x,normal.Y,speed,depth)**\n\n法线被归一化（因此z可以用sqrt（1.0 - x * x - y * y）重建）,深度就是视图空间中的z\n\n```js\n// sphere.frag --特殊的RGBA纹理格式(x,y ,speed,depth)\ngl_FragColor = vec4(v_viewSpaceNormal.x, v_viewSpaceNormal.y, v_speed, v_viewSpacePosition.z);\n```\n\n根据空间发现坐标调整red，green色值  \n\n|  |  |\n| :--: | :--: |\n| ![200](assets/2024-10-25-WebGL-david-Fluid-20241110010939.png) | ![400](assets/2024-10-25-WebGL-david-Fluid-20241110011029.png) |\n\n\n\n根据速度调整blue色值\n\n|  |  |\n| :----: | :----: |\n| ![\\|300](assets/2024-10-25-WebGL-david-Fluid-20241110011051.png) | ![\\|400](assets/2024-10-25-WebGL-david-Fluid-20241110011111.png) |\n\n\n\n### 球形绘制\n#### ANGLE_instanced_arrays\nWebGL中实例化渲染的扩展。实例化渲染允许您在单个绘制调用中多次使用相同的几何体，并对每个实例应用不同的属性（如颜色、位置、大小等）。\n- `drawArraysInstancedANGLE(mode, first, count, primcount)` ： 类似`gl.drawArrays()`\n- `vertexAttribDivisorANGLE(index, divisor)`：用于设置通用顶点属性的分频器（divisor）。分频器确定属性在多个实例之间的更新频率。\n- `drawElementsInstancedANGLE(mode,count,type,offset,primcount)`：类似`gl.drawElements()\n\t- `mode`：图元类型\n\t- `count`：绘制索引数量\n\t- `type`：索引数组数据类型\n\t- `offset`：索引数组偏移量\n\t- `primcount`：绘制实例数量\n\n\n```js\n wgl.drawElementsInstancedANGLE(\n  sphereDrawState,\n  wgl.TRIANGLES, //三角形\n  this.sphereGeometry.indices.length, //索引数量\n  wgl.UNSIGNED_SHORT,\n  0,\n  this.particlesWidth * this.particlesHeight // 512*60个实例\n);\n\n```\n\n\n### 模拟粒子\n\n传递粒子速度到网格，我们分两步向网格传递粒子速度：\n\n1. 我们将weight * velocity累加到tempVelocityTexture中，然后将weight累加到weightTexture中\n2. velocityTexture = tempVelocityTexture / weightttexture\n\n我们累积到velocityWeightTexture，然后划分到velocityTexture\n\n\n\n\n\n\n\n\n\n\n\n### 最终效果\n根据输入图片初始化赋值粒子颜色，随位移变化不变\n\n![](assets/2024-10-25-WebGL-david-Fluid-20241117012616.gif)\n\n根据输入图片，赋值粒子颜色，保持图片不变\n\n![](assets/2024-10-25-WebGL-david-Fluid-20241118105708.gif)\n\n### Reference\n[# fluid:流体颗粒-http - 实时3D流体模拟与WebGL渲染](https://blog.csdn.net/weixin_42594427/article/details/142328230)\n\n[WebGL入门-WebGL常用API说明详解_webgl api-CSDN博客](https://blog.csdn.net/qw8704149/article/details/115152067)",
      "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var m=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),u=(l,e)=>{for(var A in e)r(l,A,{get:e[A],enumerable:!0})},t=(l,e,A,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!E.call(l,i)&&i!==A&&r(l,i,{get:()=>e[i],enumerable:!(a=o(e,i))||a.enumerable});return l};var y=(l,e,A)=>(A=l!=null?h(p(l)):{},t(e||!l||!l.__esModule?r(A,\"default\",{value:l,enumerable:!0}):A,l)),w=l=>t(r({},\"__esModule\",{value:!0}),l);var c=m((R,d)=>{d.exports=_jsx_runtime});var F={};u(F,{default:()=>B,frontmatter:()=>b});var n=y(c()),b={title:\"WebGL david/Fluid \\u4EE3\\u7801\\u89E3\\u8BFB\",subtitle:null,layout:\"post\",date:new Date(17298144e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Graphic\"],url:null,image:null};function s(l){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",img:\"img\",h3:\"h3\",h4:\"h4\",strong:\"strong\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\",ul:\"ul\",li:\"li\",ol:\"ol\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9488\\u5BF9\",(0,n.jsx)(e.a,{href:\"https://github.com/dli/fluid\",children:\"https://github.com/dli/fluid\"}),`\\u8BE5\\u4EE3\\u7801\\u4FEE\\u6539\\u827A\\u672F\\u7C92\\u5B50\\u6548\\u679C\n`,(0,n.jsx)(e.a,{href:\"http://david.li/fluid\",children:\"http://david.li/fluid\"}),\" (\",(0,n.jsx)(e.a,{href:\"http://www.youtube.com/watch?v=DhNt_A3k4B4\",children:\"video\"}),`)\n\\u7C92\\u5B50\\u7CFB\\u7EDF\\u662F\\u6A21\\u62DF\\u4E2D\\u7684\\u6838\\u5FC3\\uFF0C\\u91C7\\u7528\\u4E86PIC/FLIP\\u65B9\\u6CD5\\u6765\\u6A21\\u62DF\\u6D41\\u4F53\\u52A8\\u529B\\u5B66\\u3002GPU\\u5E76\\u884C\\u5904\\u7406\\u80FD\\u529B\\u7684\\u5229\\u7528\\u5927\\u5927\\u63D0\\u5347\\u4E86\\u6A21\\u62DF\\u901F\\u5EA6\\u548C\\u6E32\\u67D3\\u6027\\u80FD\\uFF0C\\u800C\\u7403\\u5F62\\u73AF\\u5883\\u5149\\u906E\\u6321\\u4F53\\u79EF\\u6280\\u672F+ PCF(Percentage Closer Filtering)\\u5219\\u589E\\u5F3A\\u4E863D\\u6A21\\u578B\\u7684\\u771F\\u5B9E\\u611F\\u3002`]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"pipeline\\u68B3\\u7406\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#pipeline\\u68B3\\u7406\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"pipeline\\u68B3\\u7406\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-25-WebGL-david-Fluid-20241110081353.png\",alt:\"\",width:\"1280\",height:\"978\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAANlBMVEU0NDNfXVhKSUg/QD1WTEVPQjMuLzI8OjcxMTFpUzRGRjpaUD1YRCyGbGF6aUxvd29TW1ZhSCr4zMqmAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANElEQVR4nBXGyRHAIAwAsfUBtoGEpP9mGfQS1qauWLDf+mo4oGISEvRW44/OzXwsIcNdyTwiZAE0PMuuFAAAAABJRU5ErkJggg==\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7403\\u4F53\\u6E32\\u67D3\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u7403\\u4F53\\u6E32\\u67D3\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7403\\u4F53\\u6E32\\u67D3\"]}),`\n`,(0,n.jsxs)(e.h4,{id:\"\\u7C92\\u5B50\\u989C\\u8272\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u7C92\\u5B50\\u989C\\u8272\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7C92\\u5B50\\u989C\\u8272\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4EE5\\u5EF6\\u8FDF\\u7684\\u65B9\\u5F0F\\u6E32\\u67D3\\u5230\\u4E00\\u4E2A\\u7279\\u6B8A\\u7684RGBA\\u7EB9\\u7406\\u683C\\u5F0F: \",(0,n.jsx)(e.strong,{children:\"(normal.x,normal.Y,speed,depth)\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6CD5\\u7EBF\\u88AB\\u5F52\\u4E00\\u5316\\uFF08\\u56E0\\u6B64z\\u53EF\\u4EE5\\u7528sqrt\\uFF081.0 - x * x - y * y\\uFF09\\u91CD\\u5EFA\\uFF09,\\u6DF1\\u5EA6\\u5C31\\u662F\\u89C6\\u56FE\\u7A7A\\u95F4\\u4E2D\\u7684z\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`// sphere.frag --\\u7279\\u6B8A\\u7684RGBA\\u7EB9\\u7406\\u683C\\u5F0F(x,y ,speed,depth)\ngl_FragColor = vec4(v_viewSpaceNormal.x, v_viewSpaceNormal.y, v_speed, v_viewSpacePosition.z);\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// sphere.frag --\\u7279\\u6B8A\\u7684RGBA\\u7EB9\\u7406\\u683C\\u5F0F(x,y ,speed,depth)\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"gl_FragColor \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" vec4\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(v_viewSpaceNormal.x, v_viewSpaceNormal.y, v_speed, v_viewSpacePosition.z);\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6839\\u636E\\u7A7A\\u95F4\\u53D1\\u73B0\\u5750\\u6807\\u8C03\\u6574red\\uFF0Cgreen\\u8272\\u503C\"}),`\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{align:\"center\"}),(0,n.jsx)(e.th,{align:\"center\"})]})}),(0,n.jsx)(e.tbody,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\"center\",children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-25-WebGL-david-Fluid-20241110010939.png\",alt:\"200\",width:\"798\",height:\"874\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAJCAMAAAA4jZ0cAAAAGFBMVEUEAgBKKABBMAAMDABEOgBSMgAYDgAyJgC1Eum6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nC3GSRKAMAwEsZ7Fyf9/TGHQSZAFRwvOSPIfv4nmCx7bs2lr4LbuBUgIPBiqAJ1uY/6rAAAAAElFTkSuQmCC\"})}),(0,n.jsx)(e.td,{align:\"center\",children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-25-WebGL-david-Fluid-20241110011029.png\",alt:\"400\",width:\"1280\",height:\"531\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAALVBMVEULFD05QvUXJZESFEgeFzNLROwhJaM2KnEpJYcAAAAkRMYQIFsBAgQLCycrQd4NQeewAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVR4nGPg5GVmZmZg4GFgYWVlZOTj4mZgYedgY2NiYgAABzwAgpZScxIAAAAASUVORK5CYII=\"})})]})})]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6839\\u636E\\u901F\\u5EA6\\u8C03\\u6574blue\\u8272\\u503C\"}),`\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{align:\"center\"}),(0,n.jsx)(e.th,{align:\"center\"})]})}),(0,n.jsx)(e.tbody,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\"center\",children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-25-WebGL-david-Fluid-20241110011051.png\",alt:\"|300\",width:\"1030\",height:\"858\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAIVBMVEUAAgAA/gAAMAAAUwAAcgAA0AAAGgAAkQAA1gAA2QAA4gCH3O47AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAK0lEQVR4nFXGuREAMAjAMBvIu//AOcqoEkTEBFjq+FLq7qR6OqHezqzKBB4NEQBsm/2DCAAAAABJRU5ErkJggg==\"})}),(0,n.jsx)(e.td,{align:\"center\",children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-25-WebGL-david-Fluid-20241110011111.png\",alt:\"|400\",width:\"1280\",height:\"522\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAMFBMVEUAWlQA//UASkoAnZMA/v4Aom4AOjkAdUkAimYAq6IAfWMAuJcA/9EAnU8ACgsAAQI2dhlvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVR4nGPgZ2NiYGBg4mPgYGFhZGTk4WZg52RmZuVl5QIABp0AiaMq92kAAAAASUVORK5CYII=\"})})]})})]}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7403\\u5F62\\u7ED8\\u5236\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u7403\\u5F62\\u7ED8\\u5236\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7403\\u5F62\\u7ED8\\u5236\"]}),`\n`,(0,n.jsxs)(e.h4,{id:\"angle_instanced_arrays\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#angle_instanced_arrays\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"ANGLE_instanced_arrays\"]}),`\n`,(0,n.jsx)(e.p,{children:\"WebGL\\u4E2D\\u5B9E\\u4F8B\\u5316\\u6E32\\u67D3\\u7684\\u6269\\u5C55\\u3002\\u5B9E\\u4F8B\\u5316\\u6E32\\u67D3\\u5141\\u8BB8\\u60A8\\u5728\\u5355\\u4E2A\\u7ED8\\u5236\\u8C03\\u7528\\u4E2D\\u591A\\u6B21\\u4F7F\\u7528\\u76F8\\u540C\\u7684\\u51E0\\u4F55\\u4F53\\uFF0C\\u5E76\\u5BF9\\u6BCF\\u4E2A\\u5B9E\\u4F8B\\u5E94\\u7528\\u4E0D\\u540C\\u7684\\u5C5E\\u6027\\uFF08\\u5982\\u989C\\u8272\\u3001\\u4F4D\\u7F6E\\u3001\\u5927\\u5C0F\\u7B49\\uFF09\\u3002\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"drawArraysInstancedANGLE(mode, first, count, primcount)\"}),\" \\uFF1A \\u7C7B\\u4F3C\",(0,n.jsx)(e.code,{children:\"gl.drawArrays()\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"vertexAttribDivisorANGLE(index, divisor)\"}),\"\\uFF1A\\u7528\\u4E8E\\u8BBE\\u7F6E\\u901A\\u7528\\u9876\\u70B9\\u5C5E\\u6027\\u7684\\u5206\\u9891\\u5668\\uFF08divisor\\uFF09\\u3002\\u5206\\u9891\\u5668\\u786E\\u5B9A\\u5C5E\\u6027\\u5728\\u591A\\u4E2A\\u5B9E\\u4F8B\\u4E4B\\u95F4\\u7684\\u66F4\\u65B0\\u9891\\u7387\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"drawElementsInstancedANGLE(mode,count,type,offset,primcount)\"}),\"\\uFF1A\\u7C7B\\u4F3C`gl.drawElements()\",`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"mode\"}),\"\\uFF1A\\u56FE\\u5143\\u7C7B\\u578B\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"count\"}),\"\\uFF1A\\u7ED8\\u5236\\u7D22\\u5F15\\u6570\\u91CF\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"type\"}),\"\\uFF1A\\u7D22\\u5F15\\u6570\\u7EC4\\u6570\\u636E\\u7C7B\\u578B\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"offset\"}),\"\\uFF1A\\u7D22\\u5F15\\u6570\\u7EC4\\u504F\\u79FB\\u91CF\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"primcount\"}),\"\\uFF1A\\u7ED8\\u5236\\u5B9E\\u4F8B\\u6570\\u91CF\"]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:` wgl.drawElementsInstancedANGLE(\n  sphereDrawState,\n  wgl.TRIANGLES, //\\u4E09\\u89D2\\u5F62\n  this.sphereGeometry.indices.length, //\\u7D22\\u5F15\\u6570\\u91CF\n  wgl.UNSIGNED_SHORT,\n  0,\n  this.particlesWidth * this.particlesHeight // 512*60\\u4E2A\\u5B9E\\u4F8B\n);\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" wgl.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"drawElementsInstancedANGLE\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  sphereDrawState,\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  wgl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"TRIANGLES\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"//\\u4E09\\u89D2\\u5F62\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"  this\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".sphereGeometry.indices.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"//\\u7D22\\u5F15\\u6570\\u91CF\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  wgl.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"UNSIGNED_SHORT\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"  0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"  this\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".particlesWidth \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".particlesHeight \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// 512*60\\u4E2A\\u5B9E\\u4F8B\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u6A21\\u62DF\\u7C92\\u5B50\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u6A21\\u62DF\\u7C92\\u5B50\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6A21\\u62DF\\u7C92\\u5B50\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F20\\u9012\\u7C92\\u5B50\\u901F\\u5EA6\\u5230\\u7F51\\u683C\\uFF0C\\u6211\\u4EEC\\u5206\\u4E24\\u6B65\\u5411\\u7F51\\u683C\\u4F20\\u9012\\u7C92\\u5B50\\u901F\\u5EA6\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u6211\\u4EEC\\u5C06weight * velocity\\u7D2F\\u52A0\\u5230tempVelocityTexture\\u4E2D\\uFF0C\\u7136\\u540E\\u5C06weight\\u7D2F\\u52A0\\u5230weightTexture\\u4E2D\"}),`\n`,(0,n.jsx)(e.li,{children:\"velocityTexture = tempVelocityTexture / weightttexture\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6211\\u4EEC\\u7D2F\\u79EF\\u5230velocityWeightTexture\\uFF0C\\u7136\\u540E\\u5212\\u5206\\u5230velocityTexture\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u6700\\u7EC8\\u6548\\u679C\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u6700\\u7EC8\\u6548\\u679C\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6700\\u7EC8\\u6548\\u679C\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6839\\u636E\\u8F93\\u5165\\u56FE\\u7247\\u521D\\u59CB\\u5316\\u8D4B\\u503C\\u7C92\\u5B50\\u989C\\u8272\\uFF0C\\u968F\\u4F4D\\u79FB\\u53D8\\u5316\\u4E0D\\u53D8\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-25-WebGL-david-Fluid-20241117012616.gif\",alt:\"\",width:\"800\",height:\"502\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAOVBMVEXr6+nb2NV6U0fTx75JIQro7u/y8/Pj4uLn5+je3d6gRCXHj4NjWEVrTDaLblqyv52wnJbKvbt5RjWRF7OOAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAL0lEQVR4nAXBgQGAMAgEsQOhD2pbdf9hTdjWUl4nr3+utIMnIhgUvebNKNFVgPoHGeQBER6G/+8AAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6839\\u636E\\u8F93\\u5165\\u56FE\\u7247\\uFF0C\\u8D4B\\u503C\\u7C92\\u5B50\\u989C\\u8272\\uFF0C\\u4FDD\\u6301\\u56FE\\u7247\\u4E0D\\u53D8\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-10-25-WebGL-david-Fluid-20241118105708.gif\",alt:\"\",width:\"800\",height:\"450\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAASFBMVEXe4ePX4uNtN0OHdIS3wshSjajPsKno4+Pd3d7Y2drFlpe5s73q8PDIw8CkRE6ohG56kpiaSyh5f4ySWUWEOjm1aFtucJLKysiarLyDAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMElEQVR4nAXBBwKAIAwAsWO2gKLs//+UhGRAKZnzu7q+F+K0drT44EPYrntBERE0XR79AVfJofKLAAAAAElFTkSuQmCC\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"reference\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#reference\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://blog.csdn.net/weixin_42594427/article/details/142328230\",children:\"# fluid:\\u6D41\\u4F53\\u9897\\u7C92-http - \\u5B9E\\u65F63D\\u6D41\\u4F53\\u6A21\\u62DF\\u4E0EWebGL\\u6E32\\u67D3\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://blog.csdn.net/qw8704149/article/details/115152067\",children:\"WebGL\\u5165\\u95E8-WebGL\\u5E38\\u7528API\\u8BF4\\u660E\\u8BE6\\u89E3_webgl api-CSDN\\u535A\\u5BA2\"})})]})}function G(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(s,l)})):s(l)}var B=G;return w(F);})();\n;return Component;"
    },
    "_id": "post/2024-10-25-WebGL-david-Fluid.md",
    "_raw": {
      "sourceFilePath": "post/2024-10-25-WebGL-david-Fluid.md",
      "sourceFileName": "2024-10-25-WebGL-david-Fluid.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-10-25-WebGL-david-Fluid"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-10-25-WebGL-david-Fluid",
    "slugAsParams": "2024-10-25-WebGL-david-Fluid"
  },
  {
    "title": "WebGL 纹理",
    "tags": [
      "Graphic"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-10-26T00:00:00.000Z",
    "body": {
      "raw": "\n### 二维移动\n\n```js\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform vec2 u_rotation;\nuniform vec2 u_scale;\n\nvoid main() {\n  // 缩放\n  vec2 scaledPosition = a_position * u_scale;\n\n  // 旋转位置 (xY+yX, yY-xX)\n  vec2 rotatedPosition = vec2(scaledPosition.x * u_rotation.y + scaledPosition.y * u_rotation.x, scaledPosition.y * u_rotation.y - scaledPosition.x * u_rotation.x);\n\n  // 平移\n  vec2 position = rotatedPosition + u_translation;\n\n  // 从像素坐标转换到 0.0 到 1.0\n  // vec2 zeroToOne = a_position / u_resolution;\n  vec2 zeroToOne = position / u_resolution;\n\n    // 再把 0->1 转换 0->2\n  vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // 把 0->2 转换到 -1->+1 (裁剪空间)\n  vec2 clipSpace = zeroToTwo - 1.0;\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n}\n```\n\n旋转-单位圆：\n![](https://webglfundamentals.org/webgl/resources/rotate-30.png)\n\n\n利用角度计算单位圆坐标\n```js\nfunction printSineAndCosineForAnAngle(angleInDegrees) {\n  let rotation = [0, 1];\n  var angleInRadians = ((360 - angleInDegrees) * Math.PI) / 180;\n  rotation[0] = Math.sin(angleInRadians);\n  rotation[1] = Math.cos(angleInRadians);\n  return rotation;\n}\n```\n\n\n\n\n上文讲到 texture 传递数据，从 js 获取图像展示。\n-> 图像处理的下一个问题是如何同时施加多种效果？\n-> 一个更灵活的方式是使用 2 个或以上的纹理，然后交替渲染它们\n-> **帧缓冲**: 一系列状态（一列附加物）不是任何形式的缓冲\n\n`texture2D(u_velocitiesTexture, a_textureCoordinates)`: 纹理数据，纹理坐标。返回四维向量(r,g,b,a)\n\n### Reference\n\n[WebGL 三维纹理](https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-3d-textures.html)\n\n[MDN WebGL API](https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API)\n",
      "code": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var F=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),g=(l,n)=>{for(var o in n)a(l,o,{get:n[o],enumerable:!0})},c=(l,n,o,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of E(n))!u.call(l,r)&&r!==o&&a(l,r,{get:()=>n[r],enumerable:!(s=p(n,r))||s.enumerable});return l};var _=(l,n,o)=>(o=l!=null?h(y(l)):{},c(n||!l||!l.__esModule?a(o,\"default\",{value:l,enumerable:!0}):o,l)),v=l=>c(a({},\"__esModule\",{value:!0}),l);var t=F((B,i)=>{i.exports=_jsx_runtime});var b={};g(b,{default:()=>x,frontmatter:()=>m});var e=_(t()),m={title:\"WebGL \\u7EB9\\u7406\",subtitle:null,layout:\"post\",date:new Date(17299008e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Graphic\"],image:null};function d(l){let n=Object.assign({h3:\"h3\",a:\"a\",span:\"span\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",p:\"p\",img:\"img\",strong:\"strong\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h3,{id:\"\\u4E8C\\u7EF4\\u79FB\\u52A8\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u4E8C\\u7EF4\\u79FB\\u52A8\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E8C\\u7EF4\\u79FB\\u52A8\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`attribute vec2 a_position;\n\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform vec2 u_rotation;\nuniform vec2 u_scale;\n\nvoid main() {\n  // \\u7F29\\u653E\n  vec2 scaledPosition = a_position * u_scale;\n\n  // \\u65CB\\u8F6C\\u4F4D\\u7F6E (xY+yX, yY-xX)\n  vec2 rotatedPosition = vec2(scaledPosition.x * u_rotation.y + scaledPosition.y * u_rotation.x, scaledPosition.y * u_rotation.y - scaledPosition.x * u_rotation.x);\n\n  // \\u5E73\\u79FB\n  vec2 position = rotatedPosition + u_translation;\n\n  // \\u4ECE\\u50CF\\u7D20\\u5750\\u6807\\u8F6C\\u6362\\u5230 0.0 \\u5230 1.0\n  // vec2 zeroToOne = a_position / u_resolution;\n  vec2 zeroToOne = position / u_resolution;\n\n    // \\u518D\\u628A 0->1 \\u8F6C\\u6362 0->2\n  vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // \\u628A 0->2 \\u8F6C\\u6362\\u5230 -1->+1 (\\u88C1\\u526A\\u7A7A\\u95F4)\n  vec2 clipSpace = zeroToTwo - 1.0;\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"attribute vec2 a_position;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"uniform vec2 u_resolution;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"uniform vec2 u_translation;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"uniform vec2 u_rotation;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"uniform vec2 u_scale;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"void\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" main\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u7F29\\u653E\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 scaledPosition \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" a_position \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" u_scale;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u65CB\\u8F6C\\u4F4D\\u7F6E (xY+yX, yY-xX)\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 rotatedPosition \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" vec2\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(scaledPosition.x \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" u_rotation.y \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" scaledPosition.y \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" u_rotation.x, scaledPosition.y \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" u_rotation.y \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" scaledPosition.x \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" u_rotation.x);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u5E73\\u79FB\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 position \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" rotatedPosition \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" u_translation;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u4ECE\\u50CF\\u7D20\\u5750\\u6807\\u8F6C\\u6362\\u5230 0.0 \\u5230 1.0\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // vec2 zeroToOne = a_position / u_resolution;\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 zeroToOne \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" position \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" u_resolution;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    // \\u518D\\u628A 0->1 \\u8F6C\\u6362 0->2\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 zeroToTwo \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" zeroToOne \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 2.0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    // \\u628A 0->2 \\u8F6C\\u6362\\u5230 -1->+1 (\\u88C1\\u526A\\u7A7A\\u95F4)\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  vec2 clipSpace \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" zeroToTwo \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 1.0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  gl_Position \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" vec4\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(clipSpace \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" vec2\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"), \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[`\\u65CB\\u8F6C-\\u5355\\u4F4D\\u5706\\uFF1A\n`,(0,e.jsx)(n.img,{src:\"https://webglfundamentals.org/webgl/resources/rotate-30.png\",alt:\"\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5229\\u7528\\u89D2\\u5EA6\\u8BA1\\u7B97\\u5355\\u4F4D\\u5706\\u5750\\u6807\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`function printSineAndCosineForAnAngle(angleInDegrees) {\n  let rotation = [0, 1];\n  var angleInRadians = ((360 - angleInDegrees) * Math.PI) / 180;\n  rotation[0] = Math.sin(angleInRadians);\n  rotation[1] = Math.cos(angleInRadians);\n  return rotation;\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" printSineAndCosineForAnAngle\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"angleInDegrees\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" rotation \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  var\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" angleInRadians \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" ((\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"360\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" -\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" angleInDegrees) \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"PI\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 180\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  rotation[\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"sin\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(angleInRadians);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  rotation[\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"cos\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(angleInRadians);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" rotation;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[`\\u4E0A\\u6587\\u8BB2\\u5230 texture \\u4F20\\u9012\\u6570\\u636E\\uFF0C\\u4ECE js \\u83B7\\u53D6\\u56FE\\u50CF\\u5C55\\u793A\\u3002\n-> \\u56FE\\u50CF\\u5904\\u7406\\u7684\\u4E0B\\u4E00\\u4E2A\\u95EE\\u9898\\u662F\\u5982\\u4F55\\u540C\\u65F6\\u65BD\\u52A0\\u591A\\u79CD\\u6548\\u679C\\uFF1F\n-> \\u4E00\\u4E2A\\u66F4\\u7075\\u6D3B\\u7684\\u65B9\\u5F0F\\u662F\\u4F7F\\u7528 2 \\u4E2A\\u6216\\u4EE5\\u4E0A\\u7684\\u7EB9\\u7406\\uFF0C\\u7136\\u540E\\u4EA4\\u66FF\\u6E32\\u67D3\\u5B83\\u4EEC\n-> `,(0,e.jsx)(n.strong,{children:\"\\u5E27\\u7F13\\u51B2\"}),\": \\u4E00\\u7CFB\\u5217\\u72B6\\u6001\\uFF08\\u4E00\\u5217\\u9644\\u52A0\\u7269\\uFF09\\u4E0D\\u662F\\u4EFB\\u4F55\\u5F62\\u5F0F\\u7684\\u7F13\\u51B2\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"texture2D(u_velocitiesTexture, a_textureCoordinates)\"}),\": \\u7EB9\\u7406\\u6570\\u636E\\uFF0C\\u7EB9\\u7406\\u5750\\u6807\\u3002\\u8FD4\\u56DE\\u56DB\\u7EF4\\u5411\\u91CF(r,g,b,a)\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"reference\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#reference\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-3d-textures.html\",children:\"WebGL \\u4E09\\u7EF4\\u7EB9\\u7406\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API\",children:\"MDN WebGL API\"})})]})}function f(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(d,l)})):d(l)}var x=f;return v(b);})();\n;return Component;"
    },
    "_id": "post/2024-10-26-WebGL-2D.md",
    "_raw": {
      "sourceFilePath": "post/2024-10-26-WebGL-2D.md",
      "sourceFileName": "2024-10-26-WebGL-2D.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-10-26-WebGL-2D"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-10-26-WebGL-2D",
    "slugAsParams": "2024-10-26-WebGL-2D"
  },
  {
    "title": "next/image对图片加载做的优化",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "description": null,
    "date": "2024-11-10T00:00:00.000Z",
    "body": {
      "raw": "\n\n\n\n\n## Reference\n\n[# 发现 Next.js 对图片加载做了挺多优化的](https://github.com/findxc/blog/issues/68)",
      "code": "var Component=(()=>{var m=Object.create;var r=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),g=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},o=(n,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of u(e))!x.call(n,a)&&a!==s&&r(n,a,{get:()=>e[a],enumerable:!(c=d(e,a))||c.enumerable});return n};var j=(n,e,s)=>(s=n!=null?m(p(n)):{},o(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),_=n=>o(r({},\"__esModule\",{value:!0}),n);var h=f((w,i)=>{i.exports=_jsx_runtime});var M={};g(M,{default:()=>F,frontmatter:()=>b});var t=j(h()),b={title:\"next/image\\u5BF9\\u56FE\\u7247\\u52A0\\u8F7D\\u505A\\u7684\\u4F18\\u5316\",description:null,layout:\"post\",date:new Date(17311968e5),author:\"heavenmei\",categories:[\"Post\"],tags:[\"Front\"],teaser:null};function l(n){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h2,{id:\"reference\",children:[(0,t.jsx)(e.a,{className:\"header-anchor\",href:\"#reference\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/findxc/blog/issues/68\",children:\"# \\u53D1\\u73B0 Next.js \\u5BF9\\u56FE\\u7247\\u52A0\\u8F7D\\u505A\\u4E86\\u633A\\u591A\\u4F18\\u5316\\u7684\"})})]})}function D(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(l,n)})):l(n)}var F=D;return _(M);})();\n;return Component;"
    },
    "_id": "post/2024-11-10-Next.js-image-optimize.md",
    "_raw": {
      "sourceFilePath": "post/2024-11-10-Next.js-image-optimize.md",
      "sourceFileName": "2024-11-10-Next.js-image-optimize.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-11-10-Next.js-image-optimize"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-11-10-Next.js-image-optimize",
    "slugAsParams": "2024-11-10-Next.js-image-optimize"
  },
  {
    "title": "Mac下 ffmpeg的实践技巧",
    "tags": null,
    "author": "heavenmei",
    "description": null,
    "date": "2024-11-10T00:00:00.000Z",
    "body": {
      "raw": "> 持续更新FFmpeg的各种用法\n## Install FFmpeg\n```bash\nbrew install ffmpeg\n# M1\narch -arm64 brew install ffmpeg\n\n\n# 验证\nffmpeg -version\n```\n\n\n\n\n## Mac下利用ffmpeg录制gif\n**思路**\n1. 用自带quick Time Player 新建屏幕录制。储存后的文件为 mov格式\n2. 使用ffmpeg 转gif\n```bash\nffmpeg -i YOUR_FILE.mov [params] OUT.gif\n\n# 查看视频信息\nffmpeg -i YOUR_FILE.mov\n\nffmpeg -i YOUR_FILE.mp4 -ss 00:01:13.500 -t 12 -s 480x272 OUT.gif  \n\n# scale后面可以指定具体的分辨率宽:高，作用同-s，也可以只指定宽或者高\n# 另一者用-d代替，ffmpeg就会自动缩放，保持原比例\nffmpeg -i YOUR_FILE.mp4 -vf \"scale=480:-1\" -r 15 OUT.gif\n```\n\n**params**\n- `-r`： 降低帧率，*-r参数一定要放到-i参数后面*，它在前在后的作用是不一样的\n- `-ss`：开始时间，具体秒数/时:分:秒.毫秒（00:12:14.500）\n- `-t`：截取时长（秒）\n- `-s`：分辨率（480x272）\n- `-vf`：可以代替`-s`实现宽高等比缩放（\"scale=480:-1\"）",
      "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var m=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),y=(l,e)=>{for(var r in e)c(l,r,{get:e[r],enumerable:!0})},s=(l,e,r,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of F(e))!g.call(l,a)&&a!==r&&c(l,a,{get:()=>e[a],enumerable:!(i=p(e,a))||i.enumerable});return l};var u=(l,e,r)=>(r=l!=null?h(f(l)):{},s(e||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),B=l=>s(c({},\"__esModule\",{value:!0}),l);var o=m((_,d)=>{d.exports=_jsx_runtime});var O={};y(O,{default:()=>C,frontmatter:()=>E});var n=u(o()),E={title:\"Mac\\u4E0B ffmpeg\\u7684\\u5B9E\\u8DF5\\u6280\\u5DE7\",description:null,layout:\"post\",date:new Date(17311968e5),author:\"heavenmei\",categories:[\"Post\"],tags:null,teaser:null};function t(l){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",strong:\"strong\",ol:\"ol\",li:\"li\",ul:\"ul\",em:\"em\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u6301\\u7EED\\u66F4\\u65B0FFmpeg\\u7684\\u5404\\u79CD\\u7528\\u6CD5\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"install-ffmpeg\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#install-ffmpeg\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Install FFmpeg\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`brew install ffmpeg\n# M1\narch -arm64 brew install ffmpeg\n\n\n# \\u9A8C\\u8BC1\nffmpeg -version\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"brew\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" ffmpeg\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# M1\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"arch\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -arm64\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" brew\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" ffmpeg\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u9A8C\\u8BC1\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"ffmpeg\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -version\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"mac\\u4E0B\\u5229\\u7528ffmpeg\\u5F55\\u5236gif\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#mac\\u4E0B\\u5229\\u7528ffmpeg\\u5F55\\u5236gif\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Mac\\u4E0B\\u5229\\u7528ffmpeg\\u5F55\\u5236gif\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u601D\\u8DEF\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u7528\\u81EA\\u5E26quick Time Player \\u65B0\\u5EFA\\u5C4F\\u5E55\\u5F55\\u5236\\u3002\\u50A8\\u5B58\\u540E\\u7684\\u6587\\u4EF6\\u4E3A mov\\u683C\\u5F0F\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u4F7F\\u7528ffmpeg \\u8F6Cgif\"}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`ffmpeg -i YOUR_FILE.mov [params] OUT.gif\n\n# \\u67E5\\u770B\\u89C6\\u9891\\u4FE1\\u606F\nffmpeg -i YOUR_FILE.mov\n\nffmpeg -i YOUR_FILE.mp4 -ss 00:01:13.500 -t 12 -s 480x272 OUT.gif  \n\n# scale\\u540E\\u9762\\u53EF\\u4EE5\\u6307\\u5B9A\\u5177\\u4F53\\u7684\\u5206\\u8FA8\\u7387\\u5BBD:\\u9AD8\\uFF0C\\u4F5C\\u7528\\u540C-s\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u53EA\\u6307\\u5B9A\\u5BBD\\u6216\\u8005\\u9AD8\n# \\u53E6\\u4E00\\u8005\\u7528-d\\u4EE3\\u66FF\\uFF0Cffmpeg\\u5C31\\u4F1A\\u81EA\\u52A8\\u7F29\\u653E\\uFF0C\\u4FDD\\u6301\\u539F\\u6BD4\\u4F8B\nffmpeg -i YOUR_FILE.mp4 -vf \"scale=480:-1\" -r 15 OUT.gif\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"ffmpeg\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -i\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" YOUR_FILE.mov\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [params] OUT.gif\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u67E5\\u770B\\u89C6\\u9891\\u4FE1\\u606F\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"ffmpeg\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -i\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" YOUR_FILE.mov\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"ffmpeg\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -i\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" YOUR_FILE.mp4\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -ss\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 00:01:13.500\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -t\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 12\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -s\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 480x272\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" OUT.gif\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  \"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# scale\\u540E\\u9762\\u53EF\\u4EE5\\u6307\\u5B9A\\u5177\\u4F53\\u7684\\u5206\\u8FA8\\u7387\\u5BBD:\\u9AD8\\uFF0C\\u4F5C\\u7528\\u540C-s\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u53EA\\u6307\\u5B9A\\u5BBD\\u6216\\u8005\\u9AD8\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u53E6\\u4E00\\u8005\\u7528-d\\u4EE3\\u66FF\\uFF0Cffmpeg\\u5C31\\u4F1A\\u81EA\\u52A8\\u7F29\\u653E\\uFF0C\\u4FDD\\u6301\\u539F\\u6BD4\\u4F8B\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"ffmpeg\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -i\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" YOUR_FILE.mp4\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -vf\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"scale=480:-1\"'}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -r\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 15\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" OUT.gif\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"params\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-r\"}),\"\\uFF1A \\u964D\\u4F4E\\u5E27\\u7387\\uFF0C\",(0,n.jsx)(e.em,{children:\"-r\\u53C2\\u6570\\u4E00\\u5B9A\\u8981\\u653E\\u5230-i\\u53C2\\u6570\\u540E\\u9762\"}),\"\\uFF0C\\u5B83\\u5728\\u524D\\u5728\\u540E\\u7684\\u4F5C\\u7528\\u662F\\u4E0D\\u4E00\\u6837\\u7684\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-ss\"}),\"\\uFF1A\\u5F00\\u59CB\\u65F6\\u95F4\\uFF0C\\u5177\\u4F53\\u79D2\\u6570/\\u65F6:\\u5206:\\u79D2.\\u6BEB\\u79D2\\uFF0800:12:14.500\\uFF09\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-t\"}),\"\\uFF1A\\u622A\\u53D6\\u65F6\\u957F\\uFF08\\u79D2\\uFF09\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-s\"}),\"\\uFF1A\\u5206\\u8FA8\\u7387\\uFF08480x272\\uFF09\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-vf\"}),\"\\uFF1A\\u53EF\\u4EE5\\u4EE3\\u66FF\",(0,n.jsx)(e.code,{children:\"-s\"}),'\\u5B9E\\u73B0\\u5BBD\\u9AD8\\u7B49\\u6BD4\\u7F29\\u653E\\uFF08\"scale=480:-1\"\\uFF09']}),`\n`]})]})}function b(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(t,l)})):t(l)}var C=b;return B(O);})();\n;return Component;"
    },
    "_id": "post/2024-11-10-ffmpeg.md",
    "_raw": {
      "sourceFilePath": "post/2024-11-10-ffmpeg.md",
      "sourceFileName": "2024-11-10-ffmpeg.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-11-10-ffmpeg"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-11-10-ffmpeg",
    "slugAsParams": "2024-11-10-ffmpeg"
  },
  {
    "title": "【亲测有效】typora mac版本激活",
    "tags": [
      "skill"
    ],
    "author": "heavenmei",
    "description": null,
    "date": "2024-11-10T00:00:00.000Z",
    "body": {
      "raw": "\n1. 首先去官网下载安装 [typora](https://www.typoraio.cn/) （mac版本）\n\n2. 然后搜索typora包内容找到文件夹`/Applications/Typora.app/Contents/Resources/TypeMark/page-dist/static/js`\n\n3. 用编辑器打开`LicenseIndex.XXX.chunk。js`文件，是编译后的乱码\n4. 输入 `hasActivated=\"true\"==e.hasActivated `搜索，将它改为  `hasActivated=\"true\"==\"true\"`\n5. 重新打开typora看到成功激活！！！\n\n![](assets/2024-11-10-typora-mac-activate-20241110064025.png)\n\n但是会每次打开都弹出这个，暂未解决🥲",
      "code": "var Component=(()=>{var d=Object.create;var a=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),j=(t,e)=>{for(var i in e)a(t,i,{get:e[i],enumerable:!0})},A=(t,e,i,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of p(e))!g.call(t,c)&&c!==i&&a(t,c,{get:()=>e[c],enumerable:!(r=h(e,c))||r.enumerable});return t};var w=(t,e,i)=>(i=t!=null?d(u(t)):{},A(e||!t||!t.__esModule?a(i,\"default\",{value:t,enumerable:!0}):i,t)),x=t=>A(a({},\"__esModule\",{value:!0}),t);var o=m((v,l)=>{l.exports=_jsx_runtime});var C={};j(C,{default:()=>X,frontmatter:()=>y});var n=w(o()),y={title:\"\\u3010\\u4EB2\\u6D4B\\u6709\\u6548\\u3011typora mac\\u7248\\u672C\\u6FC0\\u6D3B\",description:null,layout:\"post\",date:new Date(17311968e5),author:\"heavenmei\",categories:[\"Post\"],tags:[\"skill\"],teaser:null};function s(t){let e=Object.assign({ol:\"ol\",li:\"li\",p:\"p\",a:\"a\",code:\"code\",img:\"img\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148\\u53BB\\u5B98\\u7F51\\u4E0B\\u8F7D\\u5B89\\u88C5 \",(0,n.jsx)(e.a,{href:\"https://www.typoraio.cn/\",children:\"typora\"}),\" \\uFF08mac\\u7248\\u672C\\uFF09\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E\\u641C\\u7D22typora\\u5305\\u5185\\u5BB9\\u627E\\u5230\\u6587\\u4EF6\\u5939\",(0,n.jsx)(e.code,{children:\"/Applications/Typora.app/Contents/Resources/TypeMark/page-dist/static/js\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7528\\u7F16\\u8F91\\u5668\\u6253\\u5F00\",(0,n.jsx)(e.code,{children:\"LicenseIndex.XXX.chunk\\u3002js\"}),\"\\u6587\\u4EF6\\uFF0C\\u662F\\u7F16\\u8BD1\\u540E\\u7684\\u4E71\\u7801\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8F93\\u5165 \",(0,n.jsx)(e.code,{children:'hasActivated=\"true\"==e.hasActivated '}),\"\\u641C\\u7D22\\uFF0C\\u5C06\\u5B83\\u6539\\u4E3A  \",(0,n.jsx)(e.code,{children:'hasActivated=\"true\"==\"true\"'})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u91CD\\u65B0\\u6253\\u5F00typora\\u770B\\u5230\\u6210\\u529F\\u6FC0\\u6D3B\\uFF01\\uFF01\\uFF01\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-11-10-typora-mac-activate-20241110064025.png\",alt:\"\",width:\"1050\",height:\"840\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAIVBMVEX49fX5+fn8+/vt6+v28fHl4+Twsa63tru4udzV19vW0+QHj/QjAAAACXBIWXMAABYlAAAWJQFJUiTwAAAALElEQVR4nBXIuQ0AMAzDQEq28u0/cGCA1xBJDIQTC0BVczAJFt2T4O5irfM+CBwAcTET/OwAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F46\\u662F\\u4F1A\\u6BCF\\u6B21\\u6253\\u5F00\\u90FD\\u5F39\\u51FA\\u8FD9\\u4E2A\\uFF0C\\u6682\\u672A\\u89E3\\u51B3\\u{1F972}\"})]})}function f(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(s,t)})):s(t)}var X=f;return x(C);})();\n;return Component;"
    },
    "_id": "post/2024-11-10-typora-mac-activate.md",
    "_raw": {
      "sourceFilePath": "post/2024-11-10-typora-mac-activate.md",
      "sourceFileName": "2024-11-10-typora-mac-activate.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-11-10-typora-mac-activate"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-11-10-typora-mac-activate",
    "slugAsParams": "2024-11-10-typora-mac-activate"
  },
  {
    "title": "latexdiff比较论文修改差异",
    "tags": [
      "skill"
    ],
    "author": "heavenmei",
    "description": "max下用latexdiff实现LaTeX批注修订",
    "date": "2024-11-11T00:00:00.000Z",
    "body": {
      "raw": "[latexdiff](https://github.com/ftilmann/latexdiff)是一个开源Perl脚本，用于比较两个latex文件并标记它们之间的显著差异。使用标准latex包(如color.sty)进行可视化标记，并可以使用各种选项。Perl脚本latexrevision提供了一个基本的修订工具，它接受或拒绝所有更改。手动编辑差异文件可用于覆盖此默认行为，并仅接受或拒绝所选更改。\n\n\n## Usage\n**安装**\n```bash\nbrew install latexdiff\n\n# M1\narch -arm64 brew install latexdiff\n\n# 验证\nlatexdiff\n```\n\n**使用**\n使用前需要先生成`.bbl`文件，我使用Texifier软件编译后可以直接去`.texpadtmp`文件中找到，移动到与tex文件同级即可\n\n```bash\nlatexdiff [OPTIONS] old.tex new.tex > diff.tex\n\nlatexdiff --flatten old.tex new.tex > diff.tex\n\nlatexdiff old.tex new.tex --type=UNDERLINE > diff.tex\n\n\n# 编译pdf\npdflatex -interaction=nonstopmode diff.tex\n```\n\n完整参数可以参考[官网文档](https://mirrors.concertpass.com/tex-archive/support/latexdiff/doc/latexdiff-man.pdf)\n\n- `--flatten`：如果latext分别在两个文件夹下，内容中有的`\\input`和`\\include`命令。在共同文件夹下执行latexdiff，并使用该参数平铺。*无法flatten图片*\n- `--type/-t`：此处的markupstyle叫做标注风格，默认值是UNDERLINE，意思是用蓝字加下划线标注添加，用红色加删除线标注删除。（可选值：CTRADITIONAL/TRADITIONAL/CFONT/BOLD）\n\n![](assets/2024-11-11-latexdiff-20241111085306.png)\n\n## 插件\nlatexdiff这个工具自带了两个其他的工具，分别是latexrevise和latexdiff-vc，无需额外安装。\n**latexrevise** 可以帮助我们将diff.tex中的标记全部删掉\n\n|参数|描述|参数使用|\n|---|---|---|\n|SIMPLIFY|仅保留添加删除两类标注|-s 或–simlify|\n|ACCEPT|仅保留添加标注内的内容|-a 或–accept|\n|DECLINE|仅保留删除标注的内容|-d 或 --decline|\n```bash\n# 接受所有修改\nlatexrevise -a diff.tex > accept.tex\n# 回滚所有修改，还原回未修改的版本\nlatexrevise -d diff.tex > decline.tex\n```\n\n\n\n\n## Reference\n[How to use latexdiff to compare changes in .bib files?](https://tex.stackexchange.com/questions/625608/how-to-use-latexdiff-to-compare-changes-in-bib-files)\n",
      "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var F=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var a in e)r(l,a,{get:e[a],enumerable:!0})},i=(l,e,a,d)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of f(e))!y.call(l,t)&&t!==a&&r(l,t,{get:()=>e[t],enumerable:!(d=p(e,t))||d.enumerable});return l};var A=(l,e,a)=>(a=l!=null?h(x(l)):{},i(e||!l||!l.__esModule?r(a,\"default\",{value:l,enumerable:!0}):a,l)),m=l=>i(r({},\"__esModule\",{value:!0}),l);var s=F((w,c)=>{c.exports=_jsx_runtime});var B={};g(B,{default:()=>b,frontmatter:()=>u});var n=A(s()),u={title:\"latexdiff\\u6BD4\\u8F83\\u8BBA\\u6587\\u4FEE\\u6539\\u5DEE\\u5F02\",description:\"max\\u4E0B\\u7528latexdiff\\u5B9E\\u73B0LaTeX\\u6279\\u6CE8\\u4FEE\\u8BA2\",layout:\"post\",date:new Date(17312832e5),author:\"heavenmei\",categories:[\"Post\"],tags:[\"skill\"],teaser:null};function o(l){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",strong:\"strong\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",ul:\"ul\",li:\"li\",em:\"em\",img:\"img\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/ftilmann/latexdiff\",children:\"latexdiff\"}),\"\\u662F\\u4E00\\u4E2A\\u5F00\\u6E90Perl\\u811A\\u672C\\uFF0C\\u7528\\u4E8E\\u6BD4\\u8F83\\u4E24\\u4E2Alatex\\u6587\\u4EF6\\u5E76\\u6807\\u8BB0\\u5B83\\u4EEC\\u4E4B\\u95F4\\u7684\\u663E\\u8457\\u5DEE\\u5F02\\u3002\\u4F7F\\u7528\\u6807\\u51C6latex\\u5305(\\u5982color.sty)\\u8FDB\\u884C\\u53EF\\u89C6\\u5316\\u6807\\u8BB0\\uFF0C\\u5E76\\u53EF\\u4EE5\\u4F7F\\u7528\\u5404\\u79CD\\u9009\\u9879\\u3002Perl\\u811A\\u672Clatexrevision\\u63D0\\u4F9B\\u4E86\\u4E00\\u4E2A\\u57FA\\u672C\\u7684\\u4FEE\\u8BA2\\u5DE5\\u5177\\uFF0C\\u5B83\\u63A5\\u53D7\\u6216\\u62D2\\u7EDD\\u6240\\u6709\\u66F4\\u6539\\u3002\\u624B\\u52A8\\u7F16\\u8F91\\u5DEE\\u5F02\\u6587\\u4EF6\\u53EF\\u7528\\u4E8E\\u8986\\u76D6\\u6B64\\u9ED8\\u8BA4\\u884C\\u4E3A\\uFF0C\\u5E76\\u4EC5\\u63A5\\u53D7\\u6216\\u62D2\\u7EDD\\u6240\\u9009\\u66F4\\u6539\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"usage\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#usage\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Usage\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u5B89\\u88C5\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`brew install latexdiff\n\n# M1\narch -arm64 brew install latexdiff\n\n# \\u9A8C\\u8BC1\nlatexdiff\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"brew\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" latexdiff\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# M1\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"arch\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -arm64\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" brew\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" latexdiff\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u9A8C\\u8BC1\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"latexdiff\"})})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u4F7F\\u7528\"}),`\n\\u4F7F\\u7528\\u524D\\u9700\\u8981\\u5148\\u751F\\u6210`,(0,n.jsx)(e.code,{children:\".bbl\"}),\"\\u6587\\u4EF6\\uFF0C\\u6211\\u4F7F\\u7528Texifier\\u8F6F\\u4EF6\\u7F16\\u8BD1\\u540E\\u53EF\\u4EE5\\u76F4\\u63A5\\u53BB\",(0,n.jsx)(e.code,{children:\".texpadtmp\"}),\"\\u6587\\u4EF6\\u4E2D\\u627E\\u5230\\uFF0C\\u79FB\\u52A8\\u5230\\u4E0Etex\\u6587\\u4EF6\\u540C\\u7EA7\\u5373\\u53EF\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`latexdiff [OPTIONS] old.tex new.tex > diff.tex\n\nlatexdiff --flatten old.tex new.tex > diff.tex\n\nlatexdiff old.tex new.tex --type=UNDERLINE > diff.tex\n\n\n# \\u7F16\\u8BD1pdf\npdflatex -interaction=nonstopmode diff.tex\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"latexdiff\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [OPTIONS] old.tex new.tex \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" diff.tex\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"latexdiff\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --flatten\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" old.tex\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" new.tex\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" >\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" diff.tex\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"latexdiff\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" old.tex\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" new.tex\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" --type=UNDERLINE\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" >\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" diff.tex\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u7F16\\u8BD1pdf\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"pdflatex\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -interaction=nonstopmode\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" diff.tex\"})]})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B8C\\u6574\\u53C2\\u6570\\u53EF\\u4EE5\\u53C2\\u8003\",(0,n.jsx)(e.a,{href:\"https://mirrors.concertpass.com/tex-archive/support/latexdiff/doc/latexdiff-man.pdf\",children:\"\\u5B98\\u7F51\\u6587\\u6863\"})]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--flatten\"}),\"\\uFF1A\\u5982\\u679Clatext\\u5206\\u522B\\u5728\\u4E24\\u4E2A\\u6587\\u4EF6\\u5939\\u4E0B\\uFF0C\\u5185\\u5BB9\\u4E2D\\u6709\\u7684\",(0,n.jsx)(e.code,{children:\"\\\\input\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"\\\\include\"}),\"\\u547D\\u4EE4\\u3002\\u5728\\u5171\\u540C\\u6587\\u4EF6\\u5939\\u4E0B\\u6267\\u884Clatexdiff\\uFF0C\\u5E76\\u4F7F\\u7528\\u8BE5\\u53C2\\u6570\\u5E73\\u94FA\\u3002\",(0,n.jsx)(e.em,{children:\"\\u65E0\\u6CD5flatten\\u56FE\\u7247\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"--type/-t\"}),\"\\uFF1A\\u6B64\\u5904\\u7684markupstyle\\u53EB\\u505A\\u6807\\u6CE8\\u98CE\\u683C\\uFF0C\\u9ED8\\u8BA4\\u503C\\u662FUNDERLINE\\uFF0C\\u610F\\u601D\\u662F\\u7528\\u84DD\\u5B57\\u52A0\\u4E0B\\u5212\\u7EBF\\u6807\\u6CE8\\u6DFB\\u52A0\\uFF0C\\u7528\\u7EA2\\u8272\\u52A0\\u5220\\u9664\\u7EBF\\u6807\\u6CE8\\u5220\\u9664\\u3002\\uFF08\\u53EF\\u9009\\u503C\\uFF1ACTRADITIONAL/TRADITIONAL/CFONT/BOLD\\uFF09\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-11-11-latexdiff-20241111085306.png\",alt:\"\",width:\"1097\",height:\"563\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAACVBMVEX+/v7w7/T19fmrQJCoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHklEQVR4nCXGsQ0AAAyDMOD/oyulngxQTLqlv6ziAAHFAB4DSrpuAAAAAElFTkSuQmCC\"})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u63D2\\u4EF6\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u63D2\\u4EF6\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u63D2\\u4EF6\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`latexdiff\\u8FD9\\u4E2A\\u5DE5\\u5177\\u81EA\\u5E26\\u4E86\\u4E24\\u4E2A\\u5176\\u4ED6\\u7684\\u5DE5\\u5177\\uFF0C\\u5206\\u522B\\u662Flatexrevise\\u548Clatexdiff-vc\\uFF0C\\u65E0\\u9700\\u989D\\u5916\\u5B89\\u88C5\\u3002\n`,(0,n.jsx)(e.strong,{children:\"latexrevise\"}),\" \\u53EF\\u4EE5\\u5E2E\\u52A9\\u6211\\u4EEC\\u5C06diff.tex\\u4E2D\\u7684\\u6807\\u8BB0\\u5168\\u90E8\\u5220\\u6389\"]}),`\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:\"\\u53C2\\u6570\"}),(0,n.jsx)(e.th,{children:\"\\u63CF\\u8FF0\"}),(0,n.jsx)(e.th,{children:\"\\u53C2\\u6570\\u4F7F\\u7528\"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"SIMPLIFY\"}),(0,n.jsx)(e.td,{children:\"\\u4EC5\\u4FDD\\u7559\\u6DFB\\u52A0\\u5220\\u9664\\u4E24\\u7C7B\\u6807\\u6CE8\"}),(0,n.jsx)(e.td,{children:\"-s \\u6216\\u2013simlify\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"ACCEPT\"}),(0,n.jsx)(e.td,{children:\"\\u4EC5\\u4FDD\\u7559\\u6DFB\\u52A0\\u6807\\u6CE8\\u5185\\u7684\\u5185\\u5BB9\"}),(0,n.jsx)(e.td,{children:\"-a \\u6216\\u2013accept\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"DECLINE\"}),(0,n.jsx)(e.td,{children:\"\\u4EC5\\u4FDD\\u7559\\u5220\\u9664\\u6807\\u6CE8\\u7684\\u5185\\u5BB9\"}),(0,n.jsx)(e.td,{children:\"-d \\u6216 --decline\"})]})]})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u63A5\\u53D7\\u6240\\u6709\\u4FEE\\u6539\nlatexrevise -a diff.tex > accept.tex\n# \\u56DE\\u6EDA\\u6240\\u6709\\u4FEE\\u6539\\uFF0C\\u8FD8\\u539F\\u56DE\\u672A\\u4FEE\\u6539\\u7684\\u7248\\u672C\nlatexrevise -d diff.tex > decline.tex\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u63A5\\u53D7\\u6240\\u6709\\u4FEE\\u6539\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"latexrevise\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -a\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" diff.tex\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" >\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" accept.tex\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"# \\u56DE\\u6EDA\\u6240\\u6709\\u4FEE\\u6539\\uFF0C\\u8FD8\\u539F\\u56DE\\u672A\\u4FEE\\u6539\\u7684\\u7248\\u672C\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"latexrevise\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -d\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" diff.tex\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" >\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" decline.tex\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"reference\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#reference\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://tex.stackexchange.com/questions/625608/how-to-use-latexdiff-to-compare-changes-in-bib-files\",children:\"How to use latexdiff to compare changes in .bib files?\"})})]})}function E(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(o,l)})):o(l)}var b=E;return m(B);})();\n;return Component;"
    },
    "_id": "post/2024-11-11-latexdiff.md",
    "_raw": {
      "sourceFilePath": "post/2024-11-11-latexdiff.md",
      "sourceFileName": "2024-11-11-latexdiff.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-11-11-latexdiff"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-11-11-latexdiff",
    "slugAsParams": "2024-11-11-latexdiff"
  },
  {
    "title": "WebGL 环境遮挡Ambient Occlusion（AO）",
    "tags": [
      "CG"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-11-17T00:00:00.000Z",
    "body": {
      "raw": "空间换时间。预先计算好AO的信息生成一张AO贴图，在程序运行时，只需要直接进行采样。但这种方法只能表达单个物体。当对整个场景进行AO处理时，上述方法就无法胜任了。比如地板上有一张桌子和一把椅子，桌子和椅子的位置一直在变化，这时我们就无法预先烘焙好它们的AO效果。\n\n\n## 屏幕空间环境光遮蔽（SSAO）\nScreen-Space Ambient Occlusion， 当我们使用相机渲染场景时，除了可以生成场景的颜色信息，还可以生成场景中物体的深度信息。如果将每个像素点的深度信息连在一起，就可以得到一个高度场（Heightfield）。有了高度场信息之后，我们就可以估算每个区域的自遮挡关系。\n\n\n\n### 球形环境光遮挡体积技术AO\n\nScreen Space Ambient Occlusion\n\n环境光遮蔽由灰度值来呈现，该位置的灰度越高，说明光线越不可能到达该位置。环境光遮蔽可以被看作是光线能到达表面上每一点的能力的数值。\n\n对于铺屏四边形(Screen-filled Quad)上的每一个片段，我们都会根据周边深度值计算一个**遮蔽因子(Occlusion Factor)**。这个遮蔽因子之后会被用来减少或者抵消片段的环境光照分量。遮蔽因子是通过采集fragment周围球型核心(Kernel)的多个深度样本，并和当前fragment深度值对比而得到的。高于fragment深度值样本的个数就是我们想要的遮蔽因子。\n\n\n## Reference\n[# 如何理解渲染中的AO（环境光遮蔽](https://www.piccoloengine.com/topic/310595)",
      "code": "var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var g=(c,e)=>()=>(e||c((e={exports:{}}).exports,e),e.exports),O=(c,e)=>{for(var a in e)t(c,a,{get:e[a],enumerable:!0})},s=(c,e,a,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of p(e))!f.call(c,r)&&r!==a&&t(c,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return c};var A=(c,e,a)=>(a=c!=null?d(u(c)):{},s(e||!c||!c.__esModule?t(a,\"default\",{value:c,enumerable:!0}):a,c)),x=c=>s(t({},\"__esModule\",{value:!0}),c);var l=g((w,o)=>{o.exports=_jsx_runtime});var _={};O(_,{default:()=>S,frontmatter:()=>b});var n=A(l()),b={title:\"WebGL \\u73AF\\u5883\\u906E\\u6321Ambient Occlusion\\uFF08AO\\uFF09\",subtitle:null,layout:\"post\",date:new Date(17318016e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"CG\"],image:null};function h(c){let e=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",h3:\"h3\",strong:\"strong\"},c.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"\\u7A7A\\u95F4\\u6362\\u65F6\\u95F4\\u3002\\u9884\\u5148\\u8BA1\\u7B97\\u597DAO\\u7684\\u4FE1\\u606F\\u751F\\u6210\\u4E00\\u5F20AO\\u8D34\\u56FE\\uFF0C\\u5728\\u7A0B\\u5E8F\\u8FD0\\u884C\\u65F6\\uFF0C\\u53EA\\u9700\\u8981\\u76F4\\u63A5\\u8FDB\\u884C\\u91C7\\u6837\\u3002\\u4F46\\u8FD9\\u79CD\\u65B9\\u6CD5\\u53EA\\u80FD\\u8868\\u8FBE\\u5355\\u4E2A\\u7269\\u4F53\\u3002\\u5F53\\u5BF9\\u6574\\u4E2A\\u573A\\u666F\\u8FDB\\u884CAO\\u5904\\u7406\\u65F6\\uFF0C\\u4E0A\\u8FF0\\u65B9\\u6CD5\\u5C31\\u65E0\\u6CD5\\u80DC\\u4EFB\\u4E86\\u3002\\u6BD4\\u5982\\u5730\\u677F\\u4E0A\\u6709\\u4E00\\u5F20\\u684C\\u5B50\\u548C\\u4E00\\u628A\\u6905\\u5B50\\uFF0C\\u684C\\u5B50\\u548C\\u6905\\u5B50\\u7684\\u4F4D\\u7F6E\\u4E00\\u76F4\\u5728\\u53D8\\u5316\\uFF0C\\u8FD9\\u65F6\\u6211\\u4EEC\\u5C31\\u65E0\\u6CD5\\u9884\\u5148\\u70D8\\u7119\\u597D\\u5B83\\u4EEC\\u7684AO\\u6548\\u679C\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u5C4F\\u5E55\\u7A7A\\u95F4\\u73AF\\u5883\\u5149\\u906E\\u853Dssao\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u5C4F\\u5E55\\u7A7A\\u95F4\\u73AF\\u5883\\u5149\\u906E\\u853Dssao\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5C4F\\u5E55\\u7A7A\\u95F4\\u73AF\\u5883\\u5149\\u906E\\u853D\\uFF08SSAO\\uFF09\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Screen-Space Ambient Occlusion\\uFF0C \\u5F53\\u6211\\u4EEC\\u4F7F\\u7528\\u76F8\\u673A\\u6E32\\u67D3\\u573A\\u666F\\u65F6\\uFF0C\\u9664\\u4E86\\u53EF\\u4EE5\\u751F\\u6210\\u573A\\u666F\\u7684\\u989C\\u8272\\u4FE1\\u606F\\uFF0C\\u8FD8\\u53EF\\u4EE5\\u751F\\u6210\\u573A\\u666F\\u4E2D\\u7269\\u4F53\\u7684\\u6DF1\\u5EA6\\u4FE1\\u606F\\u3002\\u5982\\u679C\\u5C06\\u6BCF\\u4E2A\\u50CF\\u7D20\\u70B9\\u7684\\u6DF1\\u5EA6\\u4FE1\\u606F\\u8FDE\\u5728\\u4E00\\u8D77\\uFF0C\\u5C31\\u53EF\\u4EE5\\u5F97\\u5230\\u4E00\\u4E2A\\u9AD8\\u5EA6\\u573A\\uFF08Heightfield\\uFF09\\u3002\\u6709\\u4E86\\u9AD8\\u5EA6\\u573A\\u4FE1\\u606F\\u4E4B\\u540E\\uFF0C\\u6211\\u4EEC\\u5C31\\u53EF\\u4EE5\\u4F30\\u7B97\\u6BCF\\u4E2A\\u533A\\u57DF\\u7684\\u81EA\\u906E\\u6321\\u5173\\u7CFB\\u3002\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7403\\u5F62\\u73AF\\u5883\\u5149\\u906E\\u6321\\u4F53\\u79EF\\u6280\\u672Fao\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u7403\\u5F62\\u73AF\\u5883\\u5149\\u906E\\u6321\\u4F53\\u79EF\\u6280\\u672Fao\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7403\\u5F62\\u73AF\\u5883\\u5149\\u906E\\u6321\\u4F53\\u79EF\\u6280\\u672FAO\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Screen Space Ambient Occlusion\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u73AF\\u5883\\u5149\\u906E\\u853D\\u7531\\u7070\\u5EA6\\u503C\\u6765\\u5448\\u73B0\\uFF0C\\u8BE5\\u4F4D\\u7F6E\\u7684\\u7070\\u5EA6\\u8D8A\\u9AD8\\uFF0C\\u8BF4\\u660E\\u5149\\u7EBF\\u8D8A\\u4E0D\\u53EF\\u80FD\\u5230\\u8FBE\\u8BE5\\u4F4D\\u7F6E\\u3002\\u73AF\\u5883\\u5149\\u906E\\u853D\\u53EF\\u4EE5\\u88AB\\u770B\\u4F5C\\u662F\\u5149\\u7EBF\\u80FD\\u5230\\u8FBE\\u8868\\u9762\\u4E0A\\u6BCF\\u4E00\\u70B9\\u7684\\u80FD\\u529B\\u7684\\u6570\\u503C\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5BF9\\u4E8E\\u94FA\\u5C4F\\u56DB\\u8FB9\\u5F62(Screen-filled Quad)\\u4E0A\\u7684\\u6BCF\\u4E00\\u4E2A\\u7247\\u6BB5\\uFF0C\\u6211\\u4EEC\\u90FD\\u4F1A\\u6839\\u636E\\u5468\\u8FB9\\u6DF1\\u5EA6\\u503C\\u8BA1\\u7B97\\u4E00\\u4E2A\",(0,n.jsx)(e.strong,{children:\"\\u906E\\u853D\\u56E0\\u5B50(Occlusion Factor)\"}),\"\\u3002\\u8FD9\\u4E2A\\u906E\\u853D\\u56E0\\u5B50\\u4E4B\\u540E\\u4F1A\\u88AB\\u7528\\u6765\\u51CF\\u5C11\\u6216\\u8005\\u62B5\\u6D88\\u7247\\u6BB5\\u7684\\u73AF\\u5883\\u5149\\u7167\\u5206\\u91CF\\u3002\\u906E\\u853D\\u56E0\\u5B50\\u662F\\u901A\\u8FC7\\u91C7\\u96C6fragment\\u5468\\u56F4\\u7403\\u578B\\u6838\\u5FC3(Kernel)\\u7684\\u591A\\u4E2A\\u6DF1\\u5EA6\\u6837\\u672C\\uFF0C\\u5E76\\u548C\\u5F53\\u524Dfragment\\u6DF1\\u5EA6\\u503C\\u5BF9\\u6BD4\\u800C\\u5F97\\u5230\\u7684\\u3002\\u9AD8\\u4E8Efragment\\u6DF1\\u5EA6\\u503C\\u6837\\u672C\\u7684\\u4E2A\\u6570\\u5C31\\u662F\\u6211\\u4EEC\\u60F3\\u8981\\u7684\\u906E\\u853D\\u56E0\\u5B50\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"reference\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#reference\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.piccoloengine.com/topic/310595\",children:\"# \\u5982\\u4F55\\u7406\\u89E3\\u6E32\\u67D3\\u4E2D\\u7684AO\\uFF08\\u73AF\\u5883\\u5149\\u906E\\u853D\"})})]})}function j(c={}){let{wrapper:e}=c.components||{};return e?(0,n.jsx)(e,Object.assign({},c,{children:(0,n.jsx)(h,c)})):h(c)}var S=j;return x(_);})();\n;return Component;"
    },
    "_id": "post/2024-11-17-WebGL-AO.md",
    "_raw": {
      "sourceFilePath": "post/2024-11-17-WebGL-AO.md",
      "sourceFileName": "2024-11-17-WebGL-AO.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-11-17-WebGL-AO"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-11-17-WebGL-AO",
    "slugAsParams": "2024-11-17-WebGL-AO"
  },
  {
    "title": "WebGL davil/FLow",
    "tags": [
      "CG"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-11-17T00:00:00.000Z",
    "body": {
      "raw": "> 针对https://github.com/dli/flow该代码修改艺术粒子效果\n> WebGL + curl noise + half-angle slice rendering + incremental odd-even merge sort\n> WebGL +旋度噪声+半角切片渲染+增量奇偶合并排序\n\n\n![|500](assets/2024-11-17-WebGL-Flow-20241117012116.png)\n\n\n该方法没有实现粒子效果，绘制POINT，且没有用到实例渲染，性能估计会差一些\n但是将粒子模拟放到GPU中，计算会快\n\n\n## curl noise\n\n> [GraphicsLab Project 之 Curl Noise - i_dovelemon - 博客园](https://www.cnblogs.com/idovelemon/p/12775127.html)\n\n所谓 Curl Noise，即是对一个随机向量场，进行 Curl 操作之后得到的新场。因为满足散度为 0 的特性，所以这个场看上去就具有流体的视觉特性。如果用这个场作为速度去控制粒子，即可得到开头视频中流动的效果\n\n\n\n## 最终效果\n\n![](assets/2024-11-17-WebGL-Flow-20241117012426.gif)",
      "code": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var E=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),p=(n,e)=>{for(var t in e)a(n,t,{get:e[t],enumerable:!0})},l=(n,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of d(e))!u.call(n,i)&&i!==t&&a(n,i,{get:()=>e[i],enumerable:!(o=g(e,i))||o.enumerable});return n};var b=(n,e,t)=>(t=n!=null?h(m(n)):{},l(e||!n||!n.__esModule?a(t,\"default\",{value:n,enumerable:!0}):t,n)),w=n=>l(a({},\"__esModule\",{value:!0}),n);var r=E((G,s)=>{s.exports=_jsx_runtime});var v={};p(v,{default:()=>C,frontmatter:()=>B});var A=b(r()),B={title:\"WebGL davil/FLow\",subtitle:null,layout:\"post\",date:new Date(17318016e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"CG\"],image:null};function c(n){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",img:\"img\",h2:\"h2\",span:\"span\"},n.components);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(e.blockquote,{children:[`\n`,(0,A.jsxs)(e.p,{children:[\"\\u9488\\u5BF9\",(0,A.jsx)(e.a,{href:\"https://github.com/dli/flow%E8%AF%A5%E4%BB%A3%E7%A0%81%E4%BF%AE%E6%94%B9%E8%89%BA%E6%9C%AF%E7%B2%92%E5%AD%90%E6%95%88%E6%9E%9C\",children:\"https://github.com/dli/flow\\u8BE5\\u4EE3\\u7801\\u4FEE\\u6539\\u827A\\u672F\\u7C92\\u5B50\\u6548\\u679C\"}),`\nWebGL + curl noise + half-angle slice rendering + incremental odd-even merge sort\nWebGL +\\u65CB\\u5EA6\\u566A\\u58F0+\\u534A\\u89D2\\u5207\\u7247\\u6E32\\u67D3+\\u589E\\u91CF\\u5947\\u5076\\u5408\\u5E76\\u6392\\u5E8F`]}),`\n`]}),`\n`,(0,A.jsx)(e.p,{children:(0,A.jsx)(e.img,{src:\"/post/assets/2024-11-17-WebGL-Flow-20241117012116.png\",alt:\"|500\",width:\"1280\",height:\"858\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAPFBMVEXv8PDTj4/ixsbk0NDGx8f0+vqbVVXo6uro5ubPz8+uWVnTnZ3v09Oeo6Phs7O9k5PY19ePSEi7bm67vb0qrAO8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nAXBhwHAIAwEsQNs/A4tZf9dIyHcvZaK5i7v0xvj6qfZB4qwlQKl5Q3xAxiiAR0X11laAAAAAElFTkSuQmCC\"})}),`\n`,(0,A.jsx)(e.p,{children:`\\u8BE5\\u65B9\\u6CD5\\u6CA1\\u6709\\u5B9E\\u73B0\\u7C92\\u5B50\\u6548\\u679C\\uFF0C\\u7ED8\\u5236POINT\\uFF0C\\u4E14\\u6CA1\\u6709\\u7528\\u5230\\u5B9E\\u4F8B\\u6E32\\u67D3\\uFF0C\\u6027\\u80FD\\u4F30\\u8BA1\\u4F1A\\u5DEE\\u4E00\\u4E9B\n\\u4F46\\u662F\\u5C06\\u7C92\\u5B50\\u6A21\\u62DF\\u653E\\u5230GPU\\u4E2D\\uFF0C\\u8BA1\\u7B97\\u4F1A\\u5FEB`}),`\n`,(0,A.jsxs)(e.h2,{id:\"curl-noise\",children:[(0,A.jsx)(e.a,{className:\"header-anchor\",href:\"#curl-noise\",children:(0,A.jsx)(e.span,{className:\"icon icon-link\"})}),\"curl noise\"]}),`\n`,(0,A.jsxs)(e.blockquote,{children:[`\n`,(0,A.jsx)(e.p,{children:(0,A.jsx)(e.a,{href:\"https://www.cnblogs.com/idovelemon/p/12775127.html\",children:\"GraphicsLab Project \\u4E4B Curl Noise - i_dovelemon - \\u535A\\u5BA2\\u56ED\"})}),`\n`]}),`\n`,(0,A.jsx)(e.p,{children:\"\\u6240\\u8C13 Curl Noise\\uFF0C\\u5373\\u662F\\u5BF9\\u4E00\\u4E2A\\u968F\\u673A\\u5411\\u91CF\\u573A\\uFF0C\\u8FDB\\u884C Curl \\u64CD\\u4F5C\\u4E4B\\u540E\\u5F97\\u5230\\u7684\\u65B0\\u573A\\u3002\\u56E0\\u4E3A\\u6EE1\\u8DB3\\u6563\\u5EA6\\u4E3A 0 \\u7684\\u7279\\u6027\\uFF0C\\u6240\\u4EE5\\u8FD9\\u4E2A\\u573A\\u770B\\u4E0A\\u53BB\\u5C31\\u5177\\u6709\\u6D41\\u4F53\\u7684\\u89C6\\u89C9\\u7279\\u6027\\u3002\\u5982\\u679C\\u7528\\u8FD9\\u4E2A\\u573A\\u4F5C\\u4E3A\\u901F\\u5EA6\\u53BB\\u63A7\\u5236\\u7C92\\u5B50\\uFF0C\\u5373\\u53EF\\u5F97\\u5230\\u5F00\\u5934\\u89C6\\u9891\\u4E2D\\u6D41\\u52A8\\u7684\\u6548\\u679C\"}),`\n`,(0,A.jsxs)(e.h2,{id:\"\\u6700\\u7EC8\\u6548\\u679C\",children:[(0,A.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u6700\\u7EC8\\u6548\\u679C\",children:(0,A.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6700\\u7EC8\\u6548\\u679C\"]}),`\n`,(0,A.jsx)(e.p,{children:(0,A.jsx)(e.img,{src:\"/post/assets/2024-11-17-WebGL-Flow-20241117012426.gif\",alt:\"\",width:\"800\",height:\"362\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAMFBMVEXe3t3r6+e/wL3Hycfk5eSBgaHBu7Smpa1zYm2HeXacoqWkqr7Y2diRhnuNgZVLRmFZ5ZWzAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAKElEQVR4nAXBhwEAIAgDsJaNov7/rQmM5OQrqPvtE4G1s1ppgIjKAB8OhgC5kOGD+AAAAABJRU5ErkJggg==\"})})]})}function f(n={}){let{wrapper:e}=n.components||{};return e?(0,A.jsx)(e,Object.assign({},n,{children:(0,A.jsx)(c,n)})):c(n)}var C=f;return w(v);})();\n;return Component;"
    },
    "_id": "post/2024-11-17-WebGL-Flow.md",
    "_raw": {
      "sourceFilePath": "post/2024-11-17-WebGL-Flow.md",
      "sourceFileName": "2024-11-17-WebGL-Flow.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-11-17-WebGL-Flow"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-11-17-WebGL-Flow",
    "slugAsParams": "2024-11-17-WebGL-Flow"
  },
  {
    "title": "WebGL  FBO离屏渲染 vs 实时渲染",
    "tags": [
      "CG"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-12-08T00:00:00.000Z",
    "body": {
      "raw": "> 离屏渲染就是利用帧缓存渲染到纹理，但是再将texture渲染到canvas的和实时渲染到canvas的两个物体会失去深度叠加\n\n| ![](assets/2024-12-08-WebGL-FBO-20241208025537.png)  | ![](assets/2024-12-08-WebGL-FBO-20241208025559.png) |\n| ---- | ---- |\n\n方块是利用实例化渲染到纹理中，再将纹理映射到canvas。box是直接渲染到canvas。因此两种需要同时选择离屏或者实时渲染方式，不能混用。\n\n\n### 与实时渲染的优缺点比较：\n离屏渲染：\n1.在变化的场景下，因为离屏渲染需要创建一个新的缓冲区，且需要多次切换上下文环境，所以代价很高；\n2.在稳定的场景下，离屏渲染可以采用一张纹理进行渲染，所以性能较当前屏渲染有较大提升。\n从上述对比可以看出，**在稳定场景下使用离屏渲染的优势较大**。\n\n\n### 帧缓冲FBO\n\n",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var p=(n,A)=>()=>(A||n((A={exports:{}}).exports,A),A.exports),b=(n,A)=>{for(var t in A)s(n,t,{get:A[t],enumerable:!0})},i=(n,A,t,r)=>{if(A&&typeof A==\"object\"||typeof A==\"function\")for(let a of g(A))!u.call(n,a)&&a!==t&&s(n,a,{get:()=>A[a],enumerable:!(r=d(A,a))||r.enumerable});return n};var w=(n,A,t)=>(t=n!=null?h(m(n)):{},i(A||!n||!n.__esModule?s(t,\"default\",{value:n,enumerable:!0}):t,n)),x=n=>i(s({},\"__esModule\",{value:!0}),n);var c=p((v,o)=>{o.exports=_jsx_runtime});var Q={};b(Q,{default:()=>M,frontmatter:()=>O});var e=w(c()),O={title:\"WebGL  FBO\\u79BB\\u5C4F\\u6E32\\u67D3 vs \\u5B9E\\u65F6\\u6E32\\u67D3\",subtitle:null,layout:\"post\",date:new Date(1733616e6),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"CG\"],image:null};function l(n){let A=Object.assign({blockquote:\"blockquote\",p:\"p\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",img:\"img\",h3:\"h3\",a:\"a\",span:\"span\",strong:\"strong\"},n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(A.blockquote,{children:[`\n`,(0,e.jsx)(A.p,{children:\"\\u79BB\\u5C4F\\u6E32\\u67D3\\u5C31\\u662F\\u5229\\u7528\\u5E27\\u7F13\\u5B58\\u6E32\\u67D3\\u5230\\u7EB9\\u7406\\uFF0C\\u4F46\\u662F\\u518D\\u5C06texture\\u6E32\\u67D3\\u5230canvas\\u7684\\u548C\\u5B9E\\u65F6\\u6E32\\u67D3\\u5230canvas\\u7684\\u4E24\\u4E2A\\u7269\\u4F53\\u4F1A\\u5931\\u53BB\\u6DF1\\u5EA6\\u53E0\\u52A0\"}),`\n`]}),`\n`,(0,e.jsx)(A.table,{children:(0,e.jsx)(A.thead,{children:(0,e.jsxs)(A.tr,{children:[(0,e.jsx)(A.th,{children:(0,e.jsx)(A.img,{src:\"/post/assets/2024-12-08-WebGL-FBO-20241208025537.png\",alt:\"\",width:\"1114\",height:\"1176\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAPFBMVEX39/ih0eOQwPLs8O+XzOOQy9+GvfJ+sv77+Pby9POAtvn49+/k7umu1uSdx/F9t/S82Oyz1evM5+SHxOWwJa79AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAPUlEQVR4nD3GORKAMAwDQDmxI+UO8P+/MkPBVovi55rmBdukrr7QrAKoC/QvCYz8R9IoYIx8z2jg42mTfAE9vwG6fdpu3wAAAABJRU5ErkJggg==\"})}),(0,e.jsx)(A.th,{children:(0,e.jsx)(A.img,{src:\"/post/assets/2024-12-08-WebGL-FBO-20241208025559.png\",alt:\"\",width:\"1160\",height:\"1240\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAJCAMAAAA4jZ0cAAAAElBMVEXW6NfQ79Xd5d7b8Nzk5eTP6NI/W/o1AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAMElEQVR4nD3LwQkAMBACwT31+m85GEh8DQsC6sJimwXwzIxo8MUvD9piL/oQQUqSAxPrAIU9NF65AAAAAElFTkSuQmCC\"})})]})})}),`\n`,(0,e.jsx)(A.p,{children:\"\\u65B9\\u5757\\u662F\\u5229\\u7528\\u5B9E\\u4F8B\\u5316\\u6E32\\u67D3\\u5230\\u7EB9\\u7406\\u4E2D\\uFF0C\\u518D\\u5C06\\u7EB9\\u7406\\u6620\\u5C04\\u5230canvas\\u3002box\\u662F\\u76F4\\u63A5\\u6E32\\u67D3\\u5230canvas\\u3002\\u56E0\\u6B64\\u4E24\\u79CD\\u9700\\u8981\\u540C\\u65F6\\u9009\\u62E9\\u79BB\\u5C4F\\u6216\\u8005\\u5B9E\\u65F6\\u6E32\\u67D3\\u65B9\\u5F0F\\uFF0C\\u4E0D\\u80FD\\u6DF7\\u7528\\u3002\"}),`\n`,(0,e.jsxs)(A.h3,{id:\"\\u4E0E\\u5B9E\\u65F6\\u6E32\\u67D3\\u7684\\u4F18\\u7F3A\\u70B9\\u6BD4\\u8F83\",children:[(0,e.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u4E0E\\u5B9E\\u65F6\\u6E32\\u67D3\\u7684\\u4F18\\u7F3A\\u70B9\\u6BD4\\u8F83\",children:(0,e.jsx)(A.span,{className:\"icon icon-link\"})}),\"\\u4E0E\\u5B9E\\u65F6\\u6E32\\u67D3\\u7684\\u4F18\\u7F3A\\u70B9\\u6BD4\\u8F83\\uFF1A\"]}),`\n`,(0,e.jsxs)(A.p,{children:[`\\u79BB\\u5C4F\\u6E32\\u67D3\\uFF1A\n1.\\u5728\\u53D8\\u5316\\u7684\\u573A\\u666F\\u4E0B\\uFF0C\\u56E0\\u4E3A\\u79BB\\u5C4F\\u6E32\\u67D3\\u9700\\u8981\\u521B\\u5EFA\\u4E00\\u4E2A\\u65B0\\u7684\\u7F13\\u51B2\\u533A\\uFF0C\\u4E14\\u9700\\u8981\\u591A\\u6B21\\u5207\\u6362\\u4E0A\\u4E0B\\u6587\\u73AF\\u5883\\uFF0C\\u6240\\u4EE5\\u4EE3\\u4EF7\\u5F88\\u9AD8\\uFF1B\n2.\\u5728\\u7A33\\u5B9A\\u7684\\u573A\\u666F\\u4E0B\\uFF0C\\u79BB\\u5C4F\\u6E32\\u67D3\\u53EF\\u4EE5\\u91C7\\u7528\\u4E00\\u5F20\\u7EB9\\u7406\\u8FDB\\u884C\\u6E32\\u67D3\\uFF0C\\u6240\\u4EE5\\u6027\\u80FD\\u8F83\\u5F53\\u524D\\u5C4F\\u6E32\\u67D3\\u6709\\u8F83\\u5927\\u63D0\\u5347\\u3002\n\\u4ECE\\u4E0A\\u8FF0\\u5BF9\\u6BD4\\u53EF\\u4EE5\\u770B\\u51FA\\uFF0C`,(0,e.jsx)(A.strong,{children:\"\\u5728\\u7A33\\u5B9A\\u573A\\u666F\\u4E0B\\u4F7F\\u7528\\u79BB\\u5C4F\\u6E32\\u67D3\\u7684\\u4F18\\u52BF\\u8F83\\u5927\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(A.h3,{id:\"\\u5E27\\u7F13\\u51B2fbo\",children:[(0,e.jsx)(A.a,{className:\"header-anchor\",href:\"#\\u5E27\\u7F13\\u51B2fbo\",children:(0,e.jsx)(A.span,{className:\"icon icon-link\"})}),\"\\u5E27\\u7F13\\u51B2FBO\"]})]})}function B(n={}){let{wrapper:A}=n.components||{};return A?(0,e.jsx)(A,Object.assign({},n,{children:(0,e.jsx)(l,n)})):l(n)}var M=B;return x(Q);})();\n;return Component;"
    },
    "_id": "post/2024-12-08-WebGL-FBO.md",
    "_raw": {
      "sourceFilePath": "post/2024-12-08-WebGL-FBO.md",
      "sourceFileName": "2024-12-08-WebGL-FBO.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-12-08-WebGL-FBO"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-12-08-WebGL-FBO",
    "slugAsParams": "2024-12-08-WebGL-FBO"
  },
  {
    "title": "用户认证Authentication方式，JWT和Session",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-12-09T00:00:00.000Z",
    "body": {
      "raw": "\n> 认证：Authentication，验证当前用户的身份\n> 授权：Authorization， 用户授予第三方应用访问该用户某些资源的权限\n> 凭证：Credentials，实现认证和授权的前提是需要一种证书来标记访问者的身份\n\n\n**常见的前后端鉴权方式**\n1. 基于Session-Cookie\n2. 基于Token 验证（包括 JWT，SSO）\n3. OAuth2.0（开放授权）\n\n## Cookie + Session 登录\nHTTP 是一种无状态的协议，客户端每次发送请求时，首先要和服务器端建立一个连接，在请求完成后又会断开这个连接。这种方式可以节省传输时占用的连接资源，但同时也存在一个问题：**每次请求都是独立的，服务器端无法判断本次请求和上一次请求是否来自同一个用户，进而也就无法判断用户的登录状态。**\n\n\nCookie 是服务器端发送给客户端的一段特殊信息，这些信息以文本的方式存放在客户端，客户端每次向服务器端发送请求时都会带上这些特殊信息。\n\n有了 Cookie 之后，服务器端就能够获取到客户端传递过来的信息了，如果需要对信息进行验证，还需要通过 Session。\n\n 客户端请求服务端，服务端会为这次请求开辟一块内存空间，这个便是 Session 对象。\n\n有了 Cookie 和 Session 之后，我们就可以进行登录认证了\n\n> 流程\n\n![](assets/2024-12-09-Authentication-20250119020803.png)\n\n\n\n1. 用户访问页面，并输入密码登录。\n2. 服务器验证密码无误后，会创建 SessionId，并将它保存起来。\n3. 服务器端响应这个 HTTP 请求，并通过 Set-Cookie 头信息，**将 SessionId 写入 Cookie 中。** （服务器端的 SessionId 可能存放在很多地方，例如：内存、文件、数据库等。）\n4. 在后续请求中，自动带上第一次登录时写入的 Cookie。\n5. 服务器端比对 Cookie 中的 SessionId 和保存在服务器端的 SessionId 是否一致。\n6. 一旦用户注销应用程序，会话将在客户端和服务器端都被销毁\n\n\n> Cookie + Session 存在的问题\n\n虽然我们使用 Cookie + Session 的方式完成了登录验证，但仍然存在一些问题：\n\n- 由于服务器端需要对接大量的客户端，也就需要存放大量的 SessionId，这样会导致服务器压力过大。\n- 如果服务器端是一个集群，为了同步登录态，需要将 SessionId 同步到每一台机器上，无形中增加了服务器端维护成本。\n- 由于 SessionId 存放在 Cookie 中，所以无法避免 CSRF 攻击。\n\n## Token 登录\nToken 是服务端生成的一串字符串，以作为客户端请求的一个令牌。当第一次登录后，服务器会生成一个 Token 并返回给客户端，客户端后续访问时，只需带上这个 Token 即可完成身份认证。\n![](assets/2024-12-09-Authentication-20250119021304.png)\n\n1. 用户输入其登录信息\n2. 服务器验证信息是否正确，并返回已签名的token\n3. **token储在客户端**，例如存在local storage或cookie中\n4. 之后的HTTP每一次请求都需要携带 token，需要把 token 放到 HTTP 的 Header 里\n5. 服务器解码JWT，并且如果令牌有效，则接受请求\n6. 一旦用户注销，令牌将在客户端被销毁，不需要与服务器进行交互一个关键是，令牌是无状态的。后端服务器不需要保存令牌或当前session的记录。\n\n\n\n> Token 机制的特点\n\n根据上面的案例，我们可以分析出 Token 的优缺点：\n\n- 服务器端不需要存放 Token，所以不会对服务器端造成压力，即使是服务器集群，也不需要增加维护成本。\n- Token 可以存放在前端任何地方，可以不用保存在 Cookie 中，提升了页面的安全性。\n- Token 下发之后，只要在生效时间之内，就一直有效，如果服务器端想收回此 Token 的权限，并不容易。\n\n\n> Token 的生成方式\n\n最常见的 Token 生成方式是使用 JWT（Json Web Token）。一个jwt实际上就是一个字符串，它由三部分组成，头部、载荷与签名，这三个部分都是json格式。\n\nJWT 算法主要分为 3 个部分：header（头信息），playload（消息体），signature（签名）。\n\n```JavaScript\nheader = '{\"alg\":\"HS256\",\"typ\":\"JWT\"}'   \n// `HS256` 表示使用了 HMAC-SHA256 来生成签名。\npayload = '{\"loggedInAs\":\"admin\",\"iat\":1422779638}'     \n//iat 表示令牌生成的时间\n```\n\n- header 部分指定了该 JWT 使用的签名算法:\n- playload 部分表明了 JWT 的意图：    \n- signature 部分为 JWT 的签名，主要为了让 JWT 不能被随意篡改，签名的方法分为两个步骤： \n\t- 输入base64url编码的 header 部分、base64url编码的 playload 部分，输出 unsignedToken。\n\t- 输入服务器端私钥、unsignedToken，输出 signature 签名。\n\n\n\n\n> 适合使用jwt的场景\n\n\n- 有效期短\n- 一次性特点\n\n比如，用户注册后发一封邮件让其激活账户，通常邮件中需要有一个链接，这个链接需要具备以下的特性：能够标识用户，该链接具有时效性（通常只允许几小时之内激活），不能被篡改以激活其他可能的账户，一次性的。这种场景就适合使用jwt。\n\n\n## SSO 单点登录\n\n单点登录指的是在公司内部搭建一个**公共的认证中心**，公司下的所有产品的登录都可以在认证中心里完成，一个产品在认证中心登录后，再去访问另一个产品，可以不用再次登录，即可获取登录状态。\n\n![](assets/2024-12-09-Authentication-20250119021730.png)\n\n1. 用户访问网站a.com下的 pageA 页面。\n2. 由于没有登录，则会重定向到认证中心，并带上回调地址www.sso.com?return_uri=a.com/pageA，以便登录后直接进入对应页面。\n3. 用户在认证中心输入账号密码，提交登录。\n4. 认证中心验证账号密码有效，然后**重定向a.com?ticket=123带上授权码 ticket，并将认证中心sso.com的登录态写入 Cookie**。\n5. 在a.com服务器中，拿着 ticket 向认证中心确认，授权码 ticket 真实有效。\n6. 验证成功后，服务器将登录信息写入 Cookie（此时客户端有 2 个 Cookie 分别存有a.com和sso.com的登录态）。\n\n认证中心登录完成之后，继续访问a.com下的其他页面。这个时候，由于a.com存在已登录的 Cookie 信息，所以服务器端直接认证成功。\n\n如果认证中心登录完成之后，访问b.com下的页面。这个时候，由于认证中心存在之前登录过的 Cookie，所以也不用再次输入账号密码，直接返回第 4 步，下发 ticket 给b.com即可。\n\n| ![](assets/2024-12-09-Authentication-20250119021957.png) | ![](assets/2024-12-09-Authentication-20250119022036.png) |\n| ---- | ---- |\n\n\n\n> SSO 单点登录退出\n\n目前我们已经完成了单点登录，在同一套认证中心的管理下，多个产品可以共享登录态。现在我们需要考虑退出了，即：在一个产品中退出了登录，怎么让其他的产品也都退出登录？\n\n原理其实不难，可以回过头来看第 5 步，每一个产品在向认证中心验证 ticket 时，其实可以顺带将自己的退出登录 api 发送到认证中心。\n\n当某个产品c.com退出登录时：\n1. 清空c.com中的登录态 Cookie。\n2. 请求认证中心sso.com中的退出 api。\n3. 认证中心遍历下发过 ticket 的所有产品，并调用对应的退出 api，完成退出。\n\n\n\n## OAuth 第三方登录\n\n在上文中，我们使用单点登录完成了多产品的登录态共享，但都是建立在一套统一的认证中心下，对于一些小型企业，未免太麻烦，有没有一种登录能够做到开箱即用？\n\n这里以微信开放平台的接入流程为例\n\n![](assets/2024-12-09-Authentication-20250119022219.png)\n\n1. 首先，a.com的运营者需要在微信开放平台注册账号，并向微信申请使用微信登录功能。\n2. 申请成功后，得到申请的 appid、appsecret。\n3. 用户在a.com上选择使用微信登录。\n4. 这时会跳转微信的 OAuth 授权登录，并带上a.com的回调地址。\n5. 用户输入微信账号和密码，登录成功后，需要选择具体的授权范围，如：授权用户的头像、昵称等。\n6. 授权之后，微信会根据拉起a.com?code=123，这时带上了一个临时票据 code。\n7. 获取 code 之后，a.com会拿着 code 、appid、appsecret，向微信服务器申请 token，验证成功后，微信会下发一个 token。\n8. 有了 token 之后，a.com就可以凭借 token 拿到对应的微信用户头像，用户昵称等信息了。\n9. a.com提示用户登录成功，并将登录状态写入 Cooke，以作为后续访问的凭证。\n\n\n\n## 总结\n上文介绍了 4 种常见的登录方式，原理应该大家都清楚了，总结一下这 4 种方案的使用场景：\n- Cookie + Session 历史悠久，适合于简单的后端架构，需开发人员自己处理好安全问题。\n- Token 方案对后端压力小，适合大型分布式的后端架构，但已分发出去的 token ，如果想收回权限，就不是很方便了。\n- SSO 单点登录，适用于中大型企业，想要统一内部所有产品的登录方式。\n- OAuth 第三方登录，简单易用，对用户和开发者都友好，但第三方平台很多，需要选择合适自己的第三方登录平台。\n\n\n\n## Cookie & Session & Token\n\n### Cookie\n\n> cookie 是什么？\n- cookie 是存储于访问者计算机中的变量。每当一台计算机通过浏览器来访问某个页面时，那么就可以通过 JavaScript 来创建和读取 cookie。\n- 实际上 cookie 是存于用户硬盘的一个文件，这个文件通常对应于一个域名，当浏览器再次访问这个域名时，便使这个cookie可用。因此，cookie可以跨越一个域名下的多个网页，但不能跨域。\n- 不同浏览器对 cookie 的实现也不一样。即保存在一个浏览器中的 cookie 到另外一个浏览器是 不能获取的。\n- **cookie 存储在客户端：** cookie 是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上。\n- **cookie 是不可跨域的：** 每个 cookie 都会绑定单一的域名，无法在别的域名下获取使用，**一级域名和二级域名之间是允许共享使用的**（**靠的是 domain）**。\n\n\n> cookie 能做什么？\n\n**HTTP 是无状态的协议（对于事务处理没有记忆能力，每次客户端和服务端会话完成时，服务端不会保存任何会话信息**）：每个请求都是完全独立的，服务端无法确认当前访问者的身份信息，无法分辨上一次的请求发送者和这一次的发送者是不是同一个人。所以服务器与浏览器为了进行会话跟踪（知道是谁在访问我），就必须主动的去维护一个状态，这个状态用于告知服务端前后两个请求是否来自同一浏览器。而这个状态需要通过 cookie 或者 session 去实现。\n\n\n保存用户登录信息。\n\nPS:虽然 浏览器将信息保存在 cookie 中是加密了，但是可能还是会造成不安全的信息泄露。\n\n页面之间的传值。\n\n在实际开发中，我们往往会通过一个页面跳转到另外一个页面。后端服务器我们可以通过数据库，session 等来传递页面所需要的值。但是在浏览器端，我们可以将数据保存在 cookie 中，然后在另外页面再去获取 cookie 中的数据。\n \nPS：这里要注意 cookie 的时效性，不然会造成获取 cookie 中数据的混乱\n\n\n\n> 怎么使用 cookie？\n\n```js\ndocument.cookie = \"name=value;expires=evalue; path=pvalue; domain=dvalue; secure;”\n```\n\n\n\n> Tips\n\n\n1. cookie可能被禁用。当用户非常注重个人隐私保护时，他很可能禁用浏览器的cookie功能；\n2. cookie是与浏览器相关的。这意味着即使访问的是同一个页面，不同浏览器之间所保存的cookie也是不能互相访问的；\n3. cookie可能被删除。因为每个cookie都是硬盘上的一个文件，因此很有可能被用户删除；\n4. cookie安全性不够高。所有的cookie都是以纯文本的形式记录于文件中，因此如果要保存用户名密码等信息时，最好事先经过加密处理。\n5. cookie 在保存时，只要后面保存的 name 相同，那么就会覆盖前面的 cookie，注意是完全覆盖，包括失效时间，pat\n\n### Session\n- session 是另一种记录服务器和客户端会话状态的机制\n- **session 是基于 cookie 实现的，session 存储在服务器端**。SessionID 会被存储到客户端的cookie 中，SessionID 是连接 Cookie 和 Session 的一道桥梁，大部分系统也是根据此原理来验证用户登录状态。\n\n\n\n### Token\n- **访问资源接口（API）时所需要的资源凭证**, **服务端无状态化、可扩展性好**\n- **简单 token 的组成：** uid(用户唯一的身份标识)、time(当前时间的时间戳)、sign（签名，token 的前几位以哈希算法压缩成的一定长度的十六进制字符串）\n- 基于 token 的用户认证是一种**服务端无状态的认证方式**，服务端不用存放 token 数据。**用解析 token 的计算时间换取 session 的存储空间**，从而减轻服务器的压力，减少频繁的查询数据库\n- token 完全由应用管理，所以它可以避开同源策略\n\n\n\n### Cookie VS. Session\n\n- 安全性： Session 比 Cookie 安全，Session 是存储在服务器端的，Cookie 是存储在客户端的。\n- 存取值的类型不同：Cookie 只支持存字符串数据，想要设置其他类型的数据，需要将其转换成字符串，Session 可以存任意数据类型。\n- 有效期不同： Cookie 可设置为长时间保持，比如我们经常使用的默认登录功能，Session 一般失效时间较短，客户端关闭（默认情况下）或者 Session 超时都会失效。\n- 存储大小不同： 单个 Cookie 保存的数据不能超过 4K，Session 可存储数据远高于 Cookie，但是当访问量过多，会占用过多的服务器资源。\n\n\n\n\n### Token VS.  Session  \n- 安全性:  Session是保存在服务端的，而JWT是保存在客户端的。 Session 和 Token 并不矛盾，作为身份认证 Token 安全性比 Session 好，因为每一个请求都有签名还能防止监听以及重放攻击，而 Session 就必须依赖链路层来保障通讯安全了。*如果你需要实现有状态的会话，仍然可以增加 Session 来在服务器端保存一些状态。*\n- Session 是一种记录服务器和客户端会话状态的机制，使服务端有状态化，可以记录会话信息。而 Token 是令牌，访问资源接口（API）时所需要的资源凭证。Token 使服务端无状态化，不会存储会话信息。\n\n所谓 Session 认证只是简单的把 User 信息存储到 Session 里，因为 SessionID 的不可预测性，暂且认为是安全的。而 Token ，如果指的是 OAuth Token 或类似的机制的话，提供的是 认证 和 授权 ，认证是针对用户，授权是针对 App 。其目的是让某 App 有权利访问某用户的信息。这里的 Token 是唯一的。不可以转移到其它 App上，也不可以转到其它用户上。Session 只提供一种简单的认证，即只要有此 SessionID ，即认为有此 User 的全部权利。是需要严格保密的，这个数据应该只保存在站方，不应该共享给其它网站或者第三方 App。\n \n\n所以简单来说：如果你的用户数据可能需要和第三方共享，或者允许第三方调用 API 接口，用 Token 。如果永远只是自己的网站，自己的 App，用什么就无所谓了。\n\n  \n## cookie VS. sessionStorage VS. localStorage\n**共同点**：都是保存在浏览器端、且同源的\n\n**区别：**\n1. cookie数据始终在同源的http请求中携带（即使不需要），即cookie在浏览器和服务器间来回传递，而sessionStorage和localStorage不会自动把数据发送给服务器，仅在本地保存。cookie数据还有路径（path）的概念，可以限制cookie只属于某个路径下\n2. 存储大小限制也不同，cookie数据不能超过4K，同时因为每次http请求都会携带cookie、所以cookie只适合保存很小的数据，如会话标识。sessionStorage和localStorage虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大\n3. 数据有效期不同，sessionStorage：仅在当前浏览器窗口关闭之前有效；localStorage：始终有效，窗口或浏览器关闭也一直保存，因此用作持久数据；cookie：只在设置的cookie过期时间之前有效，即使窗口关闭或浏览器关闭\n4. 作用域不同，sessionStorage不在不同的浏览器窗口中共享，即使是同一个页面；localstorage在所有同源窗口中都是共享的；cookie也是在所有同源窗口中都是共享的\n5. web Storage支持事件通知机制，可以将数据更新的通知发送给监听者\n6. web Storage的api接口使用更方便\n\n\n\n\n### 如何写一个会过期的localStorage\n\n两种方案：惰性删除 和 定时删除\n\n#### 惰性删除\n\n惰性删除是指，某个键值过期后，该键值不会被马上删除，而是等到下次被使用的时候，才会被检查到过期，此时才能得到删除。我们先来简单实现一下：\n\n```JavaScript\nvar lsc = (function (self) {\n    var prefix = 'one_more_lsc_'\n    /**\n     * 增加一个键值对数据\n     * @param key 键\n     * @param val 值\n     * @param expires 过期时间，单位为秒\n     */\n    self.set = function (key, val, expires) {\n        key = prefix + key;\n        val = JSON.stringify({'val': val, 'expires': new Date().getTime() + expires * 1000});\n        localStorage.setItem(key, val);\n    };\n    /**\n     * 读取对应键的值数据\n     * @param key 键\n     * @returns {null|*} 对应键的值\n     */\n    self.get = function (key) {\n        key = prefix + key;\n        var val = localStorage.getItem(key);\n        if (!val) {\n            return null;\n        }\n        val = JSON.parse(val);\n        if (val.expires < new Date().getTime()) {\n            localStorage.removeItem(key);\n            return null;\n        }\n        return val.val;\n    };\n    return self;\n}(lsc || {}));\n```\n\n#### 定时删除\n\n定时删除是指，每隔一段时间执行一次删除操作，并通过限制删除操作执行的次数和频率，来减少删除操作对CPU的长期占用。另一方面定时删除也有效的减少了因惰性删除带来的对localStorage空间的浪费。\n\n每隔一秒执行一次定时删除，操作如下：\n1. 随机测试20个设置了过期时间的key。\n2. 删除所有发现的已过期的key。\n3. 若删除的key超过5个则重复步骤1，直至重复500次。\n\n```JavaScript\nvar lsc = (function (self) {\n    var prefix = 'one_more_lsc_'\n    var list = [];\n    //初始化list\n    self.init = function () {\n        var keys = Object.keys(localStorage);\n        var reg = new RegExp('^' + prefix);\n        var temp = [];\n        //遍历所有localStorage中的所有key\n        for (var i = 0; i < keys.length; i++) {\n            //找出可过期缓存的key\n            if (reg.test(keys[i])) {\n                temp.push(keys[i]);\n            }\n        }\n        list = temp;\n    };\n    self.init();\n    self.check = function () {\n        if (!list || list.length == 0) {\n            return;\n        }\n        var checkCount = 0;\n        while (checkCount < 500) {\n            var expireCount = 0;\n            //随机测试20个设置了过期时间的key\n            for (var i = 0; i < 20; i++) {\n                if (list.length == 0) {\n                    break;\n                }\n                var index = Math.floor(Math.random() * list.length);\n                var key = list[index];\n                var val = localStorage.getItem(list[index]);\n                //从list中删除被惰性删除的key\n                if (!val) {\n                    list.splice(index, 1);\n                    expireCount++;\n                    continue;\n                }\n                val = JSON.parse(val);\n                //删除所有发现的已过期的key\n                if (val.expires < new Date().getTime()) {\n                    list.splice(index, 1);\n                    localStorage.removeItem(key);\n                    expireCount++;\n                }\n            }\n            //若删除的key不超过5个则跳出循环\n            if (expireCount <= 5 || list.length == 0) {\n                break;\n            }\n            checkCount++;\n        }\n    }\n    //每隔一秒执行一次定时删除\n    window.setInterval(self.check, 1000);\n    return self;\n}(lsc || {}));\n```\n\n### localStorage 能跨域吗？\n\n不能\n\n解决方案：\n- 通过postMessage来实现跨源通信\n- 可以实现一个公共的iframe部署在某个域名中，作为共享域\n- 将需要实现localStorage跨域通信的页面嵌入这个iframe\n- 接入对应的SDK操作共享域，从而实现localStorage的跨域存储\n\n\n![](assets/2024-12-09-Authentication-20250119022853.png)\n\n\n\n## Reference\n[用户认证：基于jwt和session的区别和优缺点](https://www.cnblogs.com/yuanrw/p/10089796.html \"发布于 2018-12-09 00:56\")\n\n[傻傻分不清之 Cookie、Session、Token、JWT](https://juejin.cn/post/6844904034181070861#heading-25)\n\n[理解OAuth 2.0](https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html)",
      "code": "var Component=(()=>{var t=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports),m=(i,n)=>{for(var l in n)r(i,l,{get:n[l],enumerable:!0})},s=(i,n,l,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let a of A(n))!g.call(i,a)&&a!==l&&r(i,a,{get:()=>n[a],enumerable:!(c=p(n,a))||c.enumerable});return i};var f=(i,n,l)=>(l=i!=null?t(k(i)):{},s(n||!i||!i.__esModule?r(l,\"default\",{value:i,enumerable:!0}):l,i)),v=i=>s(r({},\"__esModule\",{value:!0}),i);var o=u((b,d)=>{d.exports=_jsx_runtime});var w={};m(w,{default:()=>C,frontmatter:()=>S});var e=f(o()),S={title:\"\\u7528\\u6237\\u8BA4\\u8BC1Authentication\\u65B9\\u5F0F\\uFF0CJWT\\u548CSession\",subtitle:null,layout:\"post\",date:new Date(17337024e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function h(i){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",strong:\"strong\",ol:\"ol\",li:\"li\",h2:\"h2\",a:\"a\",span:\"span\",img:\"img\",ul:\"ul\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",h3:\"h3\",em:\"em\",h4:\"h4\"},i.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:`\\u8BA4\\u8BC1\\uFF1AAuthentication\\uFF0C\\u9A8C\\u8BC1\\u5F53\\u524D\\u7528\\u6237\\u7684\\u8EAB\\u4EFD\n\\u6388\\u6743\\uFF1AAuthorization\\uFF0C \\u7528\\u6237\\u6388\\u4E88\\u7B2C\\u4E09\\u65B9\\u5E94\\u7528\\u8BBF\\u95EE\\u8BE5\\u7528\\u6237\\u67D0\\u4E9B\\u8D44\\u6E90\\u7684\\u6743\\u9650\n\\u51ED\\u8BC1\\uFF1ACredentials\\uFF0C\\u5B9E\\u73B0\\u8BA4\\u8BC1\\u548C\\u6388\\u6743\\u7684\\u524D\\u63D0\\u662F\\u9700\\u8981\\u4E00\\u79CD\\u8BC1\\u4E66\\u6765\\u6807\\u8BB0\\u8BBF\\u95EE\\u8005\\u7684\\u8EAB\\u4EFD`}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u5E38\\u89C1\\u7684\\u524D\\u540E\\u7AEF\\u9274\\u6743\\u65B9\\u5F0F\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u57FA\\u4E8ESession-Cookie\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u57FA\\u4E8EToken \\u9A8C\\u8BC1\\uFF08\\u5305\\u62EC JWT\\uFF0CSSO\\uFF09\"}),`\n`,(0,e.jsx)(n.li,{children:\"OAuth2.0\\uFF08\\u5F00\\u653E\\u6388\\u6743\\uFF09\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"cookie--session-\\u767B\\u5F55\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#cookie--session-\\u767B\\u5F55\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Cookie + Session \\u767B\\u5F55\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"HTTP \\u662F\\u4E00\\u79CD\\u65E0\\u72B6\\u6001\\u7684\\u534F\\u8BAE\\uFF0C\\u5BA2\\u6237\\u7AEF\\u6BCF\\u6B21\\u53D1\\u9001\\u8BF7\\u6C42\\u65F6\\uFF0C\\u9996\\u5148\\u8981\\u548C\\u670D\\u52A1\\u5668\\u7AEF\\u5EFA\\u7ACB\\u4E00\\u4E2A\\u8FDE\\u63A5\\uFF0C\\u5728\\u8BF7\\u6C42\\u5B8C\\u6210\\u540E\\u53C8\\u4F1A\\u65AD\\u5F00\\u8FD9\\u4E2A\\u8FDE\\u63A5\\u3002\\u8FD9\\u79CD\\u65B9\\u5F0F\\u53EF\\u4EE5\\u8282\\u7701\\u4F20\\u8F93\\u65F6\\u5360\\u7528\\u7684\\u8FDE\\u63A5\\u8D44\\u6E90\\uFF0C\\u4F46\\u540C\\u65F6\\u4E5F\\u5B58\\u5728\\u4E00\\u4E2A\\u95EE\\u9898\\uFF1A\",(0,e.jsx)(n.strong,{children:\"\\u6BCF\\u6B21\\u8BF7\\u6C42\\u90FD\\u662F\\u72EC\\u7ACB\\u7684\\uFF0C\\u670D\\u52A1\\u5668\\u7AEF\\u65E0\\u6CD5\\u5224\\u65AD\\u672C\\u6B21\\u8BF7\\u6C42\\u548C\\u4E0A\\u4E00\\u6B21\\u8BF7\\u6C42\\u662F\\u5426\\u6765\\u81EA\\u540C\\u4E00\\u4E2A\\u7528\\u6237\\uFF0C\\u8FDB\\u800C\\u4E5F\\u5C31\\u65E0\\u6CD5\\u5224\\u65AD\\u7528\\u6237\\u7684\\u767B\\u5F55\\u72B6\\u6001\\u3002\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"Cookie \\u662F\\u670D\\u52A1\\u5668\\u7AEF\\u53D1\\u9001\\u7ED9\\u5BA2\\u6237\\u7AEF\\u7684\\u4E00\\u6BB5\\u7279\\u6B8A\\u4FE1\\u606F\\uFF0C\\u8FD9\\u4E9B\\u4FE1\\u606F\\u4EE5\\u6587\\u672C\\u7684\\u65B9\\u5F0F\\u5B58\\u653E\\u5728\\u5BA2\\u6237\\u7AEF\\uFF0C\\u5BA2\\u6237\\u7AEF\\u6BCF\\u6B21\\u5411\\u670D\\u52A1\\u5668\\u7AEF\\u53D1\\u9001\\u8BF7\\u6C42\\u65F6\\u90FD\\u4F1A\\u5E26\\u4E0A\\u8FD9\\u4E9B\\u7279\\u6B8A\\u4FE1\\u606F\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6709\\u4E86 Cookie \\u4E4B\\u540E\\uFF0C\\u670D\\u52A1\\u5668\\u7AEF\\u5C31\\u80FD\\u591F\\u83B7\\u53D6\\u5230\\u5BA2\\u6237\\u7AEF\\u4F20\\u9012\\u8FC7\\u6765\\u7684\\u4FE1\\u606F\\u4E86\\uFF0C\\u5982\\u679C\\u9700\\u8981\\u5BF9\\u4FE1\\u606F\\u8FDB\\u884C\\u9A8C\\u8BC1\\uFF0C\\u8FD8\\u9700\\u8981\\u901A\\u8FC7 Session\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5BA2\\u6237\\u7AEF\\u8BF7\\u6C42\\u670D\\u52A1\\u7AEF\\uFF0C\\u670D\\u52A1\\u7AEF\\u4F1A\\u4E3A\\u8FD9\\u6B21\\u8BF7\\u6C42\\u5F00\\u8F9F\\u4E00\\u5757\\u5185\\u5B58\\u7A7A\\u95F4\\uFF0C\\u8FD9\\u4E2A\\u4FBF\\u662F Session \\u5BF9\\u8C61\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6709\\u4E86 Cookie \\u548C Session \\u4E4B\\u540E\\uFF0C\\u6211\\u4EEC\\u5C31\\u53EF\\u4EE5\\u8FDB\\u884C\\u767B\\u5F55\\u8BA4\\u8BC1\\u4E86\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6D41\\u7A0B\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-09-Authentication-20250119020803.png\",alt:\"\",width:\"1280\",height:\"523\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAABlBMVEXw8PD5+fnFrb4/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAE0lEQVR4nGNgYIQABjgAcxgZGQEA0AAOPAywjQAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u7528\\u6237\\u8BBF\\u95EE\\u9875\\u9762\\uFF0C\\u5E76\\u8F93\\u5165\\u5BC6\\u7801\\u767B\\u5F55\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u5BC6\\u7801\\u65E0\\u8BEF\\u540E\\uFF0C\\u4F1A\\u521B\\u5EFA SessionId\\uFF0C\\u5E76\\u5C06\\u5B83\\u4FDD\\u5B58\\u8D77\\u6765\\u3002\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u670D\\u52A1\\u5668\\u7AEF\\u54CD\\u5E94\\u8FD9\\u4E2A HTTP \\u8BF7\\u6C42\\uFF0C\\u5E76\\u901A\\u8FC7 Set-Cookie \\u5934\\u4FE1\\u606F\\uFF0C\",(0,e.jsx)(n.strong,{children:\"\\u5C06 SessionId \\u5199\\u5165 Cookie \\u4E2D\\u3002\"}),\" \\uFF08\\u670D\\u52A1\\u5668\\u7AEF\\u7684 SessionId \\u53EF\\u80FD\\u5B58\\u653E\\u5728\\u5F88\\u591A\\u5730\\u65B9\\uFF0C\\u4F8B\\u5982\\uFF1A\\u5185\\u5B58\\u3001\\u6587\\u4EF6\\u3001\\u6570\\u636E\\u5E93\\u7B49\\u3002\\uFF09\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5728\\u540E\\u7EED\\u8BF7\\u6C42\\u4E2D\\uFF0C\\u81EA\\u52A8\\u5E26\\u4E0A\\u7B2C\\u4E00\\u6B21\\u767B\\u5F55\\u65F6\\u5199\\u5165\\u7684 Cookie\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u670D\\u52A1\\u5668\\u7AEF\\u6BD4\\u5BF9 Cookie \\u4E2D\\u7684 SessionId \\u548C\\u4FDD\\u5B58\\u5728\\u670D\\u52A1\\u5668\\u7AEF\\u7684 SessionId \\u662F\\u5426\\u4E00\\u81F4\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E00\\u65E6\\u7528\\u6237\\u6CE8\\u9500\\u5E94\\u7528\\u7A0B\\u5E8F\\uFF0C\\u4F1A\\u8BDD\\u5C06\\u5728\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u7AEF\\u90FD\\u88AB\\u9500\\u6BC1\"}),`\n`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Cookie + Session \\u5B58\\u5728\\u7684\\u95EE\\u9898\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u867D\\u7136\\u6211\\u4EEC\\u4F7F\\u7528 Cookie + Session \\u7684\\u65B9\\u5F0F\\u5B8C\\u6210\\u4E86\\u767B\\u5F55\\u9A8C\\u8BC1\\uFF0C\\u4F46\\u4ECD\\u7136\\u5B58\\u5728\\u4E00\\u4E9B\\u95EE\\u9898\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u7531\\u4E8E\\u670D\\u52A1\\u5668\\u7AEF\\u9700\\u8981\\u5BF9\\u63A5\\u5927\\u91CF\\u7684\\u5BA2\\u6237\\u7AEF\\uFF0C\\u4E5F\\u5C31\\u9700\\u8981\\u5B58\\u653E\\u5927\\u91CF\\u7684 SessionId\\uFF0C\\u8FD9\\u6837\\u4F1A\\u5BFC\\u81F4\\u670D\\u52A1\\u5668\\u538B\\u529B\\u8FC7\\u5927\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5982\\u679C\\u670D\\u52A1\\u5668\\u7AEF\\u662F\\u4E00\\u4E2A\\u96C6\\u7FA4\\uFF0C\\u4E3A\\u4E86\\u540C\\u6B65\\u767B\\u5F55\\u6001\\uFF0C\\u9700\\u8981\\u5C06 SessionId \\u540C\\u6B65\\u5230\\u6BCF\\u4E00\\u53F0\\u673A\\u5668\\u4E0A\\uFF0C\\u65E0\\u5F62\\u4E2D\\u589E\\u52A0\\u4E86\\u670D\\u52A1\\u5668\\u7AEF\\u7EF4\\u62A4\\u6210\\u672C\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7531\\u4E8E SessionId \\u5B58\\u653E\\u5728 Cookie \\u4E2D\\uFF0C\\u6240\\u4EE5\\u65E0\\u6CD5\\u907F\\u514D CSRF \\u653B\\u51FB\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"token-\\u767B\\u5F55\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#token-\\u767B\\u5F55\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Token \\u767B\\u5F55\"]}),`\n`,(0,e.jsxs)(n.p,{children:[`Token \\u662F\\u670D\\u52A1\\u7AEF\\u751F\\u6210\\u7684\\u4E00\\u4E32\\u5B57\\u7B26\\u4E32\\uFF0C\\u4EE5\\u4F5C\\u4E3A\\u5BA2\\u6237\\u7AEF\\u8BF7\\u6C42\\u7684\\u4E00\\u4E2A\\u4EE4\\u724C\\u3002\\u5F53\\u7B2C\\u4E00\\u6B21\\u767B\\u5F55\\u540E\\uFF0C\\u670D\\u52A1\\u5668\\u4F1A\\u751F\\u6210\\u4E00\\u4E2A Token \\u5E76\\u8FD4\\u56DE\\u7ED9\\u5BA2\\u6237\\u7AEF\\uFF0C\\u5BA2\\u6237\\u7AEF\\u540E\\u7EED\\u8BBF\\u95EE\\u65F6\\uFF0C\\u53EA\\u9700\\u5E26\\u4E0A\\u8FD9\\u4E2A Token \\u5373\\u53EF\\u5B8C\\u6210\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u3002\n`,(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-09-Authentication-20250119021304.png\",alt:\"\",width:\"1217\",height:\"554\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAIVBMVEX+/v76+vrx8fHk5OTz8/Pa2tq/2vWMv/C11fSUw/Du7vDWGEGPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJElEQVR4nB3BiQ0AIAzEsORK+fYfGAkb1uRspEw5Ougt0+EzPgckAFJRPAwiAAAAAElFTkSuQmCC\"})]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u7528\\u6237\\u8F93\\u5165\\u5176\\u767B\\u5F55\\u4FE1\\u606F\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u4FE1\\u606F\\u662F\\u5426\\u6B63\\u786E\\uFF0C\\u5E76\\u8FD4\\u56DE\\u5DF2\\u7B7E\\u540D\\u7684token\"}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"token\\u50A8\\u5728\\u5BA2\\u6237\\u7AEF\"}),\"\\uFF0C\\u4F8B\\u5982\\u5B58\\u5728local storage\\u6216cookie\\u4E2D\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E4B\\u540E\\u7684HTTP\\u6BCF\\u4E00\\u6B21\\u8BF7\\u6C42\\u90FD\\u9700\\u8981\\u643A\\u5E26 token\\uFF0C\\u9700\\u8981\\u628A token \\u653E\\u5230 HTTP \\u7684 Header \\u91CC\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u670D\\u52A1\\u5668\\u89E3\\u7801JWT\\uFF0C\\u5E76\\u4E14\\u5982\\u679C\\u4EE4\\u724C\\u6709\\u6548\\uFF0C\\u5219\\u63A5\\u53D7\\u8BF7\\u6C42\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E00\\u65E6\\u7528\\u6237\\u6CE8\\u9500\\uFF0C\\u4EE4\\u724C\\u5C06\\u5728\\u5BA2\\u6237\\u7AEF\\u88AB\\u9500\\u6BC1\\uFF0C\\u4E0D\\u9700\\u8981\\u4E0E\\u670D\\u52A1\\u5668\\u8FDB\\u884C\\u4EA4\\u4E92\\u4E00\\u4E2A\\u5173\\u952E\\u662F\\uFF0C\\u4EE4\\u724C\\u662F\\u65E0\\u72B6\\u6001\\u7684\\u3002\\u540E\\u7AEF\\u670D\\u52A1\\u5668\\u4E0D\\u9700\\u8981\\u4FDD\\u5B58\\u4EE4\\u724C\\u6216\\u5F53\\u524Dsession\\u7684\\u8BB0\\u5F55\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Token \\u673A\\u5236\\u7684\\u7279\\u70B9\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6839\\u636E\\u4E0A\\u9762\\u7684\\u6848\\u4F8B\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5206\\u6790\\u51FA Token \\u7684\\u4F18\\u7F3A\\u70B9\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u670D\\u52A1\\u5668\\u7AEF\\u4E0D\\u9700\\u8981\\u5B58\\u653E Token\\uFF0C\\u6240\\u4EE5\\u4E0D\\u4F1A\\u5BF9\\u670D\\u52A1\\u5668\\u7AEF\\u9020\\u6210\\u538B\\u529B\\uFF0C\\u5373\\u4F7F\\u662F\\u670D\\u52A1\\u5668\\u96C6\\u7FA4\\uFF0C\\u4E5F\\u4E0D\\u9700\\u8981\\u589E\\u52A0\\u7EF4\\u62A4\\u6210\\u672C\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"Token \\u53EF\\u4EE5\\u5B58\\u653E\\u5728\\u524D\\u7AEF\\u4EFB\\u4F55\\u5730\\u65B9\\uFF0C\\u53EF\\u4EE5\\u4E0D\\u7528\\u4FDD\\u5B58\\u5728 Cookie \\u4E2D\\uFF0C\\u63D0\\u5347\\u4E86\\u9875\\u9762\\u7684\\u5B89\\u5168\\u6027\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"Token \\u4E0B\\u53D1\\u4E4B\\u540E\\uFF0C\\u53EA\\u8981\\u5728\\u751F\\u6548\\u65F6\\u95F4\\u4E4B\\u5185\\uFF0C\\u5C31\\u4E00\\u76F4\\u6709\\u6548\\uFF0C\\u5982\\u679C\\u670D\\u52A1\\u5668\\u7AEF\\u60F3\\u6536\\u56DE\\u6B64 Token \\u7684\\u6743\\u9650\\uFF0C\\u5E76\\u4E0D\\u5BB9\\u6613\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Token \\u7684\\u751F\\u6210\\u65B9\\u5F0F\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6700\\u5E38\\u89C1\\u7684 Token \\u751F\\u6210\\u65B9\\u5F0F\\u662F\\u4F7F\\u7528 JWT\\uFF08Json Web Token\\uFF09\\u3002\\u4E00\\u4E2Ajwt\\u5B9E\\u9645\\u4E0A\\u5C31\\u662F\\u4E00\\u4E2A\\u5B57\\u7B26\\u4E32\\uFF0C\\u5B83\\u7531\\u4E09\\u90E8\\u5206\\u7EC4\\u6210\\uFF0C\\u5934\\u90E8\\u3001\\u8F7D\\u8377\\u4E0E\\u7B7E\\u540D\\uFF0C\\u8FD9\\u4E09\\u4E2A\\u90E8\\u5206\\u90FD\\u662Fjson\\u683C\\u5F0F\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"JWT \\u7B97\\u6CD5\\u4E3B\\u8981\\u5206\\u4E3A 3 \\u4E2A\\u90E8\\u5206\\uFF1Aheader\\uFF08\\u5934\\u4FE1\\u606F\\uFF09\\uFF0Cplayload\\uFF08\\u6D88\\u606F\\u4F53\\uFF09\\uFF0Csignature\\uFF08\\u7B7E\\u540D\\uFF09\\u3002\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`header = '{\"alg\":\"HS256\",\"typ\":\"JWT\"}'   \n// \\`HS256\\` \\u8868\\u793A\\u4F7F\\u7528\\u4E86 HMAC-SHA256 \\u6765\\u751F\\u6210\\u7B7E\\u540D\\u3002\npayload = '{\"loggedInAs\":\"admin\",\"iat\":1422779638}'     \n//iat \\u8868\\u793A\\u4EE4\\u724C\\u751F\\u6210\\u7684\\u65F6\\u95F4\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:`header = '{\"alg\":\"HS256\",\"typ\":\"JWT\"}'   `})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"// `HS256` \\u8868\\u793A\\u4F7F\\u7528\\u4E86 HMAC-SHA256 \\u6765\\u751F\\u6210\\u7B7E\\u540D\\u3002\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:`payload = '{\"loggedInAs\":\"admin\",\"iat\":1422779638}'     `})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"//iat \\u8868\\u793A\\u4EE4\\u724C\\u751F\\u6210\\u7684\\u65F6\\u95F4\"})})]})})})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"header \\u90E8\\u5206\\u6307\\u5B9A\\u4E86\\u8BE5 JWT \\u4F7F\\u7528\\u7684\\u7B7E\\u540D\\u7B97\\u6CD5:\"}),`\n`,(0,e.jsx)(n.li,{children:\"playload \\u90E8\\u5206\\u8868\\u660E\\u4E86 JWT \\u7684\\u610F\\u56FE\\uFF1A\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"signature \\u90E8\\u5206\\u4E3A JWT \\u7684\\u7B7E\\u540D\\uFF0C\\u4E3B\\u8981\\u4E3A\\u4E86\\u8BA9 JWT \\u4E0D\\u80FD\\u88AB\\u968F\\u610F\\u7BE1\\u6539\\uFF0C\\u7B7E\\u540D\\u7684\\u65B9\\u6CD5\\u5206\\u4E3A\\u4E24\\u4E2A\\u6B65\\u9AA4\\uFF1A\",`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u8F93\\u5165base64url\\u7F16\\u7801\\u7684 header \\u90E8\\u5206\\u3001base64url\\u7F16\\u7801\\u7684 playload \\u90E8\\u5206\\uFF0C\\u8F93\\u51FA unsignedToken\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8F93\\u5165\\u670D\\u52A1\\u5668\\u7AEF\\u79C1\\u94A5\\u3001unsignedToken\\uFF0C\\u8F93\\u51FA signature \\u7B7E\\u540D\\u3002\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u9002\\u5408\\u4F7F\\u7528jwt\\u7684\\u573A\\u666F\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u6709\\u6548\\u671F\\u77ED\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E00\\u6B21\\u6027\\u7279\\u70B9\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6BD4\\u5982\\uFF0C\\u7528\\u6237\\u6CE8\\u518C\\u540E\\u53D1\\u4E00\\u5C01\\u90AE\\u4EF6\\u8BA9\\u5176\\u6FC0\\u6D3B\\u8D26\\u6237\\uFF0C\\u901A\\u5E38\\u90AE\\u4EF6\\u4E2D\\u9700\\u8981\\u6709\\u4E00\\u4E2A\\u94FE\\u63A5\\uFF0C\\u8FD9\\u4E2A\\u94FE\\u63A5\\u9700\\u8981\\u5177\\u5907\\u4EE5\\u4E0B\\u7684\\u7279\\u6027\\uFF1A\\u80FD\\u591F\\u6807\\u8BC6\\u7528\\u6237\\uFF0C\\u8BE5\\u94FE\\u63A5\\u5177\\u6709\\u65F6\\u6548\\u6027\\uFF08\\u901A\\u5E38\\u53EA\\u5141\\u8BB8\\u51E0\\u5C0F\\u65F6\\u4E4B\\u5185\\u6FC0\\u6D3B\\uFF09\\uFF0C\\u4E0D\\u80FD\\u88AB\\u7BE1\\u6539\\u4EE5\\u6FC0\\u6D3B\\u5176\\u4ED6\\u53EF\\u80FD\\u7684\\u8D26\\u6237\\uFF0C\\u4E00\\u6B21\\u6027\\u7684\\u3002\\u8FD9\\u79CD\\u573A\\u666F\\u5C31\\u9002\\u5408\\u4F7F\\u7528jwt\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"sso-\\u5355\\u70B9\\u767B\\u5F55\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#sso-\\u5355\\u70B9\\u767B\\u5F55\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"SSO \\u5355\\u70B9\\u767B\\u5F55\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5355\\u70B9\\u767B\\u5F55\\u6307\\u7684\\u662F\\u5728\\u516C\\u53F8\\u5185\\u90E8\\u642D\\u5EFA\\u4E00\\u4E2A\",(0,e.jsx)(n.strong,{children:\"\\u516C\\u5171\\u7684\\u8BA4\\u8BC1\\u4E2D\\u5FC3\"}),\"\\uFF0C\\u516C\\u53F8\\u4E0B\\u7684\\u6240\\u6709\\u4EA7\\u54C1\\u7684\\u767B\\u5F55\\u90FD\\u53EF\\u4EE5\\u5728\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u91CC\\u5B8C\\u6210\\uFF0C\\u4E00\\u4E2A\\u4EA7\\u54C1\\u5728\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u767B\\u5F55\\u540E\\uFF0C\\u518D\\u53BB\\u8BBF\\u95EE\\u53E6\\u4E00\\u4E2A\\u4EA7\\u54C1\\uFF0C\\u53EF\\u4EE5\\u4E0D\\u7528\\u518D\\u6B21\\u767B\\u5F55\\uFF0C\\u5373\\u53EF\\u83B7\\u53D6\\u767B\\u5F55\\u72B6\\u6001\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-09-Authentication-20250119021730.png\",alt:\"\",width:\"1280\",height:\"781\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAG1BMVEX9/f34+Pjz7+7y9fb19PPv6ujj7PTV4/Ds49kdB2WfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKElEQVR4nBXBiQ0AIAzEsNzTwv4TI2xOPNzCxubbtLLgpM612Kia0QMKpwB4xxs2EgAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u7528\\u6237\\u8BBF\\u95EE\\u7F51\\u7AD9a.com\\u4E0B\\u7684 pageA \\u9875\\u9762\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7531\\u4E8E\\u6CA1\\u6709\\u767B\\u5F55\\uFF0C\\u5219\\u4F1A\\u91CD\\u5B9A\\u5411\\u5230\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\uFF0C\\u5E76\\u5E26\\u4E0A\\u56DE\\u8C03\\u5730\\u5740www.sso.com?return_uri=a.com/pageA\\uFF0C\\u4EE5\\u4FBF\\u767B\\u5F55\\u540E\\u76F4\\u63A5\\u8FDB\\u5165\\u5BF9\\u5E94\\u9875\\u9762\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7528\\u6237\\u5728\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u8F93\\u5165\\u8D26\\u53F7\\u5BC6\\u7801\\uFF0C\\u63D0\\u4EA4\\u767B\\u5F55\\u3002\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u9A8C\\u8BC1\\u8D26\\u53F7\\u5BC6\\u7801\\u6709\\u6548\\uFF0C\\u7136\\u540E\",(0,e.jsx)(n.strong,{children:\"\\u91CD\\u5B9A\\u5411a.com?ticket=123\\u5E26\\u4E0A\\u6388\\u6743\\u7801 ticket\\uFF0C\\u5E76\\u5C06\\u8BA4\\u8BC1\\u4E2D\\u5FC3sso.com\\u7684\\u767B\\u5F55\\u6001\\u5199\\u5165 Cookie\"}),\"\\u3002\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5728a.com\\u670D\\u52A1\\u5668\\u4E2D\\uFF0C\\u62FF\\u7740 ticket \\u5411\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u786E\\u8BA4\\uFF0C\\u6388\\u6743\\u7801 ticket \\u771F\\u5B9E\\u6709\\u6548\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u9A8C\\u8BC1\\u6210\\u529F\\u540E\\uFF0C\\u670D\\u52A1\\u5668\\u5C06\\u767B\\u5F55\\u4FE1\\u606F\\u5199\\u5165 Cookie\\uFF08\\u6B64\\u65F6\\u5BA2\\u6237\\u7AEF\\u6709 2 \\u4E2A Cookie \\u5206\\u522B\\u5B58\\u6709a.com\\u548Csso.com\\u7684\\u767B\\u5F55\\u6001\\uFF09\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u767B\\u5F55\\u5B8C\\u6210\\u4E4B\\u540E\\uFF0C\\u7EE7\\u7EED\\u8BBF\\u95EEa.com\\u4E0B\\u7684\\u5176\\u4ED6\\u9875\\u9762\\u3002\\u8FD9\\u4E2A\\u65F6\\u5019\\uFF0C\\u7531\\u4E8Ea.com\\u5B58\\u5728\\u5DF2\\u767B\\u5F55\\u7684 Cookie \\u4FE1\\u606F\\uFF0C\\u6240\\u4EE5\\u670D\\u52A1\\u5668\\u7AEF\\u76F4\\u63A5\\u8BA4\\u8BC1\\u6210\\u529F\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u767B\\u5F55\\u5B8C\\u6210\\u4E4B\\u540E\\uFF0C\\u8BBF\\u95EEb.com\\u4E0B\\u7684\\u9875\\u9762\\u3002\\u8FD9\\u4E2A\\u65F6\\u5019\\uFF0C\\u7531\\u4E8E\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u5B58\\u5728\\u4E4B\\u524D\\u767B\\u5F55\\u8FC7\\u7684 Cookie\\uFF0C\\u6240\\u4EE5\\u4E5F\\u4E0D\\u7528\\u518D\\u6B21\\u8F93\\u5165\\u8D26\\u53F7\\u5BC6\\u7801\\uFF0C\\u76F4\\u63A5\\u8FD4\\u56DE\\u7B2C 4 \\u6B65\\uFF0C\\u4E0B\\u53D1 ticket \\u7ED9b.com\\u5373\\u53EF\\u3002\"}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-09-Authentication-20250119021957.png\",alt:\"\",width:\"1280\",height:\"784\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAGFBMVEX9/f7v5eLo8Pjh6PD18u/39vb8+/rv6+vwggw5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKElEQVR4nBXIyQ0AAAgCMFCO/Tc2/ppiNwwJzLpWjZkQ0o9Y5VE6wAELwwCCHV3JNQAAAABJRU5ErkJggg==\"})}),(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-09-Authentication-20250119022036.png\",alt:\"\",width:\"1280\",height:\"687\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAFVBMVEX6+fny9ffo7vT9/v718/H07+vv5ubkzybvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVR4nC3GyQ0AMAgEsWEP+i8ZRYpfRmJpzSg79gsh5Sc+BfoAUQ3YiM4AAAAASUVORK5CYII=\"})})]})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"SSO \\u5355\\u70B9\\u767B\\u5F55\\u9000\\u51FA\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u76EE\\u524D\\u6211\\u4EEC\\u5DF2\\u7ECF\\u5B8C\\u6210\\u4E86\\u5355\\u70B9\\u767B\\u5F55\\uFF0C\\u5728\\u540C\\u4E00\\u5957\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u7684\\u7BA1\\u7406\\u4E0B\\uFF0C\\u591A\\u4E2A\\u4EA7\\u54C1\\u53EF\\u4EE5\\u5171\\u4EAB\\u767B\\u5F55\\u6001\\u3002\\u73B0\\u5728\\u6211\\u4EEC\\u9700\\u8981\\u8003\\u8651\\u9000\\u51FA\\u4E86\\uFF0C\\u5373\\uFF1A\\u5728\\u4E00\\u4E2A\\u4EA7\\u54C1\\u4E2D\\u9000\\u51FA\\u4E86\\u767B\\u5F55\\uFF0C\\u600E\\u4E48\\u8BA9\\u5176\\u4ED6\\u7684\\u4EA7\\u54C1\\u4E5F\\u90FD\\u9000\\u51FA\\u767B\\u5F55\\uFF1F\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u539F\\u7406\\u5176\\u5B9E\\u4E0D\\u96BE\\uFF0C\\u53EF\\u4EE5\\u56DE\\u8FC7\\u5934\\u6765\\u770B\\u7B2C 5 \\u6B65\\uFF0C\\u6BCF\\u4E00\\u4E2A\\u4EA7\\u54C1\\u5728\\u5411\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u9A8C\\u8BC1 ticket \\u65F6\\uFF0C\\u5176\\u5B9E\\u53EF\\u4EE5\\u987A\\u5E26\\u5C06\\u81EA\\u5DF1\\u7684\\u9000\\u51FA\\u767B\\u5F55 api \\u53D1\\u9001\\u5230\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5F53\\u67D0\\u4E2A\\u4EA7\\u54C1c.com\\u9000\\u51FA\\u767B\\u5F55\\u65F6\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u6E05\\u7A7Ac.com\\u4E2D\\u7684\\u767B\\u5F55\\u6001 Cookie\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8BF7\\u6C42\\u8BA4\\u8BC1\\u4E2D\\u5FC3sso.com\\u4E2D\\u7684\\u9000\\u51FA api\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u904D\\u5386\\u4E0B\\u53D1\\u8FC7 ticket \\u7684\\u6240\\u6709\\u4EA7\\u54C1\\uFF0C\\u5E76\\u8C03\\u7528\\u5BF9\\u5E94\\u7684\\u9000\\u51FA api\\uFF0C\\u5B8C\\u6210\\u9000\\u51FA\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"oauth-\\u7B2C\\u4E09\\u65B9\\u767B\\u5F55\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#oauth-\\u7B2C\\u4E09\\u65B9\\u767B\\u5F55\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"OAuth \\u7B2C\\u4E09\\u65B9\\u767B\\u5F55\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u4E0A\\u6587\\u4E2D\\uFF0C\\u6211\\u4EEC\\u4F7F\\u7528\\u5355\\u70B9\\u767B\\u5F55\\u5B8C\\u6210\\u4E86\\u591A\\u4EA7\\u54C1\\u7684\\u767B\\u5F55\\u6001\\u5171\\u4EAB\\uFF0C\\u4F46\\u90FD\\u662F\\u5EFA\\u7ACB\\u5728\\u4E00\\u5957\\u7EDF\\u4E00\\u7684\\u8BA4\\u8BC1\\u4E2D\\u5FC3\\u4E0B\\uFF0C\\u5BF9\\u4E8E\\u4E00\\u4E9B\\u5C0F\\u578B\\u4F01\\u4E1A\\uFF0C\\u672A\\u514D\\u592A\\u9EBB\\u70E6\\uFF0C\\u6709\\u6CA1\\u6709\\u4E00\\u79CD\\u767B\\u5F55\\u80FD\\u591F\\u505A\\u5230\\u5F00\\u7BB1\\u5373\\u7528\\uFF1F\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD9\\u91CC\\u4EE5\\u5FAE\\u4FE1\\u5F00\\u653E\\u5E73\\u53F0\\u7684\\u63A5\\u5165\\u6D41\\u7A0B\\u4E3A\\u4F8B\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-09-Authentication-20250119022219.png\",alt:\"\",width:\"1280\",height:\"669\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAACVBMVEXx8fH8/Pz39/cYraMRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAH0lEQVR4nB3IwREAAAxEQPRfdObys4hIwIKlT0Ld8gACMwAcG7VXNwAAAABJRU5ErkJggg==\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u9996\\u5148\\uFF0Ca.com\\u7684\\u8FD0\\u8425\\u8005\\u9700\\u8981\\u5728\\u5FAE\\u4FE1\\u5F00\\u653E\\u5E73\\u53F0\\u6CE8\\u518C\\u8D26\\u53F7\\uFF0C\\u5E76\\u5411\\u5FAE\\u4FE1\\u7533\\u8BF7\\u4F7F\\u7528\\u5FAE\\u4FE1\\u767B\\u5F55\\u529F\\u80FD\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7533\\u8BF7\\u6210\\u529F\\u540E\\uFF0C\\u5F97\\u5230\\u7533\\u8BF7\\u7684 appid\\u3001appsecret\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7528\\u6237\\u5728a.com\\u4E0A\\u9009\\u62E9\\u4F7F\\u7528\\u5FAE\\u4FE1\\u767B\\u5F55\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8FD9\\u65F6\\u4F1A\\u8DF3\\u8F6C\\u5FAE\\u4FE1\\u7684 OAuth \\u6388\\u6743\\u767B\\u5F55\\uFF0C\\u5E76\\u5E26\\u4E0Aa.com\\u7684\\u56DE\\u8C03\\u5730\\u5740\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7528\\u6237\\u8F93\\u5165\\u5FAE\\u4FE1\\u8D26\\u53F7\\u548C\\u5BC6\\u7801\\uFF0C\\u767B\\u5F55\\u6210\\u529F\\u540E\\uFF0C\\u9700\\u8981\\u9009\\u62E9\\u5177\\u4F53\\u7684\\u6388\\u6743\\u8303\\u56F4\\uFF0C\\u5982\\uFF1A\\u6388\\u6743\\u7528\\u6237\\u7684\\u5934\\u50CF\\u3001\\u6635\\u79F0\\u7B49\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6388\\u6743\\u4E4B\\u540E\\uFF0C\\u5FAE\\u4FE1\\u4F1A\\u6839\\u636E\\u62C9\\u8D77a.com?code=123\\uFF0C\\u8FD9\\u65F6\\u5E26\\u4E0A\\u4E86\\u4E00\\u4E2A\\u4E34\\u65F6\\u7968\\u636E code\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u83B7\\u53D6 code \\u4E4B\\u540E\\uFF0Ca.com\\u4F1A\\u62FF\\u7740 code \\u3001appid\\u3001appsecret\\uFF0C\\u5411\\u5FAE\\u4FE1\\u670D\\u52A1\\u5668\\u7533\\u8BF7 token\\uFF0C\\u9A8C\\u8BC1\\u6210\\u529F\\u540E\\uFF0C\\u5FAE\\u4FE1\\u4F1A\\u4E0B\\u53D1\\u4E00\\u4E2A token\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6709\\u4E86 token \\u4E4B\\u540E\\uFF0Ca.com\\u5C31\\u53EF\\u4EE5\\u51ED\\u501F token \\u62FF\\u5230\\u5BF9\\u5E94\\u7684\\u5FAE\\u4FE1\\u7528\\u6237\\u5934\\u50CF\\uFF0C\\u7528\\u6237\\u6635\\u79F0\\u7B49\\u4FE1\\u606F\\u4E86\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"a.com\\u63D0\\u793A\\u7528\\u6237\\u767B\\u5F55\\u6210\\u529F\\uFF0C\\u5E76\\u5C06\\u767B\\u5F55\\u72B6\\u6001\\u5199\\u5165 Cooke\\uFF0C\\u4EE5\\u4F5C\\u4E3A\\u540E\\u7EED\\u8BBF\\u95EE\\u7684\\u51ED\\u8BC1\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u603B\\u7ED3\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u603B\\u7ED3\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u603B\\u7ED3\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E0A\\u6587\\u4ECB\\u7ECD\\u4E86 4 \\u79CD\\u5E38\\u89C1\\u7684\\u767B\\u5F55\\u65B9\\u5F0F\\uFF0C\\u539F\\u7406\\u5E94\\u8BE5\\u5927\\u5BB6\\u90FD\\u6E05\\u695A\\u4E86\\uFF0C\\u603B\\u7ED3\\u4E00\\u4E0B\\u8FD9 4 \\u79CD\\u65B9\\u6848\\u7684\\u4F7F\\u7528\\u573A\\u666F\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Cookie + Session \\u5386\\u53F2\\u60A0\\u4E45\\uFF0C\\u9002\\u5408\\u4E8E\\u7B80\\u5355\\u7684\\u540E\\u7AEF\\u67B6\\u6784\\uFF0C\\u9700\\u5F00\\u53D1\\u4EBA\\u5458\\u81EA\\u5DF1\\u5904\\u7406\\u597D\\u5B89\\u5168\\u95EE\\u9898\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"Token \\u65B9\\u6848\\u5BF9\\u540E\\u7AEF\\u538B\\u529B\\u5C0F\\uFF0C\\u9002\\u5408\\u5927\\u578B\\u5206\\u5E03\\u5F0F\\u7684\\u540E\\u7AEF\\u67B6\\u6784\\uFF0C\\u4F46\\u5DF2\\u5206\\u53D1\\u51FA\\u53BB\\u7684 token \\uFF0C\\u5982\\u679C\\u60F3\\u6536\\u56DE\\u6743\\u9650\\uFF0C\\u5C31\\u4E0D\\u662F\\u5F88\\u65B9\\u4FBF\\u4E86\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"SSO \\u5355\\u70B9\\u767B\\u5F55\\uFF0C\\u9002\\u7528\\u4E8E\\u4E2D\\u5927\\u578B\\u4F01\\u4E1A\\uFF0C\\u60F3\\u8981\\u7EDF\\u4E00\\u5185\\u90E8\\u6240\\u6709\\u4EA7\\u54C1\\u7684\\u767B\\u5F55\\u65B9\\u5F0F\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"OAuth \\u7B2C\\u4E09\\u65B9\\u767B\\u5F55\\uFF0C\\u7B80\\u5355\\u6613\\u7528\\uFF0C\\u5BF9\\u7528\\u6237\\u548C\\u5F00\\u53D1\\u8005\\u90FD\\u53CB\\u597D\\uFF0C\\u4F46\\u7B2C\\u4E09\\u65B9\\u5E73\\u53F0\\u5F88\\u591A\\uFF0C\\u9700\\u8981\\u9009\\u62E9\\u5408\\u9002\\u81EA\\u5DF1\\u7684\\u7B2C\\u4E09\\u65B9\\u767B\\u5F55\\u5E73\\u53F0\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"cookie--session--token\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#cookie--session--token\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Cookie & Session & Token\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"cookie\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#cookie\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Cookie\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"cookie \\u662F\\u4EC0\\u4E48\\uFF1F\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"cookie \\u662F\\u5B58\\u50A8\\u4E8E\\u8BBF\\u95EE\\u8005\\u8BA1\\u7B97\\u673A\\u4E2D\\u7684\\u53D8\\u91CF\\u3002\\u6BCF\\u5F53\\u4E00\\u53F0\\u8BA1\\u7B97\\u673A\\u901A\\u8FC7\\u6D4F\\u89C8\\u5668\\u6765\\u8BBF\\u95EE\\u67D0\\u4E2A\\u9875\\u9762\\u65F6\\uFF0C\\u90A3\\u4E48\\u5C31\\u53EF\\u4EE5\\u901A\\u8FC7 JavaScript \\u6765\\u521B\\u5EFA\\u548C\\u8BFB\\u53D6 cookie\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5B9E\\u9645\\u4E0A cookie \\u662F\\u5B58\\u4E8E\\u7528\\u6237\\u786C\\u76D8\\u7684\\u4E00\\u4E2A\\u6587\\u4EF6\\uFF0C\\u8FD9\\u4E2A\\u6587\\u4EF6\\u901A\\u5E38\\u5BF9\\u5E94\\u4E8E\\u4E00\\u4E2A\\u57DF\\u540D\\uFF0C\\u5F53\\u6D4F\\u89C8\\u5668\\u518D\\u6B21\\u8BBF\\u95EE\\u8FD9\\u4E2A\\u57DF\\u540D\\u65F6\\uFF0C\\u4FBF\\u4F7F\\u8FD9\\u4E2Acookie\\u53EF\\u7528\\u3002\\u56E0\\u6B64\\uFF0Ccookie\\u53EF\\u4EE5\\u8DE8\\u8D8A\\u4E00\\u4E2A\\u57DF\\u540D\\u4E0B\\u7684\\u591A\\u4E2A\\u7F51\\u9875\\uFF0C\\u4F46\\u4E0D\\u80FD\\u8DE8\\u57DF\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E0D\\u540C\\u6D4F\\u89C8\\u5668\\u5BF9 cookie \\u7684\\u5B9E\\u73B0\\u4E5F\\u4E0D\\u4E00\\u6837\\u3002\\u5373\\u4FDD\\u5B58\\u5728\\u4E00\\u4E2A\\u6D4F\\u89C8\\u5668\\u4E2D\\u7684 cookie \\u5230\\u53E6\\u5916\\u4E00\\u4E2A\\u6D4F\\u89C8\\u5668\\u662F \\u4E0D\\u80FD\\u83B7\\u53D6\\u7684\\u3002\"}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"cookie \\u5B58\\u50A8\\u5728\\u5BA2\\u6237\\u7AEF\\uFF1A\"}),\" cookie \\u662F\\u670D\\u52A1\\u5668\\u53D1\\u9001\\u5230\\u7528\\u6237\\u6D4F\\u89C8\\u5668\\u5E76\\u4FDD\\u5B58\\u5728\\u672C\\u5730\\u7684\\u4E00\\u5C0F\\u5757\\u6570\\u636E\\uFF0C\\u5B83\\u4F1A\\u5728\\u6D4F\\u89C8\\u5668\\u4E0B\\u6B21\\u5411\\u540C\\u4E00\\u670D\\u52A1\\u5668\\u518D\\u53D1\\u8D77\\u8BF7\\u6C42\\u65F6\\u88AB\\u643A\\u5E26\\u5E76\\u53D1\\u9001\\u5230\\u670D\\u52A1\\u5668\\u4E0A\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"cookie \\u662F\\u4E0D\\u53EF\\u8DE8\\u57DF\\u7684\\uFF1A\"}),\" \\u6BCF\\u4E2A cookie \\u90FD\\u4F1A\\u7ED1\\u5B9A\\u5355\\u4E00\\u7684\\u57DF\\u540D\\uFF0C\\u65E0\\u6CD5\\u5728\\u522B\\u7684\\u57DF\\u540D\\u4E0B\\u83B7\\u53D6\\u4F7F\\u7528\\uFF0C\",(0,e.jsx)(n.strong,{children:\"\\u4E00\\u7EA7\\u57DF\\u540D\\u548C\\u4E8C\\u7EA7\\u57DF\\u540D\\u4E4B\\u95F4\\u662F\\u5141\\u8BB8\\u5171\\u4EAB\\u4F7F\\u7528\\u7684\"}),\"\\uFF08\",(0,e.jsx)(n.strong,{children:\"\\u9760\\u7684\\u662F domain\\uFF09\"}),\"\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"cookie \\u80FD\\u505A\\u4EC0\\u4E48\\uFF1F\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"HTTP \\u662F\\u65E0\\u72B6\\u6001\\u7684\\u534F\\u8BAE\\uFF08\\u5BF9\\u4E8E\\u4E8B\\u52A1\\u5904\\u7406\\u6CA1\\u6709\\u8BB0\\u5FC6\\u80FD\\u529B\\uFF0C\\u6BCF\\u6B21\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u7AEF\\u4F1A\\u8BDD\\u5B8C\\u6210\\u65F6\\uFF0C\\u670D\\u52A1\\u7AEF\\u4E0D\\u4F1A\\u4FDD\\u5B58\\u4EFB\\u4F55\\u4F1A\\u8BDD\\u4FE1\\u606F\"}),\"\\uFF09\\uFF1A\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u90FD\\u662F\\u5B8C\\u5168\\u72EC\\u7ACB\\u7684\\uFF0C\\u670D\\u52A1\\u7AEF\\u65E0\\u6CD5\\u786E\\u8BA4\\u5F53\\u524D\\u8BBF\\u95EE\\u8005\\u7684\\u8EAB\\u4EFD\\u4FE1\\u606F\\uFF0C\\u65E0\\u6CD5\\u5206\\u8FA8\\u4E0A\\u4E00\\u6B21\\u7684\\u8BF7\\u6C42\\u53D1\\u9001\\u8005\\u548C\\u8FD9\\u4E00\\u6B21\\u7684\\u53D1\\u9001\\u8005\\u662F\\u4E0D\\u662F\\u540C\\u4E00\\u4E2A\\u4EBA\\u3002\\u6240\\u4EE5\\u670D\\u52A1\\u5668\\u4E0E\\u6D4F\\u89C8\\u5668\\u4E3A\\u4E86\\u8FDB\\u884C\\u4F1A\\u8BDD\\u8DDF\\u8E2A\\uFF08\\u77E5\\u9053\\u662F\\u8C01\\u5728\\u8BBF\\u95EE\\u6211\\uFF09\\uFF0C\\u5C31\\u5FC5\\u987B\\u4E3B\\u52A8\\u7684\\u53BB\\u7EF4\\u62A4\\u4E00\\u4E2A\\u72B6\\u6001\\uFF0C\\u8FD9\\u4E2A\\u72B6\\u6001\\u7528\\u4E8E\\u544A\\u77E5\\u670D\\u52A1\\u7AEF\\u524D\\u540E\\u4E24\\u4E2A\\u8BF7\\u6C42\\u662F\\u5426\\u6765\\u81EA\\u540C\\u4E00\\u6D4F\\u89C8\\u5668\\u3002\\u800C\\u8FD9\\u4E2A\\u72B6\\u6001\\u9700\\u8981\\u901A\\u8FC7 cookie \\u6216\\u8005 session \\u53BB\\u5B9E\\u73B0\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4FDD\\u5B58\\u7528\\u6237\\u767B\\u5F55\\u4FE1\\u606F\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"PS:\\u867D\\u7136 \\u6D4F\\u89C8\\u5668\\u5C06\\u4FE1\\u606F\\u4FDD\\u5B58\\u5728 cookie \\u4E2D\\u662F\\u52A0\\u5BC6\\u4E86\\uFF0C\\u4F46\\u662F\\u53EF\\u80FD\\u8FD8\\u662F\\u4F1A\\u9020\\u6210\\u4E0D\\u5B89\\u5168\\u7684\\u4FE1\\u606F\\u6CC4\\u9732\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u9875\\u9762\\u4E4B\\u95F4\\u7684\\u4F20\\u503C\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u5B9E\\u9645\\u5F00\\u53D1\\u4E2D\\uFF0C\\u6211\\u4EEC\\u5F80\\u5F80\\u4F1A\\u901A\\u8FC7\\u4E00\\u4E2A\\u9875\\u9762\\u8DF3\\u8F6C\\u5230\\u53E6\\u5916\\u4E00\\u4E2A\\u9875\\u9762\\u3002\\u540E\\u7AEF\\u670D\\u52A1\\u5668\\u6211\\u4EEC\\u53EF\\u4EE5\\u901A\\u8FC7\\u6570\\u636E\\u5E93\\uFF0Csession \\u7B49\\u6765\\u4F20\\u9012\\u9875\\u9762\\u6240\\u9700\\u8981\\u7684\\u503C\\u3002\\u4F46\\u662F\\u5728\\u6D4F\\u89C8\\u5668\\u7AEF\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5C06\\u6570\\u636E\\u4FDD\\u5B58\\u5728 cookie \\u4E2D\\uFF0C\\u7136\\u540E\\u5728\\u53E6\\u5916\\u9875\\u9762\\u518D\\u53BB\\u83B7\\u53D6 cookie \\u4E2D\\u7684\\u6570\\u636E\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"PS\\uFF1A\\u8FD9\\u91CC\\u8981\\u6CE8\\u610F cookie \\u7684\\u65F6\\u6548\\u6027\\uFF0C\\u4E0D\\u7136\\u4F1A\\u9020\\u6210\\u83B7\\u53D6 cookie \\u4E2D\\u6570\\u636E\\u7684\\u6DF7\\u4E71\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u600E\\u4E48\\u4F7F\\u7528 cookie\\uFF1F\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`document.cookie = \"name=value;expires=evalue; path=pvalue; domain=dvalue; secure;\\u201D\n`,children:(0,e.jsx)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"document.cookie \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"name=value;expires=evalue; path=pvalue; domain=dvalue; secure;'}),(0,e.jsx)(n.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"\\u201D\"})]})})})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Tips\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"cookie\\u53EF\\u80FD\\u88AB\\u7981\\u7528\\u3002\\u5F53\\u7528\\u6237\\u975E\\u5E38\\u6CE8\\u91CD\\u4E2A\\u4EBA\\u9690\\u79C1\\u4FDD\\u62A4\\u65F6\\uFF0C\\u4ED6\\u5F88\\u53EF\\u80FD\\u7981\\u7528\\u6D4F\\u89C8\\u5668\\u7684cookie\\u529F\\u80FD\\uFF1B\"}),`\n`,(0,e.jsx)(n.li,{children:\"cookie\\u662F\\u4E0E\\u6D4F\\u89C8\\u5668\\u76F8\\u5173\\u7684\\u3002\\u8FD9\\u610F\\u5473\\u7740\\u5373\\u4F7F\\u8BBF\\u95EE\\u7684\\u662F\\u540C\\u4E00\\u4E2A\\u9875\\u9762\\uFF0C\\u4E0D\\u540C\\u6D4F\\u89C8\\u5668\\u4E4B\\u95F4\\u6240\\u4FDD\\u5B58\\u7684cookie\\u4E5F\\u662F\\u4E0D\\u80FD\\u4E92\\u76F8\\u8BBF\\u95EE\\u7684\\uFF1B\"}),`\n`,(0,e.jsx)(n.li,{children:\"cookie\\u53EF\\u80FD\\u88AB\\u5220\\u9664\\u3002\\u56E0\\u4E3A\\u6BCF\\u4E2Acookie\\u90FD\\u662F\\u786C\\u76D8\\u4E0A\\u7684\\u4E00\\u4E2A\\u6587\\u4EF6\\uFF0C\\u56E0\\u6B64\\u5F88\\u6709\\u53EF\\u80FD\\u88AB\\u7528\\u6237\\u5220\\u9664\\uFF1B\"}),`\n`,(0,e.jsx)(n.li,{children:\"cookie\\u5B89\\u5168\\u6027\\u4E0D\\u591F\\u9AD8\\u3002\\u6240\\u6709\\u7684cookie\\u90FD\\u662F\\u4EE5\\u7EAF\\u6587\\u672C\\u7684\\u5F62\\u5F0F\\u8BB0\\u5F55\\u4E8E\\u6587\\u4EF6\\u4E2D\\uFF0C\\u56E0\\u6B64\\u5982\\u679C\\u8981\\u4FDD\\u5B58\\u7528\\u6237\\u540D\\u5BC6\\u7801\\u7B49\\u4FE1\\u606F\\u65F6\\uFF0C\\u6700\\u597D\\u4E8B\\u5148\\u7ECF\\u8FC7\\u52A0\\u5BC6\\u5904\\u7406\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"cookie \\u5728\\u4FDD\\u5B58\\u65F6\\uFF0C\\u53EA\\u8981\\u540E\\u9762\\u4FDD\\u5B58\\u7684 name \\u76F8\\u540C\\uFF0C\\u90A3\\u4E48\\u5C31\\u4F1A\\u8986\\u76D6\\u524D\\u9762\\u7684 cookie\\uFF0C\\u6CE8\\u610F\\u662F\\u5B8C\\u5168\\u8986\\u76D6\\uFF0C\\u5305\\u62EC\\u5931\\u6548\\u65F6\\u95F4\\uFF0Cpat\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"session\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#session\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Session\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"session \\u662F\\u53E6\\u4E00\\u79CD\\u8BB0\\u5F55\\u670D\\u52A1\\u5668\\u548C\\u5BA2\\u6237\\u7AEF\\u4F1A\\u8BDD\\u72B6\\u6001\\u7684\\u673A\\u5236\"}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"session \\u662F\\u57FA\\u4E8E cookie \\u5B9E\\u73B0\\u7684\\uFF0Csession \\u5B58\\u50A8\\u5728\\u670D\\u52A1\\u5668\\u7AEF\"}),\"\\u3002SessionID \\u4F1A\\u88AB\\u5B58\\u50A8\\u5230\\u5BA2\\u6237\\u7AEF\\u7684cookie \\u4E2D\\uFF0CSessionID \\u662F\\u8FDE\\u63A5 Cookie \\u548C Session \\u7684\\u4E00\\u9053\\u6865\\u6881\\uFF0C\\u5927\\u90E8\\u5206\\u7CFB\\u7EDF\\u4E5F\\u662F\\u6839\\u636E\\u6B64\\u539F\\u7406\\u6765\\u9A8C\\u8BC1\\u7528\\u6237\\u767B\\u5F55\\u72B6\\u6001\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"token\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#token\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Token\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u8BBF\\u95EE\\u8D44\\u6E90\\u63A5\\u53E3\\uFF08API\\uFF09\\u65F6\\u6240\\u9700\\u8981\\u7684\\u8D44\\u6E90\\u51ED\\u8BC1\"}),\", \",(0,e.jsx)(n.strong,{children:\"\\u670D\\u52A1\\u7AEF\\u65E0\\u72B6\\u6001\\u5316\\u3001\\u53EF\\u6269\\u5C55\\u6027\\u597D\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u7B80\\u5355 token \\u7684\\u7EC4\\u6210\\uFF1A\"}),\"\\xA0uid(\\u7528\\u6237\\u552F\\u4E00\\u7684\\u8EAB\\u4EFD\\u6807\\u8BC6)\\u3001time(\\u5F53\\u524D\\u65F6\\u95F4\\u7684\\u65F6\\u95F4\\u6233)\\u3001sign\\uFF08\\u7B7E\\u540D\\uFF0Ctoken \\u7684\\u524D\\u51E0\\u4F4D\\u4EE5\\u54C8\\u5E0C\\u7B97\\u6CD5\\u538B\\u7F29\\u6210\\u7684\\u4E00\\u5B9A\\u957F\\u5EA6\\u7684\\u5341\\u516D\\u8FDB\\u5236\\u5B57\\u7B26\\u4E32\\uFF09\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u57FA\\u4E8E token \\u7684\\u7528\\u6237\\u8BA4\\u8BC1\\u662F\\u4E00\\u79CD\",(0,e.jsx)(n.strong,{children:\"\\u670D\\u52A1\\u7AEF\\u65E0\\u72B6\\u6001\\u7684\\u8BA4\\u8BC1\\u65B9\\u5F0F\"}),\"\\uFF0C\\u670D\\u52A1\\u7AEF\\u4E0D\\u7528\\u5B58\\u653E token \\u6570\\u636E\\u3002\",(0,e.jsx)(n.strong,{children:\"\\u7528\\u89E3\\u6790 token \\u7684\\u8BA1\\u7B97\\u65F6\\u95F4\\u6362\\u53D6 session \\u7684\\u5B58\\u50A8\\u7A7A\\u95F4\"}),\"\\uFF0C\\u4ECE\\u800C\\u51CF\\u8F7B\\u670D\\u52A1\\u5668\\u7684\\u538B\\u529B\\uFF0C\\u51CF\\u5C11\\u9891\\u7E41\\u7684\\u67E5\\u8BE2\\u6570\\u636E\\u5E93\"]}),`\n`,(0,e.jsx)(n.li,{children:\"token \\u5B8C\\u5168\\u7531\\u5E94\\u7528\\u7BA1\\u7406\\uFF0C\\u6240\\u4EE5\\u5B83\\u53EF\\u4EE5\\u907F\\u5F00\\u540C\\u6E90\\u7B56\\u7565\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"cookie-vs-session\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#cookie-vs-session\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Cookie VS. Session\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5B89\\u5168\\u6027\\uFF1A Session \\u6BD4 Cookie \\u5B89\\u5168\\uFF0CSession \\u662F\\u5B58\\u50A8\\u5728\\u670D\\u52A1\\u5668\\u7AEF\\u7684\\uFF0CCookie \\u662F\\u5B58\\u50A8\\u5728\\u5BA2\\u6237\\u7AEF\\u7684\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5B58\\u53D6\\u503C\\u7684\\u7C7B\\u578B\\u4E0D\\u540C\\uFF1ACookie \\u53EA\\u652F\\u6301\\u5B58\\u5B57\\u7B26\\u4E32\\u6570\\u636E\\uFF0C\\u60F3\\u8981\\u8BBE\\u7F6E\\u5176\\u4ED6\\u7C7B\\u578B\\u7684\\u6570\\u636E\\uFF0C\\u9700\\u8981\\u5C06\\u5176\\u8F6C\\u6362\\u6210\\u5B57\\u7B26\\u4E32\\uFF0CSession \\u53EF\\u4EE5\\u5B58\\u4EFB\\u610F\\u6570\\u636E\\u7C7B\\u578B\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6709\\u6548\\u671F\\u4E0D\\u540C\\uFF1A Cookie \\u53EF\\u8BBE\\u7F6E\\u4E3A\\u957F\\u65F6\\u95F4\\u4FDD\\u6301\\uFF0C\\u6BD4\\u5982\\u6211\\u4EEC\\u7ECF\\u5E38\\u4F7F\\u7528\\u7684\\u9ED8\\u8BA4\\u767B\\u5F55\\u529F\\u80FD\\uFF0CSession \\u4E00\\u822C\\u5931\\u6548\\u65F6\\u95F4\\u8F83\\u77ED\\uFF0C\\u5BA2\\u6237\\u7AEF\\u5173\\u95ED\\uFF08\\u9ED8\\u8BA4\\u60C5\\u51B5\\u4E0B\\uFF09\\u6216\\u8005 Session \\u8D85\\u65F6\\u90FD\\u4F1A\\u5931\\u6548\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5B58\\u50A8\\u5927\\u5C0F\\u4E0D\\u540C\\uFF1A \\u5355\\u4E2A Cookie \\u4FDD\\u5B58\\u7684\\u6570\\u636E\\u4E0D\\u80FD\\u8D85\\u8FC7 4K\\uFF0CSession \\u53EF\\u5B58\\u50A8\\u6570\\u636E\\u8FDC\\u9AD8\\u4E8E Cookie\\uFF0C\\u4F46\\u662F\\u5F53\\u8BBF\\u95EE\\u91CF\\u8FC7\\u591A\\uFF0C\\u4F1A\\u5360\\u7528\\u8FC7\\u591A\\u7684\\u670D\\u52A1\\u5668\\u8D44\\u6E90\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"token-vs--session\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#token-vs--session\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Token VS.  Session\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u5B89\\u5168\\u6027:  Session\\u662F\\u4FDD\\u5B58\\u5728\\u670D\\u52A1\\u7AEF\\u7684\\uFF0C\\u800CJWT\\u662F\\u4FDD\\u5B58\\u5728\\u5BA2\\u6237\\u7AEF\\u7684\\u3002 Session \\u548C Token \\u5E76\\u4E0D\\u77DB\\u76FE\\uFF0C\\u4F5C\\u4E3A\\u8EAB\\u4EFD\\u8BA4\\u8BC1 Token \\u5B89\\u5168\\u6027\\u6BD4 Session \\u597D\\uFF0C\\u56E0\\u4E3A\\u6BCF\\u4E00\\u4E2A\\u8BF7\\u6C42\\u90FD\\u6709\\u7B7E\\u540D\\u8FD8\\u80FD\\u9632\\u6B62\\u76D1\\u542C\\u4EE5\\u53CA\\u91CD\\u653E\\u653B\\u51FB\\uFF0C\\u800C Session \\u5C31\\u5FC5\\u987B\\u4F9D\\u8D56\\u94FE\\u8DEF\\u5C42\\u6765\\u4FDD\\u969C\\u901A\\u8BAF\\u5B89\\u5168\\u4E86\\u3002\",(0,e.jsx)(n.em,{children:\"\\u5982\\u679C\\u4F60\\u9700\\u8981\\u5B9E\\u73B0\\u6709\\u72B6\\u6001\\u7684\\u4F1A\\u8BDD\\uFF0C\\u4ECD\\u7136\\u53EF\\u4EE5\\u589E\\u52A0 Session \\u6765\\u5728\\u670D\\u52A1\\u5668\\u7AEF\\u4FDD\\u5B58\\u4E00\\u4E9B\\u72B6\\u6001\\u3002\"})]}),`\n`,(0,e.jsx)(n.li,{children:\"Session \\u662F\\u4E00\\u79CD\\u8BB0\\u5F55\\u670D\\u52A1\\u5668\\u548C\\u5BA2\\u6237\\u7AEF\\u4F1A\\u8BDD\\u72B6\\u6001\\u7684\\u673A\\u5236\\uFF0C\\u4F7F\\u670D\\u52A1\\u7AEF\\u6709\\u72B6\\u6001\\u5316\\uFF0C\\u53EF\\u4EE5\\u8BB0\\u5F55\\u4F1A\\u8BDD\\u4FE1\\u606F\\u3002\\u800C Token \\u662F\\u4EE4\\u724C\\uFF0C\\u8BBF\\u95EE\\u8D44\\u6E90\\u63A5\\u53E3\\uFF08API\\uFF09\\u65F6\\u6240\\u9700\\u8981\\u7684\\u8D44\\u6E90\\u51ED\\u8BC1\\u3002Token \\u4F7F\\u670D\\u52A1\\u7AEF\\u65E0\\u72B6\\u6001\\u5316\\uFF0C\\u4E0D\\u4F1A\\u5B58\\u50A8\\u4F1A\\u8BDD\\u4FE1\\u606F\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6240\\u8C13 Session \\u8BA4\\u8BC1\\u53EA\\u662F\\u7B80\\u5355\\u7684\\u628A User \\u4FE1\\u606F\\u5B58\\u50A8\\u5230 Session \\u91CC\\uFF0C\\u56E0\\u4E3A SessionID \\u7684\\u4E0D\\u53EF\\u9884\\u6D4B\\u6027\\uFF0C\\u6682\\u4E14\\u8BA4\\u4E3A\\u662F\\u5B89\\u5168\\u7684\\u3002\\u800C Token \\uFF0C\\u5982\\u679C\\u6307\\u7684\\u662F OAuth Token \\u6216\\u7C7B\\u4F3C\\u7684\\u673A\\u5236\\u7684\\u8BDD\\uFF0C\\u63D0\\u4F9B\\u7684\\u662F \\u8BA4\\u8BC1 \\u548C \\u6388\\u6743 \\uFF0C\\u8BA4\\u8BC1\\u662F\\u9488\\u5BF9\\u7528\\u6237\\uFF0C\\u6388\\u6743\\u662F\\u9488\\u5BF9 App \\u3002\\u5176\\u76EE\\u7684\\u662F\\u8BA9\\u67D0 App \\u6709\\u6743\\u5229\\u8BBF\\u95EE\\u67D0\\u7528\\u6237\\u7684\\u4FE1\\u606F\\u3002\\u8FD9\\u91CC\\u7684 Token \\u662F\\u552F\\u4E00\\u7684\\u3002\\u4E0D\\u53EF\\u4EE5\\u8F6C\\u79FB\\u5230\\u5176\\u5B83 App\\u4E0A\\uFF0C\\u4E5F\\u4E0D\\u53EF\\u4EE5\\u8F6C\\u5230\\u5176\\u5B83\\u7528\\u6237\\u4E0A\\u3002Session \\u53EA\\u63D0\\u4F9B\\u4E00\\u79CD\\u7B80\\u5355\\u7684\\u8BA4\\u8BC1\\uFF0C\\u5373\\u53EA\\u8981\\u6709\\u6B64 SessionID \\uFF0C\\u5373\\u8BA4\\u4E3A\\u6709\\u6B64 User \\u7684\\u5168\\u90E8\\u6743\\u5229\\u3002\\u662F\\u9700\\u8981\\u4E25\\u683C\\u4FDD\\u5BC6\\u7684\\uFF0C\\u8FD9\\u4E2A\\u6570\\u636E\\u5E94\\u8BE5\\u53EA\\u4FDD\\u5B58\\u5728\\u7AD9\\u65B9\\uFF0C\\u4E0D\\u5E94\\u8BE5\\u5171\\u4EAB\\u7ED9\\u5176\\u5B83\\u7F51\\u7AD9\\u6216\\u8005\\u7B2C\\u4E09\\u65B9 App\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6240\\u4EE5\\u7B80\\u5355\\u6765\\u8BF4\\uFF1A\\u5982\\u679C\\u4F60\\u7684\\u7528\\u6237\\u6570\\u636E\\u53EF\\u80FD\\u9700\\u8981\\u548C\\u7B2C\\u4E09\\u65B9\\u5171\\u4EAB\\uFF0C\\u6216\\u8005\\u5141\\u8BB8\\u7B2C\\u4E09\\u65B9\\u8C03\\u7528 API \\u63A5\\u53E3\\uFF0C\\u7528 Token \\u3002\\u5982\\u679C\\u6C38\\u8FDC\\u53EA\\u662F\\u81EA\\u5DF1\\u7684\\u7F51\\u7AD9\\uFF0C\\u81EA\\u5DF1\\u7684 App\\uFF0C\\u7528\\u4EC0\\u4E48\\u5C31\\u65E0\\u6240\\u8C13\\u4E86\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"cookie-vs-sessionstorage-vs-localstorage\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#cookie-vs-sessionstorage-vs-localstorage\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"cookie VS. sessionStorage VS. localStorage\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u5171\\u540C\\u70B9\"}),\"\\uFF1A\\u90FD\\u662F\\u4FDD\\u5B58\\u5728\\u6D4F\\u89C8\\u5668\\u7AEF\\u3001\\u4E14\\u540C\\u6E90\\u7684\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u533A\\u522B\\uFF1A\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"cookie\\u6570\\u636E\\u59CB\\u7EC8\\u5728\\u540C\\u6E90\\u7684http\\u8BF7\\u6C42\\u4E2D\\u643A\\u5E26\\uFF08\\u5373\\u4F7F\\u4E0D\\u9700\\u8981\\uFF09\\uFF0C\\u5373cookie\\u5728\\u6D4F\\u89C8\\u5668\\u548C\\u670D\\u52A1\\u5668\\u95F4\\u6765\\u56DE\\u4F20\\u9012\\uFF0C\\u800CsessionStorage\\u548ClocalStorage\\u4E0D\\u4F1A\\u81EA\\u52A8\\u628A\\u6570\\u636E\\u53D1\\u9001\\u7ED9\\u670D\\u52A1\\u5668\\uFF0C\\u4EC5\\u5728\\u672C\\u5730\\u4FDD\\u5B58\\u3002cookie\\u6570\\u636E\\u8FD8\\u6709\\u8DEF\\u5F84\\uFF08path\\uFF09\\u7684\\u6982\\u5FF5\\uFF0C\\u53EF\\u4EE5\\u9650\\u5236cookie\\u53EA\\u5C5E\\u4E8E\\u67D0\\u4E2A\\u8DEF\\u5F84\\u4E0B\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5B58\\u50A8\\u5927\\u5C0F\\u9650\\u5236\\u4E5F\\u4E0D\\u540C\\uFF0Ccookie\\u6570\\u636E\\u4E0D\\u80FD\\u8D85\\u8FC74K\\uFF0C\\u540C\\u65F6\\u56E0\\u4E3A\\u6BCF\\u6B21http\\u8BF7\\u6C42\\u90FD\\u4F1A\\u643A\\u5E26cookie\\u3001\\u6240\\u4EE5cookie\\u53EA\\u9002\\u5408\\u4FDD\\u5B58\\u5F88\\u5C0F\\u7684\\u6570\\u636E\\uFF0C\\u5982\\u4F1A\\u8BDD\\u6807\\u8BC6\\u3002sessionStorage\\u548ClocalStorage\\u867D\\u7136\\u4E5F\\u6709\\u5B58\\u50A8\\u5927\\u5C0F\\u7684\\u9650\\u5236\\uFF0C\\u4F46\\u6BD4cookie\\u5927\\u5F97\\u591A\\uFF0C\\u53EF\\u4EE5\\u8FBE\\u52305M\\u6216\\u66F4\\u5927\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6570\\u636E\\u6709\\u6548\\u671F\\u4E0D\\u540C\\uFF0CsessionStorage\\uFF1A\\u4EC5\\u5728\\u5F53\\u524D\\u6D4F\\u89C8\\u5668\\u7A97\\u53E3\\u5173\\u95ED\\u4E4B\\u524D\\u6709\\u6548\\uFF1BlocalStorage\\uFF1A\\u59CB\\u7EC8\\u6709\\u6548\\uFF0C\\u7A97\\u53E3\\u6216\\u6D4F\\u89C8\\u5668\\u5173\\u95ED\\u4E5F\\u4E00\\u76F4\\u4FDD\\u5B58\\uFF0C\\u56E0\\u6B64\\u7528\\u4F5C\\u6301\\u4E45\\u6570\\u636E\\uFF1Bcookie\\uFF1A\\u53EA\\u5728\\u8BBE\\u7F6E\\u7684cookie\\u8FC7\\u671F\\u65F6\\u95F4\\u4E4B\\u524D\\u6709\\u6548\\uFF0C\\u5373\\u4F7F\\u7A97\\u53E3\\u5173\\u95ED\\u6216\\u6D4F\\u89C8\\u5668\\u5173\\u95ED\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4F5C\\u7528\\u57DF\\u4E0D\\u540C\\uFF0CsessionStorage\\u4E0D\\u5728\\u4E0D\\u540C\\u7684\\u6D4F\\u89C8\\u5668\\u7A97\\u53E3\\u4E2D\\u5171\\u4EAB\\uFF0C\\u5373\\u4F7F\\u662F\\u540C\\u4E00\\u4E2A\\u9875\\u9762\\uFF1Blocalstorage\\u5728\\u6240\\u6709\\u540C\\u6E90\\u7A97\\u53E3\\u4E2D\\u90FD\\u662F\\u5171\\u4EAB\\u7684\\uFF1Bcookie\\u4E5F\\u662F\\u5728\\u6240\\u6709\\u540C\\u6E90\\u7A97\\u53E3\\u4E2D\\u90FD\\u662F\\u5171\\u4EAB\\u7684\"}),`\n`,(0,e.jsx)(n.li,{children:\"web Storage\\u652F\\u6301\\u4E8B\\u4EF6\\u901A\\u77E5\\u673A\\u5236\\uFF0C\\u53EF\\u4EE5\\u5C06\\u6570\\u636E\\u66F4\\u65B0\\u7684\\u901A\\u77E5\\u53D1\\u9001\\u7ED9\\u76D1\\u542C\\u8005\"}),`\n`,(0,e.jsx)(n.li,{children:\"web Storage\\u7684api\\u63A5\\u53E3\\u4F7F\\u7528\\u66F4\\u65B9\\u4FBF\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\u5982\\u4F55\\u5199\\u4E00\\u4E2A\\u4F1A\\u8FC7\\u671F\\u7684localstorage\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5982\\u4F55\\u5199\\u4E00\\u4E2A\\u4F1A\\u8FC7\\u671F\\u7684localstorage\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5982\\u4F55\\u5199\\u4E00\\u4E2A\\u4F1A\\u8FC7\\u671F\\u7684localStorage\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E24\\u79CD\\u65B9\\u6848\\uFF1A\\u60F0\\u6027\\u5220\\u9664 \\u548C \\u5B9A\\u65F6\\u5220\\u9664\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\u60F0\\u6027\\u5220\\u9664\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u60F0\\u6027\\u5220\\u9664\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u60F0\\u6027\\u5220\\u9664\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u60F0\\u6027\\u5220\\u9664\\u662F\\u6307\\uFF0C\\u67D0\\u4E2A\\u952E\\u503C\\u8FC7\\u671F\\u540E\\uFF0C\\u8BE5\\u952E\\u503C\\u4E0D\\u4F1A\\u88AB\\u9A6C\\u4E0A\\u5220\\u9664\\uFF0C\\u800C\\u662F\\u7B49\\u5230\\u4E0B\\u6B21\\u88AB\\u4F7F\\u7528\\u7684\\u65F6\\u5019\\uFF0C\\u624D\\u4F1A\\u88AB\\u68C0\\u67E5\\u5230\\u8FC7\\u671F\\uFF0C\\u6B64\\u65F6\\u624D\\u80FD\\u5F97\\u5230\\u5220\\u9664\\u3002\\u6211\\u4EEC\\u5148\\u6765\\u7B80\\u5355\\u5B9E\\u73B0\\u4E00\\u4E0B\\uFF1A\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`var lsc = (function (self) {\n    var prefix = 'one_more_lsc_'\n    /**\n     * \\u589E\\u52A0\\u4E00\\u4E2A\\u952E\\u503C\\u5BF9\\u6570\\u636E\n     * @param key \\u952E\n     * @param val \\u503C\n     * @param expires \\u8FC7\\u671F\\u65F6\\u95F4\\uFF0C\\u5355\\u4F4D\\u4E3A\\u79D2\n     */\n    self.set = function (key, val, expires) {\n        key = prefix + key;\n        val = JSON.stringify({'val': val, 'expires': new Date().getTime() + expires * 1000});\n        localStorage.setItem(key, val);\n    };\n    /**\n     * \\u8BFB\\u53D6\\u5BF9\\u5E94\\u952E\\u7684\\u503C\\u6570\\u636E\n     * @param key \\u952E\n     * @returns {null|*} \\u5BF9\\u5E94\\u952E\\u7684\\u503C\n     */\n    self.get = function (key) {\n        key = prefix + key;\n        var val = localStorage.getItem(key);\n        if (!val) {\n            return null;\n        }\n        val = JSON.parse(val);\n        if (val.expires < new Date().getTime()) {\n            localStorage.removeItem(key);\n            return null;\n        }\n        return val.val;\n    };\n    return self;\n}(lsc || {}));\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"var lsc = (function (self) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    var prefix = 'one_more_lsc_'\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    /**\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     * \\u589E\\u52A0\\u4E00\\u4E2A\\u952E\\u503C\\u5BF9\\u6570\\u636E\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     * @param key \\u952E\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     * @param val \\u503C\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     * @param expires \\u8FC7\\u671F\\u65F6\\u95F4\\uFF0C\\u5355\\u4F4D\\u4E3A\\u79D2\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     */\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    self.set = function (key, val, expires) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        key = prefix + key;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        val = JSON.stringify({'val': val, 'expires': new Date().getTime() + expires * 1000});\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        localStorage.setItem(key, val);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    /**\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     * \\u8BFB\\u53D6\\u5BF9\\u5E94\\u952E\\u7684\\u503C\\u6570\\u636E\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     * @param key \\u952E\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     * @returns {null|*} \\u5BF9\\u5E94\\u952E\\u7684\\u503C\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"     */\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    self.get = function (key) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        key = prefix + key;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        var val = localStorage.getItem(key);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        if (!val) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            return null;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        val = JSON.parse(val);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        if (val.expires < new Date().getTime()) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            localStorage.removeItem(key);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            return null;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        return val.val;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    return self;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}(lsc || {}));\"})})]})})})}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\u5B9A\\u65F6\\u5220\\u9664\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5B9A\\u65F6\\u5220\\u9664\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5B9A\\u65F6\\u5220\\u9664\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5B9A\\u65F6\\u5220\\u9664\\u662F\\u6307\\uFF0C\\u6BCF\\u9694\\u4E00\\u6BB5\\u65F6\\u95F4\\u6267\\u884C\\u4E00\\u6B21\\u5220\\u9664\\u64CD\\u4F5C\\uFF0C\\u5E76\\u901A\\u8FC7\\u9650\\u5236\\u5220\\u9664\\u64CD\\u4F5C\\u6267\\u884C\\u7684\\u6B21\\u6570\\u548C\\u9891\\u7387\\uFF0C\\u6765\\u51CF\\u5C11\\u5220\\u9664\\u64CD\\u4F5C\\u5BF9CPU\\u7684\\u957F\\u671F\\u5360\\u7528\\u3002\\u53E6\\u4E00\\u65B9\\u9762\\u5B9A\\u65F6\\u5220\\u9664\\u4E5F\\u6709\\u6548\\u7684\\u51CF\\u5C11\\u4E86\\u56E0\\u60F0\\u6027\\u5220\\u9664\\u5E26\\u6765\\u7684\\u5BF9localStorage\\u7A7A\\u95F4\\u7684\\u6D6A\\u8D39\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6BCF\\u9694\\u4E00\\u79D2\\u6267\\u884C\\u4E00\\u6B21\\u5B9A\\u65F6\\u5220\\u9664\\uFF0C\\u64CD\\u4F5C\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u968F\\u673A\\u6D4B\\u8BD520\\u4E2A\\u8BBE\\u7F6E\\u4E86\\u8FC7\\u671F\\u65F6\\u95F4\\u7684key\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5220\\u9664\\u6240\\u6709\\u53D1\\u73B0\\u7684\\u5DF2\\u8FC7\\u671F\\u7684key\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u82E5\\u5220\\u9664\\u7684key\\u8D85\\u8FC75\\u4E2A\\u5219\\u91CD\\u590D\\u6B65\\u9AA41\\uFF0C\\u76F4\\u81F3\\u91CD\\u590D500\\u6B21\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",raw:`var lsc = (function (self) {\n    var prefix = 'one_more_lsc_'\n    var list = [];\n    //\\u521D\\u59CB\\u5316list\n    self.init = function () {\n        var keys = Object.keys(localStorage);\n        var reg = new RegExp('^' + prefix);\n        var temp = [];\n        //\\u904D\\u5386\\u6240\\u6709localStorage\\u4E2D\\u7684\\u6240\\u6709key\n        for (var i = 0; i < keys.length; i++) {\n            //\\u627E\\u51FA\\u53EF\\u8FC7\\u671F\\u7F13\\u5B58\\u7684key\n            if (reg.test(keys[i])) {\n                temp.push(keys[i]);\n            }\n        }\n        list = temp;\n    };\n    self.init();\n    self.check = function () {\n        if (!list || list.length == 0) {\n            return;\n        }\n        var checkCount = 0;\n        while (checkCount < 500) {\n            var expireCount = 0;\n            //\\u968F\\u673A\\u6D4B\\u8BD520\\u4E2A\\u8BBE\\u7F6E\\u4E86\\u8FC7\\u671F\\u65F6\\u95F4\\u7684key\n            for (var i = 0; i < 20; i++) {\n                if (list.length == 0) {\n                    break;\n                }\n                var index = Math.floor(Math.random() * list.length);\n                var key = list[index];\n                var val = localStorage.getItem(list[index]);\n                //\\u4ECElist\\u4E2D\\u5220\\u9664\\u88AB\\u60F0\\u6027\\u5220\\u9664\\u7684key\n                if (!val) {\n                    list.splice(index, 1);\n                    expireCount++;\n                    continue;\n                }\n                val = JSON.parse(val);\n                //\\u5220\\u9664\\u6240\\u6709\\u53D1\\u73B0\\u7684\\u5DF2\\u8FC7\\u671F\\u7684key\n                if (val.expires < new Date().getTime()) {\n                    list.splice(index, 1);\n                    localStorage.removeItem(key);\n                    expireCount++;\n                }\n            }\n            //\\u82E5\\u5220\\u9664\\u7684key\\u4E0D\\u8D85\\u8FC75\\u4E2A\\u5219\\u8DF3\\u51FA\\u5FAA\\u73AF\n            if (expireCount <= 5 || list.length == 0) {\n                break;\n            }\n            checkCount++;\n        }\n    }\n    //\\u6BCF\\u9694\\u4E00\\u79D2\\u6267\\u884C\\u4E00\\u6B21\\u5B9A\\u65F6\\u5220\\u9664\n    window.setInterval(self.check, 1000);\n    return self;\n}(lsc || {}));\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"JavaScript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"var lsc = (function (self) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    var prefix = 'one_more_lsc_'\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    var list = [];\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    //\\u521D\\u59CB\\u5316list\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    self.init = function () {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        var keys = Object.keys(localStorage);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        var reg = new RegExp('^' + prefix);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        var temp = [];\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        //\\u904D\\u5386\\u6240\\u6709localStorage\\u4E2D\\u7684\\u6240\\u6709key\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        for (var i = 0; i < keys.length; i++) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            //\\u627E\\u51FA\\u53EF\\u8FC7\\u671F\\u7F13\\u5B58\\u7684key\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            if (reg.test(keys[i])) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                temp.push(keys[i]);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        list = temp;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    };\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    self.init();\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    self.check = function () {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        if (!list || list.length == 0) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            return;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        var checkCount = 0;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        while (checkCount < 500) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            var expireCount = 0;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            //\\u968F\\u673A\\u6D4B\\u8BD520\\u4E2A\\u8BBE\\u7F6E\\u4E86\\u8FC7\\u671F\\u65F6\\u95F4\\u7684key\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            for (var i = 0; i < 20; i++) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                if (list.length == 0) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                    break;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                var index = Math.floor(Math.random() * list.length);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                var key = list[index];\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                var val = localStorage.getItem(list[index]);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                //\\u4ECElist\\u4E2D\\u5220\\u9664\\u88AB\\u60F0\\u6027\\u5220\\u9664\\u7684key\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                if (!val) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                    list.splice(index, 1);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                    expireCount++;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                    continue;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                val = JSON.parse(val);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                //\\u5220\\u9664\\u6240\\u6709\\u53D1\\u73B0\\u7684\\u5DF2\\u8FC7\\u671F\\u7684key\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                if (val.expires < new Date().getTime()) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                    list.splice(index, 1);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                    localStorage.removeItem(key);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                    expireCount++;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            //\\u82E5\\u5220\\u9664\\u7684key\\u4E0D\\u8D85\\u8FC75\\u4E2A\\u5219\\u8DF3\\u51FA\\u5FAA\\u73AF\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            if (expireCount <= 5 || list.length == 0) {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"                break;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"            checkCount++;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    //\\u6BCF\\u9694\\u4E00\\u79D2\\u6267\\u884C\\u4E00\\u6B21\\u5B9A\\u65F6\\u5220\\u9664\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    window.setInterval(self.check, 1000);\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"    return self;\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{children:\"}(lsc || {}));\"})})]})})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"localstorage-\\u80FD\\u8DE8\\u57DF\\u5417\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#localstorage-\\u80FD\\u8DE8\\u57DF\\u5417\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"localStorage \\u80FD\\u8DE8\\u57DF\\u5417\\uFF1F\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E0D\\u80FD\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u901A\\u8FC7postMessage\\u6765\\u5B9E\\u73B0\\u8DE8\\u6E90\\u901A\\u4FE1\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u53EF\\u4EE5\\u5B9E\\u73B0\\u4E00\\u4E2A\\u516C\\u5171\\u7684iframe\\u90E8\\u7F72\\u5728\\u67D0\\u4E2A\\u57DF\\u540D\\u4E2D\\uFF0C\\u4F5C\\u4E3A\\u5171\\u4EAB\\u57DF\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5C06\\u9700\\u8981\\u5B9E\\u73B0localStorage\\u8DE8\\u57DF\\u901A\\u4FE1\\u7684\\u9875\\u9762\\u5D4C\\u5165\\u8FD9\\u4E2Aiframe\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u63A5\\u5165\\u5BF9\\u5E94\\u7684SDK\\u64CD\\u4F5C\\u5171\\u4EAB\\u57DF\\uFF0C\\u4ECE\\u800C\\u5B9E\\u73B0localStorage\\u7684\\u8DE8\\u57DF\\u5B58\\u50A8\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-09-Authentication-20250119022853.png\",alt:\"\",width:\"895\",height:\"506\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAGFBMVEX09PX7+/v////6+Pbs7OzB2fDc7v+Cv/v++CKGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJklEQVR4nB3GQQ4AIAzDsKQd8P8fI80nQ8+7qUgLBpUZQpIybtYHB+0AUw/9AtQAAAAASUVORK5CYII=\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"reference\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#reference\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://www.cnblogs.com/yuanrw/p/10089796.html\",title:\"\\u53D1\\u5E03\\u4E8E 2018-12-09 00:56\",children:\"\\u7528\\u6237\\u8BA4\\u8BC1\\uFF1A\\u57FA\\u4E8Ejwt\\u548Csession\\u7684\\u533A\\u522B\\u548C\\u4F18\\u7F3A\\u70B9\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://juejin.cn/post/6844904034181070861#heading-25\",children:\"\\u50BB\\u50BB\\u5206\\u4E0D\\u6E05\\u4E4B Cookie\\u3001Session\\u3001Token\\u3001JWT\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html\",children:\"\\u7406\\u89E3OAuth 2.0\"})})]})}function y(i={}){let{wrapper:n}=i.components||{};return n?(0,e.jsx)(n,Object.assign({},i,{children:(0,e.jsx)(h,i)})):h(i)}var C=y;return v(w);})();\n;return Component;"
    },
    "_id": "post/2024-12-09-Authentication.md",
    "_raw": {
      "sourceFilePath": "post/2024-12-09-Authentication.md",
      "sourceFileName": "2024-12-09-Authentication.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-12-09-Authentication"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-12-09-Authentication",
    "slugAsParams": "2024-12-09-Authentication"
  },
  {
    "title": "Node 使用 log4js 管理日志",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-12-09T00:00:00.000Z",
    "body": {
      "raw": "> 无论是在开发调试还是线上回溯，我们都会依赖日志 ​\n> 而将日志以文件形式存储也是非常必要的，以防止服务崩掉时实时日志无法查看 ​\n\n终端日志我们都是使用 `console.log` 直接打印到终端​\n然鹅在 `Node` 端，`console.log` 都是儿戏​，只有终端能显示，一旦部署服务器很难查看。因此，使用[log4js](https://github.com/log4js-node/log4js-node)来管理。\n\n\n## Implements\n安装依赖\n```bash\nnpm install log4js\n```\n\n\n日志等级，用于标记不同优先级，log4js 的日志分为九个等级，不同级别的日志在控制台中采用不同的颜色，比如 error 通常是红色的。各个级别的名字和权重如下：\n```js\n{\n  ALL: new Level(Number.MIN_VALUE, \"ALL\"),\n  TRACE: new Level(5000, \"TRACE\"),\n  DEBUG: new Level(10000, \"DEBUG\"),\n  INFO: new Level(20000, \"INFO\"),\n  WARN: new Level(30000, \"WARN\"),\n  ERROR: new Level(40000, \"ERROR\"),\n  FATAL: new Level(50000, \"FATAL\"),\n  MARK: new Level(9007199254740992, \"MARK\"), // 2^53\n  OFF: new Level(Number.MAX_VALUE, \"OFF\")\n}\n\n```\n\n\n\n日志分类，文件根据日志类型进行分类存储\n```js\nimport log4js from \"log4js\";\n// 实例化时，唯一可以传的一个参数category\nconst logger = log4js.getLogger(\"user\");\nlogger.level = \"all\";\n\nlogger.trace('this is trace');\nlogger.debug('this is debug');\nlogger.info('this is info');\nlogger.warn('this is warn');\nlogger.error('this is error');\nlogger.fatal('this is fatal');\nlogger.mark('this is mark');\n\n```\n\n\n日志输出，log4js默认 `console.log` 直接打印到终端​，如果需要存储到文件中就需要用到`appenders`。\n**Appenders** 将日志事件序列化为某种形式的输出。他们可以写入文件、发送电子邮件、通过网络发送数据。所有附加程序都有一个`type`来确定使用哪个附加程序。console和file都是一种appender，除此之外还有：\n- DateFile：日志输出到文件，日志文件可以安特定的日期模式滚动，例如今天输出到 default-2021-04-20.log，明天输出到 default-2021-04-21.log；\n- SMTP：输出日志到邮件；\n- Mailgun：通过 Mailgun API 输出日志到 Mailgun；\n- levelFilter 可以通过 level 过滤\n\n创建`config/log4js.json`\n```json\n{\n  \"appenders\": {\n    \"all\": {\n      \"type\": \"dateFile\",\n      \"filename\": \"./logs/all.log\",\n      \"pattern\": \"-yyyy-MM-dd\",\n      \"keepFileExt\": true,\n      \"alwaysIncludePattern\": true\n    },\n    \"out\": { \"type\": \"stdout\" },\n    \"errorFile\": {\n      \"type\": \"file\",\n      \"filename\": \"./logs/error.log\"\n    },\n    \"errors\": {\n      \"type\": \"logLevelFilter\",\n      \"level\": \"ERROR\",\n      \"appender\": \"errorFile\"\n    }\n  },\n  \"categories\": {\n    \"default\": { \"appenders\": [\"all\", \"out\", \"errors\"], \"level\": \"ALL\" }\n  }\n}\n```\n\n\n**params**\n- type : 'dateFile' 首先指定 appenders 的类型为 dateFile\n- filename : 用于指定日志落盘的文件地址 ( ps : “./logs/test.log” )\n- pattern : 用于指定日志切分的时间间隔\n\t- '.yyyy-MM' 精确到月\n\t- '.yyyy-MM-dd' 精确到天\n\t- '.yyyy-MM-dd-hh' 精确到小时\n- layout : 自定义日志输出的格式\n- compress : compress 为 true，记录当天日志时，会对以往的老日志进行压缩操作，压缩文件后缀为 .gz (默认 : false)\n- alwaysIncludePattern : 当为 true 时，log 文件名会包含之前设置的 pattern 信息 (默认为 false，但是强烈建议开启) 日志名例如 : test.log-2019-08-06\n- daysToKeep : 指定日志保留的天数 ( 默认为 0，始终保留 )\n- keepFileExt : 是否保持日志文件后缀名 ( 默认为 false，使用 pattern 的情况下，保持默认就好 )只有在 alwaysIncludePattern 为 false 时生效\n\n\n在`index.js`中配置\n```js\nimport log4js from \"log4js\";\nimport log4jsConfig from \"./config/log4js.json\";\nlog4js.configure(log4jsConfig);\n```\n\n\n执行上述代码后，log4js 会以天为分割，每天生成一个名字如 `all.-2024-12-09.log` 的日志文件。并筛选error级别存储进`error.log`。同时控制台也会打印。\n![](assets/2024-12-09-Node-log-storage-20241209123514.png)",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var g=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),B=(n,l)=>{for(var r in l)s(n,r,{get:l[r],enumerable:!0})},a=(n,l,r,c)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let o of p(l))!F.call(n,o)&&o!==r&&s(n,o,{get:()=>l[o],enumerable:!(c=E(l,o))||c.enumerable});return n};var u=(n,l,r)=>(r=n!=null?h(y(n)):{},a(l||!n||!n.__esModule?s(r,\"default\",{value:n,enumerable:!0}):r,n)),A=n=>a(s({},\"__esModule\",{value:!0}),n);var d=g((b,i)=>{i.exports=_jsx_runtime});var j={};B(j,{default:()=>C,frontmatter:()=>m});var e=u(d()),m={title:\"Node \\u4F7F\\u7528 log4js \\u7BA1\\u7406\\u65E5\\u5FD7\",subtitle:null,layout:\"post\",date:new Date(17337024e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function t(n){let l=Object.assign({blockquote:\"blockquote\",p:\"p\",code:\"code\",a:\"a\",h2:\"h2\",span:\"span\",div:\"div\",figure:\"figure\",pre:\"pre\",strong:\"strong\",ul:\"ul\",li:\"li\",img:\"img\"},n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(l.blockquote,{children:[`\n`,(0,e.jsx)(l.p,{children:`\\u65E0\\u8BBA\\u662F\\u5728\\u5F00\\u53D1\\u8C03\\u8BD5\\u8FD8\\u662F\\u7EBF\\u4E0A\\u56DE\\u6EAF\\uFF0C\\u6211\\u4EEC\\u90FD\\u4F1A\\u4F9D\\u8D56\\u65E5\\u5FD7 \\u200B\n\\u800C\\u5C06\\u65E5\\u5FD7\\u4EE5\\u6587\\u4EF6\\u5F62\\u5F0F\\u5B58\\u50A8\\u4E5F\\u662F\\u975E\\u5E38\\u5FC5\\u8981\\u7684\\uFF0C\\u4EE5\\u9632\\u6B62\\u670D\\u52A1\\u5D29\\u6389\\u65F6\\u5B9E\\u65F6\\u65E5\\u5FD7\\u65E0\\u6CD5\\u67E5\\u770B \\u200B`}),`\n`]}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u7EC8\\u7AEF\\u65E5\\u5FD7\\u6211\\u4EEC\\u90FD\\u662F\\u4F7F\\u7528\\xA0\",(0,e.jsx)(l.code,{children:\"console.log\"}),`\\xA0\\u76F4\\u63A5\\u6253\\u5370\\u5230\\u7EC8\\u7AEF\\u200B\n\\u7136\\u9E45\\u5728\\xA0`,(0,e.jsx)(l.code,{children:\"Node\"}),\"\\xA0\\u7AEF\\uFF0C\",(0,e.jsx)(l.code,{children:\"console.log\"}),\"\\xA0\\u90FD\\u662F\\u513F\\u620F\\u200B\\uFF0C\\u53EA\\u6709\\u7EC8\\u7AEF\\u80FD\\u663E\\u793A\\uFF0C\\u4E00\\u65E6\\u90E8\\u7F72\\u670D\\u52A1\\u5668\\u5F88\\u96BE\\u67E5\\u770B\\u3002\\u56E0\\u6B64\\uFF0C\\u4F7F\\u7528\",(0,e.jsx)(l.a,{href:\"https://github.com/log4js-node/log4js-node\",children:\"log4js\"}),\"\\u6765\\u7BA1\\u7406\\u3002\"]}),`\n`,(0,e.jsxs)(l.h2,{id:\"implements\",children:[(0,e.jsx)(l.a,{className:\"header-anchor\",href:\"#implements\",children:(0,e.jsx)(l.span,{className:\"icon icon-link\"})}),\"Implements\"]}),`\n`,(0,e.jsx)(l.p,{children:\"\\u5B89\\u88C5\\u4F9D\\u8D56\"}),`\n`,(0,e.jsx)(l.div,{className:\"remark-code-container\",children:(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`npm install log4js\n`,children:(0,e.jsx)(l.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" log4js\"})]})})})})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u65E5\\u5FD7\\u7B49\\u7EA7\\uFF0C\\u7528\\u4E8E\\u6807\\u8BB0\\u4E0D\\u540C\\u4F18\\u5148\\u7EA7\\uFF0Clog4js \\u7684\\u65E5\\u5FD7\\u5206\\u4E3A\\u4E5D\\u4E2A\\u7B49\\u7EA7\\uFF0C\\u4E0D\\u540C\\u7EA7\\u522B\\u7684\\u65E5\\u5FD7\\u5728\\u63A7\\u5236\\u53F0\\u4E2D\\u91C7\\u7528\\u4E0D\\u540C\\u7684\\u989C\\u8272\\uFF0C\\u6BD4\\u5982 error \\u901A\\u5E38\\u662F\\u7EA2\\u8272\\u7684\\u3002\\u5404\\u4E2A\\u7EA7\\u522B\\u7684\\u540D\\u5B57\\u548C\\u6743\\u91CD\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,e.jsx)(l.div,{className:\"remark-code-container\",children:(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`{\n  ALL: new Level(Number.MIN_VALUE, \"ALL\"),\n  TRACE: new Level(5000, \"TRACE\"),\n  DEBUG: new Level(10000, \"DEBUG\"),\n  INFO: new Level(20000, \"INFO\"),\n  WARN: new Level(30000, \"WARN\"),\n  ERROR: new Level(40000, \"ERROR\"),\n  FATAL: new Level(50000, \"FATAL\"),\n  MARK: new Level(9007199254740992, \"MARK\"), // 2^53\n  OFF: new Level(Number.MAX_VALUE, \"OFF\")\n}\n\n`,children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  ALL\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(Number.MIN_VALUE, \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"ALL\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  TRACE\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"5000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"TRACE\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  DEBUG\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"10000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"DEBUG\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  INFO\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"20000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"INFO\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  WARN\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"30000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"WARN\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  ERROR\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"40000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"ERROR\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  FATAL\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"50000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"FATAL\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  MARK\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"9007199254740992\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"MARK\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"), \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 2^53\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  OFF\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Level\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(Number.MAX_VALUE, \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"OFF\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u65E5\\u5FD7\\u5206\\u7C7B\\uFF0C\\u6587\\u4EF6\\u6839\\u636E\\u65E5\\u5FD7\\u7C7B\\u578B\\u8FDB\\u884C\\u5206\\u7C7B\\u5B58\\u50A8\"}),`\n`,(0,e.jsx)(l.div,{className:\"remark-code-container\",children:(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import log4js from \"log4js\";\n// \\u5B9E\\u4F8B\\u5316\\u65F6\\uFF0C\\u552F\\u4E00\\u53EF\\u4EE5\\u4F20\\u7684\\u4E00\\u4E2A\\u53C2\\u6570category\nconst logger = log4js.getLogger(\"user\");\nlogger.level = \"all\";\n\nlogger.trace('this is trace');\nlogger.debug('this is debug');\nlogger.info('this is info');\nlogger.warn('this is warn');\nlogger.error('this is error');\nlogger.fatal('this is fatal');\nlogger.mark('this is mark');\n\n`,children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" log4js \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"log4js\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5B9E\\u4F8B\\u5316\\u65F6\\uFF0C\\u552F\\u4E00\\u53EF\\u4EE5\\u4F20\\u7684\\u4E00\\u4E2A\\u53C2\\u6570category\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" logger\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" log4js.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getLogger\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"user\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"logger.level \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"all\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"logger.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"trace\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'this is trace'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"logger.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"debug\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'this is debug'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"logger.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"info\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'this is info'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"logger.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"warn\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'this is warn'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"logger.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'this is error'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"logger.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"fatal\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'this is fatal'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"logger.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"mark\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'this is mark'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u65E5\\u5FD7\\u8F93\\u51FA\\uFF0Clog4js\\u9ED8\\u8BA4\\xA0\",(0,e.jsx)(l.code,{children:\"console.log\"}),\"\\xA0\\u76F4\\u63A5\\u6253\\u5370\\u5230\\u7EC8\\u7AEF\\u200B\\uFF0C\\u5982\\u679C\\u9700\\u8981\\u5B58\\u50A8\\u5230\\u6587\\u4EF6\\u4E2D\\u5C31\\u9700\\u8981\\u7528\\u5230\",(0,e.jsx)(l.code,{children:\"appenders\"}),`\\u3002\n`,(0,e.jsx)(l.strong,{children:\"Appenders\"}),\" \\u5C06\\u65E5\\u5FD7\\u4E8B\\u4EF6\\u5E8F\\u5217\\u5316\\u4E3A\\u67D0\\u79CD\\u5F62\\u5F0F\\u7684\\u8F93\\u51FA\\u3002\\u4ED6\\u4EEC\\u53EF\\u4EE5\\u5199\\u5165\\u6587\\u4EF6\\u3001\\u53D1\\u9001\\u7535\\u5B50\\u90AE\\u4EF6\\u3001\\u901A\\u8FC7\\u7F51\\u7EDC\\u53D1\\u9001\\u6570\\u636E\\u3002\\u6240\\u6709\\u9644\\u52A0\\u7A0B\\u5E8F\\u90FD\\u6709\\u4E00\\u4E2A\",(0,e.jsx)(l.code,{children:\"type\"}),\"\\u6765\\u786E\\u5B9A\\u4F7F\\u7528\\u54EA\\u4E2A\\u9644\\u52A0\\u7A0B\\u5E8F\\u3002console\\u548Cfile\\u90FD\\u662F\\u4E00\\u79CDappender\\uFF0C\\u9664\\u6B64\\u4E4B\\u5916\\u8FD8\\u6709\\uFF1A\"]}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsx)(l.li,{children:\"DateFile\\uFF1A\\u65E5\\u5FD7\\u8F93\\u51FA\\u5230\\u6587\\u4EF6\\uFF0C\\u65E5\\u5FD7\\u6587\\u4EF6\\u53EF\\u4EE5\\u5B89\\u7279\\u5B9A\\u7684\\u65E5\\u671F\\u6A21\\u5F0F\\u6EDA\\u52A8\\uFF0C\\u4F8B\\u5982\\u4ECA\\u5929\\u8F93\\u51FA\\u5230 default-2021-04-20.log\\uFF0C\\u660E\\u5929\\u8F93\\u51FA\\u5230 default-2021-04-21.log\\uFF1B\"}),`\n`,(0,e.jsx)(l.li,{children:\"SMTP\\uFF1A\\u8F93\\u51FA\\u65E5\\u5FD7\\u5230\\u90AE\\u4EF6\\uFF1B\"}),`\n`,(0,e.jsx)(l.li,{children:\"Mailgun\\uFF1A\\u901A\\u8FC7 Mailgun API \\u8F93\\u51FA\\u65E5\\u5FD7\\u5230 Mailgun\\uFF1B\"}),`\n`,(0,e.jsx)(l.li,{children:\"levelFilter \\u53EF\\u4EE5\\u901A\\u8FC7 level \\u8FC7\\u6EE4\"}),`\n`]}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u521B\\u5EFA\",(0,e.jsx)(l.code,{children:\"config/log4js.json\"})]}),`\n`,(0,e.jsx)(l.div,{className:\"remark-code-container\",children:(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"appenders\": {\n    \"all\": {\n      \"type\": \"dateFile\",\n      \"filename\": \"./logs/all.log\",\n      \"pattern\": \"-yyyy-MM-dd\",\n      \"keepFileExt\": true,\n      \"alwaysIncludePattern\": true\n    },\n    \"out\": { \"type\": \"stdout\" },\n    \"errorFile\": {\n      \"type\": \"file\",\n      \"filename\": \"./logs/error.log\"\n    },\n    \"errors\": {\n      \"type\": \"logLevelFilter\",\n      \"level\": \"ERROR\",\n      \"appender\": \"errorFile\"\n    }\n  },\n  \"categories\": {\n    \"default\": { \"appenders\": [\"all\", \"out\", \"errors\"], \"level\": \"ALL\" }\n  }\n}\n`,children:(0,e.jsxs)(l.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'  \"appenders\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'    \"all\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"type\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"dateFile\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"filename\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"./logs/all.log\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"pattern\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"-yyyy-MM-dd\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"keepFileExt\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"alwaysIncludePattern\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'    \"out\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": { \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'\"type\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"stdout\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'    \"errorFile\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"type\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"file\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"filename\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"./logs/error.log\"'})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'    \"errors\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"type\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"logLevelFilter\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"level\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"ERROR\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'      \"appender\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"errorFile\"'})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'  \"categories\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'    \"default\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": { \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'\"appenders\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": [\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"all\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"out\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"errors\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"], \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:'\"level\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"ALL\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.strong,{children:\"params\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsx)(l.li,{children:\"type : 'dateFile' \\u9996\\u5148\\u6307\\u5B9A appenders \\u7684\\u7C7B\\u578B\\u4E3A dateFile\"}),`\n`,(0,e.jsx)(l.li,{children:\"filename : \\u7528\\u4E8E\\u6307\\u5B9A\\u65E5\\u5FD7\\u843D\\u76D8\\u7684\\u6587\\u4EF6\\u5730\\u5740 ( ps : \\u201C./logs/test.log\\u201D )\"}),`\n`,(0,e.jsxs)(l.li,{children:[\"pattern : \\u7528\\u4E8E\\u6307\\u5B9A\\u65E5\\u5FD7\\u5207\\u5206\\u7684\\u65F6\\u95F4\\u95F4\\u9694\",`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsx)(l.li,{children:\"'.yyyy-MM' \\u7CBE\\u786E\\u5230\\u6708\"}),`\n`,(0,e.jsx)(l.li,{children:\"'.yyyy-MM-dd' \\u7CBE\\u786E\\u5230\\u5929\"}),`\n`,(0,e.jsx)(l.li,{children:\"'.yyyy-MM-dd-hh' \\u7CBE\\u786E\\u5230\\u5C0F\\u65F6\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(l.li,{children:\"layout : \\u81EA\\u5B9A\\u4E49\\u65E5\\u5FD7\\u8F93\\u51FA\\u7684\\u683C\\u5F0F\"}),`\n`,(0,e.jsx)(l.li,{children:\"compress : compress \\u4E3A true\\uFF0C\\u8BB0\\u5F55\\u5F53\\u5929\\u65E5\\u5FD7\\u65F6\\uFF0C\\u4F1A\\u5BF9\\u4EE5\\u5F80\\u7684\\u8001\\u65E5\\u5FD7\\u8FDB\\u884C\\u538B\\u7F29\\u64CD\\u4F5C\\uFF0C\\u538B\\u7F29\\u6587\\u4EF6\\u540E\\u7F00\\u4E3A .gz (\\u9ED8\\u8BA4 : false)\"}),`\n`,(0,e.jsx)(l.li,{children:\"alwaysIncludePattern : \\u5F53\\u4E3A true \\u65F6\\uFF0Clog \\u6587\\u4EF6\\u540D\\u4F1A\\u5305\\u542B\\u4E4B\\u524D\\u8BBE\\u7F6E\\u7684 pattern \\u4FE1\\u606F (\\u9ED8\\u8BA4\\u4E3A false\\uFF0C\\u4F46\\u662F\\u5F3A\\u70C8\\u5EFA\\u8BAE\\u5F00\\u542F) \\u65E5\\u5FD7\\u540D\\u4F8B\\u5982 : test.log-2019-08-06\"}),`\n`,(0,e.jsx)(l.li,{children:\"daysToKeep : \\u6307\\u5B9A\\u65E5\\u5FD7\\u4FDD\\u7559\\u7684\\u5929\\u6570 ( \\u9ED8\\u8BA4\\u4E3A 0\\uFF0C\\u59CB\\u7EC8\\u4FDD\\u7559 )\"}),`\n`,(0,e.jsx)(l.li,{children:\"keepFileExt : \\u662F\\u5426\\u4FDD\\u6301\\u65E5\\u5FD7\\u6587\\u4EF6\\u540E\\u7F00\\u540D ( \\u9ED8\\u8BA4\\u4E3A false\\uFF0C\\u4F7F\\u7528 pattern \\u7684\\u60C5\\u51B5\\u4E0B\\uFF0C\\u4FDD\\u6301\\u9ED8\\u8BA4\\u5C31\\u597D )\\u53EA\\u6709\\u5728 alwaysIncludePattern \\u4E3A false \\u65F6\\u751F\\u6548\"}),`\n`]}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u5728\",(0,e.jsx)(l.code,{children:\"index.js\"}),\"\\u4E2D\\u914D\\u7F6E\"]}),`\n`,(0,e.jsx)(l.div,{className:\"remark-code-container\",children:(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import log4js from \"log4js\";\nimport log4jsConfig from \"./config/log4js.json\";\nlog4js.configure(log4jsConfig);\n`,children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" log4js \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"log4js\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" log4jsConfig \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"./config/log4js.json\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"log4js.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"configure\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(log4jsConfig);\"})]})]})})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u6267\\u884C\\u4E0A\\u8FF0\\u4EE3\\u7801\\u540E\\uFF0Clog4js \\u4F1A\\u4EE5\\u5929\\u4E3A\\u5206\\u5272\\uFF0C\\u6BCF\\u5929\\u751F\\u6210\\u4E00\\u4E2A\\u540D\\u5B57\\u5982\\xA0\",(0,e.jsx)(l.code,{children:\"all.-2024-12-09.log\"}),\"\\xA0\\u7684\\u65E5\\u5FD7\\u6587\\u4EF6\\u3002\\u5E76\\u7B5B\\u9009error\\u7EA7\\u522B\\u5B58\\u50A8\\u8FDB\",(0,e.jsx)(l.code,{children:\"error.log\"}),`\\u3002\\u540C\\u65F6\\u63A7\\u5236\\u53F0\\u4E5F\\u4F1A\\u6253\\u5370\\u3002\n`,(0,e.jsx)(l.img,{src:\"/post/assets/2024-12-09-Node-log-storage-20241209123514.png\",alt:\"\",width:\"553\",height:\"169\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAADFBMVEUsMDs1NUI6LDYmJzEp/+ZWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGElEQVR4nAXBAQEAAAjDIHb7dxYQu6PaeACYABGNJZkpAAAAAElFTkSuQmCC\"})]})]})}function f(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,Object.assign({},n,{children:(0,e.jsx)(t,n)})):t(n)}var C=f;return A(j);})();\n;return Component;"
    },
    "_id": "post/2024-12-09-Node-log-storage.md",
    "_raw": {
      "sourceFilePath": "post/2024-12-09-Node-log-storage.md",
      "sourceFileName": "2024-12-09-Node-log-storage.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-12-09-Node-log-storage"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-12-09-Node-log-storage",
    "slugAsParams": "2024-12-09-Node-log-storage"
  },
  {
    "title": "微信小程序登录流程",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-12-09T00:00:00.000Z",
    "body": {
      "raw": "\n一个简单的用户系统需要关注至少这些层面\n\n- 安全性(加密)\n- 持久化登录态(类似cookie)\n- 登录过期处理\n- 确保用户唯一性, 避免出现多账号\n- 授权\n- 绑定用户昵称头像等信息\n- 绑定手机号(实名和密保方式)\n\n\n## 登录流程\n- 通过wx.login()获取code。\n- 将这个code发送给后端，后端会返回一个token，这个token将作为你身份的唯一标识。\n- 将token通过wx.setStorageSync()保存在本地存储。\n- 用户下次进入⻚面时，会先通过wx.getStorageSync() 方法判断token是否有值，如果有值，则可以请求其它数据，如果没有值，则进行登录操作。\n\n\n![](assets/2024-12-09-wechat-login-20241209112239.png)\n\n- `appId` 小程序唯一标识\n- `appSecret` 小程序的 app secret, 可以和 code, appId 一起换取 session_key\n\n\n\n**注意⚠️**\n1. 会话密钥 `session_key` 是对用户数据进行 [加密签名](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html) 的密钥。为了应用自身的数据安全，开发者服务器**不应该把会话密钥下发到小程序，也不应该对外提供这个密钥**。\n2. 临时登录凭证 code 只能使用一次\n\n\n## OAuth\n>  在微信小程序中，oauth 授权登录主要是 code 换取 openId 和 sessionKey 的过程\n\nOAuth在\"客户端\"与\"服务提供商\"之间，设置了一个授权层（authorization layer）。\"客户端\"不能直接登录\"服务提供商\"，只能登录授权层，以此将用户与客户端区分开来。\"客户端\"登录授权层所用的令牌（token），与用户的密码不同。用户可以在登录的时候，指定授权层令牌的权限范围和有效期。\n\"客户端\"登录授权层以后，\"服务提供商\"根据令牌的权限范围和有效期，向\"客户端\"开放用户储存的资料。\n\n\n在这里，我们服务端采用[Lucia](https://lucia-auth.com/)实现, Lucia 是服务器的一个开源身份验证库，它消除了处理会话的复杂性。它与您的数据库一起工作，提供易于使用、理解和扩展的 API。*但是自2025年3月开始不再维护*。\n\n\n\n首先在迁前端小程序中，`wx.login()`获取临时code，然后传回给开发服务器\n\n>2021年4月起小程序不再支持`wx.getUserInfo`获取，需要用`wx.getUserProfile`替换。而且必须是用户点击后调用，不然会报错（规矩真多💢）\n>`Error: MiniProgramError {\"errMsg\":\"getUserProfile:fail can only be invoked by user TAP gesture.\"}`\n\n\n```js\nexport const loginProfile = async (app) => {\n  // promisify是封装的wx 异步函数\n  const res = await promisify(wx.getUserProfile)({\n    desc: \"用于完善会员资料\",\n  });\n  const { code } = await promisify(wx.login)();\n\n  // login是传回自己服务的login接口，返回自定义登录态data\n  const { data } = await login({\n    code,\n    ...res.userInfo,\n  });\n  // 缓存登录态\n  wx.setStorageSync(\"userInfo\", data);\n\n  const userId = data.id;\n  startDuration(app, userId);\n  return data;\n};\n```\n\n\n在服务器中实现`/login`接口\n```js\n\n// POST\nexport async function login(c: Context) {\n  const body = await c.req.json();\n  const { code } = UserParamsSchema.parse(body);\n\n  const { data } = await axios.get(\n    \"https://api.weixin.qq.com/sns/jscode2session\",\n    {\n      params: {\n        appid: serverEnvs.WX_APPID,\n        secret: serverEnvs.WX_SECRET,\n        js_code: code,\n        grant_type: \"authorization_code\",\n      },\n    }\n  );\n  logger.info(\"user\", data);\n\n  let curUser = null;\n  try {\n    const existingUser = await db\n      .select()\n      .from(users)\n      .where(eq(users.id, data.openid))\n      .limit(1);\n\n    if (existingUser.length === 0) {\n      curUser = {\n        id: data.openid,\n        session_key: data.session_key,\n        name: nickName,\n        avatar: avatarUrl,\n      };\n      await db.insert(users).values(curUser);\n    } else {\n      curUser = existingUser[0];\n    }\n  } catch (e: any) {\n    return c.json(\n      failRes({\n        message: e.detail,\n      })\n    );\n  }\n\n  const session = await lucia.createSession(data.openid, {});\n  const sessionCookie = lucia.createSessionCookie(session.id);\n\n  setCookie(c, lucia.sessionCookieName, sessionCookie.value);\n\n  return c.json(successRes({ ...curUser }));\n}\n```\n\n\n##  openid, unionid , code, session_key\n\n**openid**\nopenid是用来唯一标识用户的一个字符串。在微信小程序中，每个用户的openid都是唯一的。通过openid，小程序可以获取用户的基本信息，如头像、昵称等。\n\n > 注意： 同一个用户在不同的小程序中拥有不同的openid。因此，在开发小程序时，不能使用openid来进行用户的唯一性判断\n\n\n**unionid**\nunionid是在用户绑定同一微信开放平台账号下的多个应用时，用来唯一标识用户的一个字符串。如果用户在多个小程序中使用同一个微信号进行登录授权，那么这些小程序中的unionid都是相同的。\n\n> 注意： 用户的unionid只有在用户将多个应用绑定到同一个微信开放平台账号下时才会生成。因此，如果用户没有绑定多个应用，那么小程序将无法获取用户的unionid。\n\n\n**code**\ncode是用户登录凭证，由微信服务器颁发给小程序。在用户授权登录后，小程序可以通过调用微信登录接口获取用户的code。然后，通过code向微信服务器请求用户的openid和session_key等信息。\n> **注意：** **每个code只能使用一次，且有效期为5分钟。因此，在使用code进行登录时，需要及时将其转换成用户的openid和session_key等信息，以免出现code过期的情况**\n\n\n**session_key**\n会话密钥, 服务端通过 [code2Session](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/code2Session.html) 获取\nsession_key有点类似于我们在数据库中保存用户密码时所使用的“盐（salt）”。在数据库保存用户密码时，并不是直接将用户的密码以明文的方式存放在数据库表中，通常都会使用SHA-1或者MD5算法将用户密码和salt随机字符串拼接在一起，重新计算一下再存入数据库中。被重新使用SHA-1或MD5算法计算的用户密码谁都不知道是什么，开发者也只能比对每次登录时输入的密码和数据库保存的密码是否一致，判断是否为合法用户，却无法知道密码到底是什么。\n\n> 因为session_key 存在时效性问题（毕竟是用来查看敏感信息），而小程序前端可以通过wx.checkSession() 来检查session_key 是否过期。所以可以通过这个来作为保存用户登录态的机制，这也是小程序文档中推荐的方法：\n\n\n\n\n## 自定义登录态持久化\n\n浏览器有 cookie, 然而小程序没有 cookie, 因此，使用小程序自己的**持久化**接口, 也就是 setStorage 和 getStorage，给http response headers**种上 cookie**。\n这里使用[@chunpu/http](https://github.com/chunpu/http) 实现，这是一个专门为小程序设计的 http 请求库, 可以在小程序上像 axios 一样发请求, 支持拦截器等强大功能, 甚至比 axios 更顺手\n\n在login接口 response 拦截器\n\n```js\nhttp.interceptors.response.use((response) => {\n  // 种 cookie\n  var { headers } = response;\n  var cookies = headers[\"set-cookie\"] || \"\";\n\n  cookies = cookies.split(/, */).reduce((prev, item) => {\n    item = item.split(/; */)[0];\n    var obj = http.qs.parse(item);\n    return Object.assign(prev, obj);\n  }, {});\n  if (cookies) {\n    return promisify(wx.getStorage)({\n      key: \"cookie\",\n    })\n      .catch(() => {})\n      .then((res) => {\n        res = res || {};\n\n        var allCookies = res.data || {};\n        Object.assign(allCookies, cookies);\n        return promisify(wx.setStorage)({\n          key: \"cookie\",\n          data: allCookies,\n        });\n      })\n      .then(() => {\n        return response;\n      });\n  }\n  return response;\n});\n```\n\n\n当然我们还需要在发请求的时候**带上所有 cookie**, 此处用的是 request 拦截器\n```js\nhttp.interceptors.request.use((config) => {\n  // 给请求带上 cookie\n  return promisify(wx.getStorage)({\n    key: \"cookie\",\n  })\n    .catch(() => {})\n    .then((res) => {\n      if (res && res.data) {\n        Object.assign(config.headers, {\n          Cookie: http.qs.stringify(res.data, \";\", \"=\"),\n        });\n      }\n      return config;\n    });\n});\n\n```\n\n\n登录态 cookie 是有失效时间的, 比如一天, 七天, 或者一个月。 小程序已经帮我们实现好了 session 有效期的判断 `wx.checkSession`\n>通过 wx.login 接口获得的用户登录态拥有一定的时效性。用户越久未使用小程序，用户登录态越有可能失效。反之如果用户一直在使用小程序，则用户登录态一直保持有效\n\n`app.js`\n\n```js\n\n\n\n```\n\n\n\n\n## Reference\n[彻底搞懂小程序登录流程-附小程序和服务端](https://github.com/75team/w3c/blob/master/articles/20181001_chunpu_%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B-%E9%99%84%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BB%A3%E7%A0%81.md)",
      "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var u=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),g=(l,n)=>{for(var r in n)c(l,r,{get:n[r],enumerable:!0})},a=(l,n,r,o)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let s of E(n))!F.call(l,s)&&s!==r&&c(l,s,{get:()=>n[s],enumerable:!(o=p(n,s))||o.enumerable});return l};var k=(l,n,r)=>(r=l!=null?h(y(l)):{},a(n||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),B=l=>a(c({},\"__esModule\",{value:!0}),l);var d=u((x,i)=>{i.exports=_jsx_runtime});var w={};g(w,{default:()=>f,frontmatter:()=>m});var e=k(d()),m={title:\"\\u5FAE\\u4FE1\\u5C0F\\u7A0B\\u5E8F\\u767B\\u5F55\\u6D41\\u7A0B\",subtitle:null,layout:\"post\",date:new Date(17337024e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function t(l){let n=Object.assign({p:\"p\",ul:\"ul\",li:\"li\",h2:\"h2\",a:\"a\",span:\"span\",img:\"img\",code:\"code\",strong:\"strong\",ol:\"ol\",blockquote:\"blockquote\",em:\"em\",div:\"div\",figure:\"figure\",pre:\"pre\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u7528\\u6237\\u7CFB\\u7EDF\\u9700\\u8981\\u5173\\u6CE8\\u81F3\\u5C11\\u8FD9\\u4E9B\\u5C42\\u9762\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5B89\\u5168\\u6027(\\u52A0\\u5BC6)\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6301\\u4E45\\u5316\\u767B\\u5F55\\u6001(\\u7C7B\\u4F3Ccookie)\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u767B\\u5F55\\u8FC7\\u671F\\u5904\\u7406\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u786E\\u4FDD\\u7528\\u6237\\u552F\\u4E00\\u6027, \\u907F\\u514D\\u51FA\\u73B0\\u591A\\u8D26\\u53F7\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6388\\u6743\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7ED1\\u5B9A\\u7528\\u6237\\u6635\\u79F0\\u5934\\u50CF\\u7B49\\u4FE1\\u606F\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7ED1\\u5B9A\\u624B\\u673A\\u53F7(\\u5B9E\\u540D\\u548C\\u5BC6\\u4FDD\\u65B9\\u5F0F)\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u767B\\u5F55\\u6D41\\u7A0B\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u767B\\u5F55\\u6D41\\u7A0B\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u767B\\u5F55\\u6D41\\u7A0B\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u901A\\u8FC7wx.login()\\u83B7\\u53D6code\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5C06\\u8FD9\\u4E2Acode\\u53D1\\u9001\\u7ED9\\u540E\\u7AEF\\uFF0C\\u540E\\u7AEF\\u4F1A\\u8FD4\\u56DE\\u4E00\\u4E2Atoken\\uFF0C\\u8FD9\\u4E2Atoken\\u5C06\\u4F5C\\u4E3A\\u4F60\\u8EAB\\u4EFD\\u7684\\u552F\\u4E00\\u6807\\u8BC6\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5C06token\\u901A\\u8FC7wx.setStorageSync()\\u4FDD\\u5B58\\u5728\\u672C\\u5730\\u5B58\\u50A8\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7528\\u6237\\u4E0B\\u6B21\\u8FDB\\u5165\\u2EDA\\u9762\\u65F6\\uFF0C\\u4F1A\\u5148\\u901A\\u8FC7wx.getStorageSync() \\u65B9\\u6CD5\\u5224\\u65ADtoken\\u662F\\u5426\\u6709\\u503C\\uFF0C\\u5982\\u679C\\u6709\\u503C\\uFF0C\\u5219\\u53EF\\u4EE5\\u8BF7\\u6C42\\u5176\\u5B83\\u6570\\u636E\\uFF0C\\u5982\\u679C\\u6CA1\\u6709\\u503C\\uFF0C\\u5219\\u8FDB\\u884C\\u767B\\u5F55\\u64CD\\u4F5C\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-09-wechat-login-20241209112239.png\",alt:\"\",width:\"710\",height:\"720\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAACVBMVEX9/f3u7u719fUfBACYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJ0lEQVR4nEWLCQoAAAjCNv//6KiIBEU8UJTI0DCInmm9GH+wldl7AQXxACrWGpnRAAAAAElFTkSuQmCC\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"appId\"}),\"\\xA0\\u5C0F\\u7A0B\\u5E8F\\u552F\\u4E00\\u6807\\u8BC6\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"appSecret\"}),\"\\xA0\\u5C0F\\u7A0B\\u5E8F\\u7684 app secret, \\u53EF\\u4EE5\\u548C code, appId \\u4E00\\u8D77\\u6362\\u53D6 session_key\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u6CE8\\u610F\\u26A0\\uFE0F\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u4F1A\\u8BDD\\u5BC6\\u94A5\\xA0\",(0,e.jsx)(n.code,{children:\"session_key\"}),\"\\xA0\\u662F\\u5BF9\\u7528\\u6237\\u6570\\u636E\\u8FDB\\u884C\\xA0\",(0,e.jsx)(n.a,{href:\"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html\",children:\"\\u52A0\\u5BC6\\u7B7E\\u540D\"}),\"\\xA0\\u7684\\u5BC6\\u94A5\\u3002\\u4E3A\\u4E86\\u5E94\\u7528\\u81EA\\u8EAB\\u7684\\u6570\\u636E\\u5B89\\u5168\\uFF0C\\u5F00\\u53D1\\u8005\\u670D\\u52A1\\u5668\",(0,e.jsx)(n.strong,{children:\"\\u4E0D\\u5E94\\u8BE5\\u628A\\u4F1A\\u8BDD\\u5BC6\\u94A5\\u4E0B\\u53D1\\u5230\\u5C0F\\u7A0B\\u5E8F\\uFF0C\\u4E5F\\u4E0D\\u5E94\\u8BE5\\u5BF9\\u5916\\u63D0\\u4F9B\\u8FD9\\u4E2A\\u5BC6\\u94A5\"}),\"\\u3002\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E34\\u65F6\\u767B\\u5F55\\u51ED\\u8BC1 code \\u53EA\\u80FD\\u4F7F\\u7528\\u4E00\\u6B21\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"oauth\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#oauth\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"OAuth\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u5FAE\\u4FE1\\u5C0F\\u7A0B\\u5E8F\\u4E2D\\uFF0Coauth \\u6388\\u6743\\u767B\\u5F55\\u4E3B\\u8981\\u662F code \\u6362\\u53D6 openId \\u548C sessionKey \\u7684\\u8FC7\\u7A0B\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:`OAuth\\u5728\"\\u5BA2\\u6237\\u7AEF\"\\u4E0E\"\\u670D\\u52A1\\u63D0\\u4F9B\\u5546\"\\u4E4B\\u95F4\\uFF0C\\u8BBE\\u7F6E\\u4E86\\u4E00\\u4E2A\\u6388\\u6743\\u5C42\\uFF08authorization layer\\uFF09\\u3002\"\\u5BA2\\u6237\\u7AEF\"\\u4E0D\\u80FD\\u76F4\\u63A5\\u767B\\u5F55\"\\u670D\\u52A1\\u63D0\\u4F9B\\u5546\"\\uFF0C\\u53EA\\u80FD\\u767B\\u5F55\\u6388\\u6743\\u5C42\\uFF0C\\u4EE5\\u6B64\\u5C06\\u7528\\u6237\\u4E0E\\u5BA2\\u6237\\u7AEF\\u533A\\u5206\\u5F00\\u6765\\u3002\"\\u5BA2\\u6237\\u7AEF\"\\u767B\\u5F55\\u6388\\u6743\\u5C42\\u6240\\u7528\\u7684\\u4EE4\\u724C\\uFF08token\\uFF09\\uFF0C\\u4E0E\\u7528\\u6237\\u7684\\u5BC6\\u7801\\u4E0D\\u540C\\u3002\\u7528\\u6237\\u53EF\\u4EE5\\u5728\\u767B\\u5F55\\u7684\\u65F6\\u5019\\uFF0C\\u6307\\u5B9A\\u6388\\u6743\\u5C42\\u4EE4\\u724C\\u7684\\u6743\\u9650\\u8303\\u56F4\\u548C\\u6709\\u6548\\u671F\\u3002\n\"\\u5BA2\\u6237\\u7AEF\"\\u767B\\u5F55\\u6388\\u6743\\u5C42\\u4EE5\\u540E\\uFF0C\"\\u670D\\u52A1\\u63D0\\u4F9B\\u5546\"\\u6839\\u636E\\u4EE4\\u724C\\u7684\\u6743\\u9650\\u8303\\u56F4\\u548C\\u6709\\u6548\\u671F\\uFF0C\\u5411\"\\u5BA2\\u6237\\u7AEF\"\\u5F00\\u653E\\u7528\\u6237\\u50A8\\u5B58\\u7684\\u8D44\\u6599\\u3002`}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\\u8FD9\\u91CC\\uFF0C\\u6211\\u4EEC\\u670D\\u52A1\\u7AEF\\u91C7\\u7528\",(0,e.jsx)(n.a,{href:\"https://lucia-auth.com/\",children:\"Lucia\"}),\"\\u5B9E\\u73B0, Lucia \\u662F\\u670D\\u52A1\\u5668\\u7684\\u4E00\\u4E2A\\u5F00\\u6E90\\u8EAB\\u4EFD\\u9A8C\\u8BC1\\u5E93\\uFF0C\\u5B83\\u6D88\\u9664\\u4E86\\u5904\\u7406\\u4F1A\\u8BDD\\u7684\\u590D\\u6742\\u6027\\u3002\\u5B83\\u4E0E\\u60A8\\u7684\\u6570\\u636E\\u5E93\\u4E00\\u8D77\\u5DE5\\u4F5C\\uFF0C\\u63D0\\u4F9B\\u6613\\u4E8E\\u4F7F\\u7528\\u3001\\u7406\\u89E3\\u548C\\u6269\\u5C55\\u7684 API\\u3002\",(0,e.jsx)(n.em,{children:\"\\u4F46\\u662F\\u81EA2025\\u5E743\\u6708\\u5F00\\u59CB\\u4E0D\\u518D\\u7EF4\\u62A4\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u9996\\u5148\\u5728\\u8FC1\\u524D\\u7AEF\\u5C0F\\u7A0B\\u5E8F\\u4E2D\\uFF0C\",(0,e.jsx)(n.code,{children:\"wx.login()\"}),\"\\u83B7\\u53D6\\u4E34\\u65F6code\\uFF0C\\u7136\\u540E\\u4F20\\u56DE\\u7ED9\\u5F00\\u53D1\\u670D\\u52A1\\u5668\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"2021\\u5E744\\u6708\\u8D77\\u5C0F\\u7A0B\\u5E8F\\u4E0D\\u518D\\u652F\\u6301\",(0,e.jsx)(n.code,{children:\"wx.getUserInfo\"}),\"\\u83B7\\u53D6\\uFF0C\\u9700\\u8981\\u7528\",(0,e.jsx)(n.code,{children:\"wx.getUserProfile\"}),`\\u66FF\\u6362\\u3002\\u800C\\u4E14\\u5FC5\\u987B\\u662F\\u7528\\u6237\\u70B9\\u51FB\\u540E\\u8C03\\u7528\\uFF0C\\u4E0D\\u7136\\u4F1A\\u62A5\\u9519\\uFF08\\u89C4\\u77E9\\u771F\\u591A\\u{1F4A2}\\uFF09\n`,(0,e.jsx)(n.code,{children:'Error: MiniProgramError {\"errMsg\":\"getUserProfile:fail can only be invoked by user TAP gesture.\"}'})]}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`export const loginProfile = async (app) => {\n  // promisify\\u662F\\u5C01\\u88C5\\u7684wx \\u5F02\\u6B65\\u51FD\\u6570\n  const res = await promisify(wx.getUserProfile)({\n    desc: \"\\u7528\\u4E8E\\u5B8C\\u5584\\u4F1A\\u5458\\u8D44\\u6599\",\n  });\n  const { code } = await promisify(wx.login)();\n\n  // login\\u662F\\u4F20\\u56DE\\u81EA\\u5DF1\\u670D\\u52A1\\u7684login\\u63A5\\u53E3\\uFF0C\\u8FD4\\u56DE\\u81EA\\u5B9A\\u4E49\\u767B\\u5F55\\u6001data\n  const { data } = await login({\n    code,\n    ...res.userInfo,\n  });\n  // \\u7F13\\u5B58\\u767B\\u5F55\\u6001\n  wx.setStorageSync(\"userInfo\", data);\n\n  const userId = data.id;\n  startDuration(app, userId);\n  return data;\n};\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" const\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" loginProfile\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"app\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // promisify\\u662F\\u5C01\\u88C5\\u7684wx \\u5F02\\u6B65\\u51FD\\u6570\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" res\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" promisify\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(wx.getUserProfile)({\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    desc: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"\\u7528\\u4E8E\\u5B8C\\u5584\\u4F1A\\u5458\\u8D44\\u6599\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"code\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" promisify\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(wx.login)();\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // login\\u662F\\u4F20\\u56DE\\u81EA\\u5DF1\\u670D\\u52A1\\u7684login\\u63A5\\u53E3\\uFF0C\\u8FD4\\u56DE\\u81EA\\u5B9A\\u4E49\\u767B\\u5F55\\u6001data\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"data\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" login\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    code,\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    ...\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"res.userInfo,\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u7F13\\u5B58\\u767B\\u5F55\\u6001\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  wx.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"setStorageSync\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"userInfo\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", data);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" userId\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" data.id;\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"  startDuration\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(app, userId);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" data;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\\u670D\\u52A1\\u5668\\u4E2D\\u5B9E\\u73B0\",(0,e.jsx)(n.code,{children:\"/login\"}),\"\\u63A5\\u53E3\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\n// POST\nexport async function login(c: Context) {\n  const body = await c.req.json();\n  const { code } = UserParamsSchema.parse(body);\n\n  const { data } = await axios.get(\n    \"https://api.weixin.qq.com/sns/jscode2session\",\n    {\n      params: {\n        appid: serverEnvs.WX_APPID,\n        secret: serverEnvs.WX_SECRET,\n        js_code: code,\n        grant_type: \"authorization_code\",\n      },\n    }\n  );\n  logger.info(\"user\", data);\n\n  let curUser = null;\n  try {\n    const existingUser = await db\n      .select()\n      .from(users)\n      .where(eq(users.id, data.openid))\n      .limit(1);\n\n    if (existingUser.length === 0) {\n      curUser = {\n        id: data.openid,\n        session_key: data.session_key,\n        name: nickName,\n        avatar: avatarUrl,\n      };\n      await db.insert(users).values(curUser);\n    } else {\n      curUser = existingUser[0];\n    }\n  } catch (e: any) {\n    return c.json(\n      failRes({\n        message: e.detail,\n      })\n    );\n  }\n\n  const session = await lucia.createSession(data.openid, {});\n  const sessionCookie = lucia.createSessionCookie(session.id);\n\n  setCookie(c, lucia.sessionCookieName, sessionCookie.value);\n\n  return c.json(successRes({ ...curUser }));\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// POST\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" login\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"c\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" Context\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" body\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" c.req.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"code\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" UserParamsSchema.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"parse\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(body);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"data\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" axios.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'    \"https://api.weixin.qq.com/sns/jscode2session\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      params: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        appid: serverEnvs.\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"WX_APPID\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        secret: serverEnvs.\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"WX_SECRET\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        js_code: code,\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        grant_type: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"authorization_code\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  logger.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"info\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"user\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", data);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" curUser \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  try\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" existingUser\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" db\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"select\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(users)\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"where\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"eq\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(users.id, data.openid))\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"limit\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (existingUser.\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      curUser \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        id: data.openid,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        session_key: data.session_key,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        name: nickName,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        avatar: avatarUrl,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      };\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" db.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"insert\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(users).\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"values\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(curUser);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      curUser \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" existingUser[\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" c.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"      failRes\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        message: e.detail,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      })\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    );\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" session\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" lucia.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"createSession\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(data.openid, {});\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" sessionCookie\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" lucia.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"createSessionCookie\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(session.id);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"  setCookie\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(c, lucia.sessionCookieName, sessionCookie.value);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" c.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"successRes\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"...\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"curUser }));\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"openid-unionid--code-session_key\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#openid-unionid--code-session_key\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"openid, unionid , code, session_key\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"openid\"}),`\nopenid\\u662F\\u7528\\u6765\\u552F\\u4E00\\u6807\\u8BC6\\u7528\\u6237\\u7684\\u4E00\\u4E2A\\u5B57\\u7B26\\u4E32\\u3002\\u5728\\u5FAE\\u4FE1\\u5C0F\\u7A0B\\u5E8F\\u4E2D\\uFF0C\\u6BCF\\u4E2A\\u7528\\u6237\\u7684openid\\u90FD\\u662F\\u552F\\u4E00\\u7684\\u3002\\u901A\\u8FC7openid\\uFF0C\\u5C0F\\u7A0B\\u5E8F\\u53EF\\u4EE5\\u83B7\\u53D6\\u7528\\u6237\\u7684\\u57FA\\u672C\\u4FE1\\u606F\\uFF0C\\u5982\\u5934\\u50CF\\u3001\\u6635\\u79F0\\u7B49\\u3002`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6CE8\\u610F\\uFF1A\\xA0\\u540C\\u4E00\\u4E2A\\u7528\\u6237\\u5728\\u4E0D\\u540C\\u7684\\u5C0F\\u7A0B\\u5E8F\\u4E2D\\u62E5\\u6709\\u4E0D\\u540C\\u7684openid\\u3002\\u56E0\\u6B64\\uFF0C\\u5728\\u5F00\\u53D1\\u5C0F\\u7A0B\\u5E8F\\u65F6\\uFF0C\\u4E0D\\u80FD\\u4F7F\\u7528openid\\u6765\\u8FDB\\u884C\\u7528\\u6237\\u7684\\u552F\\u4E00\\u6027\\u5224\\u65AD\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"unionid\"}),`\nunionid\\u662F\\u5728\\u7528\\u6237\\u7ED1\\u5B9A\\u540C\\u4E00\\u5FAE\\u4FE1\\u5F00\\u653E\\u5E73\\u53F0\\u8D26\\u53F7\\u4E0B\\u7684\\u591A\\u4E2A\\u5E94\\u7528\\u65F6\\uFF0C\\u7528\\u6765\\u552F\\u4E00\\u6807\\u8BC6\\u7528\\u6237\\u7684\\u4E00\\u4E2A\\u5B57\\u7B26\\u4E32\\u3002\\u5982\\u679C\\u7528\\u6237\\u5728\\u591A\\u4E2A\\u5C0F\\u7A0B\\u5E8F\\u4E2D\\u4F7F\\u7528\\u540C\\u4E00\\u4E2A\\u5FAE\\u4FE1\\u53F7\\u8FDB\\u884C\\u767B\\u5F55\\u6388\\u6743\\uFF0C\\u90A3\\u4E48\\u8FD9\\u4E9B\\u5C0F\\u7A0B\\u5E8F\\u4E2D\\u7684unionid\\u90FD\\u662F\\u76F8\\u540C\\u7684\\u3002`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u6CE8\\u610F\\uFF1A\\xA0\\u7528\\u6237\\u7684unionid\\u53EA\\u6709\\u5728\\u7528\\u6237\\u5C06\\u591A\\u4E2A\\u5E94\\u7528\\u7ED1\\u5B9A\\u5230\\u540C\\u4E00\\u4E2A\\u5FAE\\u4FE1\\u5F00\\u653E\\u5E73\\u53F0\\u8D26\\u53F7\\u4E0B\\u65F6\\u624D\\u4F1A\\u751F\\u6210\\u3002\\u56E0\\u6B64\\uFF0C\\u5982\\u679C\\u7528\\u6237\\u6CA1\\u6709\\u7ED1\\u5B9A\\u591A\\u4E2A\\u5E94\\u7528\\uFF0C\\u90A3\\u4E48\\u5C0F\\u7A0B\\u5E8F\\u5C06\\u65E0\\u6CD5\\u83B7\\u53D6\\u7528\\u6237\\u7684unionid\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"code\"}),`\ncode\\u662F\\u7528\\u6237\\u767B\\u5F55\\u51ED\\u8BC1\\uFF0C\\u7531\\u5FAE\\u4FE1\\u670D\\u52A1\\u5668\\u9881\\u53D1\\u7ED9\\u5C0F\\u7A0B\\u5E8F\\u3002\\u5728\\u7528\\u6237\\u6388\\u6743\\u767B\\u5F55\\u540E\\uFF0C\\u5C0F\\u7A0B\\u5E8F\\u53EF\\u4EE5\\u901A\\u8FC7\\u8C03\\u7528\\u5FAE\\u4FE1\\u767B\\u5F55\\u63A5\\u53E3\\u83B7\\u53D6\\u7528\\u6237\\u7684code\\u3002\\u7136\\u540E\\uFF0C\\u901A\\u8FC7code\\u5411\\u5FAE\\u4FE1\\u670D\\u52A1\\u5668\\u8BF7\\u6C42\\u7528\\u6237\\u7684openid\\u548Csession_key\\u7B49\\u4FE1\\u606F\\u3002`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u6CE8\\u610F\\uFF1A\"}),\"\\xA0\",(0,e.jsx)(n.strong,{children:\"\\u6BCF\\u4E2Acode\\u53EA\\u80FD\\u4F7F\\u7528\\u4E00\\u6B21\\uFF0C\\u4E14\\u6709\\u6548\\u671F\\u4E3A5\\u5206\\u949F\\u3002\\u56E0\\u6B64\\uFF0C\\u5728\\u4F7F\\u7528code\\u8FDB\\u884C\\u767B\\u5F55\\u65F6\\uFF0C\\u9700\\u8981\\u53CA\\u65F6\\u5C06\\u5176\\u8F6C\\u6362\\u6210\\u7528\\u6237\\u7684openid\\u548Csession_key\\u7B49\\u4FE1\\u606F\\uFF0C\\u4EE5\\u514D\\u51FA\\u73B0code\\u8FC7\\u671F\\u7684\\u60C5\\u51B5\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"session_key\"}),`\n\\u4F1A\\u8BDD\\u5BC6\\u94A5, \\u670D\\u52A1\\u7AEF\\u901A\\u8FC7\\xA0`,(0,e.jsx)(n.a,{href:\"https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/code2Session.html\",children:\"code2Session\"}),`\\xA0\\u83B7\\u53D6\nsession_key\\u6709\\u70B9\\u7C7B\\u4F3C\\u4E8E\\u6211\\u4EEC\\u5728\\u6570\\u636E\\u5E93\\u4E2D\\u4FDD\\u5B58\\u7528\\u6237\\u5BC6\\u7801\\u65F6\\u6240\\u4F7F\\u7528\\u7684\\u201C\\u76D0\\uFF08salt\\uFF09\\u201D\\u3002\\u5728\\u6570\\u636E\\u5E93\\u4FDD\\u5B58\\u7528\\u6237\\u5BC6\\u7801\\u65F6\\uFF0C\\u5E76\\u4E0D\\u662F\\u76F4\\u63A5\\u5C06\\u7528\\u6237\\u7684\\u5BC6\\u7801\\u4EE5\\u660E\\u6587\\u7684\\u65B9\\u5F0F\\u5B58\\u653E\\u5728\\u6570\\u636E\\u5E93\\u8868\\u4E2D\\uFF0C\\u901A\\u5E38\\u90FD\\u4F1A\\u4F7F\\u7528SHA-1\\u6216\\u8005MD5\\u7B97\\u6CD5\\u5C06\\u7528\\u6237\\u5BC6\\u7801\\u548Csalt\\u968F\\u673A\\u5B57\\u7B26\\u4E32\\u62FC\\u63A5\\u5728\\u4E00\\u8D77\\uFF0C\\u91CD\\u65B0\\u8BA1\\u7B97\\u4E00\\u4E0B\\u518D\\u5B58\\u5165\\u6570\\u636E\\u5E93\\u4E2D\\u3002\\u88AB\\u91CD\\u65B0\\u4F7F\\u7528SHA-1\\u6216MD5\\u7B97\\u6CD5\\u8BA1\\u7B97\\u7684\\u7528\\u6237\\u5BC6\\u7801\\u8C01\\u90FD\\u4E0D\\u77E5\\u9053\\u662F\\u4EC0\\u4E48\\uFF0C\\u5F00\\u53D1\\u8005\\u4E5F\\u53EA\\u80FD\\u6BD4\\u5BF9\\u6BCF\\u6B21\\u767B\\u5F55\\u65F6\\u8F93\\u5165\\u7684\\u5BC6\\u7801\\u548C\\u6570\\u636E\\u5E93\\u4FDD\\u5B58\\u7684\\u5BC6\\u7801\\u662F\\u5426\\u4E00\\u81F4\\uFF0C\\u5224\\u65AD\\u662F\\u5426\\u4E3A\\u5408\\u6CD5\\u7528\\u6237\\uFF0C\\u5374\\u65E0\\u6CD5\\u77E5\\u9053\\u5BC6\\u7801\\u5230\\u5E95\\u662F\\u4EC0\\u4E48\\u3002`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u56E0\\u4E3Asession_key \\u5B58\\u5728\\u65F6\\u6548\\u6027\\u95EE\\u9898\\uFF08\\u6BD5\\u7ADF\\u662F\\u7528\\u6765\\u67E5\\u770B\\u654F\\u611F\\u4FE1\\u606F\\uFF09\\uFF0C\\u800C\\u5C0F\\u7A0B\\u5E8F\\u524D\\u7AEF\\u53EF\\u4EE5\\u901A\\u8FC7wx.checkSession() \\u6765\\u68C0\\u67E5session_key \\u662F\\u5426\\u8FC7\\u671F\\u3002\\u6240\\u4EE5\\u53EF\\u4EE5\\u901A\\u8FC7\\u8FD9\\u4E2A\\u6765\\u4F5C\\u4E3A\\u4FDD\\u5B58\\u7528\\u6237\\u767B\\u5F55\\u6001\\u7684\\u673A\\u5236\\uFF0C\\u8FD9\\u4E5F\\u662F\\u5C0F\\u7A0B\\u5E8F\\u6587\\u6863\\u4E2D\\u63A8\\u8350\\u7684\\u65B9\\u6CD5\\uFF1A\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u81EA\\u5B9A\\u4E49\\u767B\\u5F55\\u6001\\u6301\\u4E45\\u5316\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u81EA\\u5B9A\\u4E49\\u767B\\u5F55\\u6001\\u6301\\u4E45\\u5316\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u81EA\\u5B9A\\u4E49\\u767B\\u5F55\\u6001\\u6301\\u4E45\\u5316\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6D4F\\u89C8\\u5668\\u6709 cookie, \\u7136\\u800C\\u5C0F\\u7A0B\\u5E8F\\u6CA1\\u6709 cookie, \\u56E0\\u6B64\\uFF0C\\u4F7F\\u7528\\u5C0F\\u7A0B\\u5E8F\\u81EA\\u5DF1\\u7684\",(0,e.jsx)(n.strong,{children:\"\\u6301\\u4E45\\u5316\"}),\"\\u63A5\\u53E3, \\u4E5F\\u5C31\\u662F setStorage \\u548C getStorage\\uFF0C\\u7ED9http response headers\",(0,e.jsx)(n.strong,{children:\"\\u79CD\\u4E0A cookie\"}),`\\u3002\n\\u8FD9\\u91CC\\u4F7F\\u7528`,(0,e.jsx)(n.a,{href:\"https://github.com/chunpu/http\",children:\"@chunpu/http\"}),\"\\xA0\\u5B9E\\u73B0\\uFF0C\\u8FD9\\u662F\\u4E00\\u4E2A\\u4E13\\u95E8\\u4E3A\\u5C0F\\u7A0B\\u5E8F\\u8BBE\\u8BA1\\u7684 http \\u8BF7\\u6C42\\u5E93, \\u53EF\\u4EE5\\u5728\\u5C0F\\u7A0B\\u5E8F\\u4E0A\\u50CF axios \\u4E00\\u6837\\u53D1\\u8BF7\\u6C42, \\u652F\\u6301\\u62E6\\u622A\\u5668\\u7B49\\u5F3A\\u5927\\u529F\\u80FD, \\u751A\\u81F3\\u6BD4 axios \\u66F4\\u987A\\u624B\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728login\\u63A5\\u53E3\\xA0response \\u62E6\\u622A\\u5668\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`http.interceptors.response.use((response) => {\n  // \\u79CD cookie\n  var { headers } = response;\n  var cookies = headers[\"set-cookie\"] || \"\";\n\n  cookies = cookies.split(/, */).reduce((prev, item) => {\n    item = item.split(/; */)[0];\n    var obj = http.qs.parse(item);\n    return Object.assign(prev, obj);\n  }, {});\n  if (cookies) {\n    return promisify(wx.getStorage)({\n      key: \"cookie\",\n    })\n      .catch(() => {})\n      .then((res) => {\n        res = res || {};\n\n        var allCookies = res.data || {};\n        Object.assign(allCookies, cookies);\n        return promisify(wx.setStorage)({\n          key: \"cookie\",\n          data: allCookies,\n        });\n      })\n      .then(() => {\n        return response;\n      });\n  }\n  return response;\n});\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"http.interceptors.response.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"response\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u79CD cookie\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  var\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" { headers } \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" response;\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  var\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" cookies \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" headers[\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"set-cookie\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  cookies \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" cookies.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"split\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#DBEDFF\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"reduce\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"prev\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"item\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    item \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" item.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"split\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#DBEDFF\"},children:\"; \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"/\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\")[\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    var\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" obj \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" http.qs.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"parse\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(item);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" Object.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"assign\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(prev, obj);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }, {});\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (cookies) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" promisify\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(wx.getStorage)({\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      key: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"cookie\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    })\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {})\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        res \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" res \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {};\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"        var\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" allCookies \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" res.data \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {};\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        Object.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"assign\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(allCookies, cookies);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"        return\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" promisify\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(wx.setStorage)({\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          key: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"cookie\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          data: allCookies,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      })\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"        return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" response;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" response;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5F53\\u7136\\u6211\\u4EEC\\u8FD8\\u9700\\u8981\\u5728\\u53D1\\u8BF7\\u6C42\\u7684\\u65F6\\u5019\",(0,e.jsx)(n.strong,{children:\"\\u5E26\\u4E0A\\u6240\\u6709 cookie\"}),\", \\u6B64\\u5904\\u7528\\u7684\\u662F request \\u62E6\\u622A\\u5668\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`http.interceptors.request.use((config) => {\n  // \\u7ED9\\u8BF7\\u6C42\\u5E26\\u4E0A cookie\n  return promisify(wx.getStorage)({\n    key: \"cookie\",\n  })\n    .catch(() => {})\n    .then((res) => {\n      if (res && res.data) {\n        Object.assign(config.headers, {\n          Cookie: http.qs.stringify(res.data, \";\", \"=\"),\n        });\n      }\n      return config;\n    });\n});\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"http.interceptors.request.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"config\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u7ED9\\u8BF7\\u6C42\\u5E26\\u4E0A cookie\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" promisify\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(wx.getStorage)({\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    key: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"cookie\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  })\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {})\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (res \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" res.data) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        Object.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"assign\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(config.headers, {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          Cookie: http.qs.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(res.data, \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\";\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"=\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" config;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u767B\\u5F55\\u6001 cookie \\u662F\\u6709\\u5931\\u6548\\u65F6\\u95F4\\u7684, \\u6BD4\\u5982\\u4E00\\u5929, \\u4E03\\u5929, \\u6216\\u8005\\u4E00\\u4E2A\\u6708\\u3002 \\u5C0F\\u7A0B\\u5E8F\\u5DF2\\u7ECF\\u5E2E\\u6211\\u4EEC\\u5B9E\\u73B0\\u597D\\u4E86 session \\u6709\\u6548\\u671F\\u7684\\u5224\\u65AD\\xA0\",(0,e.jsx)(n.code,{children:\"wx.checkSession\"})]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u901A\\u8FC7 wx.login \\u63A5\\u53E3\\u83B7\\u5F97\\u7684\\u7528\\u6237\\u767B\\u5F55\\u6001\\u62E5\\u6709\\u4E00\\u5B9A\\u7684\\u65F6\\u6548\\u6027\\u3002\\u7528\\u6237\\u8D8A\\u4E45\\u672A\\u4F7F\\u7528\\u5C0F\\u7A0B\\u5E8F\\uFF0C\\u7528\\u6237\\u767B\\u5F55\\u6001\\u8D8A\\u6709\\u53EF\\u80FD\\u5931\\u6548\\u3002\\u53CD\\u4E4B\\u5982\\u679C\\u7528\\u6237\\u4E00\\u76F4\\u5728\\u4F7F\\u7528\\u5C0F\\u7A0B\\u5E8F\\uFF0C\\u5219\\u7528\\u6237\\u767B\\u5F55\\u6001\\u4E00\\u76F4\\u4FDD\\u6301\\u6709\\u6548\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"app.js\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\n\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"reference\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#reference\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/75team/w3c/blob/master/articles/20181001_chunpu_%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B-%E9%99%84%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BB%A3%E7%A0%81.md\",children:\"\\u5F7B\\u5E95\\u641E\\u61C2\\u5C0F\\u7A0B\\u5E8F\\u767B\\u5F55\\u6D41\\u7A0B-\\u9644\\u5C0F\\u7A0B\\u5E8F\\u548C\\u670D\\u52A1\\u7AEF\"})})]})}function A(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(t,l)})):t(l)}var f=A;return B(w);})();\n;return Component;"
    },
    "_id": "post/2024-12-09-wx-miniprogram-login.md",
    "_raw": {
      "sourceFilePath": "post/2024-12-09-wx-miniprogram-login.md",
      "sourceFileName": "2024-12-09-wx-miniprogram-login.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-12-09-wx-miniprogram-login"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-12-09-wx-miniprogram-login",
    "slugAsParams": "2024-12-09-wx-miniprogram-login"
  },
  {
    "title": "Vite快速构建react+ts项目",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "url": null,
    "description": null,
    "date": "2024-12-11T00:00:00.000Z",
    "body": {
      "raw": "## vite &  webpack\n虽说以前都用webpack搭react，但是webpack实在是太慢了。下面从一下几方面总结了一下vite和webpack的优缺点：\n\n> 1. 构建速度：Vite是基于现代浏览器原生 ES 模块解析方式构建，不需要打出中间包，因此它在热更新、构建速度等方面都比Webpack更快。\n> 2. 开发体验：Vite使用了原生模块化的开发方式，不需要像Webpack那样预处理，因此在开发体验上更加灵活。Vite还支持开箱即用的TypeScript支持和Vue单文件组件的开发，使得开发更加高效和符合直觉。\n> 3. 打包功能：虽然Vite在开发体验和构建速度方面更优秀，但是它并不能取代Webpack的打包功能。Webpack的打包能力更强大，支持多种打包方式，例如代码分割、异步加载等，适用于大型项目的开发。\n\n总的来说，Vite更偏向于开发体验和快速开发，提供了更好的开箱即用的Vue单文件组件和TypeScript支持，而Webpack则更偏向于打包功能和应用于大型项目的开发。\n\n  \n\n## 初始化\n[Vite](https://cn.vitejs.dev/)\n```shell\n\nnpm create vite@latest\nyarn create vite\n\n\nyarn add -D sass\n```\n\n\n\n\n### ts 别名设置\n```bash\nyarn add @types/node -D\n```\n\n`vite.config.ts`\n```ts\nexport default defineConfig({\n  ...,\n  resolve: {\n    alias: {\n      \"~\": path.resolve(__dirname, \"./\"),\n      \"@\": path.resolve(__dirname, \"./src\"),\n    },\n    extensions: [\".tsx\", \".jsx\", \".ts\", \".js\", \".json\"],\n  },\n});\n\n```\n\n`tsconfig.app.json`\n```json\n{\n  \"compilerOptions\": {\n    ...\n    \"paths\": {\n      \"@/*\": [\n        \"./src/*\"\n      ]\n    }\n  },\n}\n\n```\n\n\n### 禁用any\n\n```js\n//  .eslintrc (tslintrc) file :\nrules: {\n    \"@typescript-eslint/no-explicit-any\": \"off\"\n  },\n```\n\n\n\n### tailwindcss\n```bash\nyarn add -D tailwindcss@latest postcss autoprefixer\nnpx tailwindcss init\n```\n\n`tailwind.config.js`\n```js\n\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\"./index.html\", \"./src/**/*.{js,ts,jsx,tsx}\"],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n}\n```\n\n`index.css`\n```css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\n\n### svgr\n```bash\nyarn add -D vite-plugin-svgr\n```\n\n`tsconfig.app,json`\n```json\n{\n  \"compilerOptions\": {\n    ...\n    \"types\": [\n      \"vite-plugin-svgr/client\",\n      \"node\"\n    ],\n  },\n}\n```\n\n\n`vite.config.ts`\n```js\nimport svgr from 'vite-plugin-svgr';\n\nexport default defineConfig({\n  ...,\n  plugins: [\n    react(),\n    svgr({\n      // svgr options: https://react-svgr.com/docs/options/\n      svgrOptions: {\n        exportType: 'default',\n        ref: true,\n        svgo: false,\n        titleProp: true,\n      },\n      // 不用每次写 ?react\n      include: '**/*.svg',\n    }),\n  ],\n});\n\n```\n\n\n`main.tsx`\n```js\n// 未配置include需要写 ?react\nimport IconSvg from \"@/assets/icons/layers.svg?react\"; \n// 未配置include后可省略\nimport IconSvg from \"@/assets/icons/layers.svg\"; \n\n\nfunction App() {\n  return (\n    <><IconSvg /></>\n  );\n}\n```\n\n\n如果需要定制颜色,svg将`fill=\"currentColor\"`,width,height需要定制可将svg中删去，然后组件指定width\n\n## 状态管理器 zustand\n![](assets/2024-12-11-React+Vite+TS-20241211080932.png)\n> [Zustand](https://zustand.docs.pmnd.rs/getting-started/introduction) 是一个轻量级、简洁且强大的 React 状态管理库，旨在为您的 React 项目提供更简单、更灵活的状态管理方式。与其他流行的状态管理库（如 Redux、MobX 等）相比，Zustand 的 API 更加简洁明了，学习成本较低，且无需引入繁琐的中间件和配置。同时，Zustand 支持 TypeScript，让您的项目更具健壮性。\n> 教程：[codthing.github.io/react/zusta…](https://link.juejin.cn/?target=https%3A%2F%2Fcodthing.github.io%2Freact%2Fzustand%2Fzustand-base%2F%23%25E4%25B8%2580%25E5%25AE%2589%25E8%25A3%2585 \"https://codthing.github.io/react/zustand/zustand-base/#%E4%B8%80%E5%AE%89%E8%A3%85\")\n\n\n```bash\nyarn add zustand\n```\n\n\n`src/store/useStore.ts`\n```js\nimport { create } from \"zustand\";\n\ntype GlobalStore = {\n  bears: number;\n\n  increasePopulation: (payload: boolean) => void;\n  removeAllBears: (payload: any) => void;\n  updateBears: (payload: number) => void;\n};\n\nexport const useStore = create<GlobalStore>((set) => ({\n  bears: 0,\n  increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),\n  removeAllBears: () => set({ bears: 0 }),\n  updateBears: (newBears) => set({ bears: newBears }),\n}));\n\n```\n\n\n`main.tsx`\n```js\nimport { useStore } from \"./store/useStore\";\n\nfunction App() {\n  const bears = useStore((state) => state.bears);\n\n  return (\n    <>\n      <h1>{bears} around here...</h1>\n    </>\n  );\n}\n\n```\n\n\n\n\n## UI\n我用的是arco-design ，这个看个人喜好吧\n```bash\nyarn add @arco-design/web-react less @arco-plugins/vite-react\n```\n\n\n定制化主题`vite.config.ts`\n```js\nimport { vitePluginForArco } from \"@arco-plugins/vite-react\";\n\nexport default defineConfig({\n  ...,\n  plugins: [\n    react(),\n    vitePluginForArco({\n      modifyVars: {\n        \"primary-6\": \"#12372a\",\n        \"primary-1\": \"#12372a\",\n        \"primary-2\": \"#12372a\",\n        \"primary-3\": \"#738977\",\n        \"primary-4\": \"#12372a\",\n        \"primary-5\": \"#12372a\",\n        \"primary-7\": \"#0E3227\",\n        \"arcoblue-6\": \"#12372a\",\n        style: true,\n      },\n    }),\n  ],\n});\n```",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),u=(l,e)=>{for(var a in e)s(l,a,{get:e[a],enumerable:!0})},i=(l,e,a,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of E(e))!F.call(l,r)&&r!==a&&s(l,r,{get:()=>e[r],enumerable:!(c=p(e,r))||c.enumerable});return l};var m=(l,e,a)=>(a=l!=null?h(y(l)):{},i(e||!l||!l.__esModule?s(a,\"default\",{value:l,enumerable:!0}):a,l)),B=l=>i(s({},\"__esModule\",{value:!0}),l);var o=g((A,d)=>{d.exports=_jsx_runtime});var k={};u(k,{default:()=>v,frontmatter:()=>b});var n=m(o()),b={title:\"Vite\\u5FEB\\u901F\\u6784\\u5EFAreact+ts\\u9879\\u76EE\",subtitle:null,layout:\"post\",date:new Date(17338752e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],url:null,image:null};function t(l){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",blockquote:\"blockquote\",ol:\"ol\",li:\"li\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",h3:\"h3\",img:\"img\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"vite---webpack\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#vite---webpack\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"vite &  webpack\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u867D\\u8BF4\\u4EE5\\u524D\\u90FD\\u7528webpack\\u642Dreact\\uFF0C\\u4F46\\u662Fwebpack\\u5B9E\\u5728\\u662F\\u592A\\u6162\\u4E86\\u3002\\u4E0B\\u9762\\u4ECE\\u4E00\\u4E0B\\u51E0\\u65B9\\u9762\\u603B\\u7ED3\\u4E86\\u4E00\\u4E0Bvite\\u548Cwebpack\\u7684\\u4F18\\u7F3A\\u70B9\\uFF1A\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u6784\\u5EFA\\u901F\\u5EA6\\uFF1AVite\\u662F\\u57FA\\u4E8E\\u73B0\\u4EE3\\u6D4F\\u89C8\\u5668\\u539F\\u751F ES \\u6A21\\u5757\\u89E3\\u6790\\u65B9\\u5F0F\\u6784\\u5EFA\\uFF0C\\u4E0D\\u9700\\u8981\\u6253\\u51FA\\u4E2D\\u95F4\\u5305\\uFF0C\\u56E0\\u6B64\\u5B83\\u5728\\u70ED\\u66F4\\u65B0\\u3001\\u6784\\u5EFA\\u901F\\u5EA6\\u7B49\\u65B9\\u9762\\u90FD\\u6BD4Webpack\\u66F4\\u5FEB\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u5F00\\u53D1\\u4F53\\u9A8C\\uFF1AVite\\u4F7F\\u7528\\u4E86\\u539F\\u751F\\u6A21\\u5757\\u5316\\u7684\\u5F00\\u53D1\\u65B9\\u5F0F\\uFF0C\\u4E0D\\u9700\\u8981\\u50CFWebpack\\u90A3\\u6837\\u9884\\u5904\\u7406\\uFF0C\\u56E0\\u6B64\\u5728\\u5F00\\u53D1\\u4F53\\u9A8C\\u4E0A\\u66F4\\u52A0\\u7075\\u6D3B\\u3002Vite\\u8FD8\\u652F\\u6301\\u5F00\\u7BB1\\u5373\\u7528\\u7684TypeScript\\u652F\\u6301\\u548CVue\\u5355\\u6587\\u4EF6\\u7EC4\\u4EF6\\u7684\\u5F00\\u53D1\\uFF0C\\u4F7F\\u5F97\\u5F00\\u53D1\\u66F4\\u52A0\\u9AD8\\u6548\\u548C\\u7B26\\u5408\\u76F4\\u89C9\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u6253\\u5305\\u529F\\u80FD\\uFF1A\\u867D\\u7136Vite\\u5728\\u5F00\\u53D1\\u4F53\\u9A8C\\u548C\\u6784\\u5EFA\\u901F\\u5EA6\\u65B9\\u9762\\u66F4\\u4F18\\u79C0\\uFF0C\\u4F46\\u662F\\u5B83\\u5E76\\u4E0D\\u80FD\\u53D6\\u4EE3Webpack\\u7684\\u6253\\u5305\\u529F\\u80FD\\u3002Webpack\\u7684\\u6253\\u5305\\u80FD\\u529B\\u66F4\\u5F3A\\u5927\\uFF0C\\u652F\\u6301\\u591A\\u79CD\\u6253\\u5305\\u65B9\\u5F0F\\uFF0C\\u4F8B\\u5982\\u4EE3\\u7801\\u5206\\u5272\\u3001\\u5F02\\u6B65\\u52A0\\u8F7D\\u7B49\\uFF0C\\u9002\\u7528\\u4E8E\\u5927\\u578B\\u9879\\u76EE\\u7684\\u5F00\\u53D1\\u3002\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u603B\\u7684\\u6765\\u8BF4\\uFF0CVite\\u66F4\\u504F\\u5411\\u4E8E\\u5F00\\u53D1\\u4F53\\u9A8C\\u548C\\u5FEB\\u901F\\u5F00\\u53D1\\uFF0C\\u63D0\\u4F9B\\u4E86\\u66F4\\u597D\\u7684\\u5F00\\u7BB1\\u5373\\u7528\\u7684Vue\\u5355\\u6587\\u4EF6\\u7EC4\\u4EF6\\u548CTypeScript\\u652F\\u6301\\uFF0C\\u800CWebpack\\u5219\\u66F4\\u504F\\u5411\\u4E8E\\u6253\\u5305\\u529F\\u80FD\\u548C\\u5E94\\u7528\\u4E8E\\u5927\\u578B\\u9879\\u76EE\\u7684\\u5F00\\u53D1\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u521D\\u59CB\\u5316\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u521D\\u59CB\\u5316\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u521D\\u59CB\\u5316\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://cn.vitejs.dev/\",children:\"Vite\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"shell\",\"data-theme\":\"github-dark\",raw:`\nnpm create vite@latest\nyarn create vite\n\n\nyarn add -D sass\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"shell\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" create\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" vite@latest\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" create\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" vite\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" sass\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"ts-\\u522B\\u540D\\u8BBE\\u7F6E\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#ts-\\u522B\\u540D\\u8BBE\\u7F6E\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"ts \\u522B\\u540D\\u8BBE\\u7F6E\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`yarn add @types/node -D\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @types/node\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"})]})})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"vite.config.ts\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark\",raw:`export default defineConfig({\n  ...,\n  resolve: {\n    alias: {\n      \"~\": path.resolve(__dirname, \"./\"),\n      \"@\": path.resolve(__dirname, \"./src\"),\n    },\n    extensions: [\".tsx\", \".jsx\", \".ts\", \".js\", \".json\"],\n  },\n});\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" defineConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  ...\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  resolve: {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    alias: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'      \"~\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": path.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(__dirname, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'      \"@\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": path.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(__dirname, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./src\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    extensions: [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\".tsx\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\".jsx\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\".ts\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\".js\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\".json\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"tsconfig.app.json\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"compilerOptions\": {\n    ...\n    \"paths\": {\n      \"@/*\": [\n        \"./src/*\"\n      ]\n    }\n  },\n}\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'  \"compilerOptions\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"    ...\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"paths\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'      \"@/*\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"./src/*\"'})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      ]\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"\\u7981\\u7528any\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u7981\\u7528any\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7981\\u7528any\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`// \\xA0.eslintrc (tslintrc) file :\nrules: {\n    \"@typescript-eslint/no-explicit-any\": \"off\"\n  },\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\xA0.eslintrc (tslintrc) file :\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"rules\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'    \"@typescript-eslint/no-explicit-any\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"off\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"tailwindcss\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#tailwindcss\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"tailwindcss\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`yarn add -D tailwindcss@latest postcss autoprefixer\nnpx tailwindcss init\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" tailwindcss@latest\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" postcss\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" autoprefixer\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"npx\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" tailwindcss\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" init\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"tailwind.config.js\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\"./index.html\", \"./src/**/*.{js,ts,jsx,tsx}\"],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/** \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@type\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {import('tailwindcss').Config}\"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"module\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"exports\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  content: [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./index.html\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./src/**/*.{js,ts,jsx,tsx}\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  theme: {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    extend: {},\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  plugins: [],\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"index.css\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"css\",\"data-theme\":\"github-dark\",raw:`@tailwind base;\n@tailwind components;\n@tailwind utilities;\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"css\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@tailwind\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" base;\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@tailwind\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" components;\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@tailwind\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" utilities;\"})]})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"svgr\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#svgr\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"svgr\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`yarn add -D vite-plugin-svgr\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" -D\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" vite-plugin-svgr\"})]})})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"tsconfig.app,json\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"compilerOptions\": {\n    ...\n    \"types\": [\n      \"vite-plugin-svgr/client\",\n      \"node\"\n    ],\n  },\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'  \"compilerOptions\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"    ...\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"types\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'      \"vite-plugin-svgr/client\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'      \"node\"'})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"vite.config.ts\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import svgr from 'vite-plugin-svgr';\n\nexport default defineConfig({\n  ...,\n  plugins: [\n    react(),\n    svgr({\n      // svgr options: https://react-svgr.com/docs/options/\n      svgrOptions: {\n        exportType: 'default',\n        ref: true,\n        svgo: false,\n        titleProp: true,\n      },\n      // \\u4E0D\\u7528\\u6BCF\\u6B21\\u5199 ?react\n      include: '**/*.svg',\n    }),\n  ],\n});\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" svgr \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'vite-plugin-svgr'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" defineConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  ...\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  plugins: [\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    react\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    svgr\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"      // svgr options: https://react-svgr.com/docs/options/\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      svgrOptions: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        exportType: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'default'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        ref: \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        svgo: \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        titleProp: \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"      // \\u4E0D\\u7528\\u6BCF\\u6B21\\u5199 ?react\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      include: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'**/*.svg'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }),\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ],\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"main.tsx\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`// \\u672A\\u914D\\u7F6Einclude\\u9700\\u8981\\u5199 ?react\nimport IconSvg from \"@/assets/icons/layers.svg?react\"; \n// \\u672A\\u914D\\u7F6Einclude\\u540E\\u53EF\\u7701\\u7565\nimport IconSvg from \"@/assets/icons/layers.svg\"; \n\n\nfunction App() {\n  return (\n    <><IconSvg /></>\n  );\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u672A\\u914D\\u7F6Einclude\\u9700\\u8981\\u5199 ?react\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" IconSvg \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"@/assets/icons/layers.svg?react\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; \"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u672A\\u914D\\u7F6Einclude\\u540E\\u53EF\\u7701\\u7565\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" IconSvg \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"@/assets/icons/layers.svg\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; \"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" App\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    <><\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"IconSvg\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" /></>\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5982\\u679C\\u9700\\u8981\\u5B9A\\u5236\\u989C\\u8272,svg\\u5C06\",(0,n.jsx)(e.code,{children:'fill=\"currentColor\"'}),\",width,height\\u9700\\u8981\\u5B9A\\u5236\\u53EF\\u5C06svg\\u4E2D\\u5220\\u53BB\\uFF0C\\u7136\\u540E\\u7EC4\\u4EF6\\u6307\\u5B9Awidth\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\u72B6\\u6001\\u7BA1\\u7406\\u5668-zustand\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u72B6\\u6001\\u7BA1\\u7406\\u5668-zustand\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u72B6\\u6001\\u7BA1\\u7406\\u5668 zustand\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/post/assets/2024-12-11-React+Vite+TS-20241211080932.png\",alt:\"\",width:\"1200\",height:\"600\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAMFBMVEUOHwk6HigoHBxkQjccIxQOKQktLScXFxM1Mxx/Y3BULD5ASkpbRl9eVWOHZDBQLDyLtW5pAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJklEQVR4nAXBhQEAMAjAsOLz/f8tCZHri4gTajaPAvrs7gIYWTgNC8YAm5y2fhgAAAAASUVORK5CYII=\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/getting-started/introduction\",children:\"Zustand\"}),` \\u662F\\u4E00\\u4E2A\\u8F7B\\u91CF\\u7EA7\\u3001\\u7B80\\u6D01\\u4E14\\u5F3A\\u5927\\u7684 React \\u72B6\\u6001\\u7BA1\\u7406\\u5E93\\uFF0C\\u65E8\\u5728\\u4E3A\\u60A8\\u7684 React \\u9879\\u76EE\\u63D0\\u4F9B\\u66F4\\u7B80\\u5355\\u3001\\u66F4\\u7075\\u6D3B\\u7684\\u72B6\\u6001\\u7BA1\\u7406\\u65B9\\u5F0F\\u3002\\u4E0E\\u5176\\u4ED6\\u6D41\\u884C\\u7684\\u72B6\\u6001\\u7BA1\\u7406\\u5E93\\uFF08\\u5982 Redux\\u3001MobX \\u7B49\\uFF09\\u76F8\\u6BD4\\uFF0CZustand \\u7684 API \\u66F4\\u52A0\\u7B80\\u6D01\\u660E\\u4E86\\uFF0C\\u5B66\\u4E60\\u6210\\u672C\\u8F83\\u4F4E\\uFF0C\\u4E14\\u65E0\\u9700\\u5F15\\u5165\\u7E41\\u7410\\u7684\\u4E2D\\u95F4\\u4EF6\\u548C\\u914D\\u7F6E\\u3002\\u540C\\u65F6\\uFF0CZustand \\u652F\\u6301 TypeScript\\uFF0C\\u8BA9\\u60A8\\u7684\\u9879\\u76EE\\u66F4\\u5177\\u5065\\u58EE\\u6027\\u3002\n\\u6559\\u7A0B\\uFF1A`,(0,n.jsx)(e.a,{href:\"https://link.juejin.cn/?target=https%3A%2F%2Fcodthing.github.io%2Freact%2Fzustand%2Fzustand-base%2F%23%25E4%25B8%2580%25E5%25AE%2589%25E8%25A3%2585\",title:\"https://codthing.github.io/react/zustand/zustand-base/#%E4%B8%80%E5%AE%89%E8%A3%85\",children:\"codthing.github.io/react/zusta\\u2026\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`yarn add zustand\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" zustand\"})]})})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"src/store/useStore.ts\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import { create } from \"zustand\";\n\ntype GlobalStore = {\n  bears: number;\n\n  increasePopulation: (payload: boolean) => void;\n  removeAllBears: (payload: any) => void;\n  updateBears: (payload: number) => void;\n};\n\nexport const useStore = create<GlobalStore>((set) => ({\n  bears: 0,\n  increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),\n  removeAllBears: () => set({ bears: 0 }),\n  updateBears: (newBears) => set({ bears: newBears }),\n}));\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { create } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"zustand\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"type\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" GlobalStore\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"  bears\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  increasePopulation\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"payload\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" void\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  removeAllBears\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"payload\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" void\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  updateBears\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"payload\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" void\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" useStore\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" create\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"GlobalStore\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"set\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" ({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  bears: \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  increasePopulation\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": () \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" set\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"state\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" ({ bears: state.bears \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" })),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  removeAllBears\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": () \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" set\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ bears: \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  updateBears\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"newBears\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" set\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ bears: newBears }),\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}));\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"main.tsx\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import { useStore } from \"./store/useStore\";\n\nfunction App() {\n  const bears = useStore((state) => state.bears);\n\n  return (\n    <>\n      <h1>{bears} around here...</h1>\n    </>\n  );\n}\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { useStore } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"./store/useStore\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" App\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" bears\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useStore\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"state\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" state.bears);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    <>\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"h1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">{bears} around here...</\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"h1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    </>\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"ui\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#ui\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"UI\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6211\\u7528\\u7684\\u662Farco-design \\uFF0C\\u8FD9\\u4E2A\\u770B\\u4E2A\\u4EBA\\u559C\\u597D\\u5427\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`yarn add @arco-design/web-react less @arco-plugins/vite-react\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" add\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @arco-design/web-react\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" less\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" @arco-plugins/vite-react\"})]})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B9A\\u5236\\u5316\\u4E3B\\u9898\",(0,n.jsx)(e.code,{children:\"vite.config.ts\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import { vitePluginForArco } from \"@arco-plugins/vite-react\";\n\nexport default defineConfig({\n  ...,\n  plugins: [\n    react(),\n    vitePluginForArco({\n      modifyVars: {\n        \"primary-6\": \"#12372a\",\n        \"primary-1\": \"#12372a\",\n        \"primary-2\": \"#12372a\",\n        \"primary-3\": \"#738977\",\n        \"primary-4\": \"#12372a\",\n        \"primary-5\": \"#12372a\",\n        \"primary-7\": \"#0E3227\",\n        \"arcoblue-6\": \"#12372a\",\n        style: true,\n      },\n    }),\n  ],\n});\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { vitePluginForArco } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"@arco-plugins/vite-react\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" defineConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  ...\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  plugins: [\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    react\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    vitePluginForArco\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      modifyVars: {\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"primary-6\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"#12372a\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"primary-1\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"#12372a\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"primary-2\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"#12372a\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"primary-3\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"#738977\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"primary-4\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"#12372a\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"primary-5\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"#12372a\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"primary-7\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"#0E3227\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'        \"arcoblue-6\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"#12372a\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        style: \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }),\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ],\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})})})]})}function f(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(t,l)})):t(l)}var v=f;return B(k);})();\n;return Component;"
    },
    "_id": "post/2024-12-11-React+Vite+TS.md",
    "_raw": {
      "sourceFilePath": "post/2024-12-11-React+Vite+TS.md",
      "sourceFileName": "2024-12-11-React+Vite+TS.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-12-11-React+Vite+TS"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-12-11-React+Vite+TS",
    "slugAsParams": "2024-12-11-React+Vite+TS"
  },
  {
    "title": "微信小程序分包",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-12-13T00:00:00.000Z",
    "body": {
      "raw": "微信小程序真机调试会有包体积限制，单包不能超过2MB，查了一下依赖，大部分是npm构建的依赖。好在微信自己提供的分包的能力\n\n| ![](assets/2024-12-13-wx-miniprogram-subpackage-20241213114128.png) | ![](assets/2024-12-13-wx-miniprogram-subpackage-20241213114344.png) |\n|--|--|\n\n\n\n## 分包\n>  [官方教程](https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html)\n\n我将其中一个功能模块word进行拆分，\n```\n├── app.js\n├── app.json\n├── app.wxss\n├── pages\n│   ├── index\n|———└── pageA\n│       └── index\n|———└── word\n│       ├── index\n│       ├── learn\n│             └── learn\n│       ├── review\n│             └── review\n└── utils\n```\n\n `app.json`， 注意⚠️：\n - `tabBar` 页面必须在主包内\n - `subPackages` 的根目录不能是另外一个 `subPackages` 内的子目录\n - **子包之间无法相互引用，但是可以引用主包文件**，反过来不行\n\n```json\n  \"pages\":[],//主包页面\n  \"subPackages\": [\n    {\n      \"name\": \"word\",\n      \"root\": \"pages/word\",\n      \"pages\": [\n        \"index\",\n        \"learn/learn\",\n        \"review/review\",\n      ]\n    },\n  ],\n```\n\n至此，就完成了一个功能模块的拆分，但还主包体积还是很大，主要是UI库、Echart的体积太大，还需要继续拆分。UI库可以删去miniprogram_npm中不用的依赖，但是拆分起来太麻烦了。而且还要解决子包之间的相互引用问题\n\n## 分包异步化组件\n\n\n一个分包使用其他分包的自定义组件时，由于其他分包还未下载或注入，其他分包的组件处于不可用的状态。通过为其他分包的自定义组件设置 [占位组件](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/placeholder.html)，我们可以先渲染占位组件作为替代，在分包下载完成后再进行替换。\n\n\n先封装一个通用的echart组件\n`baseChart.json`\n```json\n{\n  \"component\": true,\n  \"usingComponents\": {\n    \"ec-canvas\": \"../ec-canvas/ec-canvas\"\n  }\n}\n```\n\n\n`baseChart.wxml`\n\n```html\n<view style=\"height: {{height}};width:100%\">\n  <ec-canvas\n    id=\"{{chartId}}\"\n    canvas-id=\"{{canvasId}}\"\n    ec=\"{{ ec }}\"\n  ></ec-canvas>\n</view>\n```\n\n`baseChart.js`\n```js\nimport * as echarts from \"../ec-canvas/echarts\";\n\nComponent({\n  properties: {\n    height: {\n      type: String,\n    },\n    option: {\n      type: Object,\n    },\n  },\n  observers: {\n    option: function (val) {\n      setTimeout(() => {\n        this.initChart(val || {});\n      }, 0);\n    },\n  },\n  data: {\n    chartId: \"\",\n    canvasId: \"\",\n    ec: {\n      lazyload: true,\n    },\n  },\n  lifetimes: {\n    attached() {\n      this.setData({\n        chartId: `chart_${this.__wxExparserNodeId__}`,\n        canvasId: `canvas_${this.__wxExparserNodeId__}`,\n      });\n      this.chartComp = this.selectComponent(`#${this.data.chartId}`);\n    },\n  },\n  methods: {\n    initChart(option) {\n      this.chartComp &&\n        this.chartComp.init((canvas, width, height, dpr) => {\n          const chart = echarts.init(canvas, null, {\n            width: width,\n            height: height,\n            devicePixelRatio: dpr,\n          });\n          if (option.tooltip) {\n            Object.assign(option.tooltip, {\n              confine: true,\n              shadowBlur: 0,\n              shadowColor: \"#e7e8e8\",\n              shadowOffsetY: 0,\n              shadowOffsetX: 0,\n              borderColor: \"#e7e8e8\",\n              padding: [\n                5, // 上\n                20, // 右\n                5, // 下\n                20, // 左\n              ],\n            });\n          }\n\n          chart.setOption(option);\n          this.chart = chart;\n          return chart;\n        });\n    },\n  },\n});\n\n```\n\n\n然后在主包页面`setting.json`中调用 \n```json\n{\n  \"usingComponents\": {\n    \"t-chart\": \"/echarts/baseChart/baseChart\"\n  },\n  // 占位组件\n   \"componentPlaceholder\": {\n    \"t-chart\": \"view\"\n  }\n}\n```\n\n\n```html\n<t-chart option=\"{{option}}\" height=\"300rpx\"></t-chart>\n```\n\n\n`app.json`\n\n利用分包预下载的能里，在使用异步组件的页面提前加载分包。\n```json\n\"subPackages\": [\n    {\n      \"name\": \"echarts\",\n      \"root\": \"echarts\",\n      \"pages\": [\n        \"ec-canvas/ec-canvas\",\n        \"baseChart/baseChart\",\n      ]\n    }\n  ],\n  \"preloadRule\": {\n    \"pages/settings/index\": {\n      \"network\": \"all\",\n      \"packages\": [\"echarts\"]\n    }\n  },\n```\n\n成功后控制台会输出，若未成功可以重启下开发工具\n```bash\npreloadSubpackages: components\npreloadSubpackages: success\n```\n\n![](assets/2024-12-13-wx-miniprogram-subpackage-20241213012018.png)",
      "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var g=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),A=(l,n)=>{for(var a in n)c(l,a,{get:n[a],enumerable:!0})},o=(l,n,a,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of E(n))!F.call(l,r)&&r!==a&&c(l,r,{get:()=>n[r],enumerable:!(s=p(n,r))||s.enumerable});return l};var B=(l,n,a)=>(a=l!=null?h(y(l)):{},o(n||!l||!l.__esModule?c(a,\"default\",{value:l,enumerable:!0}):a,l)),m=l=>o(c({},\"__esModule\",{value:!0}),l);var t=g((k,i)=>{i.exports=_jsx_runtime});var w={};A(w,{default:()=>b,frontmatter:()=>u});var e=B(t()),u={title:\"\\u5FAE\\u4FE1\\u5C0F\\u7A0B\\u5E8F\\u5206\\u5305\",subtitle:null,layout:\"post\",date:new Date(1734048e6),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function d(l){let n=Object.assign({p:\"p\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",img:\"img\",h2:\"h2\",a:\"a\",span:\"span\",blockquote:\"blockquote\",div:\"div\",pre:\"pre\",code:\"code\",strong:\"strong\",figure:\"figure\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\u5FAE\\u4FE1\\u5C0F\\u7A0B\\u5E8F\\u771F\\u673A\\u8C03\\u8BD5\\u4F1A\\u6709\\u5305\\u4F53\\u79EF\\u9650\\u5236\\uFF0C\\u5355\\u5305\\u4E0D\\u80FD\\u8D85\\u8FC72MB\\uFF0C\\u67E5\\u4E86\\u4E00\\u4E0B\\u4F9D\\u8D56\\uFF0C\\u5927\\u90E8\\u5206\\u662Fnpm\\u6784\\u5EFA\\u7684\\u4F9D\\u8D56\\u3002\\u597D\\u5728\\u5FAE\\u4FE1\\u81EA\\u5DF1\\u63D0\\u4F9B\\u7684\\u5206\\u5305\\u7684\\u80FD\\u529B\"}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-13-wx-miniprogram-subpackage-20241213114128.png\",alt:\"\",width:\"722\",height:\"508\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAElBMVEUyMjJEREQ4Ojg7PTsyP0ZGaU3PP7oEAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAJUlEQVR4nDXKsQEAMAiEQOR1/5VTaK4F5JRJFGpB92+gZrea8QEFbAA5yUPWHgAAAABJRU5ErkJggg==\"})}),(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-13-wx-miniprogram-subpackage-20241213114344.png\",alt:\"\",width:\"1652\",height:\"1494\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAFVBMVEVMRDBVVVVBQD1NTEtFRUJiYmI4PDmS/gvPAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAK0lEQVR4nEXKyQkAMAzEwD3df8khJhC95iFEUhxhQrMetOSCWwTJuRdeHwcS0wB47lxHbQAAAABJRU5ErkJggg==\"})})]})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5206\\u5305\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5206\\u5305\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5206\\u5305\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html\",children:\"\\u5B98\\u65B9\\u6559\\u7A0B\"})}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u5C06\\u5176\\u4E2D\\u4E00\\u4E2A\\u529F\\u80FD\\u6A21\\u5757word\\u8FDB\\u884C\\u62C6\\u5206\\uFF0C\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.pre,{raw:`\\u251C\\u2500\\u2500 app.js\n\\u251C\\u2500\\u2500 app.json\n\\u251C\\u2500\\u2500 app.wxss\n\\u251C\\u2500\\u2500 pages\n\\u2502   \\u251C\\u2500\\u2500 index\n|\\u2014\\u2014\\u2014\\u2514\\u2500\\u2500 pageA\n\\u2502       \\u2514\\u2500\\u2500 index\n|\\u2014\\u2014\\u2014\\u2514\\u2500\\u2500 word\n\\u2502       \\u251C\\u2500\\u2500 index\n\\u2502       \\u251C\\u2500\\u2500 learn\n\\u2502             \\u2514\\u2500\\u2500 learn\n\\u2502       \\u251C\\u2500\\u2500 review\n\\u2502             \\u2514\\u2500\\u2500 review\n\\u2514\\u2500\\u2500 utils\n`,children:(0,e.jsx)(n.code,{children:`\\u251C\\u2500\\u2500 app.js\n\\u251C\\u2500\\u2500 app.json\n\\u251C\\u2500\\u2500 app.wxss\n\\u251C\\u2500\\u2500 pages\n\\u2502   \\u251C\\u2500\\u2500 index\n|\\u2014\\u2014\\u2014\\u2514\\u2500\\u2500 pageA\n\\u2502       \\u2514\\u2500\\u2500 index\n|\\u2014\\u2014\\u2014\\u2514\\u2500\\u2500 word\n\\u2502       \\u251C\\u2500\\u2500 index\n\\u2502       \\u251C\\u2500\\u2500 learn\n\\u2502             \\u2514\\u2500\\u2500 learn\n\\u2502       \\u251C\\u2500\\u2500 review\n\\u2502             \\u2514\\u2500\\u2500 review\n\\u2514\\u2500\\u2500 utils\n`})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\xA0\",(0,e.jsx)(n.code,{children:\"app.json\"}),`\\uFF0C\\xA0\\u6CE8\\u610F\\u26A0\\uFE0F\\uFF1A\n\\xA0- `,(0,e.jsx)(n.code,{children:\"tabBar\"}),`\\xA0\\u9875\\u9762\\u5FC5\\u987B\\u5728\\u4E3B\\u5305\\u5185\n\\xA0- `,(0,e.jsx)(n.code,{children:\"subPackages\"}),\"\\xA0\\u7684\\u6839\\u76EE\\u5F55\\u4E0D\\u80FD\\u662F\\u53E6\\u5916\\u4E00\\u4E2A\\xA0\",(0,e.jsx)(n.code,{children:\"subPackages\"}),`\\xA0\\u5185\\u7684\\u5B50\\u76EE\\u5F55\n\\xA0- `,(0,e.jsx)(n.strong,{children:\"\\u5B50\\u5305\\u4E4B\\u95F4\\u65E0\\u6CD5\\u76F8\\u4E92\\u5F15\\u7528\\uFF0C\\u4F46\\u662F\\u53EF\\u4EE5\\u5F15\\u7528\\u4E3B\\u5305\\u6587\\u4EF6\"}),\"\\uFF0C\\u53CD\\u8FC7\\u6765\\u4E0D\\u884C\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`  \"pages\":[],//\\u4E3B\\u5305\\u9875\\u9762\n  \"subPackages\": [\n    {\n      \"name\": \"word\",\n      \"root\": \"pages/word\",\n      \"pages\": [\n        \"index\",\n        \"learn/learn\",\n        \"review/review\",\n      ]\n    },\n  ],\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'  \"pages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":[],\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"//\\u4E3B\\u5305\\u9875\\u9762\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'  \"subPackages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"name\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"word\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"root\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"pages/word\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"pages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"index\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"learn/learn\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"review/review\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      ]\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  ],\"})})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u81F3\\u6B64\\uFF0C\\u5C31\\u5B8C\\u6210\\u4E86\\u4E00\\u4E2A\\u529F\\u80FD\\u6A21\\u5757\\u7684\\u62C6\\u5206\\uFF0C\\u4F46\\u8FD8\\u4E3B\\u5305\\u4F53\\u79EF\\u8FD8\\u662F\\u5F88\\u5927\\uFF0C\\u4E3B\\u8981\\u662FUI\\u5E93\\u3001Echart\\u7684\\u4F53\\u79EF\\u592A\\u5927\\uFF0C\\u8FD8\\u9700\\u8981\\u7EE7\\u7EED\\u62C6\\u5206\\u3002UI\\u5E93\\u53EF\\u4EE5\\u5220\\u53BBminiprogram_npm\\u4E2D\\u4E0D\\u7528\\u7684\\u4F9D\\u8D56\\uFF0C\\u4F46\\u662F\\u62C6\\u5206\\u8D77\\u6765\\u592A\\u9EBB\\u70E6\\u4E86\\u3002\\u800C\\u4E14\\u8FD8\\u8981\\u89E3\\u51B3\\u5B50\\u5305\\u4E4B\\u95F4\\u7684\\u76F8\\u4E92\\u5F15\\u7528\\u95EE\\u9898\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5206\\u5305\\u5F02\\u6B65\\u5316\\u7EC4\\u4EF6\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5206\\u5305\\u5F02\\u6B65\\u5316\\u7EC4\\u4EF6\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5206\\u5305\\u5F02\\u6B65\\u5316\\u7EC4\\u4EF6\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E00\\u4E2A\\u5206\\u5305\\u4F7F\\u7528\\u5176\\u4ED6\\u5206\\u5305\\u7684\\u81EA\\u5B9A\\u4E49\\u7EC4\\u4EF6\\u65F6\\uFF0C\\u7531\\u4E8E\\u5176\\u4ED6\\u5206\\u5305\\u8FD8\\u672A\\u4E0B\\u8F7D\\u6216\\u6CE8\\u5165\\uFF0C\\u5176\\u4ED6\\u5206\\u5305\\u7684\\u7EC4\\u4EF6\\u5904\\u4E8E\\u4E0D\\u53EF\\u7528\\u7684\\u72B6\\u6001\\u3002\\u901A\\u8FC7\\u4E3A\\u5176\\u4ED6\\u5206\\u5305\\u7684\\u81EA\\u5B9A\\u4E49\\u7EC4\\u4EF6\\u8BBE\\u7F6E\\xA0\",(0,e.jsx)(n.a,{href:\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/placeholder.html\",children:\"\\u5360\\u4F4D\\u7EC4\\u4EF6\"}),\"\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5148\\u6E32\\u67D3\\u5360\\u4F4D\\u7EC4\\u4EF6\\u4F5C\\u4E3A\\u66FF\\u4EE3\\uFF0C\\u5728\\u5206\\u5305\\u4E0B\\u8F7D\\u5B8C\\u6210\\u540E\\u518D\\u8FDB\\u884C\\u66FF\\u6362\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[`\\u5148\\u5C01\\u88C5\\u4E00\\u4E2A\\u901A\\u7528\\u7684echart\\u7EC4\\u4EF6\n`,(0,e.jsx)(n.code,{children:\"baseChart.json\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"component\": true,\n  \"usingComponents\": {\n    \"ec-canvas\": \"../ec-canvas/ec-canvas\"\n  }\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'  \"component\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'  \"usingComponents\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'    \"ec-canvas\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"../ec-canvas/ec-canvas\"'})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"baseChart.wxml\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"html\",\"data-theme\":\"github-dark\",raw:`<view style=\"height: {{height}};width:100%\">\n  <ec-canvas\n    id=\"{{chartId}}\"\n    canvas-id=\"{{canvasId}}\"\n    ec=\"{{ ec }}\"\n  ></ec-canvas>\n</view>\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"html\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,e.jsx)(n.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"view\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" style\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"height: {{height}};width:100%\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"ec-canvas\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    id\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"{{chartId}}\"'})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    canvas-id\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"{{canvasId}}\"'})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    ec\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"{{ ec }}\"'})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  ></\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"ec-canvas\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"</\"}),(0,e.jsx)(n.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"view\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"baseChart.js\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import * as echarts from \"../ec-canvas/echarts\";\n\nComponent({\n  properties: {\n    height: {\n      type: String,\n    },\n    option: {\n      type: Object,\n    },\n  },\n  observers: {\n    option: function (val) {\n      setTimeout(() => {\n        this.initChart(val || {});\n      }, 0);\n    },\n  },\n  data: {\n    chartId: \"\",\n    canvasId: \"\",\n    ec: {\n      lazyload: true,\n    },\n  },\n  lifetimes: {\n    attached() {\n      this.setData({\n        chartId: \\`chart_\\${this.__wxExparserNodeId__}\\`,\n        canvasId: \\`canvas_\\${this.__wxExparserNodeId__}\\`,\n      });\n      this.chartComp = this.selectComponent(\\`#\\${this.data.chartId}\\`);\n    },\n  },\n  methods: {\n    initChart(option) {\n      this.chartComp &&\n        this.chartComp.init((canvas, width, height, dpr) => {\n          const chart = echarts.init(canvas, null, {\n            width: width,\n            height: height,\n            devicePixelRatio: dpr,\n          });\n          if (option.tooltip) {\n            Object.assign(option.tooltip, {\n              confine: true,\n              shadowBlur: 0,\n              shadowColor: \"#e7e8e8\",\n              shadowOffsetY: 0,\n              shadowOffsetX: 0,\n              borderColor: \"#e7e8e8\",\n              padding: [\n                5, // \\u4E0A\n                20, // \\u53F3\n                5, // \\u4E0B\n                20, // \\u5DE6\n              ],\n            });\n          }\n\n          chart.setOption(option);\n          this.chart = chart;\n          return chart;\n        });\n    },\n  },\n});\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" *\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" echarts \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"../ec-canvas/echarts\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"Component\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  properties: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    height: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      type: String,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    option: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      type: Object,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  observers: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    option\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"val\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"      setTimeout\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"initChart\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(val \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {});\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      }, \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  data: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    chartId: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    canvasId: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    ec: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      lazyload: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  lifetimes: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    attached\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"setData\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        chartId: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"`chart_${\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"__wxExparserNodeId__\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        canvasId: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"`canvas_${\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"__wxExparserNodeId__\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".chartComp \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"selectComponent\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"`#${\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"data\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"chartId\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  methods: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    initChart\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"option\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".chartComp \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"&&\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".chartComp.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"init\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"canvas\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"width\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"height\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"dpr\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"          const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" chart\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" echarts.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"init\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(canvas, \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            width: width,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            height: height,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            devicePixelRatio: dpr,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          });\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"          if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (option.tooltip) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            Object.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"assign\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(option.tooltip, {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              confine: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              shadowBlur: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              shadowColor: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"#e7e8e8\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              shadowOffsetY: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              shadowOffsetX: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              borderColor: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"#e7e8e8\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              padding: [\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"                5\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u4E0A\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"                20\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u53F3\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"                5\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u4E0B\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"                20\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u5DE6\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          chart.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"setOption\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(option);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"          this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".chart \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" chart;\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"          return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" chart;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7136\\u540E\\u5728\\u4E3B\\u5305\\u9875\\u9762\",(0,e.jsx)(n.code,{children:\"setting.json\"}),\"\\u4E2D\\u8C03\\u7528\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"usingComponents\": {\n    \"t-chart\": \"/echarts/baseChart/baseChart\"\n  },\n  // \\u5360\\u4F4D\\u7EC4\\u4EF6\n   \"componentPlaceholder\": {\n    \"t-chart\": \"view\"\n  }\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'  \"usingComponents\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'    \"t-chart\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"/echarts/baseChart/baseChart\"'})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u5360\\u4F4D\\u7EC4\\u4EF6\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'   \"componentPlaceholder\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'    \"t-chart\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"view\"'})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"html\",\"data-theme\":\"github-dark\",raw:`<t-chart option=\"{{option}}\" height=\"300rpx\"></t-chart>\n`,children:(0,e.jsx)(n.code,{\"data-language\":\"html\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"t-chart\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" option\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"{{option}}\"'}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" height\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"300rpx\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"t-chart\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]})})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"app.json\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5229\\u7528\\u5206\\u5305\\u9884\\u4E0B\\u8F7D\\u7684\\u80FD\\u91CC\\uFF0C\\u5728\\u4F7F\\u7528\\u5F02\\u6B65\\u7EC4\\u4EF6\\u7684\\u9875\\u9762\\u63D0\\u524D\\u52A0\\u8F7D\\u5206\\u5305\\u3002\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`\"subPackages\": [\n    {\n      \"name\": \"echarts\",\n      \"root\": \"echarts\",\n      \"pages\": [\n        \"ec-canvas/ec-canvas\",\n        \"baseChart/baseChart\",\n      ]\n    }\n  ],\n  \"preloadRule\": {\n    \"pages/settings/index\": {\n      \"network\": \"all\",\n      \"packages\": [\"echarts\"]\n    }\n  },\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"subPackages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"name\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"echarts\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"root\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"echarts\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"pages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"ec-canvas/ec-canvas\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"baseChart/baseChart\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      ]\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  ],\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'  \"preloadRule\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'    \"pages/settings/index\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"network\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"all\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"packages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"echarts\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6210\\u529F\\u540E\\u63A7\\u5236\\u53F0\\u4F1A\\u8F93\\u51FA\\uFF0C\\u82E5\\u672A\\u6210\\u529F\\u53EF\\u4EE5\\u91CD\\u542F\\u4E0B\\u5F00\\u53D1\\u5DE5\\u5177\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`preloadSubpackages: components\npreloadSubpackages: success\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"preloadSubpackages:\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" components\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"preloadSubpackages:\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" success\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-13-wx-miniprogram-subpackage-20241213012018.png\",alt:\"\",width:\"734\",height:\"378\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAABlBMVEU3NzctLS2Xhfl9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAFUlEQVR4nGNgAAFGRkYwAaIgXGQGAAE2ABEOdESgAAAAAElFTkSuQmCC\"})})]})}function C(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(d,l)})):d(l)}var b=C;return m(w);})();\n;return Component;"
    },
    "_id": "post/2024-12-13-wx-miniprogram-subpackage.md",
    "_raw": {
      "sourceFilePath": "post/2024-12-13-wx-miniprogram-subpackage.md",
      "sourceFileName": "2024-12-13-wx-miniprogram-subpackage.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-12-13-wx-miniprogram-subpackage"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-12-13-wx-miniprogram-subpackage",
    "slugAsParams": "2024-12-13-wx-miniprogram-subpackage"
  },
  {
    "title": "nvm&node 环境配置",
    "tags": [
      "Front"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2024-12-30T00:00:00.000Z",
    "body": {
      "raw": "## nvm \n\n前往[https://github.com/nvm-sh/nvm/releases](https://github.com/nvm-sh/nvm/releases)确认目前nvm最新版本\n\n```bash\n# 二者选其一，注意wget命令里的-q参数表示--quiet，安静模式，无信息输出，看不到错误，也可去掉该参数\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\n\nwget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash\n\n```\n\n\n\n**nvm 常用命令**\n```bash\n\nnvm install [version]\nnvm use [version]\n# 设置默认版本\nnvm alias default [version]\n\nnvm list\n\nnvm current\n```\n\n\n**镜像源**\n```bash\n\n# 设置npm镜像源\nnpm config set registry https://registry.npmmirror.com\n\n# 验证npm镜像源\nnpm config get registry\n\nnpm install -g yarn\n\n# 设置yarn镜像源\nyarn config set registry https://registry.npmmirror.com\n\n# 验证yarn镜像源\nyarn config get registry\n\n```",
      "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var F=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),u=(l,n)=>{for(var r in n)s(l,r,{get:n[r],enumerable:!0})},i=(l,n,r,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let a of y(n))!g.call(l,a)&&a!==r&&s(l,a,{get:()=>n[a],enumerable:!(t=p(n,a))||t.enumerable});return l};var v=(l,n,r)=>(r=l!=null?h(m(l)):{},i(n||!l||!l.__esModule?s(r,\"default\",{value:l,enumerable:!0}):r,l)),B=l=>i(s({},\"__esModule\",{value:!0}),l);var o=F((w,c)=>{c.exports=_jsx_runtime});var f={};u(f,{default:()=>C,frontmatter:()=>E});var e=v(o()),E={title:\"nvm&node \\u73AF\\u5883\\u914D\\u7F6E\",subtitle:null,layout:\"post\",date:new Date(17355168e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function d(l){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",strong:\"strong\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"nvm\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#nvm\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nvm\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u524D\\u5F80\",(0,e.jsx)(n.a,{href:\"https://github.com/nvm-sh/nvm/releases\",children:\"https://github.com/nvm-sh/nvm/releases\"}),\"\\u786E\\u8BA4\\u76EE\\u524Dnvm\\u6700\\u65B0\\u7248\\u672C\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`# \\u4E8C\\u8005\\u9009\\u5176\\u4E00\\uFF0C\\u6CE8\\u610Fwget\\u547D\\u4EE4\\u91CC\\u7684-q\\u53C2\\u6570\\u8868\\u793A--quiet\\uFF0C\\u5B89\\u9759\\u6A21\\u5F0F\\uFF0C\\u65E0\\u4FE1\\u606F\\u8F93\\u51FA\\uFF0C\\u770B\\u4E0D\\u5230\\u9519\\u8BEF\\uFF0C\\u4E5F\\u53EF\\u53BB\\u6389\\u8BE5\\u53C2\\u6570\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\n\nwget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u4E8C\\u8005\\u9009\\u5176\\u4E00\\uFF0C\\u6CE8\\u610Fwget\\u547D\\u4EE4\\u91CC\\u7684-q\\u53C2\\u6570\\u8868\\u793A--quiet\\uFF0C\\u5B89\\u9759\\u6A21\\u5F0F\\uFF0C\\u65E0\\u4FE1\\u606F\\u8F93\\u51FA\\uFF0C\\u770B\\u4E0D\\u5230\\u9519\\u8BEF\\uFF0C\\u4E5F\\u53EF\\u53BB\\u6389\\u8BE5\\u53C2\\u6570\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"curl\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -o-\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" |\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" bash\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"wget\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -qO-\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" |\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" bash\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"nvm \\u5E38\\u7528\\u547D\\u4EE4\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`\nnvm install [version]\nnvm use [version]\n# \\u8BBE\\u7F6E\\u9ED8\\u8BA4\\u7248\\u672C\nnvm alias default [version]\n\nnvm list\n\nnvm current\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"nvm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [version]\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"nvm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" use\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [version]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8BBE\\u7F6E\\u9ED8\\u8BA4\\u7248\\u672C\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"nvm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" alias\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" default\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" [version]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"nvm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" list\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"nvm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" current\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`\n# \\u8BBE\\u7F6Enpm\\u955C\\u50CF\\u6E90\nnpm config set registry https://registry.npmmirror.com\n\n# \\u9A8C\\u8BC1npm\\u955C\\u50CF\\u6E90\nnpm config get registry\n\nnpm install -g yarn\n\n# \\u8BBE\\u7F6Eyarn\\u955C\\u50CF\\u6E90\nyarn config set registry https://registry.npmmirror.com\n\n# \\u9A8C\\u8BC1yarn\\u955C\\u50CF\\u6E90\nyarn config get registry\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8BBE\\u7F6Enpm\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" set\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" registry\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://registry.npmmirror.com\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u9A8C\\u8BC1npm\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" registry\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -g\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" yarn\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u8BBE\\u7F6Eyarn\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" set\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" registry\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" https://registry.npmmirror.com\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u9A8C\\u8BC1yarn\\u955C\\u50CF\\u6E90\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"yarn\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" config\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" get\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" registry\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})})]})}function b(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(d,l)})):d(l)}var C=b;return B(f);})();\n;return Component;"
    },
    "_id": "post/2024-12-30-nvm&node.md",
    "_raw": {
      "sourceFilePath": "post/2024-12-30-nvm&node.md",
      "sourceFileName": "2024-12-30-nvm&node.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2024-12-30-nvm&node"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2024-12-30-nvm&node",
    "slugAsParams": "2024-12-30-nvm&node"
  },
  {
    "title": "JS 刷题输入输出模板",
    "tags": [
      "Code"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2025-01-02T00:00:00.000Z",
    "body": {
      "raw": "> 时隔多年重操旧业，又到了刷题的阶段。以前都是C++做题，现在改用js了，但是从来没有了解过JS的输入输出。LeetCode是核心代码模式不需要用户处理输出输出，但是如果面试时ACM模式就寄了。\n\n提前练习输出输出平台：\n[OJ在线编程常见输入输出练习场J](https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fac.nowcoder.com%2Facm%2Fcontest%2F5657&objectId=2240679&objectType=1&isNewArticle=undefined)\n\n## JS\nJavaScript的ACM模式会有两种：`V8模式`、`Nodejs模式`\n### V8模式\n```js\n\n// output \nconsole.log();\n\n// 回输入的一行，字符串形式。需要通过`split`、`parseInt`等方法来得到真正的输入。(这里确实比C++那些要麻烦得多)\nread_line()\n\n\nlet line;\nwhile(line = read_line()) {\n    let nums = line.split(' ');\n\n    let a = +nums[0];    // 将字符串转为数字\n    let b = +nums[1];\n\n    console.log(a + b);\n}\n```\n\n\n\n### NodeJs模式\nNodejs输入主要有三大步骤：\n\n1. 引入`readline`模块\n2. 调用`readline.createInterface()`，创建一个`readline的接口实例`\n3. 监听`line`事件，事件处理函数的参数就是`输入的行`\n\n```js\nconst readline = require('readline');\n\nconst rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout\n});\nrl.on('line', function (line) {\n    // \n});\n```\n\n",
      "code": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var F=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),g=(l,n)=>{for(var r in n)a(l,r,{get:n[r],enumerable:!0})},o=(l,n,r,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of E(n))!u.call(l,c)&&c!==r&&a(l,c,{get:()=>n[c],enumerable:!(s=p(n,c))||s.enumerable});return l};var m=(l,n,r)=>(r=l!=null?h(y(l)):{},o(n||!l||!l.__esModule?a(r,\"default\",{value:l,enumerable:!0}):r,l)),b=l=>o(a({},\"__esModule\",{value:!0}),l);var d=F((N,i)=>{i.exports=_jsx_runtime});var k={};g(k,{default:()=>B,frontmatter:()=>f});var e=m(d()),f={title:\"JS \\u5237\\u9898\\u8F93\\u5165\\u8F93\\u51FA\\u6A21\\u677F\",subtitle:null,layout:\"post\",date:new Date(1735776e6),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Code\"],image:null};function t(l){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",code:\"code\",h3:\"h3\",div:\"div\",figure:\"figure\",pre:\"pre\",ol:\"ol\",li:\"li\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u65F6\\u9694\\u591A\\u5E74\\u91CD\\u64CD\\u65E7\\u4E1A\\uFF0C\\u53C8\\u5230\\u4E86\\u5237\\u9898\\u7684\\u9636\\u6BB5\\u3002\\u4EE5\\u524D\\u90FD\\u662FC++\\u505A\\u9898\\uFF0C\\u73B0\\u5728\\u6539\\u7528js\\u4E86\\uFF0C\\u4F46\\u662F\\u4ECE\\u6765\\u6CA1\\u6709\\u4E86\\u89E3\\u8FC7JS\\u7684\\u8F93\\u5165\\u8F93\\u51FA\\u3002LeetCode\\u662F\\u6838\\u5FC3\\u4EE3\\u7801\\u6A21\\u5F0F\\u4E0D\\u9700\\u8981\\u7528\\u6237\\u5904\\u7406\\u8F93\\u51FA\\u8F93\\u51FA\\uFF0C\\u4F46\\u662F\\u5982\\u679C\\u9762\\u8BD5\\u65F6ACM\\u6A21\\u5F0F\\u5C31\\u5BC4\\u4E86\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[`\\u63D0\\u524D\\u7EC3\\u4E60\\u8F93\\u51FA\\u8F93\\u51FA\\u5E73\\u53F0\\uFF1A\n`,(0,e.jsx)(n.a,{href:\"https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fac.nowcoder.com%2Facm%2Fcontest%2F5657&objectId=2240679&objectType=1&isNewArticle=undefined\",children:\"OJ\\u5728\\u7EBF\\u7F16\\u7A0B\\u5E38\\u89C1\\u8F93\\u5165\\u8F93\\u51FA\\u7EC3\\u4E60\\u573AJ\"})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"js\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#js\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"JS\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"JavaScript\\u7684ACM\\u6A21\\u5F0F\\u4F1A\\u6709\\u4E24\\u79CD\\uFF1A\",(0,e.jsx)(n.code,{children:\"V8\\u6A21\\u5F0F\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"Nodejs\\u6A21\\u5F0F\"})]}),`\n`,(0,e.jsxs)(n.h3,{id:\"v8\\u6A21\\u5F0F\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#v8\\u6A21\\u5F0F\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"V8\\u6A21\\u5F0F\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`\n// output \nconsole.log();\n\n// \\u56DE\\u8F93\\u5165\\u7684\\u4E00\\u884C\\uFF0C\\u5B57\\u7B26\\u4E32\\u5F62\\u5F0F\\u3002\\u9700\\u8981\\u901A\\u8FC7\\`split\\`\\u3001\\`parseInt\\`\\u7B49\\u65B9\\u6CD5\\u6765\\u5F97\\u5230\\u771F\\u6B63\\u7684\\u8F93\\u5165\\u3002(\\u8FD9\\u91CC\\u786E\\u5B9E\\u6BD4C++\\u90A3\\u4E9B\\u8981\\u9EBB\\u70E6\\u5F97\\u591A)\nread_line()\n\n\nlet line;\nwhile(line = read_line()) {\n    let nums = line.split(' ');\n\n    let a = +nums[0];    // \\u5C06\\u5B57\\u7B26\\u4E32\\u8F6C\\u4E3A\\u6570\\u5B57\n    let b = +nums[1];\n\n    console.log(a + b);\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// output \"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"console.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u56DE\\u8F93\\u5165\\u7684\\u4E00\\u884C\\uFF0C\\u5B57\\u7B26\\u4E32\\u5F62\\u5F0F\\u3002\\u9700\\u8981\\u901A\\u8FC7`split`\\u3001`parseInt`\\u7B49\\u65B9\\u6CD5\\u6765\\u5F97\\u5230\\u771F\\u6B63\\u7684\\u8F93\\u5165\\u3002(\\u8FD9\\u91CC\\u786E\\u5B9E\\u6BD4C++\\u90A3\\u4E9B\\u8981\\u9EBB\\u70E6\\u5F97\\u591A)\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"read_line\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" line;\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"while\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(line \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" read_line\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"()) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    let\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" nums \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" line.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"split\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"' '\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    let\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" a \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"nums[\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"];    \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u5C06\\u5B57\\u7B26\\u4E32\\u8F6C\\u4E3A\\u6570\\u5B57\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    let\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" b \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"nums[\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(a \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" b);\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"nodejs\\u6A21\\u5F0F\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#nodejs\\u6A21\\u5F0F\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"NodeJs\\u6A21\\u5F0F\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Nodejs\\u8F93\\u5165\\u4E3B\\u8981\\u6709\\u4E09\\u5927\\u6B65\\u9AA4\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u5F15\\u5165\",(0,e.jsx)(n.code,{children:\"readline\"}),\"\\u6A21\\u5757\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u8C03\\u7528\",(0,e.jsx)(n.code,{children:\"readline.createInterface()\"}),\"\\uFF0C\\u521B\\u5EFA\\u4E00\\u4E2A\",(0,e.jsx)(n.code,{children:\"readline\\u7684\\u63A5\\u53E3\\u5B9E\\u4F8B\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u76D1\\u542C\",(0,e.jsx)(n.code,{children:\"line\"}),\"\\u4E8B\\u4EF6\\uFF0C\\u4E8B\\u4EF6\\u5904\\u7406\\u51FD\\u6570\\u7684\\u53C2\\u6570\\u5C31\\u662F\",(0,e.jsx)(n.code,{children:\"\\u8F93\\u5165\\u7684\\u884C\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`const readline = require('readline');\n\nconst rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout\n});\nrl.on('line', function (line) {\n    // \n});\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" readline\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"'readline'\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" rl\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" readline.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"createInterface\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    input: process.stdin,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    output: process.stdout\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"rl.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"'line'\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"line\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    // \"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})})})]})}function j(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(t,l)})):t(l)}var B=j;return b(k);})();\n;return Component;"
    },
    "_id": "post/2025-01-02-Leetcode-input-output.md",
    "_raw": {
      "sourceFilePath": "post/2025-01-02-Leetcode-input-output.md",
      "sourceFileName": "2025-01-02-Leetcode-input-output.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2025-01-02-Leetcode-input-output"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2025-01-02-Leetcode-input-output",
    "slugAsParams": "2025-01-02-Leetcode-input-output"
  },
  {
    "title": "Vulkan 基础",
    "tags": [
      "CG"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2025-01-04T00:00:00.000Z",
    "body": {
      "raw": "> 近期工作中在写AGP引擎，底层是用vulkan写的，所以来探索一下\n> https://gitee.com/openharmony/graphic_graphic_3d\n\n\n## 前期准备\n本人是mac环境，\n- Vulkan SDK： [https://vulkan.lunarg.com/sdk/home](https://vulkan.lunarg.com/sdk/home)\n- GLM : [https://github.com/g-truc/glm/releases](https://github.com/g-truc/glm/releases) 最初用于创建OpenGL窗口和上下文的开源库，它提供了一套跨平台的API，能够方便地创建OpenGL窗口、处理输入事件、处理窗口事件等。\n- GLFW: [https://www.glfw.org/download.html](https://www.glfw.org/download.html)GLM是一个用于数学计算的开源库，它提供了一组类和函数，用于实现矩阵变换、向量计算、投影等数学操作。\n- cmake\n\n\n安装好Vulkan SDK后可以跑一下Applications目录下的vkcube，如果成功运行说明你的电脑是支持Vulkan的\n```bash\n#通过homebrew进行glfw与glm\nbrew install glfw  \nbrew install glm\n\narch -arm64 brew install glm\narch -arm64 brew install glfw\n\narch -arm64 brew install cmake --cask\n\narch -arm64 brew install glslang\n# 获取地址，cmake编译会用\nwhere glslang\n\ncmake -version\n```\n\n\n接下来在Clion中配置cmake引用程序，构建后运行，会弹出一个 *vulkan window* 的空的窗口就成功了。\n\n`cmakelist.txt`\n```cmake\ncmake_minimum_required(VERSION 3.10)\n\nPROJECT(HELLO)\n\nset(CMAKE_CXX_STANDARD 11)\n\ninclude_directories(/opt/homebrew/include ./include)\n# glfw的库目录路径\nlink_directories(/opt/homebrew/Cellar/glfw/3.4/lib/)\n# Vulkan的库目录\ninclude_directories(/Users/heavenmei/VulkanSDK/1.3.290.0/macOS/include/)\nlink_directories(/Users/heavenmei/VulkanSDK/1.3.290.0/macOS/lib)\n\nset(librariesList\n        GLFW\n        vulkan\n)\n\nadd_executable(VulkanSample main.cpp)\ntarget_link_libraries(VulkanSample ${librariesList})\n```\n\n\n`main.cpp`\n```cpp\n#define GLFW_INCLUDE_VULKAN\n#include <GLFW/glfw3.h>\n\n#define GLM_FORCE_RADIANS\n#define GLM_FORCE_DEPTH_ZERO_TO_ONE\n#include <glm/vec4.hpp>\n#include <glm/mat4x4.hpp>\n\n#include <iostream>\n\nint main()\n{\n    glfwInit();\n    \n    glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API);\n    GLFWwindow *window = glfwCreateWindow(1000, 600, \"Vulkan window\", nullptr, nullptr);\n    \n    uint32_t extensionCount = 0;\n    vkEnumerateInstanceExtensionProperties(nullptr, &extensionCount, nullptr);\n    \n    std::cout << extensionCount << \"extensions supported\\n\";\n    \n    glm::mat4 matrix;\n    glm::vec4 vec;\n    \n    auto test = matrix*vec;\n    test = test;\n    \n    while(!glfwWindowShouldClose(window))\n    {\n        glfwPollEvents();\n    }\n    \n    glfwDestroyWindow(window);\n    \n    glfwTerminate();\n    \n    return 0;\n}\n```\n\n## Open glfw window\n我们需要先创建一个窗口，才能实时看到之后渲染出来的结果\n\n`lve_window.cpp`\n```cpp\n#include \"lve_window.h\"\n\nnamespace lve {\n\n    // 构造函数\n    LveWindow::LveWindow(int w, int h, std::string name) : width{w}, height{h}, windowName{name} {\n        initWindow();\n    }\n\n    // 析构函数\n    LveWindow::~LveWindow() {\n        glfwDestroyWindow(window);\n        glfwTerminate();\n    }\n\n    // 初始化窗口\n    void LveWindow::initWindow() {\n        glfwInit();\n        // 不是 OpenGL，不创建上下文！\n        glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API);\n        // 不允许调整窗体大小，因为调整大小涉及到整个流水线变动，这里先不考虑那么复杂的\n        glfwWindowHint(GLFW_RESIZABLE, GLFW_FALSE);\n\n        window = glfwCreateWindow(width, height, windowName.c_str(), nullptr, nullptr);\n    }\n}  // namespace lve\n```\n\n`main.cpp` 运行起来\n```cpp\n\n#include \"lve_window.h\"\n\nint main()\n{\n    lve::LveWindow lveWindow{800, 600, \"Hello Vulkan!\"};\n    while (!lveWindow.shouldClose())\n    {\n        // Window resize, mouse move event, etc.\n        glfwPollEvents();\n    }\n\n    return EXIT_SUCCESS;\n}\n```\n\n\n\n\n##  Graphics Pipeline\n我们能够动态改变的是紫色部分，用GLSL语言编写Shader\n![](assets/2025-01-04-Vulkan-20250106073633.png)\n\n由于GPU可以并行计算，计算效率会更高\n![|400](assets/2025-01-04-Vulkan-base-20250106075205.png)\n\n\n首先创建shaders文件夹，编写glsl\n```js\n// simple_shader.vert\n#version 450\n\nvec2 positions[3] = vec2[](\n  vec2(0.0, -0.5),\n  vec2(0.5, 0.5),\n  vec2(-0.5, 0.5)\n);\n\nvoid main() {\n  gl_Position = vec4(positions[gl_VertexIndex], 0.0, 1.0);\n}\n\n\n// simple_shader.frag\n#version 450\n\nlayout (location = 0) out vec4 outColor;\n\nvoid main() {\n    // r g b a\n    outColor = vec4(1.0, 1.0, 0.0, 1.0);\n}\n\n\n```\n\n\n编写`compile.sh` 编译vert-- spirv（spv）\n```sh\n# where glslang\n/opt/homebrew/bin/glslang -V shaders/simple_shader.vert -o shaders/simple_shader.vert.spv  \n/opt/homebrew/bin/glslang -V shaders/simple_shader.frag -o shaders/simple_shader.frag.spv\n```\n\n\n\n## Reference\n\nhttps://easyvulkan.github.io/index.html\n\nhttps://vulkan-tutorial.com/\n\nhttps://github.com/blurrypiano/littleVulkanEngine",
      "code": "var Component=(()=>{var h=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var g=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),m=(e,n)=>{for(var r in n)i(e,r,{get:n[r],enumerable:!0})},s=(e,n,r,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let a of E(n))!F.call(e,a)&&a!==r&&i(e,a,{get:()=>n[a],enumerable:!(c=p(n,a))||c.enumerable});return e};var w=(e,n,r)=>(r=e!=null?h(y(e)):{},s(n||!e||!e.__esModule?i(r,\"default\",{value:e,enumerable:!0}):r,e)),u=e=>s(i({},\"__esModule\",{value:!0}),e);var d=g((b,o)=>{o.exports=_jsx_runtime});var k={};m(k,{default:()=>v,frontmatter:()=>B});var l=w(d()),B={title:\"Vulkan \\u57FA\\u7840\",subtitle:null,layout:\"post\",date:new Date(17359488e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"CG\"],image:null};function t(e){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",ul:\"ul\",li:\"li\",div:\"div\",figure:\"figure\",pre:\"pre\",code:\"code\",em:\"em\",img:\"img\"},e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.blockquote,{children:[`\n`,(0,l.jsxs)(n.p,{children:[`\\u8FD1\\u671F\\u5DE5\\u4F5C\\u4E2D\\u5728\\u5199AGP\\u5F15\\u64CE\\uFF0C\\u5E95\\u5C42\\u662F\\u7528vulkan\\u5199\\u7684\\uFF0C\\u6240\\u4EE5\\u6765\\u63A2\\u7D22\\u4E00\\u4E0B\n`,(0,l.jsx)(n.a,{href:\"https://gitee.com/openharmony/graphic_graphic_3d\",children:\"https://gitee.com/openharmony/graphic_graphic_3d\"})]}),`\n`]}),`\n`,(0,l.jsxs)(n.h2,{id:\"\\u524D\\u671F\\u51C6\\u5907\",children:[(0,l.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u524D\\u671F\\u51C6\\u5907\",children:(0,l.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u524D\\u671F\\u51C6\\u5907\"]}),`\n`,(0,l.jsx)(n.p,{children:\"\\u672C\\u4EBA\\u662Fmac\\u73AF\\u5883\\uFF0C\"}),`\n`,(0,l.jsxs)(n.ul,{children:[`\n`,(0,l.jsxs)(n.li,{children:[\"Vulkan SDK\\uFF1A \",(0,l.jsx)(n.a,{href:\"https://vulkan.lunarg.com/sdk/home\",children:\"https://vulkan.lunarg.com/sdk/home\"})]}),`\n`,(0,l.jsxs)(n.li,{children:[\"GLM : \",(0,l.jsx)(n.a,{href:\"https://github.com/g-truc/glm/releases\",children:\"https://github.com/g-truc/glm/releases\"}),\" \\u6700\\u521D\\u7528\\u4E8E\\u521B\\u5EFAOpenGL\\u7A97\\u53E3\\u548C\\u4E0A\\u4E0B\\u6587\\u7684\\u5F00\\u6E90\\u5E93\\uFF0C\\u5B83\\u63D0\\u4F9B\\u4E86\\u4E00\\u5957\\u8DE8\\u5E73\\u53F0\\u7684API\\uFF0C\\u80FD\\u591F\\u65B9\\u4FBF\\u5730\\u521B\\u5EFAOpenGL\\u7A97\\u53E3\\u3001\\u5904\\u7406\\u8F93\\u5165\\u4E8B\\u4EF6\\u3001\\u5904\\u7406\\u7A97\\u53E3\\u4E8B\\u4EF6\\u7B49\\u3002\"]}),`\n`,(0,l.jsxs)(n.li,{children:[\"GLFW: \",(0,l.jsx)(n.a,{href:\"https://www.glfw.org/download.html\",children:\"https://www.glfw.org/download.html\"}),\"GLM\\u662F\\u4E00\\u4E2A\\u7528\\u4E8E\\u6570\\u5B66\\u8BA1\\u7B97\\u7684\\u5F00\\u6E90\\u5E93\\uFF0C\\u5B83\\u63D0\\u4F9B\\u4E86\\u4E00\\u7EC4\\u7C7B\\u548C\\u51FD\\u6570\\uFF0C\\u7528\\u4E8E\\u5B9E\\u73B0\\u77E9\\u9635\\u53D8\\u6362\\u3001\\u5411\\u91CF\\u8BA1\\u7B97\\u3001\\u6295\\u5F71\\u7B49\\u6570\\u5B66\\u64CD\\u4F5C\\u3002\"]}),`\n`,(0,l.jsx)(n.li,{children:\"cmake\"}),`\n`]}),`\n`,(0,l.jsx)(n.p,{children:\"\\u5B89\\u88C5\\u597DVulkan SDK\\u540E\\u53EF\\u4EE5\\u8DD1\\u4E00\\u4E0BApplications\\u76EE\\u5F55\\u4E0B\\u7684vkcube\\uFF0C\\u5982\\u679C\\u6210\\u529F\\u8FD0\\u884C\\u8BF4\\u660E\\u4F60\\u7684\\u7535\\u8111\\u662F\\u652F\\u6301Vulkan\\u7684\"}),`\n`,(0,l.jsx)(n.div,{className:\"remark-code-container\",children:(0,l.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`#\\u901A\\u8FC7homebrew\\u8FDB\\u884Cglfw\\u4E0Eglm\nbrew\\xA0install\\xA0glfw  \nbrew install glm\n\narch -arm64 brew install glm\narch -arm64 brew install glfw\n\narch -arm64 brew install cmake --cask\n\narch -arm64 brew install glslang\n# \\u83B7\\u53D6\\u5730\\u5740\\uFF0Ccmake\\u7F16\\u8BD1\\u4F1A\\u7528\nwhere glslang\n\ncmake -version\n`,children:(0,l.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"#\\u901A\\u8FC7homebrew\\u8FDB\\u884Cglfw\\u4E0Eglm\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"brew\\xA0install\\xA0glfw\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  \"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"brew\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" glm\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"arch\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -arm64\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" brew\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" glm\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"arch\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -arm64\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" brew\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" glfw\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"arch\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -arm64\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" brew\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" cmake\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" --cask\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"arch\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -arm64\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" brew\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" glslang\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# \\u83B7\\u53D6\\u5730\\u5740\\uFF0Ccmake\\u7F16\\u8BD1\\u4F1A\\u7528\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"where\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" glslang\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"cmake\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -version\"})]})]})})})}),`\n`,(0,l.jsxs)(n.p,{children:[\"\\u63A5\\u4E0B\\u6765\\u5728Clion\\u4E2D\\u914D\\u7F6Ecmake\\u5F15\\u7528\\u7A0B\\u5E8F\\uFF0C\\u6784\\u5EFA\\u540E\\u8FD0\\u884C\\uFF0C\\u4F1A\\u5F39\\u51FA\\u4E00\\u4E2A \",(0,l.jsx)(n.em,{children:\"vulkan window\"}),\" \\u7684\\u7A7A\\u7684\\u7A97\\u53E3\\u5C31\\u6210\\u529F\\u4E86\\u3002\"]}),`\n`,(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:\"cmakelist.txt\"})}),`\n`,(0,l.jsx)(n.div,{className:\"remark-code-container\",children:(0,l.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"cmake\",\"data-theme\":\"github-dark\",raw:`cmake_minimum_required(VERSION 3.10)\n\nPROJECT(HELLO)\n\nset(CMAKE_CXX_STANDARD 11)\n\ninclude_directories(/opt/homebrew/include ./include)\n# glfw\\u7684\\u5E93\\u76EE\\u5F55\\u8DEF\\u5F84\nlink_directories(/opt/homebrew/Cellar/glfw/3.4/lib/)\n# Vulkan\\u7684\\u5E93\\u76EE\\u5F55\ninclude_directories(/Users/heavenmei/VulkanSDK/1.3.290.0/macOS/include/)\nlink_directories(/Users/heavenmei/VulkanSDK/1.3.290.0/macOS/lib)\n\nset(librariesList\n        GLFW\n        vulkan\n)\n\nadd_executable(VulkanSample main.cpp)\ntarget_link_libraries(VulkanSample \\${librariesList})\n`,children:(0,l.jsxs)(n.code,{\"data-language\":\"cmake\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"cmake_minimum_required\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"VERSION\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" 3.10)\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"PROJECT\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(HELLO)\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"set\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(CMAKE_CXX_STANDARD 11)\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"include_directories\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(/opt/homebrew/include ./include)\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# glfw\\u7684\\u5E93\\u76EE\\u5F55\\u8DEF\\u5F84\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"link_directories\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(/opt/homebrew/Cellar/glfw/3.4/lib/)\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# Vulkan\\u7684\\u5E93\\u76EE\\u5F55\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"include_directories\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(/Users/heavenmei/VulkanSDK/1.3.290.0/macOS/include/)\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"link_directories\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(/Users/heavenmei/VulkanSDK/1.3.290.0/macOS/lib)\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"set\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(librariesList\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        GLFW\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        vulkan\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\")\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"add_executable\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(VulkanSample main.cpp)\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"target_link_libraries\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(VulkanSample \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"${librariesList}\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\")\"})]})]})})})}),`\n`,(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:\"main.cpp\"})}),`\n`,(0,l.jsx)(n.div,{className:\"remark-code-container\",children:(0,l.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"cpp\",\"data-theme\":\"github-dark\",raw:`#define GLFW_INCLUDE_VULKAN\n#include <GLFW/glfw3.h>\n\n#define GLM_FORCE_RADIANS\n#define GLM_FORCE_DEPTH_ZERO_TO_ONE\n#include <glm/vec4.hpp>\n#include <glm/mat4x4.hpp>\n\n#include <iostream>\n\nint main()\n{\n    glfwInit();\n    \n    glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API);\n    GLFWwindow *window = glfwCreateWindow(1000, 600, \"Vulkan window\", nullptr, nullptr);\n    \n    uint32_t extensionCount = 0;\n    vkEnumerateInstanceExtensionProperties(nullptr, &extensionCount, nullptr);\n    \n    std::cout << extensionCount << \"extensions supported\\\\n\";\n    \n    glm::mat4 matrix;\n    glm::vec4 vec;\n    \n    auto test = matrix*vec;\n    test = test;\n    \n    while(!glfwWindowShouldClose(window))\n    {\n        glfwPollEvents();\n    }\n    \n    glfwDestroyWindow(window);\n    \n    glfwTerminate();\n    \n    return 0;\n}\n`,children:(0,l.jsxs)(n.code,{\"data-language\":\"cpp\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#define\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" GLFW_INCLUDE_VULKAN\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#include\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" <GLFW/glfw3.h>\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#define\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" GLM_FORCE_RADIANS\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#define\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" GLM_FORCE_DEPTH_ZERO_TO_ONE\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#include\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" <glm/vec4.hpp>\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#include\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" <glm/mat4x4.hpp>\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#include\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" <iostream>\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"int\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" main\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    glfwInit\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    glfwWindowHint\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(GLFW_CLIENT_API, GLFW_NO_API);\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    GLFWwindow \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"window \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" glfwCreateWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"600\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"Vulkan window\"'}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"nullptr\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"nullptr\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    uint32_t\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" extensionCount \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    vkEnumerateInstanceExtensionProperties\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"nullptr\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"&\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"extensionCount, \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"nullptr\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    std\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"::cout \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"<<\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" extensionCount \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"<<\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"extensions supported'}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"\\\\n\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"'}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    glm\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"::mat4 matrix;\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    glm\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"::vec4 vec;\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    auto\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" test \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" matrix\"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"vec;\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    test \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" test;\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    while\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"glfwWindowShouldClose\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(window))\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    {\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"        glfwPollEvents\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    glfwDestroyWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(window);\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    glfwTerminate\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    \"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,l.jsxs)(n.h2,{id:\"open-glfw-window\",children:[(0,l.jsx)(n.a,{className:\"header-anchor\",href:\"#open-glfw-window\",children:(0,l.jsx)(n.span,{className:\"icon icon-link\"})}),\"Open glfw window\"]}),`\n`,(0,l.jsx)(n.p,{children:\"\\u6211\\u4EEC\\u9700\\u8981\\u5148\\u521B\\u5EFA\\u4E00\\u4E2A\\u7A97\\u53E3\\uFF0C\\u624D\\u80FD\\u5B9E\\u65F6\\u770B\\u5230\\u4E4B\\u540E\\u6E32\\u67D3\\u51FA\\u6765\\u7684\\u7ED3\\u679C\"}),`\n`,(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:\"lve_window.cpp\"})}),`\n`,(0,l.jsx)(n.div,{className:\"remark-code-container\",children:(0,l.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"cpp\",\"data-theme\":\"github-dark\",raw:`#include \"lve_window.h\"\n\nnamespace lve {\n\n    // \\u6784\\u9020\\u51FD\\u6570\n    LveWindow::LveWindow(int w, int h, std::string name) : width{w}, height{h}, windowName{name} {\n        initWindow();\n    }\n\n    // \\u6790\\u6784\\u51FD\\u6570\n    LveWindow::~LveWindow() {\n        glfwDestroyWindow(window);\n        glfwTerminate();\n    }\n\n    // \\u521D\\u59CB\\u5316\\u7A97\\u53E3\n    void LveWindow::initWindow() {\n        glfwInit();\n        // \\u4E0D\\u662F OpenGL\\uFF0C\\u4E0D\\u521B\\u5EFA\\u4E0A\\u4E0B\\u6587\\uFF01\n        glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API);\n        // \\u4E0D\\u5141\\u8BB8\\u8C03\\u6574\\u7A97\\u4F53\\u5927\\u5C0F\\uFF0C\\u56E0\\u4E3A\\u8C03\\u6574\\u5927\\u5C0F\\u6D89\\u53CA\\u5230\\u6574\\u4E2A\\u6D41\\u6C34\\u7EBF\\u53D8\\u52A8\\uFF0C\\u8FD9\\u91CC\\u5148\\u4E0D\\u8003\\u8651\\u90A3\\u4E48\\u590D\\u6742\\u7684\n        glfwWindowHint(GLFW_RESIZABLE, GLFW_FALSE);\n\n        window = glfwCreateWindow(width, height, windowName.c_str(), nullptr, nullptr);\n    }\n}  // namespace lve\n`,children:(0,l.jsxs)(n.code,{\"data-language\":\"cpp\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#include\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"lve_window.h\"'})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"namespace\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" lve\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    // \\u6784\\u9020\\u51FD\\u6570\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    LveWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"::\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"LveWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"int\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" w, \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"int\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" h, \"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"std\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"::string name) : width{w}, height{h}, windowName{name} {\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"        initWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    // \\u6790\\u6784\\u51FD\\u6570\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    LveWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"::\"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"~\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"LveWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"        glfwDestroyWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(window);\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"        glfwTerminate\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    // \\u521D\\u59CB\\u5316\\u7A97\\u53E3\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    void\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" LveWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"::\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"initWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"        glfwInit\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"        // \\u4E0D\\u662F OpenGL\\uFF0C\\u4E0D\\u521B\\u5EFA\\u4E0A\\u4E0B\\u6587\\uFF01\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"        glfwWindowHint\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(GLFW_CLIENT_API, GLFW_NO_API);\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"        // \\u4E0D\\u5141\\u8BB8\\u8C03\\u6574\\u7A97\\u4F53\\u5927\\u5C0F\\uFF0C\\u56E0\\u4E3A\\u8C03\\u6574\\u5927\\u5C0F\\u6D89\\u53CA\\u5230\\u6574\\u4E2A\\u6D41\\u6C34\\u7EBF\\u53D8\\u52A8\\uFF0C\\u8FD9\\u91CC\\u5148\\u4E0D\\u8003\\u8651\\u90A3\\u4E48\\u590D\\u6742\\u7684\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"        glfwWindowHint\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(GLFW_RESIZABLE, GLFW_FALSE);\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        window \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" glfwCreateWindow\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(width, height, windowName.\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"c_str\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(), \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"nullptr\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"nullptr\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"}),(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // namespace lve\"})]})]})})})}),`\n`,(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:\"main.cpp\"}),\" \\u8FD0\\u884C\\u8D77\\u6765\"]}),`\n`,(0,l.jsx)(n.div,{className:\"remark-code-container\",children:(0,l.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"cpp\",\"data-theme\":\"github-dark\",raw:`\n#include \"lve_window.h\"\n\nint main()\n{\n    lve::LveWindow lveWindow{800, 600, \"Hello Vulkan!\"};\n    while (!lveWindow.shouldClose())\n    {\n        // Window resize, mouse move event, etc.\n        glfwPollEvents();\n    }\n\n    return EXIT_SUCCESS;\n}\n`,children:(0,l.jsxs)(n.code,{\"data-language\":\"cpp\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"#include\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"lve_window.h\"'})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"int\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" main\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    lve\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"::LveWindow lveWindow{\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"800\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"600\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"Hello Vulkan!\"'}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"};\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    while\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"lveWindow.\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"shouldClose\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"())\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    {\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"        // Window resize, mouse move event, etc.\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"        glfwPollEvents\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" EXIT_SUCCESS;\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,l.jsxs)(n.h2,{id:\"graphics-pipeline\",children:[(0,l.jsx)(n.a,{className:\"header-anchor\",href:\"#graphics-pipeline\",children:(0,l.jsx)(n.span,{className:\"icon icon-link\"})}),\"Graphics Pipeline\"]}),`\n`,(0,l.jsxs)(n.p,{children:[`\\u6211\\u4EEC\\u80FD\\u591F\\u52A8\\u6001\\u6539\\u53D8\\u7684\\u662F\\u7D2B\\u8272\\u90E8\\u5206\\uFF0C\\u7528GLSL\\u8BED\\u8A00\\u7F16\\u5199Shader\n`,(0,l.jsx)(n.img,{src:\"/post/assets/2025-01-04-Vulkan-20250106073633.png\",alt:\"\",width:\"1040\",height:\"622\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAElBMVEVHRkdTVVU5OTlDQkM9PT5LUEvbShX/AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAJUlEQVR4nB3JuQ0AMBCEQPbrv2XrjCYDApAw/YBp0nznFLtt7QcFygBOjU0I0gAAAABJRU5ErkJggg==\"})]}),`\n`,(0,l.jsxs)(n.p,{children:[`\\u7531\\u4E8EGPU\\u53EF\\u4EE5\\u5E76\\u884C\\u8BA1\\u7B97\\uFF0C\\u8BA1\\u7B97\\u6548\\u7387\\u4F1A\\u66F4\\u9AD8\n`,(0,l.jsx)(n.img,{src:\"/post/assets/2025-01-04-Vulkan-base-20250106075205.png\",alt:\"|400\",width:\"1142\",height:\"888\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAGFBMVEVKSkpDQ0NGRkZbW11PWkBRUlNMWXlLT1qNdIbyAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAKklEQVR4nBXKuREAMAjEQN0D7r9jD6lWGNmSMLzFgiSbEdc5Aqe9YyZt+AnrAGW5XPmmAAAAAElFTkSuQmCC\"})]}),`\n`,(0,l.jsx)(n.p,{children:\"\\u9996\\u5148\\u521B\\u5EFAshaders\\u6587\\u4EF6\\u5939\\uFF0C\\u7F16\\u5199glsl\"}),`\n`,(0,l.jsx)(n.div,{className:\"remark-code-container\",children:(0,l.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`// simple_shader.vert\n#version 450\n\nvec2 positions[3] = vec2[](\n  vec2(0.0, -0.5),\n  vec2(0.5, 0.5),\n  vec2(-0.5, 0.5)\n);\n\nvoid main() {\n  gl_Position = vec4(positions[gl_VertexIndex], 0.0, 1.0);\n}\n\n\n// simple_shader.frag\n#version 450\n\nlayout (location = 0) out vec4 outColor;\n\nvoid main() {\n    // r g b a\n    outColor = vec4(1.0, 1.0, 0.0, 1.0);\n}\n\n\n`,children:(0,l.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// simple_shader.vert\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"#version \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"450\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"vec2 positions[\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" vec2[](\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"  vec2\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.5\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"  vec2\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.5\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.5\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"  vec2\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.5\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.5\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"void\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" main\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  gl_Position \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" vec4\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(positions[gl_VertexIndex], \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1.0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// simple_shader.frag\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"#version \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"450\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"layout\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (location \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") out vec4 outColor;\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"void\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" main\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"    // r g b a\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    outColor \"}),(0,l.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" vec4\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1.0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1.0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0.0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"1.0\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,l.jsxs)(n.p,{children:[\"\\u7F16\\u5199\",(0,l.jsx)(n.code,{children:\"compile.sh\"}),\" \\u7F16\\u8BD1vert-- spirv\\uFF08spv\\uFF09\"]}),`\n`,(0,l.jsx)(n.div,{className:\"remark-code-container\",children:(0,l.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"sh\",\"data-theme\":\"github-dark\",raw:`# where glslang\n/opt/homebrew/bin/glslang -V shaders/simple_shader.vert -o shaders/simple_shader.vert.spv  \n/opt/homebrew/bin/glslang -V shaders/simple_shader.frag -o shaders/simple_shader.frag.spv\n`,children:(0,l.jsxs)(n.code,{\"data-language\":\"sh\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(n.span,{\"data-line\":\"\",children:(0,l.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"# where glslang\"})}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"/opt/homebrew/bin/glslang\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -V\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" shaders/simple_shader.vert\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -o\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" shaders/simple_shader.vert.spv\"}),(0,l.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  \"})]}),`\n`,(0,l.jsxs)(n.span,{\"data-line\":\"\",children:[(0,l.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"/opt/homebrew/bin/glslang\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -V\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" shaders/simple_shader.frag\"}),(0,l.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" -o\"}),(0,l.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" shaders/simple_shader.frag.spv\"})]})]})})})}),`\n`,(0,l.jsxs)(n.h2,{id:\"reference\",children:[(0,l.jsx)(n.a,{className:\"header-anchor\",href:\"#reference\",children:(0,l.jsx)(n.span,{className:\"icon icon-link\"})}),\"Reference\"]}),`\n`,(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:\"https://easyvulkan.github.io/index.html\",children:\"https://easyvulkan.github.io/index.html\"})}),`\n`,(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:\"https://vulkan-tutorial.com/\",children:\"https://vulkan-tutorial.com/\"})}),`\n`,(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:\"https://github.com/blurrypiano/littleVulkanEngine\",children:\"https://github.com/blurrypiano/littleVulkanEngine\"})})]})}function A(e={}){let{wrapper:n}=e.components||{};return n?(0,l.jsx)(n,Object.assign({},e,{children:(0,l.jsx)(t,e)})):t(e)}var v=A;return u(k);})();\n;return Component;"
    },
    "_id": "post/2025-01-04-Vulkan-base.md",
    "_raw": {
      "sourceFilePath": "post/2025-01-04-Vulkan-base.md",
      "sourceFileName": "2025-01-04-Vulkan-base.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2025-01-04-Vulkan-base"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2025-01-04-Vulkan-base",
    "slugAsParams": "2025-01-04-Vulkan-base"
  },
  {
    "title": "leetcode刷题-力扣教你学炒股系列",
    "tags": [
      "Code"
    ],
    "author": "heavenmei",
    "subtitle": null,
    "description": null,
    "date": "2025-01-04T00:00:00.000Z",
    "body": {
      "raw": "## 前言\n股票问题一共6道：\n\n[121. 买卖股票的最佳时机](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/)\n\n[122. 买卖股票的最佳时机 II](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/)\n\n[123. 买卖股票的最佳时机 III](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/)\n\n[188. 买卖股票的最佳时机 IV](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/)\n\n[309. 买卖股票的最佳时机含冷冻期](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/)\n\n[714. 买卖股票的最佳时机含手续费](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/)\n\n先消化通用解法再找优质其他解法\n\n\n## 通用解法\n> 动态规划\n> 参考： https://leetcode.cn/circle/discuss/qiAgHn/\n\n每天可能的操作只有：**买入**、**卖出**、**休息**\n\n$DP[i][k][0/1]$: 第 *i* 天结束时， 最多交易 *k* 次 且交易后持有 *0/1* 份股票时，最大收益。\n\n$$\nDP[i][k] = \n\\begin{cases} \n0: Max( DP[i-1][k][0], DP[i-1][k][1] + prices[i] ), \\\\\n\\text{i天结束后未持有: (休息， 卖出 不影响交易数)} \\\\ \\\\\n1:Max(DP[i-1][k][1], DP[i-1][k-1][0] - prices[i]),\\\\\n\\text{i天结束后持有: (休息， 买入 影响交易数) }\n\\end{cases}\n\n$$\n\n其中，$i \\ge 1$, **k** 根据题目而定。边界条件为：\n\n$DP[0][k][0] = DP[i][0][0] = 0$, 表示第0天或者交易0次，后还未持有则收益为0\n\n$DP[0][k][1] = DP[i][0][1] = -Infinity$, 表示第0天或交易0次，后持有则收益为负\n\n时间复杂度为 $O(n)$ 和空间复杂度为 $O(n)$\n\n### [121. 买卖股票的最佳时机](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/)\n**Easy**\n\n给定一个数组 `prices` ，它的第 `i` 个元素 `prices[i]` 表示一支给定股票第 `i` 天的价格。\n\n你只能选择 **某一天** 买入这只股票，并选择在 **未来的某一个不同的日子** 卖出该股票。设计一个算法来计算你所能获取的最大利润。\n\n返回你可以从这笔交易中获取的最大利润。如果你不能获取任何利润，返回 `0` 。\n\n**题解**\n\n**k = 1** 的情况\n$$\nDP[i][k] = \n\\begin{cases} \n0: Max( DP[i-1][1][0], DP[i-1][1][1] + prices[i] ), \\\\\n\n1:Max(DP[i-1][1][1], DP[i-1][0][0] - prices[i]),\\\\\n\\end{cases}\n$$\n 推导后，$DP[i-1][0][0] = 0$ 省略k 级数组，结果为\n$$\nDP[i] = \n\\begin{cases} \n0: Max( DP[i-1][0], DP[i-1][1] + prices[i] ), \\\\\n\n1:Max(DP[i-1][1], DP[i-1][0] - prices[i]),\\\\\n\\end{cases}\n$$\n\n\n\n```js\n/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n  dp[0] = [0, -prices[0]];\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = new Array(2).fill(0);\n    dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n    dp[i][1] = Math.max(dp[i - 1][1], -prices[i]);\n  }\n  return dp[len - 1][0];\n};\n```\n\n\n### [122. 买卖股票的最佳时机 II](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/)\n**Medium**\n\n给你一个整数数组 `prices` ，其中 `prices[i]` 表示某支股票第 `i` 天的价格。\n\n在每一天，你可以决定是否购买和/或出售股票。你在任何时候 **最多** 只能持有 **一股** 股票。你也可以先购买，然后在 **同一天** 出售。\n\n返回 _你能获得的 **最大** 利润_ 。\n\n**题解**\n\n**k = Infinity** 的情况, 因此可以直接 k 级数组。推导结果为：\n\n$$\nDP[i] = \n\\begin{cases} \n0: Max( DP[i-1][0], DP[i-1][1] + prices[i] ), \\\\\n\n1:Max(DP[i-1][1], DP[i-1][0] - prices[i]),\\\\\n\\end{cases}\n$$\n\n```js\n/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n  dp[0] = [0, -prices[0]];\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = new Array(2).fill(0);\n    dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n    dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);\n\n  }\n  return dp[len - 1][0];\n};\n```\n\n\n\n### [123. 买卖股票的最佳时机 III](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/)\n**Hard**\n\n给定一个数组，它的第 `i` 个元素是一支给定的股票在第 `i` 天的价格。\n\n设计一个算法来计算你所能获取的最大利润。你最多可以完成 **两笔** 交易。\n\n**题解**\n**k = 2** 的情况\n$$\nDP[i][k] = \n\\begin{cases} \n0: Max( DP[i-1][k][0], DP[i-1][k][1] + prices[i] ), \\\\\n1:Max(DP[i-1][k][1], DP[i-1][k-1][0] - prices[i]),\\\\\n\\end{cases}\n\n$$\n\n\n```js\n/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n\n  dp[0] = Array.from({ length: 3 }, () => [0, -prices[0]]);\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = Array.from({ length: 3 }, () => new Array(2).fill(0));\n\n    dp[i][1][0] = Math.max(dp[i - 1][1][0], dp[i - 1][1][1] + prices[i]);\n    dp[i][1][1] = Math.max(dp[i - 1][1][1], dp[i - 1][0][0] - prices[i]);\n\n    dp[i][2][0] = Math.max(dp[i - 1][2][0], dp[i - 1][2][1] + prices[i]);\n    dp[i][2][1] = Math.max(dp[i - 1][2][1], dp[i - 1][1][0] - prices[i]);\n  }\n\n  return dp[len - 1][2][0];\n};\n\n```\n\n\n### [188. 买卖股票的最佳时机 IV](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/)\n**Hard**\n\n给你一个整数数组 `prices` 和一个整数 `k` ，其中 `prices[i]` 是某支给定的股票在第 `i` 天的价格。\n\n设计一个算法来计算你所能获取的最大利润。你最多可以完成 `k` 笔交易。也就是说，你最多可以买 `k` 次，卖 `k` 次。\n\n**题解**\n**k = 任意值** 的情况, 通用解法\n\n$$\nDP[i][k] = \n\\begin{cases} \n0: Max( DP[i-1][k][0], DP[i-1][k][1] + prices[i] ), \\\\\n1:Max(DP[i-1][k][1], DP[i-1][k-1][0] - prices[i]),\\\\\n\\end{cases}\n\n$$\n```js\n/**\n * @param {number} k\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (k, prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n\n  dp[0] = Array.from({ length: k + 1 }, () => [0, -prices[0]]);\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = Array.from({ length: k + 1 }, () => new Array(2).fill(0));\n    dp[i][0] = [0, -prices[0]];\n\n    for (let j = 1; j <= k; j++) {\n      dp[i][j][0] = Math.max(dp[i - 1][j][0], dp[i - 1][j][1] + prices[i]);\n      dp[i][j][1] = Math.max(dp[i - 1][j][1], dp[i - 1][j - 1][0] - prices[i]);\n    }\n  }\n  return dp[len - 1][k][0];\n};\n\n\n```\n\n\n### [309. 买卖股票的最佳时机含冷冻期](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/)\n**Medium**\n\n给定一个整数数组`prices`，其中第  `prices[i]` 表示第 `i` 天的股票价格 。​\n\n设计一个算法计算出最大利润。在满足以下约束条件下，你可以尽可能地完成更多的交易（多次买卖一支股票）:\n\n- 卖出股票后，你无法在第二天买入股票 (即冷冻期为 1 天)。\n\n**题解**\n**k = Infinity** 但有CD 的情况。由于存在冷却期，因此*买入*时要考虑是否超过了冷静期。转义方程修改为：\n\n$$\nDP[i] = \n\\begin{cases} \n0: Max( DP[i-1][0], DP[i-1][1] + prices[i] ), \\\\\n\\\\\n1:Max(DP[i-1][1], DP[i-2][0] - prices[i]),\\\\\n\\text{i天结束后持有: (休息， 买入 且超过冷静期 -影响交易数) }\n\\end{cases}\n\n$$\n\n```js\n/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n  dp[0] = [0, -prices[0]];\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = new Array(2).fill(0);\n    dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n    dp[i][1] = Math.max(\n      dp[i - 1][1],\n      i >= 2 ? dp[i - 2][0] - prices[i] : -prices[i]\n    );\n\n  }\n  return dp[len - 1][0];\n};\n```\n\n\n\n### [714. 买卖股票的最佳时机含手续费](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/)\n\n**Medium**\n\n给定一个整数数组 `prices`，其中 `prices[i]`表示第 `i` 天的股票价格 ；整数 `fee` 代表了交易股票的手续费用。\n\n你可以无限次地完成交易，但是你每笔交易都需要付手续费。如果你已经购买了一个股票，在卖出它之前你就不能再继续购买股票了。\n\n返回获得利润的最大值。\n\n**题解**\n\n**k = Infinity** 但要考虑手续费（成本）的情况。在*卖出*时要考虑手续费的\n\n$$\nDP[i] = \n\\begin{cases} \n0: Max( DP[i-1][0], DP[i-1][1] + prices[i] - fee ), \\\\\n\\text{i天结束后未持有: (休息， 卖出 -不影响交易数)} \\\\\\\\\n1:Max(DP[i-1][1], DP[i-1][0] - prices[i]),\\\\\n\n\\end{cases}\n\n$$\n\n```js\n/**\n * @param {number[]} prices\n * @param {number} fee\n * @return {number}\n */\nvar maxProfit = function (prices, fee) {\n  const len = prices.length;\n  let dp = new Array(len);\n  dp[0] = [0, -prices[0]];\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = new Array(2).fill(0);\n    dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i] - fee);\n    dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);\n  }\n  return dp[len - 1][0];\n};\n```\n\n\n\n## 其他解法\n\n### [121. 买卖股票的最佳时机](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/)\n找最小成本，最大化收益\n\n\n```js\n/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function(prices) {\n    let cost = prices[0];\n    let profile = 0;\n\n    for(let i = 0; i < prices.length;i++){\n        cost = Math.min(cost,prices[i]);\n        profile = Math.max(profile,prices[i]-cost)\n    }\n    return profile;\n};\n```\n\n\n\n\n### [122. 买卖股票的最佳时机 II](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/)\n贪心：求所有正斜率的总和\n\n```js\n/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  let profit = 0;\n  for (let i = 1; i < prices.length; i++) {\n    profit += Math.max(0, prices[i] - prices[i - 1]);\n  }\n  return profit;\n};\n```\n\n\n\n\n",
      "code": "var Component=(()=>{var t=Object.create;var c=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var E=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),g=(s,e)=>{for(var n in e)c(s,n,{get:e[n],enumerable:!0})},i=(s,e,n,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of p(e))!N.call(s,a)&&a!==n&&c(s,a,{get:()=>e[a],enumerable:!(r=o(e,a))||r.enumerable});return s};var F=(s,e,n)=>(n=s!=null?t(y(s)):{},i(e||!s||!s.__esModule?c(n,\"default\",{value:s,enumerable:!0}):n,s)),f=s=>i(c({},\"__esModule\",{value:!0}),s);var h=E((k,m)=>{m.exports=_jsx_runtime});var x={};g(x,{default:()=>b,frontmatter:()=>u});var l=F(h()),u={title:\"leetcode\\u5237\\u9898-\\u529B\\u6263\\u6559\\u4F60\\u5B66\\u7092\\u80A1\\u7CFB\\u5217\",subtitle:null,layout:\"post\",date:new Date(17359488e5),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Code\"],image:null};function d(s){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",blockquote:\"blockquote\",strong:\"strong\",math:\"math\",semantics:\"semantics\",mrow:\"mrow\",mi:\"mi\",mo:\"mo\",mn:\"mn\",annotation:\"annotation\",em:\"em\",mtable:\"mtable\",mtr:\"mtr\",mtd:\"mtd\",mstyle:\"mstyle\",mtext:\"mtext\",svg:\"svg\",path:\"path\",h3:\"h3\",code:\"code\",div:\"div\",figure:\"figure\",pre:\"pre\",ul:\"ul\",li:\"li\"},s.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.h2,{id:\"\\u524D\\u8A00\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u524D\\u8A00\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u524D\\u8A00\"]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u80A1\\u7968\\u95EE\\u9898\\u4E00\\u51716\\u9053\\uFF1A\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/\",children:\"121. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\"})}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/\",children:\"122. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A II\"})}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/\",children:\"123. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A III\"})}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/\",children:\"188. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A IV\"})}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/\",children:\"309. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\\u542B\\u51B7\\u51BB\\u671F\"})}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/\",children:\"714. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\\u542B\\u624B\\u7EED\\u8D39\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5148\\u6D88\\u5316\\u901A\\u7528\\u89E3\\u6CD5\\u518D\\u627E\\u4F18\\u8D28\\u5176\\u4ED6\\u89E3\\u6CD5\"}),`\n`,(0,l.jsxs)(e.h2,{id:\"\\u901A\\u7528\\u89E3\\u6CD5\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u901A\\u7528\\u89E3\\u6CD5\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u901A\\u7528\\u89E3\\u6CD5\"]}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[`\\u52A8\\u6001\\u89C4\\u5212\n\\u53C2\\u8003\\uFF1A `,(0,l.jsx)(e.a,{href:\"https://leetcode.cn/circle/discuss/qiAgHn/\",children:\"https://leetcode.cn/circle/discuss/qiAgHn/\"})]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u6BCF\\u5929\\u53EF\\u80FD\\u7684\\u64CD\\u4F5C\\u53EA\\u6709\\uFF1A\",(0,l.jsx)(e.strong,{children:\"\\u4E70\\u5165\"}),\"\\u3001\",(0,l.jsx)(e.strong,{children:\"\\u5356\\u51FA\"}),\"\\u3001\",(0,l.jsx)(e.strong,{children:\"\\u4F11\\u606F\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mi,{mathvariant:\"normal\",children:\"/\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:\"DP[i][k][0/1]\"})]})})}),(0,l.jsx)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0/1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"})]})})]}),\": \\u7B2C \",(0,l.jsx)(e.em,{children:\"i\"}),\" \\u5929\\u7ED3\\u675F\\u65F6\\uFF0C \\u6700\\u591A\\u4EA4\\u6613 \",(0,l.jsx)(e.em,{children:\"k\"}),\" \\u6B21 \\u4E14\\u4EA4\\u6613\\u540E\\u6301\\u6709 \",(0,l.jsx)(e.em,{children:\"0/1\"}),\" \\u4EFD\\u80A1\\u7968\\u65F6\\uFF0C\\u6700\\u5927\\u6536\\u76CA\\u3002\"]}),`\n`,(0,l.jsx)(e.span,{className:\"katex-display\",children:(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{fence:\"true\",children:\"{\"}),(0,l.jsxs)(e.mtable,{rowspacing:\"0.36em\",columnalign:\"left left\",columnspacing:\"1em\",children:[(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"+\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsx)(e.mtext,{children:\"i\\u5929\\u7ED3\\u675F\\u540E\\u672A\\u6301\\u6709:\\xA0(\\u4F11\\u606F\\uFF0C\\xA0\\u5356\\u51FA\\xA0\\u4E0D\\u5F71\\u54CD\\u4EA4\\u6613\\u6570)\"})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsx)(e.mrow,{})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsx)(e.mtext,{children:\"i\\u5929\\u7ED3\\u675F\\u540E\\u6301\\u6709:\\xA0(\\u4F11\\u606F\\uFF0C\\xA0\\u4E70\\u5165\\xA0\\u5F71\\u54CD\\u4EA4\\u6613\\u6570)\\xA0\"})})})})]})]})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:`DP[i][k] = \n\\\\begin{cases} \n0: Max( DP[i-1][k][0], DP[i-1][k][1] + prices[i] ), \\\\\\\\\n\\\\text{i\\u5929\\u7ED3\\u675F\\u540E\\u672A\\u6301\\u6709: (\\u4F11\\u606F\\uFF0C \\u5356\\u51FA \\u4E0D\\u5F71\\u54CD\\u4EA4\\u6613\\u6570)} \\\\\\\\ \\\\\\\\\n1:Max(DP[i-1][k][1], DP[i-1][k-1][0] - prices[i]),\\\\\\\\\n\\\\text{i\\u5929\\u7ED3\\u675F\\u540E\\u6301\\u6709: (\\u4F11\\u606F\\uFF0C \\u4E70\\u5165 \\u5F71\\u54CD\\u4EA4\\u6613\\u6570) }\n\\\\end{cases}\n`})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"7.2em\",verticalAlign:\"-3.35em\"}}),(0,l.jsxs)(e.span,{className:\"minner\",children:[(0,l.jsx)(e.span,{className:\"mopen\",children:(0,l.jsx)(e.span,{className:\"delimsizing mult\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"3.85em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-1.366em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.816em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A9\"})})]}),(0,l.jsxs)(e.span,{style:{top:\"-1.358em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.816em\"}}),(0,l.jsx)(e.span,{style:{height:\"1.816em\",width:\"0.8889em\"},children:(0,l.jsx)(e.svg,{xmlns:\"http://www.w3.org/2000/svg\",width:\"0.8889em\",height:\"1.816em\",style:{width:\"0.8889em\"},viewBox:\"0 0 888.89 1816\",preserveAspectRatio:\"xMinYMin\",children:(0,l.jsx)(e.path,{d:\"M384 0 H504 V1816 H384z M384 0 H504 V1816 H384z\"})})})]}),(0,l.jsxs)(e.span,{style:{top:\"-3.816em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.816em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A8\"})})]}),(0,l.jsxs)(e.span,{style:{top:\"-4.958em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.816em\"}}),(0,l.jsx)(e.span,{style:{height:\"1.816em\",width:\"0.8889em\"},children:(0,l.jsx)(e.svg,{xmlns:\"http://www.w3.org/2000/svg\",width:\"0.8889em\",height:\"1.816em\",style:{width:\"0.8889em\"},viewBox:\"0 0 888.89 1816\",preserveAspectRatio:\"xMinYMin\",children:(0,l.jsx)(e.path,{d:\"M384 0 H504 V1816 H384z M384 0 H504 V1816 H384z\"})})})]}),(0,l.jsxs)(e.span,{style:{top:\"-6.766em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.816em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A7\"})})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"3.35em\"},children:(0,l.jsx)(e.span,{})})})]})})}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsx)(e.span,{className:\"mtable\",children:(0,l.jsx)(e.span,{className:\"col-align-l\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"3.85em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-5.85em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"+\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-4.41em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsxs)(e.span,{className:\"mord text\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u5929\\u7ED3\\u675F\\u540E\\u672A\\u6301\\u6709\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\":\\xA0(\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4F11\\u606F\\uFF0C\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u5356\\u51FA\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4E0D\\u5F71\\u54CD\\u4EA4\\u6613\\u6570\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\")\"})]})})]}),(0,l.jsxs)(e.span,{style:{top:\"-2.97em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsx)(e.span,{className:\"mord\"})]}),(0,l.jsxs)(e.span,{style:{top:\"-1.53em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-0.09em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsxs)(e.span,{className:\"mord text\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u5929\\u7ED3\\u675F\\u540E\\u6301\\u6709\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\":\\xA0(\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4F11\\u606F\\uFF0C\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4E70\\u5165\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u5F71\\u54CD\\u4EA4\\u6613\\u6570\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\")\\xA0\"})]})})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"3.35em\"},children:(0,l.jsx)(e.span,{})})})]})})})}),(0,l.jsx)(e.span,{className:\"mclose nulldelimiter\"})]})]})]})]})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5176\\u4E2D\\uFF0C\",(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2265\"}),(0,l.jsx)(e.mn,{children:\"1\"})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:\"i \\\\ge 1\"})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"0.7955em\",verticalAlign:\"-0.136em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"\\u2265\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"0.6444em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"})]})]})]}),\", \",(0,l.jsx)(e.strong,{children:\"k\"}),\" \\u6839\\u636E\\u9898\\u76EE\\u800C\\u5B9A\\u3002\\u8FB9\\u754C\\u6761\\u4EF6\\u4E3A\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsx)(e.mn,{children:\"0\"})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:\"DP[0][k][0] = DP[i][0][0] = 0\"})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"0.6444em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"})]})]})]}),\", \\u8868\\u793A\\u7B2C0\\u5929\\u6216\\u8005\\u4EA4\\u66130\\u6B21\\uFF0C\\u540E\\u8FD8\\u672A\\u6301\\u6709\\u5219\\u6536\\u76CA\\u4E3A0\"]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"I\"}),(0,l.jsx)(e.mi,{children:\"n\"}),(0,l.jsx)(e.mi,{children:\"f\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"n\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"t\"}),(0,l.jsx)(e.mi,{children:\"y\"})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:\"DP[0][k][1] = DP[i][0][1] = -Infinity\"})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"0.8889em\",verticalAlign:\"-0.1944em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.07847em\"},children:\"I\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"n\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10764em\"},children:\"f\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ini\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"t\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03588em\"},children:\"y\"})]})]})]}),\", \\u8868\\u793A\\u7B2C0\\u5929\\u6216\\u4EA4\\u66130\\u6B21\\uFF0C\\u540E\\u6301\\u6709\\u5219\\u6536\\u76CA\\u4E3A\\u8D1F\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u65F6\\u95F4\\u590D\\u6742\\u5EA6\\u4E3A\\xA0\",(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"O\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"n\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:\"O(n)\"})]})})}),(0,l.jsx)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"O\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"n\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\")\"})]})})]}),\"\\xA0\\u548C\\u7A7A\\u95F4\\u590D\\u6742\\u5EA6\\u4E3A\\xA0\",(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"O\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"n\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:\"O(n)\"})]})})}),(0,l.jsx)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"O\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"n\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\")\"})]})})]})]}),`\n`,(0,l.jsxs)(e.h3,{id:\"121-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#121-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/\",children:\"121. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\"})]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"Easy\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7ED9\\u5B9A\\u4E00\\u4E2A\\u6570\\u7EC4\\xA0\",(0,l.jsx)(e.code,{children:\"prices\"}),\"\\xA0\\uFF0C\\u5B83\\u7684\\u7B2C\\xA0\",(0,l.jsx)(e.code,{children:\"i\"}),\"\\xA0\\u4E2A\\u5143\\u7D20\\xA0\",(0,l.jsx)(e.code,{children:\"prices[i]\"}),\"\\xA0\\u8868\\u793A\\u4E00\\u652F\\u7ED9\\u5B9A\\u80A1\\u7968\\u7B2C\\xA0\",(0,l.jsx)(e.code,{children:\"i\"}),\"\\xA0\\u5929\\u7684\\u4EF7\\u683C\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u4F60\\u53EA\\u80FD\\u9009\\u62E9\\xA0\",(0,l.jsx)(e.strong,{children:\"\\u67D0\\u4E00\\u5929\"}),\"\\xA0\\u4E70\\u5165\\u8FD9\\u53EA\\u80A1\\u7968\\uFF0C\\u5E76\\u9009\\u62E9\\u5728\\xA0\",(0,l.jsx)(e.strong,{children:\"\\u672A\\u6765\\u7684\\u67D0\\u4E00\\u4E2A\\u4E0D\\u540C\\u7684\\u65E5\\u5B50\"}),\"\\xA0\\u5356\\u51FA\\u8BE5\\u80A1\\u7968\\u3002\\u8BBE\\u8BA1\\u4E00\\u4E2A\\u7B97\\u6CD5\\u6765\\u8BA1\\u7B97\\u4F60\\u6240\\u80FD\\u83B7\\u53D6\\u7684\\u6700\\u5927\\u5229\\u6DA6\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u8FD4\\u56DE\\u4F60\\u53EF\\u4EE5\\u4ECE\\u8FD9\\u7B14\\u4EA4\\u6613\\u4E2D\\u83B7\\u53D6\\u7684\\u6700\\u5927\\u5229\\u6DA6\\u3002\\u5982\\u679C\\u4F60\\u4E0D\\u80FD\\u83B7\\u53D6\\u4EFB\\u4F55\\u5229\\u6DA6\\uFF0C\\u8FD4\\u56DE\\xA0\",(0,l.jsx)(e.code,{children:\"0\"}),\"\\xA0\\u3002\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"\\u9898\\u89E3\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"k = 1\"}),\" \\u7684\\u60C5\\u51B5\"]}),`\n`,(0,l.jsx)(e.span,{className:\"katex-display\",children:(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{fence:\"true\",children:\"{\"}),(0,l.jsxs)(e.mtable,{rowspacing:\"0.36em\",columnalign:\"left left\",columnspacing:\"1em\",children:[(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"+\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})})]})]})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:`DP[i][k] = \n\\\\begin{cases} \n0: Max( DP[i-1][1][0], DP[i-1][1][1] + prices[i] ), \\\\\\\\\n\n1:Max(DP[i-1][1][1], DP[i-1][0][0] - prices[i]),\\\\\\\\\n\\\\end{cases}`})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"3em\",verticalAlign:\"-1.25em\"}}),(0,l.jsxs)(e.span,{className:\"minner\",children:[(0,l.jsx)(e.span,{className:\"mopen delimcenter\",style:{top:\"0em\"},children:(0,l.jsx)(e.span,{className:\"delimsizing size4\",children:\"{\"})}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsx)(e.span,{className:\"mtable\",children:(0,l.jsx)(e.span,{className:\"col-align-l\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"1.69em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-3.69em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"+\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-2.25em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"1.19em\"},children:(0,l.jsx)(e.span,{})})})]})})})}),(0,l.jsx)(e.span,{className:\"mclose nulldelimiter\"})]})]})]})]})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u63A8\\u5BFC\\u540E\\uFF0C\",(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsx)(e.mn,{children:\"0\"})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:\"DP[i-1][0][0] = 0\"})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"0.6444em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"})]})]})]}),\" \\u7701\\u7565k \\u7EA7\\u6570\\u7EC4\\uFF0C\\u7ED3\\u679C\\u4E3A\"]}),`\n`,(0,l.jsx)(e.span,{className:\"katex-display\",children:(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{fence:\"true\",children:\"{\"}),(0,l.jsxs)(e.mtable,{rowspacing:\"0.36em\",columnalign:\"left left\",columnspacing:\"1em\",children:[(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"+\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})})]})]})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:`DP[i] = \n\\\\begin{cases} \n0: Max( DP[i-1][0], DP[i-1][1] + prices[i] ), \\\\\\\\\n\n1:Max(DP[i-1][1], DP[i-1][0] - prices[i]),\\\\\\\\\n\\\\end{cases}`})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"3em\",verticalAlign:\"-1.25em\"}}),(0,l.jsxs)(e.span,{className:\"minner\",children:[(0,l.jsx)(e.span,{className:\"mopen delimcenter\",style:{top:\"0em\"},children:(0,l.jsx)(e.span,{className:\"delimsizing size4\",children:\"{\"})}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsx)(e.span,{className:\"mtable\",children:(0,l.jsx)(e.span,{className:\"col-align-l\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"1.69em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-3.69em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"+\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-2.25em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"1.19em\"},children:(0,l.jsx)(e.span,{})})})]})})})}),(0,l.jsx)(e.span,{className:\"mclose nulldelimiter\"})]})]})]})]})}),`\n`,(0,l.jsx)(e.div,{className:\"remark-code-container\",children:(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n  dp[0] = [0, -prices[0]];\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = new Array(2).fill(0);\n    dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n    dp[i][1] = Math.max(dp[i - 1][1], -prices[i]);\n  }\n  return dp[len - 1][0];\n};\n`,children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number[]}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" maxProfit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"prices\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" len\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(len);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  dp[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" len; i\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fill\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[i]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp[len \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,l.jsxs)(e.h3,{id:\"122-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-ii\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#122-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-ii\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/\",children:\"122. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A II\"})]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"Medium\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7ED9\\u4F60\\u4E00\\u4E2A\\u6574\\u6570\\u6570\\u7EC4\\xA0\",(0,l.jsx)(e.code,{children:\"prices\"}),\"\\xA0\\uFF0C\\u5176\\u4E2D\\xA0\",(0,l.jsx)(e.code,{children:\"prices[i]\"}),\"\\xA0\\u8868\\u793A\\u67D0\\u652F\\u80A1\\u7968\\u7B2C\\xA0\",(0,l.jsx)(e.code,{children:\"i\"}),\"\\xA0\\u5929\\u7684\\u4EF7\\u683C\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5728\\u6BCF\\u4E00\\u5929\\uFF0C\\u4F60\\u53EF\\u4EE5\\u51B3\\u5B9A\\u662F\\u5426\\u8D2D\\u4E70\\u548C/\\u6216\\u51FA\\u552E\\u80A1\\u7968\\u3002\\u4F60\\u5728\\u4EFB\\u4F55\\u65F6\\u5019\\xA0\",(0,l.jsx)(e.strong,{children:\"\\u6700\\u591A\"}),\"\\xA0\\u53EA\\u80FD\\u6301\\u6709\\xA0\",(0,l.jsx)(e.strong,{children:\"\\u4E00\\u80A1\"}),\"\\xA0\\u80A1\\u7968\\u3002\\u4F60\\u4E5F\\u53EF\\u4EE5\\u5148\\u8D2D\\u4E70\\uFF0C\\u7136\\u540E\\u5728\\xA0\",(0,l.jsx)(e.strong,{children:\"\\u540C\\u4E00\\u5929\"}),\"\\xA0\\u51FA\\u552E\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u8FD4\\u56DE\\xA0\",(0,l.jsxs)(e.em,{children:[\"\\u4F60\\u80FD\\u83B7\\u5F97\\u7684\\xA0\",(0,l.jsx)(e.strong,{children:\"\\u6700\\u5927\"}),\"\\xA0\\u5229\\u6DA6\"]}),\"\\xA0\\u3002\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"\\u9898\\u89E3\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"k = Infinity\"}),\" \\u7684\\u60C5\\u51B5, \\u56E0\\u6B64\\u53EF\\u4EE5\\u76F4\\u63A5 k \\u7EA7\\u6570\\u7EC4\\u3002\\u63A8\\u5BFC\\u7ED3\\u679C\\u4E3A\\uFF1A\"]}),`\n`,(0,l.jsx)(e.span,{className:\"katex-display\",children:(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{fence:\"true\",children:\"{\"}),(0,l.jsxs)(e.mtable,{rowspacing:\"0.36em\",columnalign:\"left left\",columnspacing:\"1em\",children:[(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"+\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})})]})]})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:`DP[i] = \n\\\\begin{cases} \n0: Max( DP[i-1][0], DP[i-1][1] + prices[i] ), \\\\\\\\\n\n1:Max(DP[i-1][1], DP[i-1][0] - prices[i]),\\\\\\\\\n\\\\end{cases}`})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"3em\",verticalAlign:\"-1.25em\"}}),(0,l.jsxs)(e.span,{className:\"minner\",children:[(0,l.jsx)(e.span,{className:\"mopen delimcenter\",style:{top:\"0em\"},children:(0,l.jsx)(e.span,{className:\"delimsizing size4\",children:\"{\"})}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsx)(e.span,{className:\"mtable\",children:(0,l.jsx)(e.span,{className:\"col-align-l\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"1.69em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-3.69em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"+\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-2.25em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"1.19em\"},children:(0,l.jsx)(e.span,{})})})]})})})}),(0,l.jsx)(e.span,{className:\"mclose nulldelimiter\"})]})]})]})]})}),`\n`,(0,l.jsx)(e.div,{className:\"remark-code-container\",children:(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n  dp[0] = [0, -prices[0]];\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = new Array(2).fill(0);\n    dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n    dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);\n\n  }\n  return dp[len - 1][0];\n};\n`,children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number[]}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" maxProfit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"prices\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" len\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(len);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  dp[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" len; i\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fill\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp[len \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,l.jsxs)(e.h3,{id:\"123-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-iii\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#123-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-iii\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/\",children:\"123. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A III\"})]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"Hard\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7ED9\\u5B9A\\u4E00\\u4E2A\\u6570\\u7EC4\\uFF0C\\u5B83\\u7684\\u7B2C\\xA0\",(0,l.jsx)(e.code,{children:\"i\"}),\"\\xA0\\u4E2A\\u5143\\u7D20\\u662F\\u4E00\\u652F\\u7ED9\\u5B9A\\u7684\\u80A1\\u7968\\u5728\\u7B2C\\xA0\",(0,l.jsx)(e.code,{children:\"i\"}),\"\\xA0\\u5929\\u7684\\u4EF7\\u683C\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u8BBE\\u8BA1\\u4E00\\u4E2A\\u7B97\\u6CD5\\u6765\\u8BA1\\u7B97\\u4F60\\u6240\\u80FD\\u83B7\\u53D6\\u7684\\u6700\\u5927\\u5229\\u6DA6\\u3002\\u4F60\\u6700\\u591A\\u53EF\\u4EE5\\u5B8C\\u6210\\xA0\",(0,l.jsx)(e.strong,{children:\"\\u4E24\\u7B14\"}),\"\\xA0\\u4EA4\\u6613\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u9898\\u89E3\"}),`\n`,(0,l.jsx)(e.strong,{children:\"k = 2\"}),\" \\u7684\\u60C5\\u51B5\"]}),`\n`,(0,l.jsx)(e.span,{className:\"katex-display\",children:(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{fence:\"true\",children:\"{\"}),(0,l.jsxs)(e.mtable,{rowspacing:\"0.36em\",columnalign:\"left left\",columnspacing:\"1em\",children:[(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"+\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})})]})]})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:`DP[i][k] = \n\\\\begin{cases} \n0: Max( DP[i-1][k][0], DP[i-1][k][1] + prices[i] ), \\\\\\\\\n1:Max(DP[i-1][k][1], DP[i-1][k-1][0] - prices[i]),\\\\\\\\\n\\\\end{cases}\n`})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"3em\",verticalAlign:\"-1.25em\"}}),(0,l.jsxs)(e.span,{className:\"minner\",children:[(0,l.jsx)(e.span,{className:\"mopen delimcenter\",style:{top:\"0em\"},children:(0,l.jsx)(e.span,{className:\"delimsizing size4\",children:\"{\"})}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsx)(e.span,{className:\"mtable\",children:(0,l.jsx)(e.span,{className:\"col-align-l\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"1.69em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-3.69em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"+\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-2.25em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"1.19em\"},children:(0,l.jsx)(e.span,{})})})]})})})}),(0,l.jsx)(e.span,{className:\"mclose nulldelimiter\"})]})]})]})]})}),`\n`,(0,l.jsx)(e.div,{className:\"remark-code-container\",children:(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n\n  dp[0] = Array.from({ length: 3 }, () => [0, -prices[0]]);\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = Array.from({ length: 3 }, () => new Array(2).fill(0));\n\n    dp[i][1][0] = Math.max(dp[i - 1][1][0], dp[i - 1][1][1] + prices[i]);\n    dp[i][1][1] = Math.max(dp[i - 1][1][1], dp[i - 1][0][0] - prices[i]);\n\n    dp[i][2][0] = Math.max(dp[i - 1][2][0], dp[i - 1][2][1] + prices[i]);\n    dp[i][2][1] = Math.max(dp[i - 1][2][1], dp[i - 1][1][0] - prices[i]);\n  }\n\n  return dp[len - 1][2][0];\n};\n\n`,children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number[]}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" maxProfit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"prices\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" len\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(len);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  dp[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Array.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ length: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }, () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" len; i\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Array.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ length: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }, () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fill\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp[len \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,l.jsxs)(e.h3,{id:\"188-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-iv\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#188-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-iv\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/\",children:\"188. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A IV\"})]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"Hard\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7ED9\\u4F60\\u4E00\\u4E2A\\u6574\\u6570\\u6570\\u7EC4\\xA0\",(0,l.jsx)(e.code,{children:\"prices\"}),\"\\xA0\\u548C\\u4E00\\u4E2A\\u6574\\u6570\\xA0\",(0,l.jsx)(e.code,{children:\"k\"}),\"\\xA0\\uFF0C\\u5176\\u4E2D\\xA0\",(0,l.jsx)(e.code,{children:\"prices[i]\"}),\"\\xA0\\u662F\\u67D0\\u652F\\u7ED9\\u5B9A\\u7684\\u80A1\\u7968\\u5728\\u7B2C\\xA0\",(0,l.jsx)(e.code,{children:\"i\"}),\"\\xA0\\u5929\\u7684\\u4EF7\\u683C\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u8BBE\\u8BA1\\u4E00\\u4E2A\\u7B97\\u6CD5\\u6765\\u8BA1\\u7B97\\u4F60\\u6240\\u80FD\\u83B7\\u53D6\\u7684\\u6700\\u5927\\u5229\\u6DA6\\u3002\\u4F60\\u6700\\u591A\\u53EF\\u4EE5\\u5B8C\\u6210\\xA0\",(0,l.jsx)(e.code,{children:\"k\"}),\"\\xA0\\u7B14\\u4EA4\\u6613\\u3002\\u4E5F\\u5C31\\u662F\\u8BF4\\uFF0C\\u4F60\\u6700\\u591A\\u53EF\\u4EE5\\u4E70\\xA0\",(0,l.jsx)(e.code,{children:\"k\"}),\"\\xA0\\u6B21\\uFF0C\\u5356\\xA0\",(0,l.jsx)(e.code,{children:\"k\"}),\"\\xA0\\u6B21\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u9898\\u89E3\"}),`\n`,(0,l.jsx)(e.strong,{children:\"k = \\u4EFB\\u610F\\u503C\"}),\" \\u7684\\u60C5\\u51B5, \\u901A\\u7528\\u89E3\\u6CD5\"]}),`\n`,(0,l.jsx)(e.span,{className:\"katex-display\",children:(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{fence:\"true\",children:\"{\"}),(0,l.jsxs)(e.mtable,{rowspacing:\"0.36em\",columnalign:\"left left\",columnspacing:\"1em\",children:[(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"+\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"k\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})})]})]})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:`DP[i][k] = \n\\\\begin{cases} \n0: Max( DP[i-1][k][0], DP[i-1][k][1] + prices[i] ), \\\\\\\\\n1:Max(DP[i-1][k][1], DP[i-1][k-1][0] - prices[i]),\\\\\\\\\n\\\\end{cases}\n`})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"3em\",verticalAlign:\"-1.25em\"}}),(0,l.jsxs)(e.span,{className:\"minner\",children:[(0,l.jsx)(e.span,{className:\"mopen delimcenter\",style:{top:\"0em\"},children:(0,l.jsx)(e.span,{className:\"delimsizing size4\",children:\"{\"})}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsx)(e.span,{className:\"mtable\",children:(0,l.jsx)(e.span,{className:\"col-align-l\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"1.69em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-3.69em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"+\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-2.25em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.03148em\"},children:\"k\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"1.19em\"},children:(0,l.jsx)(e.span,{})})})]})})})}),(0,l.jsx)(e.span,{className:\"mclose nulldelimiter\"})]})]})]})]})}),`\n`,(0,l.jsx)(e.div,{className:\"remark-code-container\",children:(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * @param {number} k\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (k, prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n\n  dp[0] = Array.from({ length: k + 1 }, () => [0, -prices[0]]);\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = Array.from({ length: k + 1 }, () => new Array(2).fill(0));\n    dp[i][0] = [0, -prices[0]];\n\n    for (let j = 1; j <= k; j++) {\n      dp[i][j][0] = Math.max(dp[i - 1][j][0], dp[i - 1][j][1] + prices[i]);\n      dp[i][j][1] = Math.max(dp[i - 1][j][1], dp[i - 1][j - 1][0] - prices[i]);\n    }\n  }\n  return dp[len - 1][k][0];\n};\n\n\n`,children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" k\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number[]}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" maxProfit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"k\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"prices\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" len\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(len);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  dp[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Array.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ length: k \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }, () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" len; i\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Array.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ length: k \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }, () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fill\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" j \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; j \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" k; j\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      dp[i][j][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][j][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][j][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      dp[i][j][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][j][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][j \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp[len \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][k][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,l.jsxs)(e.h3,{id:\"309-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\\u542B\\u51B7\\u51BB\\u671F\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#309-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\\u542B\\u51B7\\u51BB\\u671F\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/\",children:\"309. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\\u542B\\u51B7\\u51BB\\u671F\"})]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"Medium\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7ED9\\u5B9A\\u4E00\\u4E2A\\u6574\\u6570\\u6570\\u7EC4\",(0,l.jsx)(e.code,{children:\"prices\"}),\"\\uFF0C\\u5176\\u4E2D\\u7B2C\\xA0\\xA0\",(0,l.jsx)(e.code,{children:\"prices[i]\"}),\"\\xA0\\u8868\\u793A\\u7B2C\\xA0\",(0,l.jsx)(e.code,{children:\"i\"}),\"\\xA0\\u5929\\u7684\\u80A1\\u7968\\u4EF7\\u683C \\u3002\\u200B\"]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8BBE\\u8BA1\\u4E00\\u4E2A\\u7B97\\u6CD5\\u8BA1\\u7B97\\u51FA\\u6700\\u5927\\u5229\\u6DA6\\u3002\\u5728\\u6EE1\\u8DB3\\u4EE5\\u4E0B\\u7EA6\\u675F\\u6761\\u4EF6\\u4E0B\\uFF0C\\u4F60\\u53EF\\u4EE5\\u5C3D\\u53EF\\u80FD\\u5730\\u5B8C\\u6210\\u66F4\\u591A\\u7684\\u4EA4\\u6613\\uFF08\\u591A\\u6B21\\u4E70\\u5356\\u4E00\\u652F\\u80A1\\u7968\\uFF09:\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u5356\\u51FA\\u80A1\\u7968\\u540E\\uFF0C\\u4F60\\u65E0\\u6CD5\\u5728\\u7B2C\\u4E8C\\u5929\\u4E70\\u5165\\u80A1\\u7968 (\\u5373\\u51B7\\u51BB\\u671F\\u4E3A 1 \\u5929)\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u9898\\u89E3\"}),`\n`,(0,l.jsx)(e.strong,{children:\"k = Infinity\"}),\" \\u4F46\\u6709CD \\u7684\\u60C5\\u51B5\\u3002\\u7531\\u4E8E\\u5B58\\u5728\\u51B7\\u5374\\u671F\\uFF0C\\u56E0\\u6B64\",(0,l.jsx)(e.em,{children:\"\\u4E70\\u5165\"}),\"\\u65F6\\u8981\\u8003\\u8651\\u662F\\u5426\\u8D85\\u8FC7\\u4E86\\u51B7\\u9759\\u671F\\u3002\\u8F6C\\u4E49\\u65B9\\u7A0B\\u4FEE\\u6539\\u4E3A\\uFF1A\"]}),`\n`,(0,l.jsx)(e.span,{className:\"katex-display\",children:(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{fence:\"true\",children:\"{\"}),(0,l.jsxs)(e.mtable,{rowspacing:\"0.36em\",columnalign:\"left left\",columnspacing:\"1em\",children:[(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"+\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsx)(e.mrow,{})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"2\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsx)(e.mtext,{children:\"i\\u5929\\u7ED3\\u675F\\u540E\\u6301\\u6709:\\xA0(\\u4F11\\u606F\\uFF0C\\xA0\\u4E70\\u5165\\xA0\\u4E14\\u8D85\\u8FC7\\u51B7\\u9759\\u671F\\xA0-\\u5F71\\u54CD\\u4EA4\\u6613\\u6570)\\xA0\"})})})})]})]})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:`DP[i] = \n\\\\begin{cases} \n0: Max( DP[i-1][0], DP[i-1][1] + prices[i] ), \\\\\\\\\n\\\\\\\\\n1:Max(DP[i-1][1], DP[i-2][0] - prices[i]),\\\\\\\\\n\\\\text{i\\u5929\\u7ED3\\u675F\\u540E\\u6301\\u6709: (\\u4F11\\u606F\\uFF0C \\u4E70\\u5165 \\u4E14\\u8D85\\u8FC7\\u51B7\\u9759\\u671F -\\u5F71\\u54CD\\u4EA4\\u6613\\u6570) }\n\\\\end{cases}\n`})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"5.76em\",verticalAlign:\"-2.63em\"}}),(0,l.jsxs)(e.span,{className:\"minner\",children:[(0,l.jsx)(e.span,{className:\"mopen\",children:(0,l.jsx)(e.span,{className:\"delimsizing mult\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"2.95em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-1.6em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A9\"})})]}),(0,l.jsxs)(e.span,{style:{top:\"-1.592em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{style:{height:\"0.916em\",width:\"0.8889em\"},children:(0,l.jsx)(e.svg,{xmlns:\"http://www.w3.org/2000/svg\",width:\"0.8889em\",height:\"0.916em\",style:{width:\"0.8889em\"},viewBox:\"0 0 888.89 916\",preserveAspectRatio:\"xMinYMin\",children:(0,l.jsx)(e.path,{d:\"M384 0 H504 V916 H384z M384 0 H504 V916 H384z\"})})})]}),(0,l.jsxs)(e.span,{style:{top:\"-3.15em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A8\"})})]}),(0,l.jsxs)(e.span,{style:{top:\"-4.292em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{style:{height:\"0.916em\",width:\"0.8889em\"},children:(0,l.jsx)(e.svg,{xmlns:\"http://www.w3.org/2000/svg\",width:\"0.8889em\",height:\"0.916em\",style:{width:\"0.8889em\"},viewBox:\"0 0 888.89 916\",preserveAspectRatio:\"xMinYMin\",children:(0,l.jsx)(e.path,{d:\"M384 0 H504 V916 H384z M384 0 H504 V916 H384z\"})})})]}),(0,l.jsxs)(e.span,{style:{top:\"-5.2em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A7\"})})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"2.45em\"},children:(0,l.jsx)(e.span,{})})})]})})}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsx)(e.span,{className:\"mtable\",children:(0,l.jsx)(e.span,{className:\"col-align-l\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"3.13em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-5.13em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"+\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-3.69em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsx)(e.span,{className:\"mord\"})]}),(0,l.jsxs)(e.span,{style:{top:\"-2.25em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"2\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-0.81em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsxs)(e.span,{className:\"mord text\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u5929\\u7ED3\\u675F\\u540E\\u6301\\u6709\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\":\\xA0(\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4F11\\u606F\\uFF0C\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4E70\\u5165\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4E14\\u8D85\\u8FC7\\u51B7\\u9759\\u671F\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0-\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u5F71\\u54CD\\u4EA4\\u6613\\u6570\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\")\\xA0\"})]})})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"2.63em\"},children:(0,l.jsx)(e.span,{})})})]})})})}),(0,l.jsx)(e.span,{className:\"mclose nulldelimiter\"})]})]})]})]})}),`\n`,(0,l.jsx)(e.div,{className:\"remark-code-container\",children:(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  const len = prices.length;\n  let dp = new Array(len);\n  dp[0] = [0, -prices[0]];\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = new Array(2).fill(0);\n    dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n    dp[i][1] = Math.max(\n      dp[i - 1][1],\n      i >= 2 ? dp[i - 2][0] - prices[i] : -prices[i]\n    );\n\n  }\n  return dp[len - 1][0];\n};\n`,children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number[]}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" maxProfit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"prices\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" len\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(len);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  dp[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" len; i\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fill\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"],\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\">=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 2\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" ?\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" -\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[i]\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp[len \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,l.jsxs)(e.h3,{id:\"714-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\\u542B\\u624B\\u7EED\\u8D39\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#714-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\\u542B\\u624B\\u7EED\\u8D39\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/\",children:\"714. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\\u542B\\u624B\\u7EED\\u8D39\"})]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"Medium\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7ED9\\u5B9A\\u4E00\\u4E2A\\u6574\\u6570\\u6570\\u7EC4\\xA0\",(0,l.jsx)(e.code,{children:\"prices\"}),\"\\uFF0C\\u5176\\u4E2D\\xA0\",(0,l.jsx)(e.code,{children:\"prices[i]\"}),\"\\u8868\\u793A\\u7B2C\\xA0\",(0,l.jsx)(e.code,{children:\"i\"}),\"\\xA0\\u5929\\u7684\\u80A1\\u7968\\u4EF7\\u683C \\uFF1B\\u6574\\u6570\\xA0\",(0,l.jsx)(e.code,{children:\"fee\"}),\"\\xA0\\u4EE3\\u8868\\u4E86\\u4EA4\\u6613\\u80A1\\u7968\\u7684\\u624B\\u7EED\\u8D39\\u7528\\u3002\"]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4F60\\u53EF\\u4EE5\\u65E0\\u9650\\u6B21\\u5730\\u5B8C\\u6210\\u4EA4\\u6613\\uFF0C\\u4F46\\u662F\\u4F60\\u6BCF\\u7B14\\u4EA4\\u6613\\u90FD\\u9700\\u8981\\u4ED8\\u624B\\u7EED\\u8D39\\u3002\\u5982\\u679C\\u4F60\\u5DF2\\u7ECF\\u8D2D\\u4E70\\u4E86\\u4E00\\u4E2A\\u80A1\\u7968\\uFF0C\\u5728\\u5356\\u51FA\\u5B83\\u4E4B\\u524D\\u4F60\\u5C31\\u4E0D\\u80FD\\u518D\\u7EE7\\u7EED\\u8D2D\\u4E70\\u80A1\\u7968\\u4E86\\u3002\"}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD4\\u56DE\\u83B7\\u5F97\\u5229\\u6DA6\\u7684\\u6700\\u5927\\u503C\\u3002\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:\"\\u9898\\u89E3\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"k = Infinity\"}),\" \\u4F46\\u8981\\u8003\\u8651\\u624B\\u7EED\\u8D39\\uFF08\\u6210\\u672C\\uFF09\\u7684\\u60C5\\u51B5\\u3002\\u5728\",(0,l.jsx)(e.em,{children:\"\\u5356\\u51FA\"}),\"\\u65F6\\u8981\\u8003\\u8651\\u624B\\u7EED\\u8D39\\u7684\"]}),`\n`,(0,l.jsx)(e.span,{className:\"katex-display\",children:(0,l.jsxs)(e.span,{className:\"katex\",children:[(0,l.jsx)(e.span,{className:\"katex-mathml\",children:(0,l.jsx)(e.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"=\"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{fence:\"true\",children:\"{\"}),(0,l.jsxs)(e.mtable,{rowspacing:\"0.36em\",columnalign:\"left left\",columnspacing:\"1em\",children:[(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"+\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"f\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsx)(e.mtext,{children:\"i\\u5929\\u7ED3\\u675F\\u540E\\u672A\\u6301\\u6709:\\xA0(\\u4F11\\u606F\\uFF0C\\xA0\\u5356\\u51FA\\xA0-\\u4E0D\\u5F71\\u54CD\\u4EA4\\u6613\\u6570)\"})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsx)(e.mrow,{})})})}),(0,l.jsx)(e.mtr,{children:(0,l.jsx)(e.mtd,{children:(0,l.jsx)(e.mstyle,{scriptlevel:\"0\",displaystyle:\"false\",children:(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{children:\":\"}),(0,l.jsx)(e.mi,{children:\"M\"}),(0,l.jsx)(e.mi,{children:\"a\"}),(0,l.jsx)(e.mi,{children:\"x\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"(\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"}),(0,l.jsx)(e.mi,{children:\"D\"}),(0,l.jsx)(e.mi,{children:\"P\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mn,{children:\"1\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mn,{children:\"0\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{children:\"\\u2212\"}),(0,l.jsx)(e.mi,{children:\"p\"}),(0,l.jsx)(e.mi,{children:\"r\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mi,{children:\"c\"}),(0,l.jsx)(e.mi,{children:\"e\"}),(0,l.jsx)(e.mi,{children:\"s\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"[\"}),(0,l.jsx)(e.mi,{children:\"i\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\"]\"}),(0,l.jsx)(e.mo,{stretchy:\"false\",children:\")\"}),(0,l.jsx)(e.mo,{separator:\"true\",children:\",\"})]})})})})]})]})]}),(0,l.jsx)(e.annotation,{encoding:\"application/x-tex\",children:`DP[i] = \n\\\\begin{cases} \n0: Max( DP[i-1][0], DP[i-1][1] + prices[i] - fee ), \\\\\\\\\n\\\\text{i\\u5929\\u7ED3\\u675F\\u540E\\u672A\\u6301\\u6709: (\\u4F11\\u606F\\uFF0C \\u5356\\u51FA -\\u4E0D\\u5F71\\u54CD\\u4EA4\\u6613\\u6570)} \\\\\\\\\\\\\\\\\n1:Max(DP[i-1][1], DP[i-1][0] - prices[i]),\\\\\\\\\n\n\\\\end{cases}\n`})]})})}),(0,l.jsxs)(e.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:[(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\"=\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}})]}),(0,l.jsxs)(e.span,{className:\"base\",children:[(0,l.jsx)(e.span,{className:\"strut\",style:{height:\"5.76em\",verticalAlign:\"-2.63em\"}}),(0,l.jsxs)(e.span,{className:\"minner\",children:[(0,l.jsx)(e.span,{className:\"mopen\",children:(0,l.jsx)(e.span,{className:\"delimsizing mult\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"2.95em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-1.6em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A9\"})})]}),(0,l.jsxs)(e.span,{style:{top:\"-1.592em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{style:{height:\"0.916em\",width:\"0.8889em\"},children:(0,l.jsx)(e.svg,{xmlns:\"http://www.w3.org/2000/svg\",width:\"0.8889em\",height:\"0.916em\",style:{width:\"0.8889em\"},viewBox:\"0 0 888.89 916\",preserveAspectRatio:\"xMinYMin\",children:(0,l.jsx)(e.path,{d:\"M384 0 H504 V916 H384z M384 0 H504 V916 H384z\"})})})]}),(0,l.jsxs)(e.span,{style:{top:\"-3.15em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A8\"})})]}),(0,l.jsxs)(e.span,{style:{top:\"-4.292em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{style:{height:\"0.916em\",width:\"0.8889em\"},children:(0,l.jsx)(e.svg,{xmlns:\"http://www.w3.org/2000/svg\",width:\"0.8889em\",height:\"0.916em\",style:{width:\"0.8889em\"},viewBox:\"0 0 888.89 916\",preserveAspectRatio:\"xMinYMin\",children:(0,l.jsx)(e.path,{d:\"M384 0 H504 V916 H384z M384 0 H504 V916 H384z\"})})})]}),(0,l.jsxs)(e.span,{style:{top:\"-5.2em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.15em\"}}),(0,l.jsx)(e.span,{className:\"delimsizinginner delim-size4\",children:(0,l.jsx)(e.span,{children:\"\\u23A7\"})})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"2.45em\"},children:(0,l.jsx)(e.span,{})})})]})})}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsx)(e.span,{className:\"mtable\",children:(0,l.jsx)(e.span,{className:\"col-align-l\",children:(0,l.jsxs)(e.span,{className:\"vlist-t vlist-t2\",children:[(0,l.jsxs)(e.span,{className:\"vlist-r\",children:[(0,l.jsxs)(e.span,{className:\"vlist\",style:{height:\"3.13em\"},children:[(0,l.jsxs)(e.span,{style:{top:\"-5.13em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"+\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10764em\"},children:\"f\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ee\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\")\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]}),(0,l.jsxs)(e.span,{style:{top:\"-3.69em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:(0,l.jsxs)(e.span,{className:\"mord text\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u5929\\u7ED3\\u675F\\u540E\\u672A\\u6301\\u6709\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\":\\xA0(\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4F11\\u606F\\uFF0C\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u5356\\u51FA\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"\\xA0-\"}),(0,l.jsx)(e.span,{className:\"mord cjk_fallback\",children:\"\\u4E0D\\u5F71\\u54CD\\u4EA4\\u6613\\u6570\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\")\"})]})})]}),(0,l.jsxs)(e.span,{style:{top:\"-2.25em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsx)(e.span,{className:\"mord\"})]}),(0,l.jsxs)(e.span,{style:{top:\"-0.81em\"},children:[(0,l.jsx)(e.span,{className:\"pstrut\",style:{height:\"3.008em\"}}),(0,l.jsxs)(e.span,{className:\"mord\",children:[(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mrel\",children:\":\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2778em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"},children:\"M\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"a\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"x\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"(\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.1667em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"D\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"},children:\"P\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord\",children:\"1\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord\",children:\"0\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"]\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mbin\",children:\"\\u2212\"}),(0,l.jsx)(e.span,{className:\"mspace\",style:{marginRight:\"0.2222em\"}}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"p\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"},children:\"r\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"ces\"}),(0,l.jsx)(e.span,{className:\"mopen\",children:\"[\"}),(0,l.jsx)(e.span,{className:\"mord mathnormal\",children:\"i\"}),(0,l.jsx)(e.span,{className:\"mclose\",children:\"])\"}),(0,l.jsx)(e.span,{className:\"mpunct\",children:\",\"})]})]})]}),(0,l.jsx)(e.span,{className:\"vlist-s\",children:\"\\u200B\"})]}),(0,l.jsx)(e.span,{className:\"vlist-r\",children:(0,l.jsx)(e.span,{className:\"vlist\",style:{height:\"2.63em\"},children:(0,l.jsx)(e.span,{})})})]})})})}),(0,l.jsx)(e.span,{className:\"mclose nulldelimiter\"})]})]})]})]})}),`\n`,(0,l.jsx)(e.div,{className:\"remark-code-container\",children:(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * @param {number[]} prices\n * @param {number} fee\n * @return {number}\n */\nvar maxProfit = function (prices, fee) {\n  const len = prices.length;\n  let dp = new Array(len);\n  dp[0] = [0, -prices[0]];\n\n  for (let i = 1; i < len; i++) {\n    dp[i] = new Array(2).fill(0);\n    dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i] - fee);\n    dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);\n  }\n  return dp[len - 1][0];\n};\n`,children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number[]}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" fee\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" maxProfit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"prices\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"fee\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" len\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(len);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  dp[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"prices[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" len; i\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fill\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" fee);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    dp[i][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"], dp[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" dp[len \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"][\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,l.jsxs)(e.h2,{id:\"\\u5176\\u4ED6\\u89E3\\u6CD5\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u5176\\u4ED6\\u89E3\\u6CD5\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5176\\u4ED6\\u89E3\\u6CD5\"]}),`\n`,(0,l.jsxs)(e.h3,{id:\"121-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-1\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#121-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-1\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/\",children:\"121. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A\"})]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u627E\\u6700\\u5C0F\\u6210\\u672C\\uFF0C\\u6700\\u5927\\u5316\\u6536\\u76CA\"}),`\n`,(0,l.jsx)(e.div,{className:\"remark-code-container\",children:(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function(prices) {\n    let cost = prices[0];\n    let profile = 0;\n\n    for(let i = 0; i < prices.length;i++){\n        cost = Math.min(cost,prices[i]);\n        profile = Math.max(profile,prices[i]-cost)\n    }\n    return profile;\n};\n`,children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number[]}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" maxProfit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"prices\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" cost \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" profile \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";i\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"){\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        cost \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"min\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(cost,prices[i]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        profile \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(profile,prices[i]\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"cost)\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" profile;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})}),`\n`,(0,l.jsxs)(e.h3,{id:\"122-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-ii-1\",children:[(0,l.jsx)(e.a,{className:\"header-anchor\",href:\"#122-\\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A-ii-1\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),(0,l.jsx)(e.a,{href:\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/\",children:\"122. \\u4E70\\u5356\\u80A1\\u7968\\u7684\\u6700\\u4F73\\u65F6\\u673A II\"})]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8D2A\\u5FC3\\uFF1A\\u6C42\\u6240\\u6709\\u6B63\\u659C\\u7387\\u7684\\u603B\\u548C\"}),`\n`,(0,l.jsx)(e.div,{className:\"remark-code-container\",children:(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`/**\n * @param {number[]} prices\n * @return {number}\n */\nvar maxProfit = function (prices) {\n  let profit = 0;\n  for (let i = 1; i < prices.length; i++) {\n    profit += Math.max(0, prices[i] - prices[i - 1]);\n  }\n  return profit;\n};\n`,children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"/**\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@param\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number[]}\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"@return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" {number}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" maxProfit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"prices\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" profit \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; i\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    profit \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"max\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", prices[i] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" prices[i \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" profit;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})})})]})}function R(s={}){let{wrapper:e}=s.components||{};return e?(0,l.jsx)(e,Object.assign({},s,{children:(0,l.jsx)(d,s)})):d(s)}var b=R;return f(x);})();\n;return Component;"
    },
    "_id": "post/2025-01-04-leetcode-stock.md",
    "_raw": {
      "sourceFilePath": "post/2025-01-04-leetcode-stock.md",
      "sourceFileName": "2025-01-04-leetcode-stock.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/2025-01-04-leetcode-stock"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/2025-01-04-leetcode-stock",
    "slugAsParams": "2025-01-04-leetcode-stock"
  },
  {
    "title": "LaTex 使用技巧",
    "tags": [
      "skill"
    ],
    "date": "2024-08-24T16:00:00.000Z",
    "body": {
      "raw": "\n**高亮**： `\\hl` (`usepackage{soul}`)\n\n**新开页：** `\\clearpage`\n**新开一列**： `\\newpage`\n\n**Figure**\n\n```latex\n\\begin{figure}\n\\centering\n\\includegraphics[width=0.8\\textwidth,height=0.5\\textwidth]{the.png}\n\\caption{The caption} \\label{fig1}\n\\end{figure}\n\n```\n\n**Algorithm**\n\n```latex\n\\usepackage{algorithm}\n\\usepackage{algorithmicx}\n\\usepackage{algpseudocode}  % 这个和algorithmic不兼容，\n\\renewcommand{\\algorithmiccomment}[1]{\\\\$\\triangleright$ #1}\n\\renewcommand{\\algorithmicrequire}{ \\textbf{Input:}}\n\\renewcommand{\\algorithmicensure}{ \\textbf{Output:}}\n\n\n\\begin{algorithm}[t]\n\t\\caption{pix2pix-zero algorithm}\n\t\\label{alg:example}\n\t\\begin{algorithmic}\n\t\t\\Require  $x_T$ (same as $x_{inv}$): noise-regularized DDIM inversion of latent code corresponding to $\\bar{x}$\n\t\t\\\\ c: input text features, $\\Delta c_{edit}$: edit direction\n\t\t\\\\ $\\lambda_{xa}$: cross-attention guidance weight\n\t\t\\vspace{1em}\n\t\t\\Ensure  $x_0$ (final edited latent code)\n\n        \\vspace{1em}\n\t\t\\Comment Compute reference cross-attention map\n\t\t\\For{$t=T \\dots 1$ }\n    \t\\State ${\\hat{\\epsilon},M_{t}^{\\mathrm{ref}} \\leftarrow \\epsilon_{\\theta}(x_{t},t,c)}$\n            \\State ${ { x_{t-1} =\\mathrm{UPDATE}(x_{t},\\hat{\\epsilon},t)} }$\n\t\t\\EndFor\n\n        \\vspace{1em}\n\t\t\\Comment Compute reference cross-attention map\n        \\State $c_{edit}=c + \\Delta c_{edit}$\n\t\t\\For{$t=T \\dots 1$ }\n            \\State --, $M_{t}^{ref} \\leftarrow \\epsilon_{\\theta}( x_{t},t , c_{edit} )$\n            \\State $\\displaystyle\\Delta x_{t}=\\nabla_{x_{t}}\\bigl(||M_{t}^{edit}-M_{t}^{ref}||_{2}\\bigr)$\n            \\State $\\bar{\\epsilon}$, --$\\leftarrow \\epsilon_{\\theta}( x_t - \\lambda_{xa} \\Delta x_t, t, c_{edit})$\n            \\State $t-1\\leftarrow \\mathrm{UPDATE}(x_{t},\\bar{\\epsilon},t)$\n\t\t\\EndFor\n\n        \\vspace{1em}\n        \\Comment Update current state $x_t$ with noise prediction $\\bar{\\epsilon}$\n\t\t\\Function{UPDATE}{$x_t, \\bar{\\epsilon},t$}\n\t\t  \\State $x_{t-1}=\\sqrt{x_{t-1}}\\ \\frac{x_{t}-\\sqrt{1-x_{t}}\\hat{\\epsilon}}{\\sqrt{x_{t}}}\\ +\\ \\sqrt{1-x_{t-1}}\\hat{\\epsilon} $;\n            \\State \\Return $x_{t-1}$\n\t\t\\EndFunction\n\t\\end{algorithmic}\n\\end{algorithm}\n\n\n```\n\n#### 中文使用\n\nhttps://www.cnblogs.com/chuqianyu/p/14620014.html\n\n```latex\n%test.tex\n\\documentclass{article}\n\\usepackage{CJKutf8}\n\\begin{document}\n\\begin{CJK}{UTF8}{gbsn}\n这是一个CJKutf8的例子，使用的字体是gbsn。\n\\end{CJK}\n\\end{document}\n```\n\n用 pdflatex 编译 tex 文件，即可得到输出结果。\n",
      "code": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),m=(l,e)=>{for(var t in e)a(l,t,{get:e[t],enumerable:!0})},s=(l,e,t,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of F(e))!y.call(l,r)&&r!==t&&a(l,r,{get:()=>e[r],enumerable:!(c=p(e,r))||c.enumerable});return l};var B=(l,e,t)=>(t=l!=null?h(E(l)):{},s(e||!l||!l.__esModule?a(t,\"default\",{value:l,enumerable:!0}):t,l)),u=l=>s(a({},\"__esModule\",{value:!0}),l);var i=g((f,o)=>{o.exports=_jsx_runtime});var C={};m(C,{default:()=>_,frontmatter:()=>x});var n=B(i()),x={title:\"LaTex \\u4F7F\\u7528\\u6280\\u5DE7\",tags:[\"skill\"],date:\"2024-8-25\",layout:\"list\",categories:[\"Note\"]};function d(l){let e=Object.assign({p:\"p\",strong:\"strong\",code:\"code\",div:\"div\",figure:\"figure\",pre:\"pre\",span:\"span\",h4:\"h4\",a:\"a\"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u9AD8\\u4EAE\"}),\"\\uFF1A \",(0,n.jsx)(e.code,{children:\"\\\\hl\"}),\" (\",(0,n.jsx)(e.code,{children:\"usepackage{soul}\"}),\")\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u65B0\\u5F00\\u9875\\uFF1A\"}),\" \",(0,n.jsx)(e.code,{children:\"\\\\clearpage\"}),`\n`,(0,n.jsx)(e.strong,{children:\"\\u65B0\\u5F00\\u4E00\\u5217\"}),\"\\uFF1A \",(0,n.jsx)(e.code,{children:\"\\\\newpage\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Figure\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"latex\",\"data-theme\":\"github-dark\",raw:`\\\\begin{figure}\n\\\\centering\n\\\\includegraphics[width=0.8\\\\textwidth,height=0.5\\\\textwidth]{the.png}\n\\\\caption{The caption} \\\\label{fig1}\n\\\\end{figure}\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"latex\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\begin\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{figure}\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\centering\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\includegraphics\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"[width=0.8\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\textwidth\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",height=0.5\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\textwidth\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]{the.png}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\caption\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{The caption} \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\label\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"fig1\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\end\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{figure}\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Algorithm\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"latex\",\"data-theme\":\"github-dark\",raw:`\\\\usepackage{algorithm}\n\\\\usepackage{algorithmicx}\n\\\\usepackage{algpseudocode}  % \\u8FD9\\u4E2A\\u548Calgorithmic\\u4E0D\\u517C\\u5BB9\\uFF0C\n\\\\renewcommand{\\\\algorithmiccomment}[1]{\\\\\\\\$\\\\triangleright$ #1}\n\\\\renewcommand{\\\\algorithmicrequire}{ \\\\textbf{Input:}}\n\\\\renewcommand{\\\\algorithmicensure}{ \\\\textbf{Output:}}\n\n\n\\\\begin{algorithm}[t]\n\t\\\\caption{pix2pix-zero algorithm}\n\t\\\\label{alg:example}\n\t\\\\begin{algorithmic}\n\t\t\\\\Require  $x_T$ (same as $x_{inv}$): noise-regularized DDIM inversion of latent code corresponding to $\\\\bar{x}$\n\t\t\\\\\\\\ c: input text features, $\\\\Delta c_{edit}$: edit direction\n\t\t\\\\\\\\ $\\\\lambda_{xa}$: cross-attention guidance weight\n\t\t\\\\vspace{1em}\n\t\t\\\\Ensure  $x_0$ (final edited latent code)\n\n        \\\\vspace{1em}\n\t\t\\\\Comment Compute reference cross-attention map\n\t\t\\\\For{$t=T \\\\dots 1$ }\n    \t\\\\State \\${\\\\hat{\\\\epsilon},M_{t}^{\\\\mathrm{ref}} \\\\leftarrow \\\\epsilon_{\\\\theta}(x_{t},t,c)}$\n            \\\\State \\${ { x_{t-1} =\\\\mathrm{UPDATE}(x_{t},\\\\hat{\\\\epsilon},t)} }$\n\t\t\\\\EndFor\n\n        \\\\vspace{1em}\n\t\t\\\\Comment Compute reference cross-attention map\n        \\\\State $c_{edit}=c + \\\\Delta c_{edit}$\n\t\t\\\\For{$t=T \\\\dots 1$ }\n            \\\\State --, $M_{t}^{ref} \\\\leftarrow \\\\epsilon_{\\\\theta}( x_{t},t , c_{edit} )$\n            \\\\State $\\\\displaystyle\\\\Delta x_{t}=\\\\nabla_{x_{t}}\\\\bigl(||M_{t}^{edit}-M_{t}^{ref}||_{2}\\\\bigr)$\n            \\\\State $\\\\bar{\\\\epsilon}$, --$\\\\leftarrow \\\\epsilon_{\\\\theta}( x_t - \\\\lambda_{xa} \\\\Delta x_t, t, c_{edit})$\n            \\\\State $t-1\\\\leftarrow \\\\mathrm{UPDATE}(x_{t},\\\\bar{\\\\epsilon},t)$\n\t\t\\\\EndFor\n\n        \\\\vspace{1em}\n        \\\\Comment Update current state $x_t$ with noise prediction $\\\\bar{\\\\epsilon}$\n\t\t\\\\Function{UPDATE}{$x_t, \\\\bar{\\\\epsilon},t$}\n\t\t  \\\\State $x_{t-1}=\\\\sqrt{x_{t-1}}\\\\ \\\\frac{x_{t}-\\\\sqrt{1-x_{t}}\\\\hat{\\\\epsilon}}{\\\\sqrt{x_{t}}}\\\\ +\\\\ \\\\sqrt{1-x_{t-1}}\\\\hat{\\\\epsilon} $;\n            \\\\State \\\\Return $x_{t-1}$\n\t\t\\\\EndFunction\n\t\\\\end{algorithmic}\n\\\\end{algorithm}\n\n\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"latex\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\usepackage\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"algorithm\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\usepackage\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"algorithmicx\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\usepackage\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"algpseudocode\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}  \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"% \\u8FD9\\u4E2A\\u548Calgorithmic\\u4E0D\\u517C\\u5BB9\\uFF0C\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\renewcommand\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\algorithmiccomment\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}[1]{\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\\\\\\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\triangleright\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" #1}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\renewcommand\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\algorithmicrequire\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}{ \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\textbf\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\",fontWeight:\"bold\"},children:\"Input:\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\renewcommand\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\algorithmicensure\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}{ \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\textbf\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\",fontWeight:\"bold\"},children:\"Output:\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}}\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\begin\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{algorithm}[t]\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\\\\caption\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{pix2pix-zero algorithm}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\t\\\\label\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"alg:example\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\\\\begin\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{algorithmic}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\Require\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"  $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"x_T\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (same as \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"x_{inv}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"): noise-regularized DDIM inversion of latent code corresponding to \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\bar{x}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\t\t\\\\\\\\\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" c: input text features, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\Delta c_{edit}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": edit direction\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\t\t\\\\\\\\\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\lambda_{xa}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": cross-attention guidance weight\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\vspace\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{1em}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\Ensure\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"  $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"x_0\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (final edited latent code)\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"        \\\\vspace\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{1em}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\Comment\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Compute reference cross-attention map\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\For\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"t=T \\\\dots 1\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    \t\\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"{\\\\hat{\\\\epsilon},M_{t}^{\\\\mathrm{ref}} \\\\leftarrow \\\\epsilon_{\\\\theta}(x_{t},t,c)}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"            \\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"{ { x_{t-1} =\\\\mathrm{UPDATE}(x_{t},\\\\hat{\\\\epsilon},t)} }\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\EndFor\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"        \\\\vspace\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{1em}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\Comment\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Compute reference cross-attention map\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"        \\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"c_{edit}=c + \\\\Delta c_{edit}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\For\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"t=T \\\\dots 1\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"            \\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" --, \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"M_{t}^{ref} \\\\leftarrow \\\\epsilon_{\\\\theta}( x_{t},t , c_{edit} )\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"            \\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\displaystyle\\\\Delta x_{t}=\\\\nabla_{x_{t}}\\\\bigl(||M_{t}^{edit}-M_{t}^{ref}||_{2}\\\\bigr)\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"            \\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\bar{\\\\epsilon}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", --\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\leftarrow \\\\epsilon_{\\\\theta}( x_t - \\\\lambda_{xa} \\\\Delta x_t, t, c_{edit})\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"            \\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"t-1\\\\leftarrow \\\\mathrm{UPDATE}(x_{t},\\\\bar{\\\\epsilon},t)\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\EndFor\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"        \\\\vspace\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{1em}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"        \\\\Comment\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Update current state \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"x_t\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" with noise prediction \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\bar{\\\\epsilon}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\Function\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{UPDATE}{\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"x_t, \\\\bar{\\\\epsilon},t\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t  \\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"x_{t-1}=\\\\sqrt{x_{t-1}}\\\\ \\\\frac{x_{t}-\\\\sqrt{1-x_{t}}\\\\hat{\\\\epsilon}}{\\\\sqrt{x_{t}}}\\\\ +\\\\ \\\\sqrt{1-x_{t-1}}\\\\hat{\\\\epsilon} \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"            \\\\State\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" \\\\Return\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" $\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"x_{t-1}\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"$\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\t\\\\EndFunction\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\t\\\\end\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{algorithmic}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\end\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{algorithm}\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,n.jsxs)(e.h4,{id:\"\\u4E2D\\u6587\\u4F7F\\u7528\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#\\u4E2D\\u6587\\u4F7F\\u7528\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4E2D\\u6587\\u4F7F\\u7528\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.cnblogs.com/chuqianyu/p/14620014.html\",children:\"https://www.cnblogs.com/chuqianyu/p/14620014.html\"})}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"latex\",\"data-theme\":\"github-dark\",raw:`%test.tex\n\\\\documentclass{article}\n\\\\usepackage{CJKutf8}\n\\\\begin{document}\n\\\\begin{CJK}{UTF8}{gbsn}\n\\u8FD9\\u662F\\u4E00\\u4E2ACJKutf8\\u7684\\u4F8B\\u5B50\\uFF0C\\u4F7F\\u7528\\u7684\\u5B57\\u4F53\\u662Fgbsn\\u3002\n\\\\end{CJK}\n\\\\end{document}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"latex\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"%test.tex\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\documentclass\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"article\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"\\\\usepackage\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"CJKutf8\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\begin\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{document}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\begin\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{CJK}{UTF8}{gbsn}\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"\\u8FD9\\u662F\\u4E00\\u4E2ACJKutf8\\u7684\\u4F8B\\u5B50\\uFF0C\\u4F7F\\u7528\\u7684\\u5B57\\u4F53\\u662Fgbsn\\u3002\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\end\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{CJK}\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"\\\\end\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{document}\"})]})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7528 pdflatex \\u7F16\\u8BD1 tex \\u6587\\u4EF6\\uFF0C\\u5373\\u53EF\\u5F97\\u5230\\u8F93\\u51FA\\u7ED3\\u679C\\u3002\"})]})}function $(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(d,l)})):d(l)}var _=$;return u(C);})();\n;return Component;"
    },
    "_id": "post/skill-LaTeX.md",
    "_raw": {
      "sourceFilePath": "post/skill-LaTeX.md",
      "sourceFileName": "skill-LaTeX.md",
      "sourceFileDir": "post",
      "contentType": "markdown",
      "flattenedPath": "post/skill-LaTeX"
    },
    "type": "Post",
    "parDir": "post",
    "slug": "/post/skill-LaTeX",
    "slugAsParams": "skill-LaTeX"
  }
]
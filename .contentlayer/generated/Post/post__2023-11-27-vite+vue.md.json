{
  "title": "vite+vue+ts+sass项目搭建",
  "url": "/2023-11-27-vite+vue",
  "description": null,
  "date": "2023-11-27T00:00:00.000Z",
  "body": {
    "raw": "\n\n\n> 兼容性：Vite 需要 [Node.js](https://nodejs.org/en/) 版本 18+，20+\n> 若用vscode开发不要装vetur插件（垃圾），安装Volar+TypeScript Vue Plugin (Volar)（vetur的升级版）\n\n```shell\nnpm create vite my-vue-app --template vue-ts\n```\n\n\n\n> 相关依赖\n>\n> sass： `npm i sass -D`\n>\n> hooks： \n\n#### Sass\n\n```bash\nnpm i sass -D\n```\n\n全局引入： 在vite.config.js文件添加配置\n\n```js\nexport default defineConfig({\n    ...\n    css: {\n        preprocessorOptions: {\n            additionalData: '@import \"@/assets/scss/globalVar.scss\";@import \"@/assets/scss/globalMixin.scss\";'\n        }\n    }\n});\n```\n\n按需引入\n\n```vue\n<style lang=\"scss\" scoped>\n    @import \"@/assets/scss/globalVar.scss\";\n</style>\n```\n\n\n\n#### 路径别名\n\n```shell\nnpm install @types/node --save-dev\n```\n\n配置vite.config.ts\n\n```tsx\nimport path from \"path\";\n\nexport default defineConfig({\n  ...\n  resolve: {\n    alias: {\n      \"@\": path.resolve(\"./src\"),\n    },\n  },\n});\n\n```\n\n配置tsconfig.json\n\n```tsx\n{\n  \"compilerOptions\": {\n    ...\n    \"baseUrl\": \".\",\n    \"paths\": { \"@/*\": [\"src/*\"] }\n  },\n}\n```\n\n\n\n#### 状态管理-Pinia\n\n[pinia](https://pinia.vuejs.org/zh/)\n[pinia-plugin-persist](https://seb-l.github.io/pinia-plugin-persist/)\n\n```bash\nnpm install pinia -D\nnpm install pinia-plugin-persist -D # 可选，插件\n```\n\n\n\n#### 多环境配置\n\n添加配置文件\n\n```shell\n# .env.user\n# 接口请求地址前缀\nVITE_APP_API_PREFIX = /api\n\n# 删除 console 代码\nVITE_DROP_CONSOLE = true\n\n# 生产环境配置文件名称\nVITE_GLOB_CONFIG_FILE_NAME = app.config.js\n\n# 打包生成目录\nVITE_OUTPUT_DIR = user\n\n# 平台\nVITE_PLATFORM = user\n\n# 重定向路径\nVITE_REDIRECT_INDEX = \"/index\"\n\n```\n\n修改package.json, 添加--mode 参数\n\n```json\n{\n  ...\n\t\"scripts\": {\n    \"dev\": \"vite  --mode dev\",\n    \"build\": \"vue-tsc && vite build --mode prd\",\n    \"preview\": \"vite preview\"\n  },\n}\n```\n\n项目中使用\n\n```js\nconst baseUrl = import.meta.env.VITE_APP_API_PREFIX;\n```\n\n\n\n## 遇到的问题\n\n##### Cannot find module 'vue'. Did you mean to set the 'moduleResolution' option to 'node', or to add aliases to the 'paths' option?Vetur\n\n把tsconfig.json配置项moduleResolution：\"bundler\"改为 moduleResolution：\"node\"\n\n\n\n##### An import path cannot end with a '.ts' extension. Consider importing '@/store/counter.js\n\n配置vite.config.ts中resolve.extensions的配置项\n\n##### Cannot find module '~/store/counter' or its corresponding type declarations.ts(2307)\n\n****\n\n\n\nhttps://juejin.cn/post/7170746000112353293?searchId=2023112613400612F6DE1AB312141A1338#heading-31\n\n\n\n服务器端口无法访问\n\nA：防火墙未开启\n\n查看防火墙中允许被访问的端口号：sudo firewall-cmd --list-all （ports选项）\n\n`firewall-cmd --zone=public --list-ports`\n\n开启端口：sudo firewall-cmd --zone=public --add-port=8887/tcp --permanent\n\n重启防火墙：sudo firewall-cmd --reload\n\n关闭端口：sudo firewall-cmd --zone=public --remove-port=7890/tcp --permanent \n\n再次检查\n\n检查端口网站：https://tool.chinaz.com/port",
    "html": "<blockquote>\n<p>兼容性：Vite 需要 <a href=\"https://nodejs.org/en/\">Node.js</a> 版本 18+，20+\n若用vscode开发不要装vetur插件（垃圾），安装Volar+TypeScript Vue Plugin (Volar)（vetur的升级版）</p>\n</blockquote>\n<pre><code class=\"language-shell\">npm create vite my-vue-app --template vue-ts\n</code></pre>\n<blockquote>\n<p>相关依赖</p>\n<p>sass： <code>npm i sass -D</code></p>\n<p>hooks：</p>\n</blockquote>\n<h4>Sass</h4>\n<pre><code class=\"language-bash\">npm i sass -D\n</code></pre>\n<p>全局引入： 在vite.config.js文件添加配置</p>\n<pre><code class=\"language-js\">export default defineConfig({\n    ...\n    css: {\n        preprocessorOptions: {\n            additionalData: '@import \"@/assets/scss/globalVar.scss\";@import \"@/assets/scss/globalMixin.scss\";'\n        }\n    }\n});\n</code></pre>\n<p>按需引入</p>\n<pre><code class=\"language-vue\">&#x3C;style lang=\"scss\" scoped>\n    @import \"@/assets/scss/globalVar.scss\";\n&#x3C;/style>\n</code></pre>\n<h4>路径别名</h4>\n<pre><code class=\"language-shell\">npm install @types/node --save-dev\n</code></pre>\n<p>配置vite.config.ts</p>\n<pre><code class=\"language-tsx\">import path from \"path\";\n\nexport default defineConfig({\n  ...\n  resolve: {\n    alias: {\n      \"@\": path.resolve(\"./src\"),\n    },\n  },\n});\n\n</code></pre>\n<p>配置tsconfig.json</p>\n<pre><code class=\"language-tsx\">{\n  \"compilerOptions\": {\n    ...\n    \"baseUrl\": \".\",\n    \"paths\": { \"@/*\": [\"src/*\"] }\n  },\n}\n</code></pre>\n<h4>状态管理-Pinia</h4>\n<p><a href=\"https://pinia.vuejs.org/zh/\">pinia</a>\n<a href=\"https://seb-l.github.io/pinia-plugin-persist/\">pinia-plugin-persist</a></p>\n<pre><code class=\"language-bash\">npm install pinia -D\nnpm install pinia-plugin-persist -D # 可选，插件\n</code></pre>\n<h4>多环境配置</h4>\n<p>添加配置文件</p>\n<pre><code class=\"language-shell\"># .env.user\n# 接口请求地址前缀\nVITE_APP_API_PREFIX = /api\n\n# 删除 console 代码\nVITE_DROP_CONSOLE = true\n\n# 生产环境配置文件名称\nVITE_GLOB_CONFIG_FILE_NAME = app.config.js\n\n# 打包生成目录\nVITE_OUTPUT_DIR = user\n\n# 平台\nVITE_PLATFORM = user\n\n# 重定向路径\nVITE_REDIRECT_INDEX = \"/index\"\n\n</code></pre>\n<p>修改package.json, 添加--mode 参数</p>\n<pre><code class=\"language-json\">{\n  ...\n\t\"scripts\": {\n    \"dev\": \"vite  --mode dev\",\n    \"build\": \"vue-tsc &#x26;&#x26; vite build --mode prd\",\n    \"preview\": \"vite preview\"\n  },\n}\n</code></pre>\n<p>项目中使用</p>\n<pre><code class=\"language-js\">const baseUrl = import.meta.env.VITE_APP_API_PREFIX;\n</code></pre>\n<h2>遇到的问题</h2>\n<h5>Cannot find module 'vue'. Did you mean to set the 'moduleResolution' option to 'node', or to add aliases to the 'paths' option?Vetur</h5>\n<p>把tsconfig.json配置项moduleResolution：\"bundler\"改为 moduleResolution：\"node\"</p>\n<h5>An import path cannot end with a '.ts' extension. Consider importing '@/store/counter.js</h5>\n<p>配置vite.config.ts中resolve.extensions的配置项</p>\n<h5>Cannot find module '~/store/counter' or its corresponding type declarations.ts(2307)</h5>\n<hr>\n<p>https://juejin.cn/post/7170746000112353293?searchId=2023112613400612F6DE1AB312141A1338#heading-31</p>\n<p>服务器端口无法访问</p>\n<p>A：防火墙未开启</p>\n<p>查看防火墙中允许被访问的端口号：sudo firewall-cmd --list-all （ports选项）</p>\n<p><code>firewall-cmd --zone=public --list-ports</code></p>\n<p>开启端口：sudo firewall-cmd --zone=public --add-port=8887/tcp --permanent</p>\n<p>重启防火墙：sudo firewall-cmd --reload</p>\n<p>关闭端口：sudo firewall-cmd --zone=public --remove-port=7890/tcp --permanent</p>\n<p>再次检查</p>\n<p>检查端口网站：https://tool.chinaz.com/port</p>"
  },
  "_id": "post/2023-11-27-vite+vue.md",
  "_raw": {
    "sourceFilePath": "post/2023-11-27-vite+vue.md",
    "sourceFileName": "2023-11-27-vite+vue.md",
    "sourceFileDir": "post",
    "contentType": "markdown",
    "flattenedPath": "post/2023-11-27-vite+vue"
  },
  "type": "Post",
  "id": ""
}
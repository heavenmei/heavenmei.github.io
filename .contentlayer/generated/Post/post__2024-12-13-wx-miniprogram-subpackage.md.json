{
  "title": "微信小程序分包",
  "tags": [
    "Front"
  ],
  "author": "heavenmei",
  "subtitle": null,
  "description": null,
  "date": "2024-12-13T00:00:00.000Z",
  "body": {
    "raw": "微信小程序真机调试会有包体积限制，单包不能超过2MB，查了一下依赖，大部分是npm构建的依赖。好在微信自己提供的分包的能力\n\n| ![](assets/2024-12-13-wx-miniprogram-subpackage-20241213114128.png) | ![](assets/2024-12-13-wx-miniprogram-subpackage-20241213114344.png) |\n|--|--|\n\n\n\n## 分包\n>  [官方教程](https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html)\n\n我将其中一个功能模块word进行拆分，\n```\n├── app.js\n├── app.json\n├── app.wxss\n├── pages\n│   ├── index\n|———└── pageA\n│       └── index\n|———└── word\n│       ├── index\n│       ├── learn\n│             └── learn\n│       ├── review\n│             └── review\n└── utils\n```\n\n `app.json`， 注意⚠️：\n - `tabBar` 页面必须在主包内\n - `subPackages` 的根目录不能是另外一个 `subPackages` 内的子目录\n - **子包之间无法相互引用，但是可以引用主包文件**，反过来不行\n\n```json\n  \"pages\":[],//主包页面\n  \"subPackages\": [\n    {\n      \"name\": \"word\",\n      \"root\": \"pages/word\",\n      \"pages\": [\n        \"index\",\n        \"learn/learn\",\n        \"review/review\",\n      ]\n    },\n  ],\n```\n\n至此，就完成了一个功能模块的拆分，但还主包体积还是很大，主要是UI库、Echart的体积太大，还需要继续拆分。UI库可以删去miniprogram_npm中不用的依赖，但是拆分起来太麻烦了。而且还要解决子包之间的相互引用问题\n\n## 分包异步化组件\n\n\n一个分包使用其他分包的自定义组件时，由于其他分包还未下载或注入，其他分包的组件处于不可用的状态。通过为其他分包的自定义组件设置 [占位组件](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/placeholder.html)，我们可以先渲染占位组件作为替代，在分包下载完成后再进行替换。\n\n\n先封装一个通用的echart组件\n`baseChart.json`\n```json\n{\n  \"component\": true,\n  \"usingComponents\": {\n    \"ec-canvas\": \"../ec-canvas/ec-canvas\"\n  }\n}\n```\n\n\n`baseChart.wxml`\n\n```html\n<view style=\"height: {{height}};width:100%\">\n  <ec-canvas\n    id=\"{{chartId}}\"\n    canvas-id=\"{{canvasId}}\"\n    ec=\"{{ ec }}\"\n  ></ec-canvas>\n</view>\n```\n\n`baseChart.js`\n```js\nimport * as echarts from \"../ec-canvas/echarts\";\n\nComponent({\n  properties: {\n    height: {\n      type: String,\n    },\n    option: {\n      type: Object,\n    },\n  },\n  observers: {\n    option: function (val) {\n      setTimeout(() => {\n        this.initChart(val || {});\n      }, 0);\n    },\n  },\n  data: {\n    chartId: \"\",\n    canvasId: \"\",\n    ec: {\n      lazyload: true,\n    },\n  },\n  lifetimes: {\n    attached() {\n      this.setData({\n        chartId: `chart_${this.__wxExparserNodeId__}`,\n        canvasId: `canvas_${this.__wxExparserNodeId__}`,\n      });\n      this.chartComp = this.selectComponent(`#${this.data.chartId}`);\n    },\n  },\n  methods: {\n    initChart(option) {\n      this.chartComp &&\n        this.chartComp.init((canvas, width, height, dpr) => {\n          const chart = echarts.init(canvas, null, {\n            width: width,\n            height: height,\n            devicePixelRatio: dpr,\n          });\n          if (option.tooltip) {\n            Object.assign(option.tooltip, {\n              confine: true,\n              shadowBlur: 0,\n              shadowColor: \"#e7e8e8\",\n              shadowOffsetY: 0,\n              shadowOffsetX: 0,\n              borderColor: \"#e7e8e8\",\n              padding: [\n                5, // 上\n                20, // 右\n                5, // 下\n                20, // 左\n              ],\n            });\n          }\n\n          chart.setOption(option);\n          this.chart = chart;\n          return chart;\n        });\n    },\n  },\n});\n\n```\n\n\n然后在主包页面`setting.json`中调用 \n```json\n{\n  \"usingComponents\": {\n    \"t-chart\": \"/echarts/baseChart/baseChart\"\n  },\n  // 占位组件\n   \"componentPlaceholder\": {\n    \"t-chart\": \"view\"\n  }\n}\n```\n\n\n```html\n<t-chart option=\"{{option}}\" height=\"300rpx\"></t-chart>\n```\n\n\n`app.json`\n\n利用分包预下载的能里，在使用异步组件的页面提前加载分包。\n```json\n\"subPackages\": [\n    {\n      \"name\": \"echarts\",\n      \"root\": \"echarts\",\n      \"pages\": [\n        \"ec-canvas/ec-canvas\",\n        \"baseChart/baseChart\",\n      ]\n    }\n  ],\n  \"preloadRule\": {\n    \"pages/settings/index\": {\n      \"network\": \"all\",\n      \"packages\": [\"echarts\"]\n    }\n  },\n```\n\n成功后控制台会输出，若未成功可以重启下开发工具\n```bash\npreloadSubpackages: components\npreloadSubpackages: success\n```\n\n![](assets/2024-12-13-wx-miniprogram-subpackage-20241213012018.png)",
    "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var g=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),A=(l,n)=>{for(var a in n)c(l,a,{get:n[a],enumerable:!0})},o=(l,n,a,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of E(n))!F.call(l,r)&&r!==a&&c(l,r,{get:()=>n[r],enumerable:!(s=p(n,r))||s.enumerable});return l};var B=(l,n,a)=>(a=l!=null?h(y(l)):{},o(n||!l||!l.__esModule?c(a,\"default\",{value:l,enumerable:!0}):a,l)),m=l=>o(c({},\"__esModule\",{value:!0}),l);var t=g((k,i)=>{i.exports=_jsx_runtime});var w={};A(w,{default:()=>b,frontmatter:()=>u});var e=B(t()),u={title:\"\\u5FAE\\u4FE1\\u5C0F\\u7A0B\\u5E8F\\u5206\\u5305\",subtitle:null,layout:\"post\",date:new Date(1734048e6),author:\"heavenmei\",categories:[\"Post\"],description:null,tags:[\"Front\"],image:null};function d(l){let n=Object.assign({p:\"p\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",img:\"img\",h2:\"h2\",a:\"a\",span:\"span\",blockquote:\"blockquote\",div:\"div\",pre:\"pre\",code:\"code\",strong:\"strong\",figure:\"figure\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\u5FAE\\u4FE1\\u5C0F\\u7A0B\\u5E8F\\u771F\\u673A\\u8C03\\u8BD5\\u4F1A\\u6709\\u5305\\u4F53\\u79EF\\u9650\\u5236\\uFF0C\\u5355\\u5305\\u4E0D\\u80FD\\u8D85\\u8FC72MB\\uFF0C\\u67E5\\u4E86\\u4E00\\u4E0B\\u4F9D\\u8D56\\uFF0C\\u5927\\u90E8\\u5206\\u662Fnpm\\u6784\\u5EFA\\u7684\\u4F9D\\u8D56\\u3002\\u597D\\u5728\\u5FAE\\u4FE1\\u81EA\\u5DF1\\u63D0\\u4F9B\\u7684\\u5206\\u5305\\u7684\\u80FD\\u529B\"}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-13-wx-miniprogram-subpackage-20241213114128.png\",alt:\"\",width:\"722\",height:\"508\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAElBMVEUyMjJEREQ4Ojg7PTsyP0ZGaU3PP7oEAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAJUlEQVR4nDXKsQEAMAiEQOR1/5VTaK4F5JRJFGpB92+gZrea8QEFbAA5yUPWHgAAAABJRU5ErkJggg==\"})}),(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-13-wx-miniprogram-subpackage-20241213114344.png\",alt:\"\",width:\"1652\",height:\"1494\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAFVBMVEVMRDBVVVVBQD1NTEtFRUJiYmI4PDmS/gvPAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAK0lEQVR4nEXKyQkAMAzEwD3df8khJhC95iFEUhxhQrMetOSCWwTJuRdeHwcS0wB47lxHbQAAAABJRU5ErkJggg==\"})})]})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5206\\u5305\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5206\\u5305\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5206\\u5305\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html\",children:\"\\u5B98\\u65B9\\u6559\\u7A0B\"})}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u5C06\\u5176\\u4E2D\\u4E00\\u4E2A\\u529F\\u80FD\\u6A21\\u5757word\\u8FDB\\u884C\\u62C6\\u5206\\uFF0C\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.pre,{raw:`\\u251C\\u2500\\u2500 app.js\n\\u251C\\u2500\\u2500 app.json\n\\u251C\\u2500\\u2500 app.wxss\n\\u251C\\u2500\\u2500 pages\n\\u2502   \\u251C\\u2500\\u2500 index\n|\\u2014\\u2014\\u2014\\u2514\\u2500\\u2500 pageA\n\\u2502       \\u2514\\u2500\\u2500 index\n|\\u2014\\u2014\\u2014\\u2514\\u2500\\u2500 word\n\\u2502       \\u251C\\u2500\\u2500 index\n\\u2502       \\u251C\\u2500\\u2500 learn\n\\u2502             \\u2514\\u2500\\u2500 learn\n\\u2502       \\u251C\\u2500\\u2500 review\n\\u2502             \\u2514\\u2500\\u2500 review\n\\u2514\\u2500\\u2500 utils\n`,children:(0,e.jsx)(n.code,{children:`\\u251C\\u2500\\u2500 app.js\n\\u251C\\u2500\\u2500 app.json\n\\u251C\\u2500\\u2500 app.wxss\n\\u251C\\u2500\\u2500 pages\n\\u2502   \\u251C\\u2500\\u2500 index\n|\\u2014\\u2014\\u2014\\u2514\\u2500\\u2500 pageA\n\\u2502       \\u2514\\u2500\\u2500 index\n|\\u2014\\u2014\\u2014\\u2514\\u2500\\u2500 word\n\\u2502       \\u251C\\u2500\\u2500 index\n\\u2502       \\u251C\\u2500\\u2500 learn\n\\u2502             \\u2514\\u2500\\u2500 learn\n\\u2502       \\u251C\\u2500\\u2500 review\n\\u2502             \\u2514\\u2500\\u2500 review\n\\u2514\\u2500\\u2500 utils\n`})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\xA0\",(0,e.jsx)(n.code,{children:\"app.json\"}),`\\uFF0C\\xA0\\u6CE8\\u610F\\u26A0\\uFE0F\\uFF1A\n\\xA0- `,(0,e.jsx)(n.code,{children:\"tabBar\"}),`\\xA0\\u9875\\u9762\\u5FC5\\u987B\\u5728\\u4E3B\\u5305\\u5185\n\\xA0- `,(0,e.jsx)(n.code,{children:\"subPackages\"}),\"\\xA0\\u7684\\u6839\\u76EE\\u5F55\\u4E0D\\u80FD\\u662F\\u53E6\\u5916\\u4E00\\u4E2A\\xA0\",(0,e.jsx)(n.code,{children:\"subPackages\"}),`\\xA0\\u5185\\u7684\\u5B50\\u76EE\\u5F55\n\\xA0- `,(0,e.jsx)(n.strong,{children:\"\\u5B50\\u5305\\u4E4B\\u95F4\\u65E0\\u6CD5\\u76F8\\u4E92\\u5F15\\u7528\\uFF0C\\u4F46\\u662F\\u53EF\\u4EE5\\u5F15\\u7528\\u4E3B\\u5305\\u6587\\u4EF6\"}),\"\\uFF0C\\u53CD\\u8FC7\\u6765\\u4E0D\\u884C\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`  \"pages\":[],//\\u4E3B\\u5305\\u9875\\u9762\n  \"subPackages\": [\n    {\n      \"name\": \"word\",\n      \"root\": \"pages/word\",\n      \"pages\": [\n        \"index\",\n        \"learn/learn\",\n        \"review/review\",\n      ]\n    },\n  ],\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'  \"pages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\":[],\"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"//\\u4E3B\\u5305\\u9875\\u9762\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'  \"subPackages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"name\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"word\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"root\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"pages/word\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"pages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"index\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"learn/learn\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"review/review\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      ]\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  ],\"})})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u81F3\\u6B64\\uFF0C\\u5C31\\u5B8C\\u6210\\u4E86\\u4E00\\u4E2A\\u529F\\u80FD\\u6A21\\u5757\\u7684\\u62C6\\u5206\\uFF0C\\u4F46\\u8FD8\\u4E3B\\u5305\\u4F53\\u79EF\\u8FD8\\u662F\\u5F88\\u5927\\uFF0C\\u4E3B\\u8981\\u662FUI\\u5E93\\u3001Echart\\u7684\\u4F53\\u79EF\\u592A\\u5927\\uFF0C\\u8FD8\\u9700\\u8981\\u7EE7\\u7EED\\u62C6\\u5206\\u3002UI\\u5E93\\u53EF\\u4EE5\\u5220\\u53BBminiprogram_npm\\u4E2D\\u4E0D\\u7528\\u7684\\u4F9D\\u8D56\\uFF0C\\u4F46\\u662F\\u62C6\\u5206\\u8D77\\u6765\\u592A\\u9EBB\\u70E6\\u4E86\\u3002\\u800C\\u4E14\\u8FD8\\u8981\\u89E3\\u51B3\\u5B50\\u5305\\u4E4B\\u95F4\\u7684\\u76F8\\u4E92\\u5F15\\u7528\\u95EE\\u9898\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5206\\u5305\\u5F02\\u6B65\\u5316\\u7EC4\\u4EF6\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5206\\u5305\\u5F02\\u6B65\\u5316\\u7EC4\\u4EF6\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5206\\u5305\\u5F02\\u6B65\\u5316\\u7EC4\\u4EF6\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E00\\u4E2A\\u5206\\u5305\\u4F7F\\u7528\\u5176\\u4ED6\\u5206\\u5305\\u7684\\u81EA\\u5B9A\\u4E49\\u7EC4\\u4EF6\\u65F6\\uFF0C\\u7531\\u4E8E\\u5176\\u4ED6\\u5206\\u5305\\u8FD8\\u672A\\u4E0B\\u8F7D\\u6216\\u6CE8\\u5165\\uFF0C\\u5176\\u4ED6\\u5206\\u5305\\u7684\\u7EC4\\u4EF6\\u5904\\u4E8E\\u4E0D\\u53EF\\u7528\\u7684\\u72B6\\u6001\\u3002\\u901A\\u8FC7\\u4E3A\\u5176\\u4ED6\\u5206\\u5305\\u7684\\u81EA\\u5B9A\\u4E49\\u7EC4\\u4EF6\\u8BBE\\u7F6E\\xA0\",(0,e.jsx)(n.a,{href:\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/placeholder.html\",children:\"\\u5360\\u4F4D\\u7EC4\\u4EF6\"}),\"\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5148\\u6E32\\u67D3\\u5360\\u4F4D\\u7EC4\\u4EF6\\u4F5C\\u4E3A\\u66FF\\u4EE3\\uFF0C\\u5728\\u5206\\u5305\\u4E0B\\u8F7D\\u5B8C\\u6210\\u540E\\u518D\\u8FDB\\u884C\\u66FF\\u6362\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[`\\u5148\\u5C01\\u88C5\\u4E00\\u4E2A\\u901A\\u7528\\u7684echart\\u7EC4\\u4EF6\n`,(0,e.jsx)(n.code,{children:\"baseChart.json\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"component\": true,\n  \"usingComponents\": {\n    \"ec-canvas\": \"../ec-canvas/ec-canvas\"\n  }\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'  \"component\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'  \"usingComponents\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'    \"ec-canvas\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"../ec-canvas/ec-canvas\"'})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"baseChart.wxml\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"html\",\"data-theme\":\"github-dark\",raw:`<view style=\"height: {{height}};width:100%\">\n  <ec-canvas\n    id=\"{{chartId}}\"\n    canvas-id=\"{{canvasId}}\"\n    ec=\"{{ ec }}\"\n  ></ec-canvas>\n</view>\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"html\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,e.jsx)(n.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"view\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" style\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"height: {{height}};width:100%\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"ec-canvas\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    id\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"{{chartId}}\"'})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    canvas-id\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"{{canvasId}}\"'})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    ec\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"{{ ec }}\"'})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  ></\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"ec-canvas\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"</\"}),(0,e.jsx)(n.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:\"view\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"baseChart.js\"})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"github-dark\",raw:`import * as echarts from \"../ec-canvas/echarts\";\n\nComponent({\n  properties: {\n    height: {\n      type: String,\n    },\n    option: {\n      type: Object,\n    },\n  },\n  observers: {\n    option: function (val) {\n      setTimeout(() => {\n        this.initChart(val || {});\n      }, 0);\n    },\n  },\n  data: {\n    chartId: \"\",\n    canvasId: \"\",\n    ec: {\n      lazyload: true,\n    },\n  },\n  lifetimes: {\n    attached() {\n      this.setData({\n        chartId: \\`chart_\\${this.__wxExparserNodeId__}\\`,\n        canvasId: \\`canvas_\\${this.__wxExparserNodeId__}\\`,\n      });\n      this.chartComp = this.selectComponent(\\`#\\${this.data.chartId}\\`);\n    },\n  },\n  methods: {\n    initChart(option) {\n      this.chartComp &&\n        this.chartComp.init((canvas, width, height, dpr) => {\n          const chart = echarts.init(canvas, null, {\n            width: width,\n            height: height,\n            devicePixelRatio: dpr,\n          });\n          if (option.tooltip) {\n            Object.assign(option.tooltip, {\n              confine: true,\n              shadowBlur: 0,\n              shadowColor: \"#e7e8e8\",\n              shadowOffsetY: 0,\n              shadowOffsetX: 0,\n              borderColor: \"#e7e8e8\",\n              padding: [\n                5, // \\u4E0A\n                20, // \\u53F3\n                5, // \\u4E0B\n                20, // \\u5DE6\n              ],\n            });\n          }\n\n          chart.setOption(option);\n          this.chart = chart;\n          return chart;\n        });\n    },\n  },\n});\n\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"js\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" *\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" echarts \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:' \"../ec-canvas/echarts\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"Component\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  properties: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    height: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      type: String,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    option: {\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      type: Object,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  observers: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    option\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"val\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"      setTimeout\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"initChart\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(val \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {});\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      }, \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  data: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    chartId: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    canvasId: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    ec: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      lazyload: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  lifetimes: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    attached\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"setData\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        chartId: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"`chart_${\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"__wxExparserNodeId__\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        canvasId: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"`canvas_${\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"__wxExparserNodeId__\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".chartComp \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"selectComponent\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"`#${\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"data\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"chartId\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  methods: {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"    initChart\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"option\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".chartComp \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"&&\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".chartComp.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"init\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"canvas\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"width\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"height\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#FFAB70\"},children:\"dpr\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"          const\"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\" chart\"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" echarts.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"init\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(canvas, \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            width: width,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            height: height,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            devicePixelRatio: dpr,\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          });\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"          if\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" (option.tooltip) {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            Object.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"assign\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(option.tooltip, {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              confine: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              shadowBlur: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              shadowColor: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"#e7e8e8\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              shadowOffsetY: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              shadowOffsetX: \"}),(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              borderColor: \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"#e7e8e8\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              padding: [\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"                5\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u4E0A\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"                20\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u53F3\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"                5\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u4E0B\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"                20\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"// \\u5DE6\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"              ],\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"            });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"          chart.\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"setOption\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"(option);\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:\"          this\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\".chart \"}),(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" chart;\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#F97583\"},children:\"          return\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\" chart;\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"        });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7136\\u540E\\u5728\\u4E3B\\u5305\\u9875\\u9762\",(0,e.jsx)(n.code,{children:\"setting.json\"}),\"\\u4E2D\\u8C03\\u7528\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n  \"usingComponents\": {\n    \"t-chart\": \"/echarts/baseChart/baseChart\"\n  },\n  // \\u5360\\u4F4D\\u7EC4\\u4EF6\n   \"componentPlaceholder\": {\n    \"t-chart\": \"view\"\n  }\n}\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'  \"usingComponents\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'    \"t-chart\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"/echarts/baseChart/baseChart\"'})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#6A737D\"},children:\"  // \\u5360\\u4F4D\\u7EC4\\u4EF6\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'   \"componentPlaceholder\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'    \"t-chart\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"view\"'})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"html\",\"data-theme\":\"github-dark\",raw:`<t-chart option=\"{{option}}\" height=\"300rpx\"></t-chart>\n`,children:(0,e.jsx)(n.code,{\"data-language\":\"html\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"t-chart\"}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" option\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"{{option}}\"'}),(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\" height\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"300rpx\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,e.jsx)(n.span,{style:{color:\"#85E89D\"},children:\"t-chart\"}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\">\"})]})})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"app.json\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5229\\u7528\\u5206\\u5305\\u9884\\u4E0B\\u8F7D\\u7684\\u80FD\\u91CC\\uFF0C\\u5728\\u4F7F\\u7528\\u5F02\\u6B65\\u7EC4\\u4EF6\\u7684\\u9875\\u9762\\u63D0\\u524D\\u52A0\\u8F7D\\u5206\\u5305\\u3002\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`\"subPackages\": [\n    {\n      \"name\": \"echarts\",\n      \"root\": \"echarts\",\n      \"pages\": [\n        \"ec-canvas/ec-canvas\",\n        \"baseChart/baseChart\",\n      ]\n    }\n  ],\n  \"preloadRule\": {\n    \"pages/settings/index\": {\n      \"network\": \"all\",\n      \"packages\": [\"echarts\"]\n    }\n  },\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"subPackages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    {\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"name\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"echarts\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"root\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"echarts\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"pages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"ec-canvas/ec-canvas\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'        \"baseChart/baseChart\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"      ]\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  ],\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'  \"preloadRule\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'    \"pages/settings/index\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"network\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"all\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#79B8FF\"},children:'      \"packages\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\": [\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:'\"echarts\"'}),(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})})]})})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6210\\u529F\\u540E\\u63A7\\u5236\\u53F0\\u4F1A\\u8F93\\u51FA\\uFF0C\\u82E5\\u672A\\u6210\\u529F\\u53EF\\u4EE5\\u91CD\\u542F\\u4E0B\\u5F00\\u53D1\\u5DE5\\u5177\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-code-container\",children:(0,e.jsx)(n.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",raw:`preloadSubpackages: components\npreloadSubpackages: success\n`,children:(0,e.jsxs)(n.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"preloadSubpackages:\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" components\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#B392F0\"},children:\"preloadSubpackages:\"}),(0,e.jsx)(n.span,{style:{color:\"#9ECBFF\"},children:\" success\"})]})]})})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/post/assets/2024-12-13-wx-miniprogram-subpackage-20241213012018.png\",alt:\"\",width:\"734\",height:\"378\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAABlBMVEU3NzctLS2Xhfl9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAFUlEQVR4nGNgAAFGRkYwAaIgXGQGAAE2ABEOdESgAAAAAElFTkSuQmCC\"})})]})}function C(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(d,l)})):d(l)}var b=C;return m(w);})();\n;return Component;"
  },
  "_id": "post/2024-12-13-wx-miniprogram-subpackage.md",
  "_raw": {
    "sourceFilePath": "post/2024-12-13-wx-miniprogram-subpackage.md",
    "sourceFileName": "2024-12-13-wx-miniprogram-subpackage.md",
    "sourceFileDir": "post",
    "contentType": "markdown",
    "flattenedPath": "post/2024-12-13-wx-miniprogram-subpackage"
  },
  "type": "Post",
  "parDir": "post",
  "slug": "/post/2024-12-13-wx-miniprogram-subpackage",
  "slugAsParams": "2024-12-13-wx-miniprogram-subpackage"
}
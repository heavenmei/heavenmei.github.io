{
  "title": "使用pont实现swagger文档生成ts响应类型",
  "tags": [
    "Front"
  ],
  "author": "heavenmei",
  "url": "/2023-12-28-pont-apiDoc",
  "date": "2023-12-28T00:00:00.000Z",
  "body": {
    "raw": "https://blog.csdn.net/m0_65035567/article/details/130278459\n\n> 之前用过字节的ferry， 可以很方便讲thrift文件转成.d.ts类型定义和接口请求文件。但是ferry现在不开源，找到pont，可以把swagger转成ts。尝试接入现有的项目中\n\n## pont\npont是阿里出的一个工具，它可以非常方便的把后端的swagger文档转成ts提示类型，不仅如此，它还支持添加模板，直接生成对应的接口请求，甚至能帮我们生成请求参数的默认基类。\n\nGithub：[github.com/alibaba/pon…](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Falibaba%2Fpont \"https://github.com/alibaba/pont\")\n\n## usage\n1. 全局安装 `yarn add -D pont-engine`\n2. 安装 vscode 插件 pont 以获取 pont 的全部能力\n3. 进入项目目录，在项目中安装 pont-engine\n4. 新建`pont-config.json`， 也可以`pont start`按照提示生成。 [配置参考](https://github.com/alibaba/pont/blob/master/docs/pontConfig.md)\n5. 新建`pontTemplate.ts` 生成自定义接口代码\n\n## API\n### cmd\n\n> 很奇怪，竟然没有代码生成的命令，只能利用vscode插件生成完成之后利用updateMod去更新\n\n\n\n|  cmd |  description |\n|---|---|\n|pont start|一键接入 pont，若本地存在 [pont-config.json](https://github.com/alibaba/pont/blob/master/docs/pontConfig.md)配置文件，将覆盖重复的配置项|\n|pont check|校验本地的 pont-lock.json 文件是否缺失、损坏。建议用户在项目中，在 pre-commit 里加上 pont check 命令，以防止在团队协作过程中，pont-lock.json 被误删、解决该文件冲突时被损坏等情况|\n|pont scan|扫描未使用的接口，在 process.cwd()位置生成并写入 unusedRequests.json 文件，需要配置 scannedRange。请参考 [pont-config.json 配置项](https://github.com/alibaba/pont/blob/master/docs/pontConfig.md)|\n|pont ls|查看所有数据源|\n|pont select [dsName]|切换当前数据源|\n|pont diff|查看远程数据和本地数据在模块、基类上的差异，以作针对性、选择性同步|\n|pont updateMod [modName]|选择性更新本地的模块|\n|pont updateBo [boName]|选择性更新本地的基类|\n\n### pontConfig\n- **originUrl**: swagger文档的json数据\n- **outDir**：生成的文件位置\n- **originType**：swagger文档类型 SwaggerV3/SwaggerV2\n- **templatePath**：生成的接口模板位置\n\n```json\n{\n    \"originUrl\": \"https://petstore.swagger.io/v2/swagger.json\",\n    \"outDir\": \"./apis\",\n    \"originType\": \"SwaggerV3\",\n    \"templatePath\": \"./pontTemplate\",\n}\n```\n\n\n\n### pontTemplate  // todo\n```ts\nexport default class MyGenerator extends CodeGenerator {}\n```",
    "code": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var r in e)a(t,r,{get:e[r],enumerable:!0})},c=(t,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of g(e))!u.call(t,l)&&l!==r&&a(t,l,{get:()=>e[l],enumerable:!(o=p(e,l))||o.enumerable});return t};var f=(t,e,r)=>(r=t!=null?h(m(t)):{},c(e||!t||!t.__esModule?a(r,\"default\",{value:t,enumerable:!0}):r,t)),E=t=>c(a({},\"__esModule\",{value:!0}),t);var d=b((x,i)=>{i.exports=_jsx_runtime});var w={};y(w,{default:()=>j,frontmatter:()=>F});var n=f(d()),F={title:\"\\u4F7F\\u7528pont\\u5B9E\\u73B0swagger\\u6587\\u6863\\u751F\\u6210ts\\u54CD\\u5E94\\u7C7B\\u578B\",date:new Date(17037216e5),author:\"heavenmei\",categories:[\"Post\"],tags:[\"Front\"],url:\"/2023-12-28-pont-apiDoc\"};function s(t){let e=Object.assign({p:\"p\",a:\"a\",blockquote:\"blockquote\",h2:\"h2\",span:\"span\",ol:\"ol\",li:\"li\",code:\"code\",h3:\"h3\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\",ul:\"ul\",strong:\"strong\",div:\"div\",figure:\"figure\",pre:\"pre\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://blog.csdn.net/m0_65035567/article/details/130278459\",children:\"https://blog.csdn.net/m0_65035567/article/details/130278459\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u4E4B\\u524D\\u7528\\u8FC7\\u5B57\\u8282\\u7684ferry\\uFF0C \\u53EF\\u4EE5\\u5F88\\u65B9\\u4FBF\\u8BB2thrift\\u6587\\u4EF6\\u8F6C\\u6210.d.ts\\u7C7B\\u578B\\u5B9A\\u4E49\\u548C\\u63A5\\u53E3\\u8BF7\\u6C42\\u6587\\u4EF6\\u3002\\u4F46\\u662Fferry\\u73B0\\u5728\\u4E0D\\u5F00\\u6E90\\uFF0C\\u627E\\u5230pont\\uFF0C\\u53EF\\u4EE5\\u628Aswagger\\u8F6C\\u6210ts\\u3002\\u5C1D\\u8BD5\\u63A5\\u5165\\u73B0\\u6709\\u7684\\u9879\\u76EE\\u4E2D\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"pont\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#pont\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"pont\"]}),`\n`,(0,n.jsx)(e.p,{children:\"pont\\u662F\\u963F\\u91CC\\u51FA\\u7684\\u4E00\\u4E2A\\u5DE5\\u5177\\uFF0C\\u5B83\\u53EF\\u4EE5\\u975E\\u5E38\\u65B9\\u4FBF\\u7684\\u628A\\u540E\\u7AEF\\u7684swagger\\u6587\\u6863\\u8F6C\\u6210ts\\u63D0\\u793A\\u7C7B\\u578B\\uFF0C\\u4E0D\\u4EC5\\u5982\\u6B64\\uFF0C\\u5B83\\u8FD8\\u652F\\u6301\\u6DFB\\u52A0\\u6A21\\u677F\\uFF0C\\u76F4\\u63A5\\u751F\\u6210\\u5BF9\\u5E94\\u7684\\u63A5\\u53E3\\u8BF7\\u6C42\\uFF0C\\u751A\\u81F3\\u80FD\\u5E2E\\u6211\\u4EEC\\u751F\\u6210\\u8BF7\\u6C42\\u53C2\\u6570\\u7684\\u9ED8\\u8BA4\\u57FA\\u7C7B\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Github\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Falibaba%2Fpont\",title:\"https://github.com/alibaba/pont\",children:\"github.com/alibaba/pon\\u2026\"})]}),`\n`,(0,n.jsxs)(e.h2,{id:\"usage\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#usage\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"usage\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5168\\u5C40\\u5B89\\u88C5 \",(0,n.jsx)(e.code,{children:\"yarn add -D pont-engine\"})]}),`\n`,(0,n.jsx)(e.li,{children:\"\\u5B89\\u88C5 vscode \\u63D2\\u4EF6 pont \\u4EE5\\u83B7\\u53D6 pont \\u7684\\u5168\\u90E8\\u80FD\\u529B\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u8FDB\\u5165\\u9879\\u76EE\\u76EE\\u5F55\\uFF0C\\u5728\\u9879\\u76EE\\u4E2D\\u5B89\\u88C5 pont-engine\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u65B0\\u5EFA\",(0,n.jsx)(e.code,{children:\"pont-config.json\"}),\"\\uFF0C \\u4E5F\\u53EF\\u4EE5\",(0,n.jsx)(e.code,{children:\"pont start\"}),\"\\u6309\\u7167\\u63D0\\u793A\\u751F\\u6210\\u3002 \",(0,n.jsx)(e.a,{href:\"https://github.com/alibaba/pont/blob/master/docs/pontConfig.md\",children:\"\\u914D\\u7F6E\\u53C2\\u8003\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u65B0\\u5EFA\",(0,n.jsx)(e.code,{children:\"pontTemplate.ts\"}),\" \\u751F\\u6210\\u81EA\\u5B9A\\u4E49\\u63A5\\u53E3\\u4EE3\\u7801\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"api\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#api\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"API\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"cmd\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#cmd\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"cmd\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u5F88\\u5947\\u602A\\uFF0C\\u7ADF\\u7136\\u6CA1\\u6709\\u4EE3\\u7801\\u751F\\u6210\\u7684\\u547D\\u4EE4\\uFF0C\\u53EA\\u80FD\\u5229\\u7528vscode\\u63D2\\u4EF6\\u751F\\u6210\\u5B8C\\u6210\\u4E4B\\u540E\\u5229\\u7528updateMod\\u53BB\\u66F4\\u65B0\"}),`\n`]}),`\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:\"cmd\"}),(0,n.jsx)(e.th,{children:\"description\"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont start\"}),(0,n.jsxs)(e.td,{children:[\"\\u4E00\\u952E\\u63A5\\u5165 pont\\uFF0C\\u82E5\\u672C\\u5730\\u5B58\\u5728\\xA0\",(0,n.jsx)(e.a,{href:\"https://github.com/alibaba/pont/blob/master/docs/pontConfig.md\",children:\"pont-config.json\"}),\"\\u914D\\u7F6E\\u6587\\u4EF6\\uFF0C\\u5C06\\u8986\\u76D6\\u91CD\\u590D\\u7684\\u914D\\u7F6E\\u9879\"]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont check\"}),(0,n.jsx)(e.td,{children:\"\\u6821\\u9A8C\\u672C\\u5730\\u7684 pont-lock.json \\u6587\\u4EF6\\u662F\\u5426\\u7F3A\\u5931\\u3001\\u635F\\u574F\\u3002\\u5EFA\\u8BAE\\u7528\\u6237\\u5728\\u9879\\u76EE\\u4E2D\\uFF0C\\u5728 pre-commit \\u91CC\\u52A0\\u4E0A pont check \\u547D\\u4EE4\\uFF0C\\u4EE5\\u9632\\u6B62\\u5728\\u56E2\\u961F\\u534F\\u4F5C\\u8FC7\\u7A0B\\u4E2D\\uFF0Cpont-lock.json \\u88AB\\u8BEF\\u5220\\u3001\\u89E3\\u51B3\\u8BE5\\u6587\\u4EF6\\u51B2\\u7A81\\u65F6\\u88AB\\u635F\\u574F\\u7B49\\u60C5\\u51B5\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont scan\"}),(0,n.jsxs)(e.td,{children:[\"\\u626B\\u63CF\\u672A\\u4F7F\\u7528\\u7684\\u63A5\\u53E3\\uFF0C\\u5728 process.cwd()\\u4F4D\\u7F6E\\u751F\\u6210\\u5E76\\u5199\\u5165 unusedRequests.json \\u6587\\u4EF6\\uFF0C\\u9700\\u8981\\u914D\\u7F6E scannedRange\\u3002\\u8BF7\\u53C2\\u8003\\xA0\",(0,n.jsx)(e.a,{href:\"https://github.com/alibaba/pont/blob/master/docs/pontConfig.md\",children:\"pont-config.json \\u914D\\u7F6E\\u9879\"})]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont ls\"}),(0,n.jsx)(e.td,{children:\"\\u67E5\\u770B\\u6240\\u6709\\u6570\\u636E\\u6E90\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont select [dsName]\"}),(0,n.jsx)(e.td,{children:\"\\u5207\\u6362\\u5F53\\u524D\\u6570\\u636E\\u6E90\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont diff\"}),(0,n.jsx)(e.td,{children:\"\\u67E5\\u770B\\u8FDC\\u7A0B\\u6570\\u636E\\u548C\\u672C\\u5730\\u6570\\u636E\\u5728\\u6A21\\u5757\\u3001\\u57FA\\u7C7B\\u4E0A\\u7684\\u5DEE\\u5F02\\uFF0C\\u4EE5\\u4F5C\\u9488\\u5BF9\\u6027\\u3001\\u9009\\u62E9\\u6027\\u540C\\u6B65\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont updateMod [modName]\"}),(0,n.jsx)(e.td,{children:\"\\u9009\\u62E9\\u6027\\u66F4\\u65B0\\u672C\\u5730\\u7684\\u6A21\\u5757\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"pont updateBo [boName]\"}),(0,n.jsx)(e.td,{children:\"\\u9009\\u62E9\\u6027\\u66F4\\u65B0\\u672C\\u5730\\u7684\\u57FA\\u7C7B\"})]})]})]}),`\n`,(0,n.jsxs)(e.h3,{id:\"pontconfig\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#pontconfig\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"pontConfig\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"originUrl\"}),\": swagger\\u6587\\u6863\\u7684json\\u6570\\u636E\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"outDir\"}),\"\\uFF1A\\u751F\\u6210\\u7684\\u6587\\u4EF6\\u4F4D\\u7F6E\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"originType\"}),\"\\uFF1Aswagger\\u6587\\u6863\\u7C7B\\u578B SwaggerV3/SwaggerV2\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"templatePath\"}),\"\\uFF1A\\u751F\\u6210\\u7684\\u63A5\\u53E3\\u6A21\\u677F\\u4F4D\\u7F6E\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark\",raw:`{\n    \"originUrl\": \"https://petstore.swagger.io/v2/swagger.json\",\n    \"outDir\": \"./apis\",\n    \"originType\": \"SwaggerV3\",\n    \"templatePath\": \"./pontTemplate\",\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"originUrl\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"https://petstore.swagger.io/v2/swagger.json\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"outDir\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./apis\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"originType\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"SwaggerV3\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:'    \"templatePath\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"./pontTemplate\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})})}),`\n`,(0,n.jsxs)(e.h3,{id:\"ponttemplate---todo\",children:[(0,n.jsx)(e.a,{className:\"header-anchor\",href:\"#ponttemplate---todo\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"pontTemplate  // todo\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-container\",children:(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#24292e\",color:\"#e1e4e8\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark\",raw:`export default class MyGenerator extends CodeGenerator {}\n`,children:(0,n.jsx)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" class\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" MyGenerator\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" extends\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" CodeGenerator\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {}\"})]})})})})})]})}function k(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(s,t)})):s(t)}var j=k;return E(w);})();\n;return Component;"
  },
  "_id": "post/2023-12-28-swagger2ts-pont.md",
  "_raw": {
    "sourceFilePath": "post/2023-12-28-swagger2ts-pont.md",
    "sourceFileName": "2023-12-28-swagger2ts-pont.md",
    "sourceFileDir": "post",
    "contentType": "markdown",
    "flattenedPath": "post/2023-12-28-swagger2ts-pont"
  },
  "type": "Post",
  "parDir": "post",
  "slug": "/post/2023-12-28-swagger2ts-pont",
  "slugAsParams": "2023-12-28-swagger2ts-pont"
}
{
  "title": "u don't know js 之 异步 Promise",
  "tags": [
    "Front"
  ],
  "author": "heavenmei",
  "subtitle": null,
  "description": null,
  "date": "2024-02-20T00:00:00.000Z",
  "body": {
    "raw": "## 异步\n\n\nJS引擎不是独立运行的，他是运行在宿主环境中 （通常是Web浏览器）\n\n**事件循环**：提供一种机制来处理多个 “块” 的执行，且执行每块是调用JS引擎 （==宏任务==）\n\n**tick**： 循环每一轮称为 tick\n\n**任务队列**：Promise的异步特性。它是挂在事件循环队列每个tick之后的一个队列。在事件循环的每个tick中，可能出现的 异步动作 不会 导致一个完整的新事件添加，而是会在当前tick的任务队列末尾添加一个任务 （==微任务==）\n\n[7关！setTimeout+Promise+Async输出顺序？你能过几关！](https://security.feishu.cn/link/safety?target=http%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg2NjY2NTcyNg%3D%3D%26mid%3D2247483940%26idx%3D1%26sn%3D7a97101836c2b697a270bd84707d441f%26chksm%3Dce4617b5f9319ea3e65092ef4a8b977c85cb0c589f89f49cf626df961de0900c2510297f0af9%26scene%3D21%23wechat_redirect&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN)\n\n\n\n\n==JS是单线程的==\n- 并行：多个任务**真正同时执行**，依赖**多核/多CPU/分布式**等硬件支持。\n- 并发：多个任务**交替执行**，在**同一时间段内**看似同时进行（但可能并未真正同时运行）\n- 批处理：取一个长期运行的 进程，分割成多个步骤或多批任务，使其他并发 进程 有机会将自己插入事件循环队列中交替运行\n\n\n\n## Promise\n\n回调的问题：\n\n1. 回调地狱\n2. 控制反转，把自己程序的一部分执行控制交给第三方\n\nPromise可以解决控制反转问题。任何具有 `then`方法的对象和函数就是Promise。\n- 链式流\n\n\n",
    "code": "var Component=(()=>{var h=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var f=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports),k=(i,n)=>{for(var c in n)t(i,c,{get:n[c],enumerable:!0})},s=(i,n,c,l)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of p(n))!u.call(i,r)&&r!==c&&t(i,r,{get:()=>n[r],enumerable:!(l=m(n,r))||l.enumerable});return i};var D=(i,n,c)=>(c=i!=null?h(g(i)):{},s(n||!i||!i.__esModule?t(c,\"default\",{value:i,enumerable:!0}):c,i)),x=i=>s(t({},\"__esModule\",{value:!0}),i);var a=f((F,o)=>{o.exports=_jsx_runtime});var N={};k(N,{default:()=>j,frontmatter:()=>_});var e=D(a()),_={title:\"u don't know js \\u4E4B \\u5F02\\u6B65 Promise\",subtitle:null,layout:\"post\",date:new Date(17083872e5),author:\"heavenmei\",categories:[\"Note\"],description:null,tags:[\"Front\"],image:null};function d(i){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",mark:\"mark\",ul:\"ul\",li:\"li\",ol:\"ol\",code:\"code\"},i.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\u5F02\\u6B65\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#\\u5F02\\u6B65\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5F02\\u6B65\"]}),`\n`,(0,e.jsx)(n.p,{children:\"JS\\u5F15\\u64CE\\u4E0D\\u662F\\u72EC\\u7ACB\\u8FD0\\u884C\\u7684\\uFF0C\\u4ED6\\u662F\\u8FD0\\u884C\\u5728\\u5BBF\\u4E3B\\u73AF\\u5883\\u4E2D \\uFF08\\u901A\\u5E38\\u662FWeb\\u6D4F\\u89C8\\u5668\\uFF09\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u4E8B\\u4EF6\\u5FAA\\u73AF\"}),\"\\uFF1A\\u63D0\\u4F9B\\u4E00\\u79CD\\u673A\\u5236\\u6765\\u5904\\u7406\\u591A\\u4E2A \\u201C\\u5757\\u201D \\u7684\\u6267\\u884C\\uFF0C\\u4E14\\u6267\\u884C\\u6BCF\\u5757\\u662F\\u8C03\\u7528JS\\u5F15\\u64CE \\uFF08\",(0,e.jsx)(n.mark,{children:\"\\u5B8F\\u4EFB\\u52A1\"}),\"\\uFF09\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"tick\"}),\"\\uFF1A \\u5FAA\\u73AF\\u6BCF\\u4E00\\u8F6E\\u79F0\\u4E3A tick\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u4EFB\\u52A1\\u961F\\u5217\"}),\"\\uFF1APromise\\u7684\\u5F02\\u6B65\\u7279\\u6027\\u3002\\u5B83\\u662F\\u6302\\u5728\\u4E8B\\u4EF6\\u5FAA\\u73AF\\u961F\\u5217\\u6BCF\\u4E2Atick\\u4E4B\\u540E\\u7684\\u4E00\\u4E2A\\u961F\\u5217\\u3002\\u5728\\u4E8B\\u4EF6\\u5FAA\\u73AF\\u7684\\u6BCF\\u4E2Atick\\u4E2D\\uFF0C\\u53EF\\u80FD\\u51FA\\u73B0\\u7684 \\u5F02\\u6B65\\u52A8\\u4F5C \\u4E0D\\u4F1A \\u5BFC\\u81F4\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684\\u65B0\\u4E8B\\u4EF6\\u6DFB\\u52A0\\uFF0C\\u800C\\u662F\\u4F1A\\u5728\\u5F53\\u524Dtick\\u7684\\u4EFB\\u52A1\\u961F\\u5217\\u672B\\u5C3E\\u6DFB\\u52A0\\u4E00\\u4E2A\\u4EFB\\u52A1 \\uFF08\",(0,e.jsx)(n.mark,{children:\"\\u5FAE\\u4EFB\\u52A1\"}),\"\\uFF09\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://security.feishu.cn/link/safety?target=http%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg2NjY2NTcyNg%3D%3D%26mid%3D2247483940%26idx%3D1%26sn%3D7a97101836c2b697a270bd84707d441f%26chksm%3Dce4617b5f9319ea3e65092ef4a8b977c85cb0c589f89f49cf626df961de0900c2510297f0af9%26scene%3D21%23wechat_redirect&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN\",children:\"7\\u5173\\uFF01setTimeout+Promise+Async\\u8F93\\u51FA\\u987A\\u5E8F\\uFF1F\\u4F60\\u80FD\\u8FC7\\u51E0\\u5173\\uFF01\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.mark,{children:\"JS\\u662F\\u5355\\u7EBF\\u7A0B\\u7684\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u5E76\\u884C\\uFF1A\\u591A\\u4E2A\\u4EFB\\u52A1\",(0,e.jsx)(n.strong,{children:\"\\u771F\\u6B63\\u540C\\u65F6\\u6267\\u884C\"}),\"\\uFF0C\\u4F9D\\u8D56\",(0,e.jsx)(n.strong,{children:\"\\u591A\\u6838/\\u591ACPU/\\u5206\\u5E03\\u5F0F\"}),\"\\u7B49\\u786C\\u4EF6\\u652F\\u6301\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u5E76\\u53D1\\uFF1A\\u591A\\u4E2A\\u4EFB\\u52A1\",(0,e.jsx)(n.strong,{children:\"\\u4EA4\\u66FF\\u6267\\u884C\"}),\"\\uFF0C\\u5728\",(0,e.jsx)(n.strong,{children:\"\\u540C\\u4E00\\u65F6\\u95F4\\u6BB5\\u5185\"}),\"\\u770B\\u4F3C\\u540C\\u65F6\\u8FDB\\u884C\\uFF08\\u4F46\\u53EF\\u80FD\\u5E76\\u672A\\u771F\\u6B63\\u540C\\u65F6\\u8FD0\\u884C\\uFF09\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u6279\\u5904\\u7406\\uFF1A\\u53D6\\u4E00\\u4E2A\\u957F\\u671F\\u8FD0\\u884C\\u7684 \\u8FDB\\u7A0B\\uFF0C\\u5206\\u5272\\u6210\\u591A\\u4E2A\\u6B65\\u9AA4\\u6216\\u591A\\u6279\\u4EFB\\u52A1\\uFF0C\\u4F7F\\u5176\\u4ED6\\u5E76\\u53D1 \\u8FDB\\u7A0B \\u6709\\u673A\\u4F1A\\u5C06\\u81EA\\u5DF1\\u63D2\\u5165\\u4E8B\\u4EF6\\u5FAA\\u73AF\\u961F\\u5217\\u4E2D\\u4EA4\\u66FF\\u8FD0\\u884C\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"promise\",children:[(0,e.jsx)(n.a,{className:\"header-anchor\",href:\"#promise\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Promise\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u56DE\\u8C03\\u7684\\u95EE\\u9898\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u56DE\\u8C03\\u5730\\u72F1\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u63A7\\u5236\\u53CD\\u8F6C\\uFF0C\\u628A\\u81EA\\u5DF1\\u7A0B\\u5E8F\\u7684\\u4E00\\u90E8\\u5206\\u6267\\u884C\\u63A7\\u5236\\u4EA4\\u7ED9\\u7B2C\\u4E09\\u65B9\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Promise\\u53EF\\u4EE5\\u89E3\\u51B3\\u63A7\\u5236\\u53CD\\u8F6C\\u95EE\\u9898\\u3002\\u4EFB\\u4F55\\u5177\\u6709 \",(0,e.jsx)(n.code,{children:\"then\"}),\"\\u65B9\\u6CD5\\u7684\\u5BF9\\u8C61\\u548C\\u51FD\\u6570\\u5C31\\u662FPromise\\u3002\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u94FE\\u5F0F\\u6D41\"}),`\n`]})]})}function b(i={}){let{wrapper:n}=i.components||{};return n?(0,e.jsx)(n,Object.assign({},i,{children:(0,e.jsx)(d,i)})):d(i)}var j=b;return x(N);})();\n;return Component;"
  },
  "_id": "note/fontEnd/js-udk-3.md",
  "_raw": {
    "sourceFilePath": "note/fontEnd/js-udk-3.md",
    "sourceFileName": "js-udk-3.md",
    "sourceFileDir": "note/fontEnd",
    "contentType": "markdown",
    "flattenedPath": "note/fontEnd/js-udk-3"
  },
  "type": "Note",
  "parDir": "note/fontEnd",
  "slug": "/post/js-udk-3",
  "slugAsParams": "js-udk-3"
}